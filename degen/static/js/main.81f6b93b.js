/*! For license information please see main.81f6b93b.js.LICENSE.txt */
(()=>{var e={240:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n=Object.prototype.toString,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,o=function(e){return"function"===typeof Array.isArray?Array.isArray(e):"[object Array]"===n.call(e)},s=function(e){if(!e||"[object Object]"!==n.call(e))return!1;var r,i=t.call(e,"constructor"),o=e.constructor&&e.constructor.prototype&&t.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!i&&!o)return!1;for(r in e);return"undefined"===typeof r||t.call(e,r)},a=function(e,t){r&&"__proto__"===t.name?r(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},l=function(e,n){if("__proto__"===n){if(!t.call(e,n))return;if(i)return i(e,n).value}return e[n]};e.exports=function e(){var t,n,r,i,c,u,d=arguments[0],h=1,f=arguments.length,p=!1;for("boolean"===typeof d&&(p=d,d=arguments[1]||{},h=2),(null==d||"object"!==typeof d&&"function"!==typeof d)&&(d={});h<f;++h)if(null!=(t=arguments[h]))for(n in t)r=l(d,n),d!==(i=l(t,n))&&(p&&i&&(s(i)||(c=o(i)))?(c?(c=!1,u=r&&o(r)?r:[]):u=r&&s(r)?r:{},a(d,{name:n,newValue:e(p,u,i)})):"undefined"!==typeof i&&a(d,{name:n,newValue:i}));return d}},403:e=>{var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,n=/\n/g,r=/^\s*/,i=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,o=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,a=/^[;\s]*/,l=/^\s+|\s+$/g,c="";function u(e){return e?e.replace(l,c):c}e.exports=function(e,l){if("string"!==typeof e)throw new TypeError("First argument must be a string");if(!e)return[];l=l||{};var d=1,h=1;function f(e){var t=e.match(n);t&&(d+=t.length);var r=e.lastIndexOf("\n");h=~r?e.length-r:h+e.length}function p(){var e={line:d,column:h};return function(t){return t.position=new g(e),b(),t}}function g(e){this.start=e,this.end={line:d,column:h},this.source=l.source}g.prototype.content=e;var m=[];function v(t){var n=new Error(l.source+":"+d+":"+h+": "+t);if(n.reason=t,n.filename=l.source,n.line=d,n.column=h,n.source=e,!l.silent)throw n;m.push(n)}function y(t){var n=t.exec(e);if(n){var r=n[0];return f(r),e=e.slice(r.length),n}}function b(){y(r)}function w(e){var t;for(e=e||[];t=S();)!1!==t&&e.push(t);return e}function S(){var t=p();if("/"==e.charAt(0)&&"*"==e.charAt(1)){for(var n=2;c!=e.charAt(n)&&("*"!=e.charAt(n)||"/"!=e.charAt(n+1));)++n;if(n+=2,c===e.charAt(n-1))return v("End of comment missing");var r=e.slice(2,n-2);return h+=2,f(r),e=e.slice(n),h+=2,t({type:"comment",comment:r})}}function _(){var e=p(),n=y(i);if(n){if(S(),!y(o))return v("property missing ':'");var r=y(s),l=e({type:"declaration",property:u(n[0].replace(t,c)),value:r?u(r[0].replace(t,c)):c});return y(a),l}}return b(),function(){var e,t=[];for(w(t);e=_();)!1!==e&&(t.push(e),w(t));return t}()}},301:function(e,t,n){var r;r=function(e){return(()=>{"use strict";var t={438:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(297),i=n(531),o=function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)};const s=function(e){var t=e.style,n=e.size,s=void 0===n?16:n,a=e.speed,l=void 0===a?1:a,c=e.defaultAnimationDuration,u=e.color,d=e.className,h=e.animating,f=void 0===h||h,p=e.children,g=e.indicatorClassName;if(!f)return null;var m=(0,i.n)(l,c);return r.createElement("div",{"data-testid":"rai-activity-indicator",className:"rai-container "+g+(d?" "+d:""),style:o({color:u,fontSize:s+"px",animationDuration:m},t)},p)}},531:(e,t,n)=>{n.d(t,{n:()=>r});var r=function(e,t){return 1/e*t+"s"}},297:t=>{t.exports=e}},n={};function r(e){var i=n[e];if(void 0!==i)return i.exports;var o=n[e]={exports:{}};return t[e](o,o.exports,r),o.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return(()=>{r.r(i),r.d(i,{default:()=>a});var e=r(297),t=r(438),n=r(531),o=function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)},s=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const a=function(r){var i=r.speed,a=void 0===i?1:i,l=s(r,["speed"]);return e.createElement(t.Z,o({indicatorClassName:"rai-dots",speed:a,defaultAnimationDuration:.8},l),e.createElement("div",{className:"rai-circle",style:{animationDelay:(0,n.n)(a,-.3)}}),e.createElement("div",{className:"rai-circle",style:{animationDelay:(0,n.n)(a,-.2)}}),e.createElement("div",{className:"rai-circle",style:{animationDelay:(0,n.n)(a,-.1)}}))}})(),i})()},e.exports=r(n(43))},730:(e,t,n)=>{"use strict";var r=n(43),i=n(853);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)s.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(e,t,n,r,i,o,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);m[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,S=Symbol.for("react.element"),_=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),x=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),C=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var N=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var j=Symbol.iterator;function D(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=j&&e[j]||e["@@iterator"])?e:null}var F,L=Object.assign;function M(e){if(void 0===F)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);F=t&&t[1]||""}return"\n"+F+e}var B=!1;function U(e,t){if(!e||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),o=r.stack.split("\n"),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||i[s]!==o[a]){var l="\n"+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=a);break}}}finally{B=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?M(e):""}function z(e){switch(e.tag){case 5:return M(e.type);case 16:return M("Lazy");case 13:return M("Suspense");case 19:return M("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case _:return"Portal";case P:return"Profiler";case k:return"StrictMode";case O:return"Suspense";case T:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case x:return(e.displayName||"Context")+".Consumer";case A:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case C:t=e._payload,e=e._init;try{return V(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Y(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function K(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Q(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function X(e,t){J(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function oe(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ge(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ve=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function Se(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,Ee=null,ke=null;function Pe(e){if(e=bi(e)){if("function"!==typeof _e)throw Error(o(280));var t=e.stateNode;t&&(t=Si(t),_e(e.stateNode,e.type,t))}}function Ae(e){Ee?ke?ke.push(e):ke=[e]:Ee=e}function xe(){if(Ee){var e=Ee,t=ke;if(ke=Ee=null,Pe(e),t)for(e=0;e<t.length;e++)Pe(t[e])}}function Ie(e,t){return e(t)}function Oe(){}var Te=!1;function Re(e,t,n){if(Te)return e(t,n);Te=!0;try{return Ie(e,t,n)}finally{Te=!1,(null!==Ee||null!==ke)&&(Oe(),xe())}}function Ce(e,t){var n=e.stateNode;if(null===n)return null;var r=Si(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Ne=!1;if(u)try{var je={};Object.defineProperty(je,"passive",{get:function(){Ne=!0}}),window.addEventListener("test",je,je),window.removeEventListener("test",je,je)}catch(ue){Ne=!1}function De(e,t,n,r,i,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Fe=!1,Le=null,Me=!1,Be=null,Ue={onError:function(e){Fe=!0,Le=e}};function ze(e,t,n,r,i,o,s,a,l){Fe=!1,Le=null,De.apply(Ue,arguments)}function Ve(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Ve(e)!==e)throw Error(o(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return He(i),e;if(s===r)return He(i),t;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var Ye=i.unstable_scheduleCallback,Ke=i.unstable_cancelCallback,$e=i.unstable_shouldYield,Qe=i.unstable_requestPaint,Je=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,ot=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,s=268435455&n;if(0!==s){var a=s&~i;0!==a?r=dt(a):0!==(o&=s)&&(r=dt(o))}else 0!==(s=n&~i)?r=dt(s):0!==o&&(r=dt(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-st(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-st(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var St,_t,Et,kt,Pt,At=!1,xt=[],It=null,Ot=null,Tt=null,Rt=new Map,Ct=new Map,Nt=[],jt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Ot=null;break;case"mouseover":case"mouseout":Tt=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ct.delete(t.pointerId)}}function Ft(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Lt(e){var t=yi(e.target);if(null!==t){var n=Ve(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Pt(e.priority,(function(){Et(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Mt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Bt(e,t,n){Mt(e)&&n.delete(t)}function Ut(){At=!1,null!==It&&Mt(It)&&(It=null),null!==Ot&&Mt(Ot)&&(Ot=null),null!==Tt&&Mt(Tt)&&(Tt=null),Rt.forEach(Bt),Ct.forEach(Bt)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,At||(At=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ut)))}function Vt(e){function t(t){return zt(t,e)}if(0<xt.length){zt(xt[0],e);for(var n=1;n<xt.length;n++){var r=xt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==It&&zt(It,e),null!==Ot&&zt(Ot,e),null!==Tt&&zt(Tt,e),Rt.forEach(t),Ct.forEach(t),n=0;n<Nt.length;n++)(r=Nt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Nt.length&&null===(n=Nt[0]).blockedOn;)Lt(n),null===n.blockedOn&&Nt.shift()}var qt=w.ReactCurrentBatchConfig,Ht=!0;function Wt(e,t,n,r){var i=bt,o=qt.transition;qt.transition=null;try{bt=1,Yt(e,t,n,r)}finally{bt=i,qt.transition=o}}function Gt(e,t,n,r){var i=bt,o=qt.transition;qt.transition=null;try{bt=4,Yt(e,t,n,r)}finally{bt=i,qt.transition=o}}function Yt(e,t,n,r){if(Ht){var i=$t(e,t,n,r);if(null===i)Hr(e,t,r,Kt,n),Dt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return It=Ft(It,e,t,n,r,i),!0;case"dragenter":return Ot=Ft(Ot,e,t,n,r,i),!0;case"mouseover":return Tt=Ft(Tt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Rt.set(o,Ft(Rt.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Ct.set(o,Ft(Ct.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Dt(e,r),4&t&&-1<jt.indexOf(e)){for(;null!==i;){var o=bi(i);if(null!==o&&St(o),null===(o=$t(e,t,n,r))&&Hr(e,t,r,Kt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Kt=null;function $t(e,t,n,r){if(Kt=null,null!==(e=yi(e=Se(r))))if(null===(t=Ve(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[o-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,i,o){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(cn),dn=L({},cn,{view:0,detail:0}),hn=on(dn),fn=L({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(sn=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=sn=0,ln=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=on(fn),gn=on(L({},fn,{dataTransfer:0})),mn=on(L({},dn,{relatedTarget:0})),vn=on(L({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=L({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=on(yn),wn=on(L({},cn,{data:0})),Sn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function Pn(){return kn}var An=L({},dn,{key:function(e){if(e.key){var t=Sn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),xn=on(An),In=on(L({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),On=on(L({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pn})),Tn=on(L({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=L({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Cn=on(Rn),Nn=[9,13,27,32],jn=u&&"CompositionEvent"in window,Dn=null;u&&"documentMode"in document&&(Dn=document.documentMode);var Fn=u&&"TextEvent"in window&&!Dn,Ln=u&&(!jn||Dn&&8<Dn&&11>=Dn),Mn=String.fromCharCode(32),Bn=!1;function Un(e,t){switch(e){case"keyup":return-1!==Nn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Vn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Wn(e,t,n,r){Ae(r),0<(t=Gr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Yn=null;function Kn(e){Mr(e,0)}function $n(e){if(Y(wi(e)))return e}function Qn(e,t){if("change"===e)return t}var Jn=!1;if(u){var Xn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Jn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),Yn=Gn=null)}function nr(e){if("value"===e.propertyName&&$n(Yn)){var t=[];Wn(t,Yn,e,Se(e)),Re(Kn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Yn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Yn)}function or(e,t){if("click"===e)return $n(t)}function sr(e,t){if("input"===e||"change"===e)return $n(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=ur(n,o);var s=ur(n,r);i&&s&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gr=u&&"documentMode"in document&&11>=document.documentMode,mr=null,vr=null,yr=null,br=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==mr||mr!==K(r)||("selectionStart"in(r=mr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Gr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function Sr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:Sr("Animation","AnimationEnd"),animationiteration:Sr("Animation","AnimationIteration"),animationstart:Sr("Animation","AnimationStart"),transitionend:Sr("Transition","TransitionEnd")},Er={},kr={};function Pr(e){if(Er[e])return Er[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in kr)return Er[e]=n[t];return e}u&&(kr=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Ar=Pr("animationend"),xr=Pr("animationiteration"),Ir=Pr("animationstart"),Or=Pr("transitionend"),Tr=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cr(e,t){Tr.set(e,t),l(t,[e])}for(var Nr=0;Nr<Rr.length;Nr++){var jr=Rr[Nr];Cr(jr.toLowerCase(),"on"+(jr[0].toUpperCase()+jr.slice(1)))}Cr(Ar,"onAnimationEnd"),Cr(xr,"onAnimationIteration"),Cr(Ir,"onAnimationStart"),Cr("dblclick","onDoubleClick"),Cr("focusin","onFocus"),Cr("focusout","onBlur"),Cr(Or,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dr));function Lr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,s,a,l,c){if(ze.apply(this,arguments),Fe){if(!Fe)throw Error(o(198));var u=Le;Fe=!1,Le=null,Me||(Me=!0,Be=u)}}(r,t,void 0,e),e.currentTarget=null}function Mr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;Lr(i,a,c),o=l}else for(s=0;s<r.length;s++){if(l=(a=r[s]).instance,c=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;Lr(i,a,c),o=l}}}if(Me)throw e=Be,Me=!1,Be=null,e}function Br(e,t){var n=t[gi];void 0===n&&(n=t[gi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Ur(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Vr(e){if(!e[zr]){e[zr]=!0,s.forEach((function(t){"selectionchange"!==t&&(Fr.has(t)||Ur(t,!1,e),Ur(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Ur("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Qt(t)){case 1:var i=Wt;break;case 4:i=Gt;break;default:i=Yt}n=i.bind(null,t,n,e),i=void 0,!Ne||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;s=s.return}for(;null!==a;){if(null===(s=yi(a)))return;if(5===(l=s.tag)||6===l){r=o=s;continue e}a=a.parentNode}}r=r.return}Re((function(){var r=o,i=Se(n),s=[];e:{var a=Tr.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=xn;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=On;break;case Ar:case xr:case Ir:l=vn;break;case Or:l=Tn;break;case"scroll":l=hn;break;case"wheel":l=Cn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=In}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==h&&(null!=(g=Ce(p,h))&&u.push(Wr(p,g,f)))),d)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),s.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!yi(c)&&!c[pi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?yi(c):null)&&(c!==(d=Ve(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,g="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=In,g="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?a:wi(l),f=null==c?a:wi(c),(a=new u(g,p+"leave",l,n,i)).target=d,a.relatedTarget=f,g=null,yi(i)===r&&((u=new u(h,p+"enter",c,n,i)).target=f,u.relatedTarget=d,g=u),d=g,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Yr(f))p++;for(f=0,g=h;g;g=Yr(g))f++;for(;0<p-f;)u=Yr(u),p--;for(;0<f-p;)h=Yr(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Yr(u),h=Yr(h)}u=null}else u=null;null!==l&&Kr(s,a,l,u,!1),null!==c&&null!==d&&Kr(s,d,c,u,!0)}if("select"===(l=(a=r?wi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var m=Qn;else if(Hn(a))if(Jn)m=sr;else{m=ir;var v=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(m=or);switch(m&&(m=m(e,r))?Wn(s,m,n,i):(v&&v(e,a,r),"focusout"===e&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&ee(a,"number",a.value)),v=r?wi(r):window,e){case"focusin":(Hn(v)||"true"===v.contentEditable)&&(mr=v,vr=r,yr=null);break;case"focusout":yr=vr=mr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,wr(s,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":wr(s,n,i)}var y;if(jn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Vn?Un(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Ln&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Vn&&(y=en()):(Xt="value"in(Jt=i)?Jt.value:Jt.textContent,Vn=!0)),0<(v=Gr(r,b)).length&&(b=new wn(b,e,null,n,i),s.push({event:b,listeners:v}),y?b.data=y:null!==(y=zn(n))&&(b.data=y))),(y=Fn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Bn=!0,Mn);case"textInput":return(e=t.data)===Mn&&Bn?null:e;default:return null}}(e,n):function(e,t){if(Vn)return"compositionend"===e||!jn&&Un(e,t)?(e=en(),Zt=Xt=Jt=null,Vn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),s.push({event:i,listeners:r}),i.data=y))}Mr(s,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Ce(e,n))&&r.unshift(Wr(e,o,i)),null!=(o=Ce(e,t))&&r.push(Wr(e,o,i))),e=e.return}return r}function Yr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Kr(e,t,n,r,i){for(var o=t._reactName,s=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Ce(n,o))&&s.unshift(Wr(n,l,a)):i||null!=(l=Ce(n,o))&&s.push(Wr(n,l,a))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var $r=/\r\n?/g,Qr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace($r,"\n").replace(Qr,"")}function Xr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(o(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,si="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(e){return oi.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Vt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Vt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,fi="__reactProps$"+di,pi="__reactContainer$"+di,gi="__reactEvents$"+di,mi="__reactListeners$"+di,vi="__reactHandles$"+di;function yi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[hi])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function Si(e){return e[fi]||null}var _i=[],Ei=-1;function ki(e){return{current:e}}function Pi(e){0>Ei||(e.current=_i[Ei],_i[Ei]=null,Ei--)}function Ai(e,t){Ei++,_i[Ei]=e.current,e.current=t}var xi={},Ii=ki(xi),Oi=ki(!1),Ti=xi;function Ri(e,t){var n=e.type.contextTypes;if(!n)return xi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Ci(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ni(){Pi(Oi),Pi(Ii)}function ji(e,t,n){if(Ii.current!==xi)throw Error(o(168));Ai(Ii,t),Ai(Oi,n)}function Di(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,q(e)||"Unknown",i));return L({},n,r)}function Fi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||xi,Ti=Ii.current,Ai(Ii,e),Ai(Oi,Oi.current),!0}function Li(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Di(e,t,Ti),r.__reactInternalMemoizedMergedChildContext=e,Pi(Oi),Pi(Ii),Ai(Ii,e)):Pi(Oi),Ai(Oi,n)}var Mi=null,Bi=!1,Ui=!1;function zi(e){null===Mi?Mi=[e]:Mi.push(e)}function Vi(){if(!Ui&&null!==Mi){Ui=!0;var e=0,t=bt;try{var n=Mi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Mi=null,Bi=!1}catch(i){throw null!==Mi&&(Mi=Mi.slice(e+1)),Ye(Ze,Vi),i}finally{bt=t,Ui=!1}}return null}var qi=[],Hi=0,Wi=null,Gi=0,Yi=[],Ki=0,$i=null,Qi=1,Ji="";function Xi(e,t){qi[Hi++]=Gi,qi[Hi++]=Wi,Wi=e,Gi=t}function Zi(e,t,n){Yi[Ki++]=Qi,Yi[Ki++]=Ji,Yi[Ki++]=$i,$i=e;var r=Qi;e=Ji;var i=32-st(r)-1;r&=~(1<<i),n+=1;var o=32-st(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Qi=1<<32-st(t)+i|n<<i|r,Ji=o+e}else Qi=1<<o|n<<i|r,Ji=e}function eo(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function to(e){for(;e===Wi;)Wi=qi[--Hi],qi[Hi]=null,Gi=qi[--Hi],qi[Hi]=null;for(;e===$i;)$i=Yi[--Ki],Yi[Ki]=null,Ji=Yi[--Ki],Yi[Ki]=null,Qi=Yi[--Ki],Yi[Ki]=null}var no=null,ro=null,io=!1,oo=null;function so(e,t){var n=Cc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ao(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==$i?{id:Qi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Cc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function lo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function co(e){if(io){var t=ro;if(t){var n=t;if(!ao(e,t)){if(lo(e))throw Error(o(418));t=ci(n.nextSibling);var r=no;t&&ao(e,t)?so(r,n):(e.flags=-4097&e.flags|2,io=!1,no=e)}}else{if(lo(e))throw Error(o(418));e.flags=-4097&e.flags|2,io=!1,no=e}}}function uo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function ho(e){if(e!==no)return!1;if(!io)return uo(e),io=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ro)){if(lo(e))throw fo(),Error(o(418));for(;t;)so(e,t),t=ci(t.nextSibling)}if(uo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?ci(e.stateNode.nextSibling):null;return!0}function fo(){for(var e=ro;e;)e=ci(e.nextSibling)}function po(){ro=no=null,io=!1}function go(e){null===oo?oo=[e]:oo.push(e)}var mo=w.ReactCurrentBatchConfig;function vo(e,t){if(e&&e.defaultProps){for(var n in t=L({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var yo=ki(null),bo=null,wo=null,So=null;function _o(){So=wo=bo=null}function Eo(e){var t=yo.current;Pi(yo),e._currentValue=t}function ko(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Po(e,t){bo=e,So=wo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wa=!0),e.firstContext=null)}function Ao(e){var t=e._currentValue;if(So!==e)if(e={context:e,memoizedValue:t,next:null},null===wo){if(null===bo)throw Error(o(308));wo=e,bo.dependencies={lanes:0,firstContext:e}}else wo=wo.next=e;return t}var xo=null;function Io(e){null===xo?xo=[e]:xo.push(e)}function Oo(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Io(t)):(n.next=i.next,i.next=n),t.interleaved=n,To(e,r)}function To(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ro=!1;function Co(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function No(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function jo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Do(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Ol)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,To(e,n)}return null===(i=r.interleaved)?(t.next=t,Io(r)):(t.next=i.next,i.next=t),r.interleaved=t,To(e,n)}function Fo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Lo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Mo(e,t,n,r){var i=e.updateQueue;Ro=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===s?o=c:s.next=c,s=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==o){var d=i.baseState;for(s=0,u=c=l=null,a=o;;){var h=a.lane,f=a.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,g=a;switch(h=t,f=n,g.tag){case 1:if("function"===typeof(p=g.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=g.payload)?p.call(f,d,h):p)||void 0===h)break e;d=L({},d,h);break e;case 2:Ro=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,s|=h;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(h=a).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{s|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);Ll|=s,e.lanes=s,e.memoizedState=d}}function Bo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var Uo=(new r.Component).refs;function zo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:L({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Vo={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),o=jo(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Do(e,o,i))&&(rc(t,e,i,r),Fo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),o=jo(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Do(e,o,i))&&(rc(t,e,i,r),Fo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=jo(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Do(e,i,r))&&(rc(t,e,r,n),Fo(t,e,r))}};function qo(e,t,n,r,i,o,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,o))}function Ho(e,t,n){var r=!1,i=xi,o=t.contextType;return"object"===typeof o&&null!==o?o=Ao(o):(i=Ci(t)?Ti:Ii.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ri(e,i):xi),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Vo,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Wo(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Vo.enqueueReplaceState(t,t.state,null)}function Go(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Uo,Co(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=Ao(o):(o=Ci(t)?Ti:Ii.current,i.context=Ri(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(zo(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Vo.enqueueReplaceState(i,i.state,null),Mo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Yo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=i.refs;t===Uo&&(t=i.refs={}),null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Ko(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function $o(e){return(0,e._init)(e._payload)}function Qo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=jc(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Mc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var o=n.type;return o===E?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===C&&$o(o)===t.type)?((r=i(t,n.props)).ref=Yo(e,t,n),r.return=e,r):((r=Dc(n.type,n.key,n.props,null,e.mode,r)).ref=Yo(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Bc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=Fc(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Mc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case S:return(n=Dc(t.type,t.key,t.props,null,e.mode,n)).ref=Yo(e,null,t),n.return=e,n;case _:return(t=Bc(t,e.mode,n)).return=e,t;case C:return h(e,(0,t._init)(t._payload),n)}if(te(t)||D(t))return(t=Fc(t,e.mode,n,null)).return=e,t;Ko(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case S:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?u(e,t,n,r):null;case C:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||D(n))return null!==i?null:d(e,t,n,r,null);Ko(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case S:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case C:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||D(r))return d(t,e=e.get(n)||null,r,i,null);Ko(t,r)}return null}function g(i,o,a,l){for(var c=null,u=null,d=o,g=o=0,m=null;null!==d&&g<a.length;g++){d.index>g?(m=d,d=null):m=d.sibling;var v=f(i,d,a[g],l);if(null===v){null===d&&(d=m);break}e&&d&&null===v.alternate&&t(i,d),o=s(v,o,g),null===u?c=v:u.sibling=v,u=v,d=m}if(g===a.length)return n(i,d),io&&Xi(i,g),c;if(null===d){for(;g<a.length;g++)null!==(d=h(i,a[g],l))&&(o=s(d,o,g),null===u?c=d:u.sibling=d,u=d);return io&&Xi(i,g),c}for(d=r(i,d);g<a.length;g++)null!==(m=p(d,i,g,a[g],l))&&(e&&null!==m.alternate&&d.delete(null===m.key?g:m.key),o=s(m,o,g),null===u?c=m:u.sibling=m,u=m);return e&&d.forEach((function(e){return t(i,e)})),io&&Xi(i,g),c}function m(i,a,l,c){var u=D(l);if("function"!==typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var d=u=null,g=a,m=a=0,v=null,y=l.next();null!==g&&!y.done;m++,y=l.next()){g.index>m?(v=g,g=null):v=g.sibling;var b=f(i,g,y.value,c);if(null===b){null===g&&(g=v);break}e&&g&&null===b.alternate&&t(i,g),a=s(b,a,m),null===d?u=b:d.sibling=b,d=b,g=v}if(y.done)return n(i,g),io&&Xi(i,m),u;if(null===g){for(;!y.done;m++,y=l.next())null!==(y=h(i,y.value,c))&&(a=s(y,a,m),null===d?u=y:d.sibling=y,d=y);return io&&Xi(i,m),u}for(g=r(i,g);!y.done;m++,y=l.next())null!==(y=p(g,i,m,y.value,c))&&(e&&null!==y.alternate&&g.delete(null===y.key?m:y.key),a=s(y,a,m),null===d?u=y:d.sibling=y,d=y);return e&&g.forEach((function(e){return t(i,e)})),io&&Xi(i,m),u}return function e(r,o,s,l){if("object"===typeof s&&null!==s&&s.type===E&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case S:e:{for(var c=s.key,u=o;null!==u;){if(u.key===c){if((c=s.type)===E){if(7===u.tag){n(r,u.sibling),(o=i(u,s.props.children)).return=r,r=o;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===C&&$o(c)===u.type){n(r,u.sibling),(o=i(u,s.props)).ref=Yo(r,u,s),o.return=r,r=o;break e}n(r,u);break}t(r,u),u=u.sibling}s.type===E?((o=Fc(s.props.children,r.mode,l,s.key)).return=r,r=o):((l=Dc(s.type,s.key,s.props,null,r.mode,l)).ref=Yo(r,o,s),l.return=r,r=l)}return a(r);case _:e:{for(u=s.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===s.containerInfo&&o.stateNode.implementation===s.implementation){n(r,o.sibling),(o=i(o,s.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=Bc(s,r.mode,l)).return=r,r=o}return a(r);case C:return e(r,o,(u=s._init)(s._payload),l)}if(te(s))return g(r,o,s,l);if(D(s))return m(r,o,s,l);Ko(r,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,s)).return=r,r=o):(n(r,o),(o=Mc(s,r.mode,l)).return=r,r=o),a(r)):n(r,o)}}var Jo=Qo(!0),Xo=Qo(!1),Zo={},es=ki(Zo),ts=ki(Zo),ns=ki(Zo);function rs(e){if(e===Zo)throw Error(o(174));return e}function is(e,t){switch(Ai(ns,t),Ai(ts,e),Ai(es,Zo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Pi(es),Ai(es,t)}function os(){Pi(es),Pi(ts),Pi(ns)}function ss(e){rs(ns.current);var t=rs(es.current),n=le(t,e.type);t!==n&&(Ai(ts,e),Ai(es,n))}function as(e){ts.current===e&&(Pi(es),Pi(ts))}var ls=ki(0);function cs(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var us=[];function ds(){for(var e=0;e<us.length;e++)us[e]._workInProgressVersionPrimary=null;us.length=0}var hs=w.ReactCurrentDispatcher,fs=w.ReactCurrentBatchConfig,ps=0,gs=null,ms=null,vs=null,ys=!1,bs=!1,ws=0,Ss=0;function _s(){throw Error(o(321))}function Es(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function ks(e,t,n,r,i,s){if(ps=s,gs=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,hs.current=null===e||null===e.memoizedState?aa:la,e=n(r,i),bs){s=0;do{if(bs=!1,ws=0,25<=s)throw Error(o(301));s+=1,vs=ms=null,t.updateQueue=null,hs.current=ca,e=n(r,i)}while(bs)}if(hs.current=sa,t=null!==ms&&null!==ms.next,ps=0,vs=ms=gs=null,ys=!1,t)throw Error(o(300));return e}function Ps(){var e=0!==ws;return ws=0,e}function As(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===vs?gs.memoizedState=vs=e:vs=vs.next=e,vs}function xs(){if(null===ms){var e=gs.alternate;e=null!==e?e.memoizedState:null}else e=ms.next;var t=null===vs?gs.memoizedState:vs.next;if(null!==t)vs=t,ms=e;else{if(null===e)throw Error(o(310));e={memoizedState:(ms=e).memoizedState,baseState:ms.baseState,baseQueue:ms.baseQueue,queue:ms.queue,next:null},null===vs?gs.memoizedState=vs=e:vs=vs.next=e}return vs}function Is(e,t){return"function"===typeof t?t(e):t}function Os(e){var t=xs(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=ms,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(null!==i){s=i.next,r=r.baseState;var l=a=null,c=null,u=s;do{var d=u.lane;if((ps&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,a=r):c=c.next=h,gs.lanes|=d,Ll|=d}u=u.next}while(null!==u&&u!==s);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(wa=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{s=i.lane,gs.lanes|=s,Ll|=s,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ts(e){var t=xs(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);ar(s,t.memoizedState)||(wa=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Rs(){}function Cs(e,t){var n=gs,r=xs(),i=t(),s=!ar(r.memoizedState,i);if(s&&(r.memoizedState=i,wa=!0),r=r.queue,Hs(Ds.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||null!==vs&&1&vs.memoizedState.tag){if(n.flags|=2048,Bs(9,js.bind(null,n,r,i,t),void 0,null),null===Tl)throw Error(o(349));0!==(30&ps)||Ns(n,t,i)}return i}function Ns(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=gs.updateQueue)?(t={lastEffect:null,stores:null},gs.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function js(e,t,n,r){t.value=n,t.getSnapshot=r,Fs(t)&&Ls(e)}function Ds(e,t,n){return n((function(){Fs(t)&&Ls(e)}))}function Fs(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Ls(e){var t=To(e,1);null!==t&&rc(t,e,1,-1)}function Ms(e){var t=As();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Is,lastRenderedState:e},t.queue=e,e=e.dispatch=na.bind(null,gs,e),[t.memoizedState,e]}function Bs(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=gs.updateQueue)?(t={lastEffect:null,stores:null},gs.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Us(){return xs().memoizedState}function zs(e,t,n,r){var i=As();gs.flags|=e,i.memoizedState=Bs(1|t,n,void 0,void 0===r?null:r)}function Vs(e,t,n,r){var i=xs();r=void 0===r?null:r;var o=void 0;if(null!==ms){var s=ms.memoizedState;if(o=s.destroy,null!==r&&Es(r,s.deps))return void(i.memoizedState=Bs(t,n,o,r))}gs.flags|=e,i.memoizedState=Bs(1|t,n,o,r)}function qs(e,t){return zs(8390656,8,e,t)}function Hs(e,t){return Vs(2048,8,e,t)}function Ws(e,t){return Vs(4,2,e,t)}function Gs(e,t){return Vs(4,4,e,t)}function Ys(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ks(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Vs(4,4,Ys.bind(null,t,e),n)}function $s(){}function Qs(e,t){var n=xs();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Es(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Js(e,t){var n=xs();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Es(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xs(e,t,n){return 0===(21&ps)?(e.baseState&&(e.baseState=!1,wa=!0),e.memoizedState=n):(ar(n,t)||(n=gt(),gs.lanes|=n,Ll|=n,e.baseState=!0),t)}function Zs(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=fs.transition;fs.transition={};try{e(!1),t()}finally{bt=n,fs.transition=r}}function ea(){return xs().memoizedState}function ta(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ra(e))ia(t,n);else if(null!==(n=Oo(e,t,n,r))){rc(n,e,r,tc()),oa(n,t,r)}}function na(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ra(e))ia(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,s)){var l=t.interleaved;return null===l?(i.next=i,Io(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Oo(e,t,i,r))&&(rc(n,e,r,i=tc()),oa(n,t,r))}}function ra(e){var t=e.alternate;return e===gs||null!==t&&t===gs}function ia(e,t){bs=ys=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function oa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var sa={readContext:Ao,useCallback:_s,useContext:_s,useEffect:_s,useImperativeHandle:_s,useInsertionEffect:_s,useLayoutEffect:_s,useMemo:_s,useReducer:_s,useRef:_s,useState:_s,useDebugValue:_s,useDeferredValue:_s,useTransition:_s,useMutableSource:_s,useSyncExternalStore:_s,useId:_s,unstable_isNewReconciler:!1},aa={readContext:Ao,useCallback:function(e,t){return As().memoizedState=[e,void 0===t?null:t],e},useContext:Ao,useEffect:qs,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zs(4194308,4,Ys.bind(null,t,e),n)},useLayoutEffect:function(e,t){return zs(4194308,4,e,t)},useInsertionEffect:function(e,t){return zs(4,2,e,t)},useMemo:function(e,t){var n=As();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=As();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ta.bind(null,gs,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},As().memoizedState=e},useState:Ms,useDebugValue:$s,useDeferredValue:function(e){return As().memoizedState=e},useTransition:function(){var e=Ms(!1),t=e[0];return e=Zs.bind(null,e[1]),As().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=gs,i=As();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Tl)throw Error(o(349));0!==(30&ps)||Ns(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,qs(Ds.bind(null,r,s,e),[e]),r.flags|=2048,Bs(9,js.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=As(),t=Tl.identifierPrefix;if(io){var n=Ji;t=":"+t+"R"+(n=(Qi&~(1<<32-st(Qi)-1)).toString(32)+n),0<(n=ws++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=Ss++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},la={readContext:Ao,useCallback:Qs,useContext:Ao,useEffect:Hs,useImperativeHandle:Ks,useInsertionEffect:Ws,useLayoutEffect:Gs,useMemo:Js,useReducer:Os,useRef:Us,useState:function(){return Os(Is)},useDebugValue:$s,useDeferredValue:function(e){return Xs(xs(),ms.memoizedState,e)},useTransition:function(){return[Os(Is)[0],xs().memoizedState]},useMutableSource:Rs,useSyncExternalStore:Cs,useId:ea,unstable_isNewReconciler:!1},ca={readContext:Ao,useCallback:Qs,useContext:Ao,useEffect:Hs,useImperativeHandle:Ks,useInsertionEffect:Ws,useLayoutEffect:Gs,useMemo:Js,useReducer:Ts,useRef:Us,useState:function(){return Ts(Is)},useDebugValue:$s,useDeferredValue:function(e){var t=xs();return null===ms?t.memoizedState=e:Xs(t,ms.memoizedState,e)},useTransition:function(){return[Ts(Is)[0],xs().memoizedState]},useMutableSource:Rs,useSyncExternalStore:Cs,useId:ea,unstable_isNewReconciler:!1};function ua(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function da(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ha(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fa="function"===typeof WeakMap?WeakMap:Map;function pa(e,t,n){(n=jo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wl||(Wl=!0,Gl=r),ha(0,t)},n}function ga(e,t,n){(n=jo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ha(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){ha(0,t),"function"!==typeof r&&(null===Yl?Yl=new Set([this]):Yl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ma(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fa;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ac.bind(null,e,t,n),t.then(e,e))}function va(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ya(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=jo(-1,1)).tag=2,Do(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ba=w.ReactCurrentOwner,wa=!1;function Sa(e,t,n,r){t.child=null===e?Xo(t,null,n,r):Jo(t,e.child,n,r)}function _a(e,t,n,r,i){n=n.render;var o=t.ref;return Po(t,i),r=ks(e,t,n,r,o,i),n=Ps(),null===e||wa?(io&&n&&eo(t),t.flags|=1,Sa(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wa(e,t,i))}function Ea(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Nc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,ka(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(s,r)&&e.ref===t.ref)return Wa(e,t,i)}return t.flags|=1,(e=jc(o,r)).ref=t.ref,e.return=t,t.child=e}function ka(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(lr(o,r)&&e.ref===t.ref){if(wa=!1,t.pendingProps=r=o,0===(e.lanes&i))return t.lanes=e.lanes,Wa(e,t,i);0!==(131072&e.flags)&&(wa=!0)}}return xa(e,t,n,r,i)}function Pa(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ai(jl,Nl),Nl|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ai(jl,Nl),Nl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Ai(jl,Nl),Nl|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ai(jl,Nl),Nl|=r;return Sa(e,t,i,n),t.child}function Aa(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function xa(e,t,n,r,i){var o=Ci(n)?Ti:Ii.current;return o=Ri(t,o),Po(t,i),n=ks(e,t,n,r,o,i),r=Ps(),null===e||wa?(io&&r&&eo(t),t.flags|=1,Sa(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wa(e,t,i))}function Ia(e,t,n,r,i){if(Ci(n)){var o=!0;Fi(t)}else o=!1;if(Po(t,i),null===t.stateNode)Ha(e,t),Ho(t,n,r),Go(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ao(c):c=Ri(t,c=Ci(n)?Ti:Ii.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof s.getSnapshotBeforeUpdate;d||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==r||l!==c)&&Wo(t,s,r,c),Ro=!1;var h=t.memoizedState;s.state=h,Mo(t,r,s,i),l=t.memoizedState,a!==r||h!==l||Oi.current||Ro?("function"===typeof u&&(zo(t,n,u,r),l=t.memoizedState),(a=Ro||qo(t,n,a,r,h,l,c))?(d||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=c,r=a):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,No(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:vo(t.type,a),s.props=c,d=t.pendingProps,h=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ao(l):l=Ri(t,l=Ci(n)?Ti:Ii.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==d||h!==l)&&Wo(t,s,r,l),Ro=!1,h=t.memoizedState,s.state=h,Mo(t,r,s,i);var p=t.memoizedState;a!==d||h!==p||Oi.current||Ro?("function"===typeof f&&(zo(t,n,f,r),p=t.memoizedState),(c=Ro||qo(t,n,c,r,h,p,l)||!1)?(u||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,p,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),s.props=r,s.state=p,s.context=l,r=c):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Oa(e,t,n,r,o,i)}function Oa(e,t,n,r,i,o){Aa(e,t);var s=0!==(128&t.flags);if(!r&&!s)return i&&Li(t,n,!1),Wa(e,t,o);r=t.stateNode,ba.current=t;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=Jo(t,e.child,null,o),t.child=Jo(t,null,a,o)):Sa(e,t,a,o),t.memoizedState=r.state,i&&Li(t,n,!0),t.child}function Ta(e){var t=e.stateNode;t.pendingContext?ji(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ji(0,t.context,!1),is(e,t.containerInfo)}function Ra(e,t,n,r,i){return po(),go(i),t.flags|=256,Sa(e,t,n,r),t.child}var Ca,Na,ja,Da,Fa={dehydrated:null,treeContext:null,retryLane:0};function La(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ma(e,t,n){var r,i=t.pendingProps,s=ls.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&s)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Ai(ls,1&s),null===e)return co(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Lc(l,i,0,null),e=Fc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=La(n),t.memoizedState=Fa,e):Ba(t,l));if(null!==(s=e.memoizedState)&&null!==(r=s.dehydrated))return function(e,t,n,r,i,s,a){if(n)return 256&t.flags?(t.flags&=-257,Ua(e,t,a,r=da(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Lc({mode:"visible",children:r.children},i,0,null),(s=Fc(s,i,a,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,0!==(1&t.mode)&&Jo(t,e.child,null,a),t.child.memoizedState=La(a),t.memoizedState=Fa,s);if(0===(1&t.mode))return Ua(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Ua(e,t,a,r=da(s=Error(o(419)),r,void 0))}if(l=0!==(a&e.childLanes),wa||l){if(null!==(r=Tl)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==s.retryLane&&(s.retryLane=i,To(e,i),rc(r,e,i,-1))}return mc(),Ua(e,t,a,r=da(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Ic.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,ro=ci(i.nextSibling),no=t,io=!0,oo=null,null!==e&&(Yi[Ki++]=Qi,Yi[Ki++]=Ji,Yi[Ki++]=$i,Qi=e.id,Ji=e.overflow,$i=t),t=Ba(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,s,n);if(a){a=i.fallback,l=t.mode,r=(s=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==s?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=jc(s,c)).subtreeFlags=14680064&s.subtreeFlags,null!==r?a=jc(r,a):(a=Fc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?La(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Fa,i}return e=(a=e.child).sibling,i=jc(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Ba(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ua(e,t,n,r){return null!==r&&go(r),Jo(t,e.child,null,n),(e=Ba(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function za(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),ko(e.return,t,n)}function Va(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function qa(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Sa(e,t,r.children,n),0!==(2&(r=ls.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&za(e,n,t);else if(19===e.tag)za(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ai(ls,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===cs(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Va(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===cs(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Va(t,!0,n,null,o);break;case"together":Va(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ha(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ll|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=jc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=jc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ga(e,t){if(!io)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ya(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ka(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ya(t),null;case 1:case 17:return Ci(t.type)&&Ni(),Ya(t),null;case 3:return r=t.stateNode,os(),Pi(Oi),Pi(Ii),ds(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(ac(oo),oo=null))),Na(e,t),Ya(t),null;case 5:as(t);var i=rs(ns.current);if(n=t.type,null!==e&&null!=t.stateNode)ja(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Ya(t),null}if(e=rs(es.current),ho(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[hi]=t,r[fi]=s,e=0!==(1&t.mode),n){case"dialog":Br("cancel",r),Br("close",r);break;case"iframe":case"object":case"embed":Br("load",r);break;case"video":case"audio":for(i=0;i<Dr.length;i++)Br(Dr[i],r);break;case"source":Br("error",r);break;case"img":case"image":case"link":Br("error",r),Br("load",r);break;case"details":Br("toggle",r);break;case"input":Q(r,s),Br("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Br("invalid",r);break;case"textarea":ie(r,s),Br("invalid",r)}for(var l in ye(n,s),i=null,s)if(s.hasOwnProperty(l)){var c=s[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==s.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==s.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Br("scroll",r)}switch(n){case"input":G(r),Z(r,s,!0);break;case"textarea":G(r),se(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hi]=t,e[fi]=r,Ca(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Br("cancel",e),Br("close",e),i=r;break;case"iframe":case"object":case"embed":Br("load",e),i=r;break;case"video":case"audio":for(i=0;i<Dr.length;i++)Br(Dr[i],e);i=r;break;case"source":Br("error",e),i=r;break;case"img":case"image":case"link":Br("error",e),Br("load",e),i=r;break;case"details":Br("toggle",e),i=r;break;case"input":Q(e,r),i=$(e,r),Br("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=L({},r,{value:void 0}),Br("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Br("invalid",e)}for(s in ye(n,i),c=i)if(c.hasOwnProperty(s)){var u=c[s];"style"===s?me(e,u):"dangerouslySetInnerHTML"===s?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===s?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(a.hasOwnProperty(s)?null!=u&&"onScroll"===s&&Br("scroll",e):null!=u&&b(e,s,u,l))}switch(n){case"input":G(e),Z(e,r,!1);break;case"textarea":G(e),se(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ne(e,!!r.multiple,s,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ya(t),null;case 6:if(e&&null!=t.stateNode)Da(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=rs(ns.current),rs(es.current),ho(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(s=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}s&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Ya(t),null;case 13:if(Pi(ls),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&t.mode)&&0===(128&t.flags))fo(),po(),t.flags|=98560,s=!1;else if(s=ho(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(o(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(o(317));s[hi]=t}else po(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ya(t),s=!1}else null!==oo&&(ac(oo),oo=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ls.current)?0===Dl&&(Dl=3):mc())),null!==t.updateQueue&&(t.flags|=4),Ya(t),null);case 4:return os(),Na(e,t),null===e&&Vr(t.stateNode.containerInfo),Ya(t),null;case 10:return Eo(t.type._context),Ya(t),null;case 19:if(Pi(ls),null===(s=t.memoizedState))return Ya(t),null;if(r=0!==(128&t.flags),null===(l=s.rendering))if(r)Ga(s,!1);else{if(0!==Dl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=cs(e))){for(t.flags|=128,Ga(s,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ai(ls,1&ls.current|2),t.child}e=e.sibling}null!==s.tail&&Je()>ql&&(t.flags|=128,r=!0,Ga(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=cs(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ga(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!io)return Ya(t),null}else 2*Je()-s.renderingStartTime>ql&&1073741824!==n&&(t.flags|=128,r=!0,Ga(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=s.last)?n.sibling=l:t.child=l,s.last=l)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Je(),t.sibling=null,n=ls.current,Ai(ls,r?1&n|2:1&n),t):(Ya(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Nl)&&(Ya(t),6&t.subtreeFlags&&(t.flags|=8192)):Ya(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function $a(e,t){switch(to(t),t.tag){case 1:return Ci(t.type)&&Ni(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return os(),Pi(Oi),Pi(Ii),ds(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return as(t),null;case 13:if(Pi(ls),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));po()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Pi(ls),null;case 4:return os(),null;case 10:return Eo(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Ca=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Na=function(){},ja=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,rs(es.current);var o,s=null;switch(n){case"input":i=$(e,i),r=$(e,r),s=[];break;case"select":i=L({},i,{value:void 0}),r=L({},r,{value:void 0}),s=[];break;case"textarea":i=re(e,i),r=re(e,r),s=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ye(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Br("scroll",e),s||l===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}},Da=function(e,t,n,r){n!==r&&(t.flags|=4)};var Qa=!1,Ja=!1,Xa="function"===typeof WeakSet?WeakSet:Set,Za=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Pc(e,t,r)}else n.current=null}function tl(e,t,n){try{n()}catch(r){Pc(e,t,r)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&tl(t,n,o)}i=i.next}while(i!==r)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ol(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[fi],delete t[gi],delete t[mi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var dl=null,hl=!1;function fl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Ja||el(n,t);case 6:var r=dl,i=hl;dl=null,fl(e,t,n),hl=i,null!==(dl=r)&&(hl?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(hl?(e=dl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Vt(e)):li(dl,n.stateNode));break;case 4:r=dl,i=hl,dl=n.stateNode.containerInfo,hl=!0,fl(e,t,n),dl=r,hl=i;break;case 0:case 11:case 14:case 15:if(!Ja&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,void 0!==s&&(0!==(2&o)||0!==(4&o))&&tl(n,t,s),i=i.next}while(i!==r)}fl(e,t,n);break;case 1:if(!Ja&&(el(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Pc(n,t,a)}fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:1&n.mode?(Ja=(r=Ja)||null!==n.memoizedState,fl(e,t,n),Ja=r):fl(e,t,n);break;default:fl(e,t,n)}}function gl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xa),t.forEach((function(t){var r=Oc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,hl=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===dl)throw Error(o(160));pl(s,a,i),dl=null,hl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Pc(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vl(t,e),t=t.sibling}function vl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),yl(e),4&r){try{rl(3,e,e.return),il(3,e)}catch(m){Pc(e,e.return,m)}try{rl(5,e,e.return)}catch(m){Pc(e,e.return,m)}}break;case 1:ml(t,e),yl(e),512&r&&null!==n&&el(n,n.return);break;case 5:if(ml(t,e),yl(e),512&r&&null!==n&&el(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(m){Pc(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var s=e.memoizedProps,a=null!==n?n.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===s.type&&null!=s.name&&J(i,s),be(l,a);var u=be(l,s);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];"style"===d?me(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):b(i,d,h,u)}switch(l){case"input":X(i,s);break;case"textarea":oe(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;null!=p?ne(i,!!s.multiple,p,!1):f!==!!s.multiple&&(null!=s.defaultValue?ne(i,!!s.multiple,s.defaultValue,!0):ne(i,!!s.multiple,s.multiple?[]:"",!1))}i[fi]=s}catch(m){Pc(e,e.return,m)}}break;case 6:if(ml(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){Pc(e,e.return,m)}}break;case 3:if(ml(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Vt(t.containerInfo)}catch(m){Pc(e,e.return,m)}break;case 4:default:ml(t,e),yl(e);break;case 13:ml(t,e),yl(e),8192&(i=e.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,!s||null!==i.alternate&&null!==i.alternate.memoizedState||(Vl=Je())),4&r&&gl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Ja=(u=Ja)||d,ml(t,e),Ja=u):ml(t,e),yl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Za=e,d=e.child;null!==d;){for(h=Za=d;null!==Za;){switch(p=(f=Za).child,f.tag){case 0:case 11:case 14:case 15:rl(4,f,f.return);break;case 1:el(f,f.return);var g=f.stateNode;if("function"===typeof g.componentWillUnmount){r=f,n=f.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(m){Pc(r,n,m)}}break;case 5:el(f,f.return);break;case 22:if(null!==f.memoizedState){_l(h);continue}}null!==p?(p.return=f,Za=p):_l(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,u?"function"===typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=h.stateNode,a=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=ge("display",a))}catch(m){Pc(e,e.return,m)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(m){Pc(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ml(t,e),yl(e),4&r&&gl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),ul(e,ll(e),i);break;case 3:case 4:var s=r.stateNode.containerInfo;cl(e,ll(e),s);break;default:throw Error(o(161))}}catch(a){Pc(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bl(e,t,n){Za=e,wl(e,t,n)}function wl(e,t,n){for(var r=0!==(1&e.mode);null!==Za;){var i=Za,o=i.child;if(22===i.tag&&r){var s=null!==i.memoizedState||Qa;if(!s){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Ja;a=Qa;var c=Ja;if(Qa=s,(Ja=l)&&!c)for(Za=i;null!==Za;)l=(s=Za).child,22===s.tag&&null!==s.memoizedState?El(i):null!==l?(l.return=s,Za=l):El(i);for(;null!==o;)Za=o,wl(o,t,n),o=o.sibling;Za=i,Qa=a,Ja=c}Sl(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,Za=o):Sl(e)}}function Sl(e){for(;null!==Za;){var t=Za;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ja||il(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ja)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:vo(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&Bo(t,s,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Bo(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Vt(h)}}}break;default:throw Error(o(163))}Ja||512&t.flags&&ol(t)}catch(f){Pc(t,t.return,f)}}if(t===e){Za=null;break}if(null!==(n=t.sibling)){n.return=t.return,Za=n;break}Za=t.return}}function _l(e){for(;null!==Za;){var t=Za;if(t===e){Za=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Za=n;break}Za=t.return}}function El(e){for(;null!==Za;){var t=Za;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(l){Pc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Pc(t,i,l)}}var o=t.return;try{ol(t)}catch(l){Pc(t,o,l)}break;case 5:var s=t.return;try{ol(t)}catch(l){Pc(t,s,l)}}}catch(l){Pc(t,t.return,l)}if(t===e){Za=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Za=a;break}Za=t.return}}var kl,Pl=Math.ceil,Al=w.ReactCurrentDispatcher,xl=w.ReactCurrentOwner,Il=w.ReactCurrentBatchConfig,Ol=0,Tl=null,Rl=null,Cl=0,Nl=0,jl=ki(0),Dl=0,Fl=null,Ll=0,Ml=0,Bl=0,Ul=null,zl=null,Vl=0,ql=1/0,Hl=null,Wl=!1,Gl=null,Yl=null,Kl=!1,$l=null,Ql=0,Jl=0,Xl=null,Zl=-1,ec=0;function tc(){return 0!==(6&Ol)?Je():-1!==Zl?Zl:Zl=Je()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Ol)&&0!==Cl?Cl&-Cl:null!==mo.transition?(0===ec&&(ec=gt()),ec):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function rc(e,t,n,r){if(50<Jl)throw Jl=0,Xl=null,Error(o(185));vt(e,n,r),0!==(2&Ol)&&e===Tl||(e===Tl&&(0===(2&Ol)&&(Ml|=n),4===Dl&&lc(e,Cl)),ic(e,r),1===n&&0===Ol&&0===(1&t.mode)&&(ql=Je()+500,Bi&&Vi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-st(o),a=1<<s,l=i[s];-1===l?0!==(a&n)&&0===(a&r)||(i[s]=ft(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}(e,t);var r=ht(e,e===Tl?Cl:0);if(0===r)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){Bi=!0,zi(e)}(cc.bind(null,e)):zi(cc.bind(null,e)),si((function(){0===(6&Ol)&&Vi()})),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Tc(n,oc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function oc(e,t){if(Zl=-1,ec=0,0!==(6&Ol))throw Error(o(327));var n=e.callbackNode;if(Ec()&&e.callbackNode!==n)return null;var r=ht(e,e===Tl?Cl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vc(e,r);else{t=r;var i=Ol;Ol|=2;var s=gc();for(Tl===e&&Cl===t||(Hl=null,ql=Je()+500,fc(e,t));;)try{bc();break}catch(l){pc(e,l)}_o(),Al.current=s,Ol=i,null!==Rl?t=0:(Tl=null,Cl=0,t=Dl)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=sc(e,i))),1===t)throw n=Fl,fc(e,0),lc(e,r),ic(e,Je()),n;if(6===t)lc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!ar(o(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=vc(e,r))&&(0!==(s=pt(e))&&(r=s,t=sc(e,s))),1===t))throw n=Fl,fc(e,0),lc(e,r),ic(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:_c(e,zl,Hl);break;case 3:if(lc(e,r),(130023424&r)===r&&10<(t=Vl+500-Je())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(_c.bind(null,e,zl,Hl),t);break}_c(e,zl,Hl);break;case 4:if(lc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-st(r);s=1<<a,(a=t[a])>i&&(i=a),r&=~s}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Pl(r/1960))-r)){e.timeoutHandle=ri(_c.bind(null,e,zl,Hl),r);break}_c(e,zl,Hl);break;default:throw Error(o(329))}}}return ic(e,Je()),e.callbackNode===n?oc.bind(null,e):null}function sc(e,t){var n=Ul;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=vc(e,t))&&(t=zl,zl=n,null!==t&&ac(t)),e}function ac(e){null===zl?zl=e:zl.push.apply(zl,e)}function lc(e,t){for(t&=~Bl,t&=~Ml,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Ol))throw Error(o(327));Ec();var t=ht(e,0);if(0===(1&t))return ic(e,Je()),null;var n=vc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=sc(e,r))}if(1===n)throw n=Fl,fc(e,0),lc(e,t),ic(e,Je()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_c(e,zl,Hl),ic(e,Je()),null}function uc(e,t){var n=Ol;Ol|=1;try{return e(t)}finally{0===(Ol=n)&&(ql=Je()+500,Bi&&Vi())}}function dc(e){null!==$l&&0===$l.tag&&0===(6&Ol)&&Ec();var t=Ol;Ol|=1;var n=Il.transition,r=bt;try{if(Il.transition=null,bt=1,e)return e()}finally{bt=r,Il.transition=n,0===(6&(Ol=t))&&Vi()}}function hc(){Nl=jl.current,Pi(jl)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Rl)for(n=Rl.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ni();break;case 3:os(),Pi(Oi),Pi(Ii),ds();break;case 5:as(r);break;case 4:os();break;case 13:case 19:Pi(ls);break;case 10:Eo(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Tl=e,Rl=e=jc(e.current,null),Cl=Nl=t,Dl=0,Fl=null,Bl=Ml=Ll=0,zl=Ul=null,null!==xo){for(t=0;t<xo.length;t++)if(null!==(r=(n=xo[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var s=o.next;o.next=i,r.next=s}n.pending=r}xo=null}return e}function pc(e,t){for(;;){var n=Rl;try{if(_o(),hs.current=sa,ys){for(var r=gs.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ys=!1}if(ps=0,vs=ms=gs=null,bs=!1,ws=0,xl.current=null,null===n||null===n.return){Dl=1,Fl=t,Rl=null;break}e:{var s=e,a=n.return,l=n,c=t;if(t=Cl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=va(a);if(null!==p){p.flags&=-257,ya(p,a,l,0,t),1&p.mode&&ma(s,u,t),c=u;var g=(t=p).updateQueue;if(null===g){var m=new Set;m.add(c),t.updateQueue=m}else g.add(c);break e}if(0===(1&t)){ma(s,u,t),mc();break e}c=Error(o(426))}else if(io&&1&l.mode){var v=va(a);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),ya(v,a,l,0,t),go(ua(c,l));break e}}s=c=ua(c,l),4!==Dl&&(Dl=2),null===Ul?Ul=[s]:Ul.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Lo(s,pa(0,c,t));break e;case 1:l=c;var y=s.type,b=s.stateNode;if(0===(128&s.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Yl||!Yl.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t,Lo(s,ga(s,l,t));break e}}s=s.return}while(null!==s)}Sc(n)}catch(w){t=w,Rl===n&&null!==n&&(Rl=n=n.return);continue}break}}function gc(){var e=Al.current;return Al.current=sa,null===e?sa:e}function mc(){0!==Dl&&3!==Dl&&2!==Dl||(Dl=4),null===Tl||0===(268435455&Ll)&&0===(268435455&Ml)||lc(Tl,Cl)}function vc(e,t){var n=Ol;Ol|=2;var r=gc();for(Tl===e&&Cl===t||(Hl=null,fc(e,t));;)try{yc();break}catch(i){pc(e,i)}if(_o(),Ol=n,Al.current=r,null!==Rl)throw Error(o(261));return Tl=null,Cl=0,Dl}function yc(){for(;null!==Rl;)wc(Rl)}function bc(){for(;null!==Rl&&!$e();)wc(Rl)}function wc(e){var t=kl(e.alternate,e,Nl);e.memoizedProps=e.pendingProps,null===t?Sc(e):Rl=t,xl.current=null}function Sc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ka(n,t,Nl)))return void(Rl=n)}else{if(null!==(n=$a(n,t)))return n.flags&=32767,void(Rl=n);if(null===e)return Dl=6,void(Rl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Rl=t);Rl=t=e}while(null!==t);0===Dl&&(Dl=5)}function _c(e,t,n){var r=bt,i=Il.transition;try{Il.transition=null,bt=1,function(e,t,n,r){do{Ec()}while(null!==$l);if(0!==(6&Ol))throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-st(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,s),e===Tl&&(Rl=Tl=null,Cl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Kl||(Kl=!0,Tc(tt,(function(){return Ec(),null}))),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=Il.transition,Il.transition=null;var a=bt;bt=1;var l=Ol;Ol|=4,xl.current=null,function(e,t){if(ei=Ht,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(S){n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=a+i),h!==s||0!==r&&3!==h.nodeType||(c=a+r),3===h.nodeType&&(a+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===i&&(l=a),f===s&&++d===r&&(c=a),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ht=!1,Za=t;null!==Za;)if(e=(t=Za).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Za=e;else for(;null!==Za;){t=Za;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,v=g.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:vo(t.type,m),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(o(163))}}catch(S){Pc(t,t.return,S)}if(null!==(e=t.sibling)){e.return=t.return,Za=e;break}Za=t.return}g=nl,nl=!1}(e,n),vl(n,e),pr(ti),Ht=!!ei,ti=ei=null,e.current=n,bl(n,e,i),Qe(),Ol=l,bt=a,Il.transition=s}else e.current=n;if(Kl&&(Kl=!1,$l=e,Ql=i),s=e.pendingLanes,0===s&&(Yl=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Wl)throw Wl=!1,e=Gl,Gl=null,e;0!==(1&Ql)&&0!==e.tag&&Ec(),s=e.pendingLanes,0!==(1&s)?e===Xl?Jl++:(Jl=0,Xl=e):Jl=0,Vi()}(e,t,n,r)}finally{Il.transition=i,bt=r}return null}function Ec(){if(null!==$l){var e=wt(Ql),t=Il.transition,n=bt;try{if(Il.transition=null,bt=16>e?16:e,null===$l)var r=!1;else{if(e=$l,$l=null,Ql=0,0!==(6&Ol))throw Error(o(331));var i=Ol;for(Ol|=4,Za=e.current;null!==Za;){var s=Za,a=s.child;if(0!==(16&Za.flags)){var l=s.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Za=u;null!==Za;){var d=Za;switch(d.tag){case 0:case 11:case 15:rl(8,d,s)}var h=d.child;if(null!==h)h.return=d,Za=h;else for(;null!==Za;){var f=(d=Za).sibling,p=d.return;if(sl(d),d===u){Za=null;break}if(null!==f){f.return=p,Za=f;break}Za=p}}}var g=s.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(null!==m)}}Za=s}}if(0!==(2064&s.subtreeFlags)&&null!==a)a.return=s,Za=a;else e:for(;null!==Za;){if(0!==(2048&(s=Za).flags))switch(s.tag){case 0:case 11:case 15:rl(9,s,s.return)}var y=s.sibling;if(null!==y){y.return=s.return,Za=y;break e}Za=s.return}}var b=e.current;for(Za=b;null!==Za;){var w=(a=Za).child;if(0!==(2064&a.subtreeFlags)&&null!==w)w.return=a,Za=w;else e:for(a=b;null!==Za;){if(0!==(2048&(l=Za).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(_){Pc(l,l.return,_)}if(l===a){Za=null;break e}var S=l.sibling;if(null!==S){S.return=l.return,Za=S;break e}Za=l.return}}if(Ol=i,Vi(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{bt=n,Il.transition=t}}return!1}function kc(e,t,n){e=Do(e,t=pa(0,t=ua(n,t),1),1),t=tc(),null!==e&&(vt(e,1,t),ic(e,t))}function Pc(e,t,n){if(3===e.tag)kc(e,e,n);else for(;null!==t;){if(3===t.tag){kc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Yl||!Yl.has(r))){t=Do(t,e=ga(t,e=ua(n,e),1),1),e=tc(),null!==t&&(vt(t,1,e),ic(t,e));break}}t=t.return}}function Ac(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Tl===e&&(Cl&n)===n&&(4===Dl||3===Dl&&(130023424&Cl)===Cl&&500>Je()-Vl?fc(e,0):Bl|=n),ic(e,t)}function xc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=tc();null!==(e=To(e,t))&&(vt(e,t,n),ic(e,n))}function Ic(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),xc(e,n)}function Oc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),xc(e,n)}function Tc(e,t){return Ye(e,t)}function Rc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cc(e,t,n,r){return new Rc(e,t,n,r)}function Nc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function jc(e,t){var n=e.alternate;return null===n?((n=Cc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dc(e,t,n,r,i,s){var a=2;if(r=e,"function"===typeof e)Nc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case E:return Fc(n.children,i,s,t);case k:a=8,i|=8;break;case P:return(e=Cc(12,n,t,2|i)).elementType=P,e.lanes=s,e;case O:return(e=Cc(13,n,t,i)).elementType=O,e.lanes=s,e;case T:return(e=Cc(19,n,t,i)).elementType=T,e.lanes=s,e;case N:return Lc(n,i,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case A:a=10;break e;case x:a=9;break e;case I:a=11;break e;case R:a=14;break e;case C:a=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Cc(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Fc(e,t,n,r){return(e=Cc(7,e,r,t)).lanes=n,e}function Lc(e,t,n,r){return(e=Cc(22,e,r,t)).elementType=N,e.lanes=n,e.stateNode={isHidden:!1},e}function Mc(e,t,n){return(e=Cc(6,e,null,t)).lanes=n,e}function Bc(e,t,n){return(t=Cc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zc(e,t,n,r,i,o,s,a,l){return e=new Uc(e,t,n,a,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Cc(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Co(o),e}function Vc(e){if(!e)return xi;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ci(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Ci(n))return Di(e,n,t)}return t}function qc(e,t,n,r,i,o,s,a,l){return(e=zc(n,r,!0,e,0,o,0,a,l)).context=Vc(null),n=e.current,(o=jo(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Do(n,o,i),e.current.lanes=i,vt(e,i,r),ic(e,r),e}function Hc(e,t,n,r){var i=t.current,o=tc(),s=nc(i);return n=Vc(n),null===t.context?t.context=n:t.pendingContext=n,(t=jo(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Do(i,t,s))&&(rc(e,i,s,o),Fo(e,i,s)),s}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Yc(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}kl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Oi.current)wa=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wa=!1,function(e,t,n){switch(t.tag){case 3:Ta(t),po();break;case 5:ss(t);break;case 1:Ci(t.type)&&Fi(t);break;case 4:is(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ai(yo,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ai(ls,1&ls.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ma(e,t,n):(Ai(ls,1&ls.current),null!==(e=Wa(e,t,n))?e.sibling:null);Ai(ls,1&ls.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qa(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ai(ls,ls.current),r)break;return null;case 22:case 23:return t.lanes=0,Pa(e,t,n)}return Wa(e,t,n)}(e,t,n);wa=0!==(131072&e.flags)}else wa=!1,io&&0!==(1048576&t.flags)&&Zi(t,Gi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ha(e,t),e=t.pendingProps;var i=Ri(t,Ii.current);Po(t,n),i=ks(null,t,r,e,i,n);var s=Ps();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ci(r)?(s=!0,Fi(t)):s=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Co(t),i.updater=Vo,t.stateNode=i,i._reactInternals=t,Go(t,r,e,n),t=Oa(null,t,r,!0,s,n)):(t.tag=0,io&&s&&eo(t),Sa(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ha(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Nc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===R)return 14}return 2}(r),e=vo(r,e),i){case 0:t=xa(null,t,r,e,n);break e;case 1:t=Ia(null,t,r,e,n);break e;case 11:t=_a(null,t,r,e,n);break e;case 14:t=Ea(null,t,r,vo(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,xa(e,t,r,i=t.elementType===r?i:vo(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ia(e,t,r,i=t.elementType===r?i:vo(r,i),n);case 3:e:{if(Ta(t),null===e)throw Error(o(387));r=t.pendingProps,i=(s=t.memoizedState).element,No(e,t),Mo(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Ra(e,t,r,n,i=ua(Error(o(423)),t));break e}if(r!==i){t=Ra(e,t,r,n,i=ua(Error(o(424)),t));break e}for(ro=ci(t.stateNode.containerInfo.firstChild),no=t,io=!0,oo=null,n=Xo(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(po(),r===i){t=Wa(e,t,n);break e}Sa(e,t,r,n)}t=t.child}return t;case 5:return ss(t),null===e&&co(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==s&&ni(r,s)&&(t.flags|=32),Aa(e,t),Sa(e,t,a,n),t.child;case 6:return null===e&&co(t),null;case 13:return Ma(e,t,n);case 4:return is(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Jo(t,null,r,n):Sa(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_a(e,t,r,i=t.elementType===r?i:vo(r,i),n);case 7:return Sa(e,t,t.pendingProps,n),t.child;case 8:case 12:return Sa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,Ai(yo,r._currentValue),r._currentValue=a,null!==s)if(ar(s.value,a)){if(s.children===i.children&&!Oi.current){t=Wa(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){a=s.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===s.tag){(c=jo(-1,n&-n)).tag=2;var u=s.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),ko(s.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===s.tag)a=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(o(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),ko(a,n,t),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}Sa(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Po(t,n),r=r(i=Ao(i)),t.flags|=1,Sa(e,t,r,n),t.child;case 14:return i=vo(r=t.type,t.pendingProps),Ea(e,t,r,i=vo(r.type,i),n);case 15:return ka(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:vo(r,i),Ha(e,t),t.tag=1,Ci(r)?(e=!0,Fi(t)):e=!1,Po(t,n),Ho(t,r,i),Go(t,r,i,n),Oa(null,t,r,!0,e,n);case 19:return qa(e,t,n);case 22:return Pa(e,t,n)}throw Error(o(156,t.tag))};var Kc="function"===typeof reportError?reportError:function(e){console.error(e)};function $c(e){this._internalRoot=e}function Qc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function eu(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if("function"===typeof i){var a=i;i=function(){var e=Wc(s);a.call(e)}}Hc(t,s,e,i)}else s=function(e,t,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var e=Wc(s);o.call(e)}}var s=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=s,e[pi]=s.current,Vr(8===e.nodeType?e.parentNode:e),dc(),s}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Wc(l);a.call(e)}}var l=zc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=l,e[pi]=l.current,Vr(8===e.nodeType?e.parentNode:e),dc((function(){Hc(t,l,n,r)})),l}(n,t,e,i,r);return Wc(s)}Qc.prototype.render=$c.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Hc(e,t,null,null)},Qc.prototype.unmount=$c.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc((function(){Hc(null,e,null,null)})),t[pi]=null}},Qc.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Nt.length&&0!==t&&t<Nt[n].priority;n++);Nt.splice(n,0,e),0===n&&Lt(e)}},St=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),ic(t,Je()),0===(6&Ol)&&(ql=Je()+500,Vi()))}break;case 13:dc((function(){var t=To(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Yc(e,1)}},_t=function(e){if(13===e.tag){var t=To(e,134217728);if(null!==t)rc(t,e,134217728,tc());Yc(e,134217728)}},Et=function(e){if(13===e.tag){var t=nc(e),n=To(e,t);if(null!==n)rc(n,e,t,tc());Yc(e,t)}},kt=function(){return bt},Pt=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},_e=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Si(r);if(!i)throw Error(o(90));Y(r),X(r,i)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=uc,Oe=dc;var tu={usingClientEntryPoint:!1,Events:[bi,wi,Si,Ae,xe,uc]},nu={findFiberByHostInstance:yi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{it=iu.inject(ru),ot=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(o(299));var n=!1,r="",i=Kc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Vr(8===e.nodeType?e.parentNode:e),new $c(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(o(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,s="",a=Kc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,s,a),e[pi]=t.current,Vr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Qc(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(o(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(o(40));return!!e._reactRootContainer&&(dc((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=uc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return eu(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},391:(e,t,n)=>{"use strict";var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},153:(e,t,n)=>{"use strict";var r=n(43),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,o={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)s.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:o,_owner:a.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var w=b.prototype=new y;w.constructor=b,g(w,v.prototype),w.isPureReactComponent=!0;var S=Array.isArray,_=Object.prototype.hasOwnProperty,E={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function P(e,t,r){var i,o={},s=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)_.call(t,i)&&!k.hasOwnProperty(i)&&(o[i]=t[i]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:n,type:e,key:s,ref:a,props:o,_owner:E.current}}function A(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var x=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function O(e,t,i,o,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return s=s(l=e),e=""===o?"."+I(l,0):o,S(s)?(i="",null!=e&&(i=e.replace(x,"$&/")+"/"),O(s,t,i,"",(function(e){return e}))):null!=s&&(A(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,i+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(x,"$&/")+"/")+e)),t.push(s)),1;if(l=0,o=""===o?".":o+":",S(e))for(var c=0;c<e.length;c++){var u=o+I(a=e[c],c);l+=O(a,t,i,u,s)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=O(a=a.value,t,i,u=o+I(a,c++),s);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function T(e,t,n){if(null==e)return e;var r=[],i=0;return O(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var C={current:null},N={transition:null},j={ReactCurrentDispatcher:C,ReactCurrentBatchConfig:N,ReactCurrentOwner:E};t.Children={map:T,forEach:function(e,t,n){T(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return T(e,(function(){t++})),t},toArray:function(e){return T(e,(function(e){return e}))||[]},only:function(e){if(!A(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=s,t.PureComponent=b,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=g({},e.props),o=e.key,s=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,a=E.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)_.call(t,c)&&!k.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:o,ref:s,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=P,t.createFactory=function(e){var t=P.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=A,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=N.transition;N.transition={};try{e()}finally{N.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return C.current.useCallback(e,t)},t.useContext=function(e){return C.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return C.current.useDeferredValue(e)},t.useEffect=function(e,t){return C.current.useEffect(e,t)},t.useId=function(){return C.current.useId()},t.useImperativeHandle=function(e,t,n){return C.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return C.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return C.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return C.current.useMemo(e,t)},t.useReducer=function(e,t,n){return C.current.useReducer(e,t,n)},t.useRef=function(e){return C.current.useRef(e)},t.useState=function(e){return C.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return C.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return C.current.useTransition()},t.version="18.2.0"},43:(e,t,n)=>{"use strict";e.exports=n(202)},579:(e,t,n)=>{"use strict";e.exports=n(153)},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,s=i>>>1;r<s;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>o(l,n))c<i&&0>o(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>o(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,g=!1,m=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function S(e){if(m=!1,w(e),!g)if(null!==r(c))g=!0,N(_);else{var t=r(u);null!==t&&j(S,t.startTime-e)}}function _(e,n){g=!1,m&&(m=!1,y(A),A=-1),p=!0;var o=f;try{for(w(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!O());){var s=h.callback;if("function"===typeof s){h.callback=null,f=h.priorityLevel;var a=s(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?h.callback=a:h===r(c)&&i(c),w(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&j(S,d.startTime-n),l=!1}return l}finally{h=null,f=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,k=!1,P=null,A=-1,x=5,I=-1;function O(){return!(t.unstable_now()-I<x)}function T(){if(null!==P){var e=t.unstable_now();I=e;var n=!0;try{n=P(!0,e)}finally{n?E():(k=!1,P=null)}}else k=!1}if("function"===typeof b)E=function(){b(T)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,C=R.port2;R.port1.onmessage=T,E=function(){C.postMessage(null)}}else E=function(){v(T,0)};function N(e){P=e,k||(k=!0,E())}function j(e,n){A=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,N(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(e.sortIndex=o,n(u,e),null===r(c)&&e===r(u)&&(m?(y(A),A=-1):m=!0,j(S,o-s))):(e.sortIndex=a,n(c,e),g||p||(g=!0,N(_))),e},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},853:(e,t,n)=>{"use strict";e.exports=n(234)},222:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(403));t.default=function(e,t){var n=null;if(!e||"string"!==typeof e)return n;var r=(0,i.default)(e),o="function"===typeof t;return r.forEach((function(e){if("declaration"===e.type){var r=e.property,i=e.value;o?t(r,i,e):i&&((n=n||{})[r]=i)}})),n}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+".cbb5972b.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="golem:";n.l=(r,i,o,s)=>{if(e[r])e[r].push(i);else{var a,l;if(void 0!==o)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+o){a=d;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+o),a.src=r),e[r]=[i];var h=(t,n)=>{a.onerror=a.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach((e=>e(n))),t)return t(n)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=h.bind(null,a.onerror),a.onload=h.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/degen/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var o=new Promise(((n,r)=>i=e[t]=[n,r]));r.push(i[2]=o);var s=n.p+n.u(t),a=new Error;n.l(s,(r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var o=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+o+": "+s+")",a.name="ChunkLoadError",a.type=o,a.request=s,i[1](a)}}),"chunk-"+t,t)}};var t=(t,r)=>{var i,o,s=r[0],a=r[1],l=r[2],c=0;if(s.some((t=>0!==e[t]))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(l)l(n)}for(t&&t(r);c<s.length;c++)o=s[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0},r=self.webpackChunkgolem=self.webpackChunkgolem||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e={};n.r(e),n.d(e,{boolean:()=>y,booleanish:()=>b,commaOrSpaceSeparated:()=>k,commaSeparated:()=>E,number:()=>S,overloadedBoolean:()=>w,spaceSeparated:()=>_});var t={};n.r(t),n.d(t,{attentionMarkers:()=>nn,contentInitial:()=>Qt,disable:()=>rn,document:()=>$t,flow:()=>Xt,flowInitial:()=>Jt,insideSpan:()=>tn,string:()=>Zt,text:()=>en});var r=n(43),i=n(391),o=n(301),s=n.n(o);const a=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,l=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,c={};function u(e,t){return((t||c).jsx?l:a).test(e)}const d=/[ \t\n\f\r]/g;function h(e){return""===e.replace(d,"")}class f{constructor(e,t,n){this.property=e,this.normal=t,n&&(this.space=n)}}function p(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new f(n,r,t)}function g(e){return e.toLowerCase()}f.prototype.property={},f.prototype.normal={},f.prototype.space=null;class m{constructor(e,t){this.property=e,this.attribute=t}}m.prototype.space=null,m.prototype.boolean=!1,m.prototype.booleanish=!1,m.prototype.overloadedBoolean=!1,m.prototype.number=!1,m.prototype.commaSeparated=!1,m.prototype.spaceSeparated=!1,m.prototype.commaOrSpaceSeparated=!1,m.prototype.mustUseProperty=!1,m.prototype.defined=!1;let v=0;const y=P(),b=P(),w=P(),S=P(),_=P(),E=P(),k=P();function P(){return 2**++v}const A=Object.keys(e);class x extends m{constructor(t,n,r,i){let o=-1;if(super(t,n),I(this,"space",i),"number"===typeof r)for(;++o<A.length;){const t=A[o];I(this,A[o],(r&e[t])===e[t])}}}function I(e,t,n){n&&(e[t]=n)}x.prototype.defined=!0;const O={}.hasOwnProperty;function T(e){const t={},n={};let r;for(r in e.properties)if(O.call(e.properties,r)){const i=e.properties[r],o=new x(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(o.mustUseProperty=!0),t[r]=o,n[g(r)]=r,n[g(o.attribute)]=r}return new f(t,n,e.space)}const R=T({space:"xlink",transform:(e,t)=>"xlink:"+t.slice(5).toLowerCase(),properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),C=T({space:"xml",transform:(e,t)=>"xml:"+t.slice(3).toLowerCase(),properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function N(e,t){return t in e?e[t]:t}function j(e,t){return N(e,t.toLowerCase())}const D=T({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:j,properties:{xmlns:null,xmlnsXLink:null}}),F=T({transform:(e,t)=>"role"===t?t:"aria-"+t.slice(4).toLowerCase(),properties:{ariaActiveDescendant:null,ariaAtomic:b,ariaAutoComplete:null,ariaBusy:b,ariaChecked:b,ariaColCount:S,ariaColIndex:S,ariaColSpan:S,ariaControls:_,ariaCurrent:null,ariaDescribedBy:_,ariaDetails:null,ariaDisabled:b,ariaDropEffect:_,ariaErrorMessage:null,ariaExpanded:b,ariaFlowTo:_,ariaGrabbed:b,ariaHasPopup:null,ariaHidden:b,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:_,ariaLevel:S,ariaLive:null,ariaModal:b,ariaMultiLine:b,ariaMultiSelectable:b,ariaOrientation:null,ariaOwns:_,ariaPlaceholder:null,ariaPosInSet:S,ariaPressed:b,ariaReadOnly:b,ariaRelevant:null,ariaRequired:b,ariaRoleDescription:_,ariaRowCount:S,ariaRowIndex:S,ariaRowSpan:S,ariaSelected:b,ariaSetSize:S,ariaSort:null,ariaValueMax:S,ariaValueMin:S,ariaValueNow:S,ariaValueText:null,role:null}}),L=T({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:j,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:E,acceptCharset:_,accessKey:_,action:null,allow:null,allowFullScreen:y,allowPaymentRequest:y,allowUserMedia:y,alt:null,as:null,async:y,autoCapitalize:null,autoComplete:_,autoFocus:y,autoPlay:y,blocking:_,capture:null,charSet:null,checked:y,cite:null,className:_,cols:S,colSpan:null,content:null,contentEditable:b,controls:y,controlsList:_,coords:S|E,crossOrigin:null,data:null,dateTime:null,decoding:null,default:y,defer:y,dir:null,dirName:null,disabled:y,download:w,draggable:b,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:y,formTarget:null,headers:_,height:S,hidden:y,high:S,href:null,hrefLang:null,htmlFor:_,httpEquiv:_,id:null,imageSizes:null,imageSrcSet:null,inert:y,inputMode:null,integrity:null,is:null,isMap:y,itemId:null,itemProp:_,itemRef:_,itemScope:y,itemType:_,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:y,low:S,manifest:null,max:null,maxLength:S,media:null,method:null,min:null,minLength:S,multiple:y,muted:y,name:null,nonce:null,noModule:y,noValidate:y,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:y,optimum:S,pattern:null,ping:_,placeholder:null,playsInline:y,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:y,referrerPolicy:null,rel:_,required:y,reversed:y,rows:S,rowSpan:S,sandbox:_,scope:null,scoped:y,seamless:y,selected:y,shadowRootDelegatesFocus:y,shadowRootMode:null,shape:null,size:S,sizes:null,slot:null,span:S,spellCheck:b,src:null,srcDoc:null,srcLang:null,srcSet:null,start:S,step:null,style:null,tabIndex:S,target:null,title:null,translate:null,type:null,typeMustMatch:y,useMap:null,value:b,width:S,wrap:null,align:null,aLink:null,archive:_,axis:null,background:null,bgColor:null,border:S,borderColor:null,bottomMargin:S,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:y,declare:y,event:null,face:null,frame:null,frameBorder:null,hSpace:S,leftMargin:S,link:null,longDesc:null,lowSrc:null,marginHeight:S,marginWidth:S,noResize:y,noHref:y,noShade:y,noWrap:y,object:null,profile:null,prompt:null,rev:null,rightMargin:S,rules:null,scheme:null,scrolling:b,standby:null,summary:null,text:null,topMargin:S,valueType:null,version:null,vAlign:null,vLink:null,vSpace:S,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:y,disableRemotePlayback:y,prefix:null,property:null,results:S,security:null,unselectable:null}}),M=T({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:N,properties:{about:k,accentHeight:S,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:S,amplitude:S,arabicForm:null,ascent:S,attributeName:null,attributeType:null,azimuth:S,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:S,by:null,calcMode:null,capHeight:S,className:_,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:S,diffuseConstant:S,direction:null,display:null,dur:null,divisor:S,dominantBaseline:null,download:y,dx:null,dy:null,edgeMode:null,editable:null,elevation:S,enableBackground:null,end:null,event:null,exponent:S,externalResourcesRequired:null,fill:null,fillOpacity:S,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:E,g2:E,glyphName:E,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:S,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:S,horizOriginX:S,horizOriginY:S,id:null,ideographic:S,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:S,k:S,k1:S,k2:S,k3:S,k4:S,kernelMatrix:k,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:S,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:S,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:S,overlineThickness:S,paintOrder:null,panose1:null,path:null,pathLength:S,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:_,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:S,pointsAtY:S,pointsAtZ:S,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:k,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:k,rev:k,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:k,requiredFeatures:k,requiredFonts:k,requiredFormats:k,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:S,specularExponent:S,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:S,strikethroughThickness:S,string:null,stroke:null,strokeDashArray:k,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:S,strokeOpacity:S,strokeWidth:null,style:null,surfaceScale:S,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:k,tabIndex:S,tableValues:null,target:null,targetX:S,targetY:S,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:k,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:S,underlineThickness:S,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:S,values:null,vAlphabetic:S,vMathematical:S,vectorEffect:null,vHanging:S,vIdeographic:S,version:null,vertAdvY:S,vertOriginX:S,vertOriginY:S,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:S,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),B=p([C,R,D,F,L],"html"),U=p([C,R,D,F,M],"svg"),z=/^data[-\w.:]+$/i,V=/-[a-z]/g,q=/[A-Z]/g;function H(e){return"-"+e.toLowerCase()}function W(e){return e.charAt(1).toUpperCase()}const G={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"};var Y=n(222);const K=Y.default||Y,$=J("end"),Q=J("start");function J(e){return function(t){const n=t&&t.position&&t.position[e]||{};if("number"===typeof n.line&&n.line>0&&"number"===typeof n.column&&n.column>0)return{line:n.line,column:n.column,offset:"number"===typeof n.offset&&n.offset>-1?n.offset:void 0}}}function X(e){return e&&"object"===typeof e?"position"in e||"type"in e?ee(e.position):"start"in e||"end"in e?ee(e):"line"in e||"column"in e?Z(e):"":""}function Z(e){return te(e&&e.line)+":"+te(e&&e.column)}function ee(e){return Z(e&&e.start)+"-"+Z(e&&e.end)}function te(e){return e&&"number"===typeof e?e:1}class ne extends Error{constructor(e,t,n){super(),"string"===typeof t&&(n=t,t=void 0);let r="",i={},o=!1;if(t&&(i="line"in t&&"column"in t||"start"in t&&"end"in t?{place:t}:"type"in t?{ancestors:[t],place:t.position}:{...t}),"string"===typeof e?r=e:!i.cause&&e&&(o=!0,r=e.message,i.cause=e),!i.ruleId&&!i.source&&"string"===typeof n){const e=n.indexOf(":");-1===e?i.ruleId=n:(i.source=n.slice(0,e),i.ruleId=n.slice(e+1))}if(!i.place&&i.ancestors&&i.ancestors){const e=i.ancestors[i.ancestors.length-1];e&&(i.place=e.position)}const s=i.place&&"start"in i.place?i.place.start:i.place;this.ancestors=i.ancestors||void 0,this.cause=i.cause||void 0,this.column=s?s.column:void 0,this.fatal=void 0,this.file,this.message=r,this.line=s?s.line:void 0,this.name=X(i.place)||"1:1",this.place=i.place||void 0,this.reason=this.message,this.ruleId=i.ruleId||void 0,this.source=i.source||void 0,this.stack=o&&i.cause&&"string"===typeof i.cause.stack?i.cause.stack:"",this.actual,this.expected,this.note,this.url}}ne.prototype.file="",ne.prototype.name="",ne.prototype.reason="",ne.prototype.message="",ne.prototype.stack="",ne.prototype.column=void 0,ne.prototype.line=void 0,ne.prototype.ancestors=void 0,ne.prototype.cause=void 0,ne.prototype.fatal=void 0,ne.prototype.place=void 0,ne.prototype.ruleId=void 0,ne.prototype.source=void 0;const re={}.hasOwnProperty,ie=new Map,oe=/[A-Z]/g,se=/-([a-z])/g,ae=new Set(["table","tbody","thead","tfoot","tr"]),le=new Set(["td","th"]),ce="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function ue(e,t){if(!t||void 0===t.Fragment)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if("function"!==typeof t.jsxDEV)throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=function(e,t){return n;function n(n,r,i,o){const s=Array.isArray(i.children),a=Q(n);return t(r,i,o,s,{columnNumber:a?a.column-1:void 0,fileName:e,lineNumber:a?a.line:void 0},void 0)}}(n,t.jsxDEV)}else{if("function"!==typeof t.jsx)throw new TypeError("Expected `jsx` in production options");if("function"!==typeof t.jsxs)throw new TypeError("Expected `jsxs` in production options");r=function(e,t,n){return r;function r(e,r,i,o){const s=Array.isArray(i.children)?n:t;return o?s(r,i,o):s(r,i)}}(0,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:!1!==t.passKeys,passNode:t.passNode||!1,schema:"svg"===t.space?U:B,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:!1!==t.tableCellAlignToStyle},o=de(i,e,void 0);return o&&"string"!==typeof o?o:i.create(e,i.Fragment,{children:o||void 0},void 0)}function de(e,t,n){return"element"===t.type?function(e,t,n){const r=e.schema;let i=r;"svg"===t.tagName.toLowerCase()&&"html"===r.space&&(i=U,e.schema=i);e.ancestors.push(t);const o=me(e,t.tagName,!1),s=function(e,t){const n={};let r,i;for(i in t.properties)if("children"!==i&&re.call(t.properties,i)){const o=ge(e,i,t.properties[i]);if(o){const[i,s]=o;e.tableCellAlignToStyle&&"align"===i&&"string"===typeof s&&le.has(t.tagName)?r=s:n[i]=s}}if(r){(n.style||(n.style={}))["css"===e.stylePropertyNameCase?"text-align":"textAlign"]=r}return n}(e,t);let a=pe(e,t);ae.has(t.tagName)&&(a=a.filter((function(e){return"string"!==typeof e||!("object"===typeof(t=e)?"text"===t.type&&h(t.value):h(t));var t})));return he(e,s,o,t),fe(s,a),e.ancestors.pop(),e.schema=r,e.create(t,o,s,n)}(e,t,n):"mdxFlowExpression"===t.type||"mdxTextExpression"===t.type?function(e,t){if(t.data&&t.data.estree&&e.evaluater){const n=t.data.estree.body[0];return n.type,e.evaluater.evaluateExpression(n.expression)}ve(e,t.position)}(e,t):"mdxJsxFlowElement"===t.type||"mdxJsxTextElement"===t.type?function(e,t,n){const r=e.schema;let i=r;"svg"===t.name&&"html"===r.space&&(i=U,e.schema=i);e.ancestors.push(t);const o=null===t.name?e.Fragment:me(e,t.name,!0),s=function(e,t){const n={};for(const r of t.attributes)if("mdxJsxExpressionAttribute"===r.type)if(r.data&&r.data.estree&&e.evaluater){const t=r.data.estree.body[0];t.type;const i=t.expression;i.type;const o=i.properties[0];o.type,Object.assign(n,e.evaluater.evaluateExpression(o.argument))}else ve(e,t.position);else{const i=r.name;let o;if(r.value&&"object"===typeof r.value)if(r.value.data&&r.value.data.estree&&e.evaluater){const t=r.value.data.estree.body[0];t.type,o=e.evaluater.evaluateExpression(t.expression)}else ve(e,t.position);else o=null===r.value||r.value;n[i]=o}return n}(e,t),a=pe(e,t);return he(e,s,o,t),fe(s,a),e.ancestors.pop(),e.schema=r,e.create(t,o,s,n)}(e,t,n):"mdxjsEsm"===t.type?function(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);ve(e,t.position)}(e,t):"root"===t.type?function(e,t,n){const r={};return fe(r,pe(e,t)),e.create(t,e.Fragment,r,n)}(e,t,n):"text"===t.type?function(e,t){return t.value}(0,t):void 0}function he(e,t,n,r){"string"!==typeof n&&n!==e.Fragment&&e.passNode&&(t.node=r)}function fe(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function pe(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:ie;for(;++r<t.children.length;){const o=t.children[r];let s;if(e.passKeys){const e="element"===o.type?o.tagName:"mdxJsxFlowElement"===o.type||"mdxJsxTextElement"===o.type?o.name:void 0;if(e){const t=i.get(e)||0;s=e+"-"+t,i.set(e,t+1)}}const a=de(e,o,s);void 0!==a&&n.push(a)}return n}function ge(e,t,n){const r=function(e,t){const n=g(t);let r=t,i=m;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&"data"===n.slice(0,4)&&z.test(t)){if("-"===t.charAt(4)){const e=t.slice(5).replace(V,W);r="data"+e.charAt(0).toUpperCase()+e.slice(1)}else{const e=t.slice(4);if(!V.test(e)){let n=e.replace(q,H);"-"!==n.charAt(0)&&(n="-"+n),t="data"+n}}i=x}return new i(r,t)}(e.schema,t);if(!(null===n||void 0===n||"number"===typeof n&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?function(e,t){const n=t||{};return(""===e[e.length-1]?[...e,""]:e).join((n.padRight?" ":"")+","+(!1===n.padLeft?"":" ")).trim()}(n):n.join(" ").trim()),"style"===r.property){let t="object"===typeof n?n:function(e,t){const n={};try{K(t,r)}catch(i){if(!e.ignoreInvalidStyle){const t=i,n=new ne("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:t,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=ce+"#cannot-parse-style-attribute",n}}return n;function r(e,t){let r=e;"--"!==r.slice(0,2)&&("-ms-"===r.slice(0,4)&&(r="ms-"+r.slice(4)),r=r.replace(se,be)),n[r]=t}}(e,String(n));return"css"===e.stylePropertyNameCase&&(t=function(e){const t={};let n;for(n in e)re.call(e,n)&&(t[ye(n)]=e[n]);return t}(t)),["style",t]}return["react"===e.elementAttributeNameCase&&r.space?G[r.property]||r.property:r.attribute,n]}}function me(e,t,n){let r;if(n)if(t.includes(".")){const e=t.split(".");let n,i=-1;for(;++i<e.length;){const t=u(e[i])?{type:"Identifier",name:e[i]}:{type:"Literal",value:e[i]};n=n?{type:"MemberExpression",object:n,property:t,computed:Boolean(i&&"Literal"===t.type),optional:!1}:t}r=n}else r=u(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};else r={type:"Literal",value:t};if("Literal"===r.type){const t=r.value;return re.call(e.components,t)?e.components[t]:t}if(e.evaluater)return e.evaluater.evaluateExpression(r);ve(e)}function ve(e,t){const n=new ne("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=ce+"#cannot-handle-mdx-estrees-without-createevaluater",n}function ye(e){let t=e.replace(oe,we);return"ms-"===t.slice(0,3)&&(t="-"+t),t}function be(e,t){return t.toUpperCase()}function we(e){return"-"+e.toLowerCase()}const Se={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]};var _e=n(579);const Ee={};function ke(e,t,n){if(function(e){return Boolean(e&&"object"===typeof e)}(e)){if("value"in e)return"html"!==e.type||n?e.value:"";if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Pe(e.children,t,n)}return Array.isArray(e)?Pe(e,t,n):""}function Pe(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=ke(e[i],t,n);return r.join("")}function Ae(e,t,n,r){const i=e.length;let o,s=0;if(t=t<0?-t>i?0:i+t:t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function xe(e,t){return e.length>0?(Ae(e,e.length,0,t),e):t}function Ie(e){const t={};let n,r,i,o,s,a,l,c=-1;for(;++c<e.length;){for(;c in t;)c=t[c];if(n=e[c],c&&"chunkFlow"===n[1].type&&"listItemPrefix"===e[c-1][1].type&&(a=n[1]._tokenizer.events,i=0,i<a.length&&"lineEndingBlank"===a[i][1].type&&(i+=2),i<a.length&&"content"===a[i][1].type))for(;++i<a.length&&"content"!==a[i][1].type;)"chunkText"===a[i][1].type&&(a[i][1]._isInFirstContentOfListItem=!0,i++);if("enter"===n[0])n[1].contentType&&(Object.assign(t,Oe(e,c)),c=t[c],l=!0);else if(n[1]._container){for(i=c,r=void 0;i--&&(o=e[i],"lineEnding"===o[1].type||"lineEndingBlank"===o[1].type);)"enter"===o[0]&&(r&&(e[r][1].type="lineEndingBlank"),o[1].type="lineEnding",r=i);r&&(n[1].end=Object.assign({},e[r][1].start),s=e.slice(r,c),s.unshift(n),Ae(e,r,c-r+1,s))}}return!l}function Oe(e,t){const n=e[t][1],r=e[t][2];let i=t-1;const o=[],s=n._tokenizer||r.parser[n.contentType](n.start),a=s.events,l=[],c={};let u,d,h=-1,f=n,p=0,g=0;const m=[g];for(;f;){for(;e[++i][1]!==f;);o.push(i),f._tokenizer||(u=r.sliceStream(f),f.next||u.push(null),d&&s.defineSkip(f.start),f._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=!0),s.write(u),f._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=void 0)),d=f,f=f.next}for(f=n;++h<a.length;)"exit"===a[h][0]&&"enter"===a[h-1][0]&&a[h][1].type===a[h-1][1].type&&a[h][1].start.line!==a[h][1].end.line&&(g=h+1,m.push(g),f._tokenizer=void 0,f.previous=void 0,f=f.next);for(s.events=[],f?(f._tokenizer=void 0,f.previous=void 0):m.pop(),h=m.length;h--;){const t=a.slice(m[h],m[h+1]),n=o.pop();l.unshift([n,n+t.length-1]),Ae(e,n,2,t)}for(h=-1;++h<l.length;)c[p+l[h][0]]=p+l[h][1],p+=l[h][1]-l[h][0]-1;return c}const Te={}.hasOwnProperty;function Re(e,t){let n;for(n in t){const r=(Te.call(e,n)?e[n]:void 0)||(e[n]={}),i=t[n];let o;if(i)for(o in i){Te.call(r,o)||(r[o]=[]);const e=i[o];Ce(r[o],Array.isArray(e)?e:e?[e]:[])}}}function Ce(e,t){let n=-1;const r=[];for(;++n<t.length;)("after"===t[n].add?e:r).push(t[n]);Ae(e,0,0,r)}const Ne=We(/[A-Za-z]/),je=We(/[\dA-Za-z]/),De=We(/[#-'*+\--9=?A-Z^-~]/);function Fe(e){return null!==e&&(e<32||127===e)}const Le=We(/\d/),Me=We(/[\dA-Fa-f]/),Be=We(/[!-/:-@[-`{-~]/);function Ue(e){return null!==e&&e<-2}function ze(e){return null!==e&&(e<0||32===e)}function Ve(e){return-2===e||-1===e||32===e}const qe=We(/\p{P}|\p{S}/u),He=We(/\s/);function We(e){return function(t){return null!==t&&t>-1&&e.test(String.fromCharCode(t))}}function Ge(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let o=0;return function(r){if(Ve(r))return e.enter(n),s(r);return t(r)};function s(r){return Ve(r)&&o++<i?(e.consume(r),s):(e.exit(n),t(r))}}const Ye={tokenize:function(e){const t=e.attempt(this.parser.constructs.contentInitial,(function(n){if(null===n)return void e.consume(n);return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),Ge(e,t,"linePrefix")}),(function(t){return e.enter("paragraph"),r(t)}));let n;return t;function r(t){const r=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=r),n=r,i(t)}function i(t){return null===t?(e.exit("chunkText"),e.exit("paragraph"),void e.consume(t)):Ue(t)?(e.consume(t),e.exit("chunkText"),r):(e.consume(t),i)}}};const Ke={tokenize:function(e){const t=this,n=[];let r,i,o,s=0;return a;function a(r){if(s<n.length){const i=n[s];return t.containerState=i[1],e.attempt(i[0].continuation,l,c)(r)}return c(r)}function l(e){if(s++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,r&&y();const n=t.events.length;let i,o=n;for(;o--;)if("exit"===t.events[o][0]&&"chunkFlow"===t.events[o][1].type){i=t.events[o][1].end;break}v(s);let a=n;for(;a<t.events.length;)t.events[a][1].end=Object.assign({},i),a++;return Ae(t.events,o+1,0,t.events.slice(n)),t.events.length=a,c(e)}return a(e)}function c(i){if(s===n.length){if(!r)return h(i);if(r.currentConstruct&&r.currentConstruct.concrete)return p(i);t.interrupt=Boolean(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return t.containerState={},e.check($e,u,d)(i)}function u(e){return r&&y(),v(s),h(e)}function d(e){return t.parser.lazy[t.now().line]=s!==n.length,o=t.now().offset,p(e)}function h(n){return t.containerState={},e.attempt($e,f,p)(n)}function f(e){return s++,n.push([t.currentConstruct,t.containerState]),h(e)}function p(n){return null===n?(r&&y(),v(0),void e.consume(n)):(r=r||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:i,_tokenizer:r}),g(n))}function g(n){return null===n?(m(e.exit("chunkFlow"),!0),v(0),void e.consume(n)):Ue(n)?(e.consume(n),m(e.exit("chunkFlow")),s=0,t.interrupt=void 0,a):(e.consume(n),g)}function m(e,n){const a=t.sliceStream(e);if(n&&a.push(null),e.previous=i,i&&(i.next=e),i=e,r.defineSkip(e.start),r.write(a),t.parser.lazy[e.start.line]){let e=r.events.length;for(;e--;)if(r.events[e][1].start.offset<o&&(!r.events[e][1].end||r.events[e][1].end.offset>o))return;const n=t.events.length;let i,a,l=n;for(;l--;)if("exit"===t.events[l][0]&&"chunkFlow"===t.events[l][1].type){if(i){a=t.events[l][1].end;break}i=!0}for(v(s),e=n;e<t.events.length;)t.events[e][1].end=Object.assign({},a),e++;Ae(t.events,l+1,0,t.events.slice(n)),t.events.length=e}}function v(r){let i=n.length;for(;i-- >r;){const r=n[i];t.containerState=r[1],r[0].exit.call(t,e)}n.length=r}function y(){r.write([null]),i=void 0,r=void 0,t.containerState._closeFlow=void 0}}},$e={tokenize:function(e,t,n){return Ge(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}};const Qe={tokenize:function(e,t,n){return function(t){return Ve(t)?Ge(e,r,"linePrefix")(t):r(t)};function r(e){return null===e||Ue(e)?t(e):n(e)}},partial:!0};const Je={tokenize:function(e,t){let n;return function(t){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),r(t)};function r(t){return null===t?i(t):Ue(t)?e.check(Xe,o,i)(t):(e.consume(t),r)}function i(n){return e.exit("chunkContent"),e.exit("content"),t(n)}function o(t){return e.consume(t),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,r}},resolve:function(e){return Ie(e),e}},Xe={tokenize:function(e,t,n){const r=this;return function(t){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),Ge(e,i,"linePrefix")};function i(i){if(null===i||Ue(i))return n(i);const o=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&o&&"linePrefix"===o[1].type&&o[2].sliceSerialize(o[1],!0).length>=4?t(i):e.interrupt(r.parser.constructs.flow,n,t)(i)}},partial:!0};const Ze={tokenize:function(e){const t=this,n=e.attempt(Qe,(function(r){if(null===r)return void e.consume(r);return e.enter("lineEndingBlank"),e.consume(r),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}),e.attempt(this.parser.constructs.flowInitial,r,Ge(e,e.attempt(this.parser.constructs.flow,r,e.attempt(Je,r)),"linePrefix")));return n;function r(r){if(null!==r)return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),t.currentConstruct=void 0,n;e.consume(r)}}};const et={resolveAll:it()},tt=rt("string"),nt=rt("text");function rt(e){return{tokenize:function(t){const n=this,r=this.parser.constructs[e],i=t.attempt(r,o,s);return o;function o(e){return l(e)?i(e):s(e)}function s(e){if(null!==e)return t.enter("data"),t.consume(e),a;t.consume(e)}function a(e){return l(e)?(t.exit("data"),i(e)):(t.consume(e),a)}function l(e){if(null===e)return!0;const t=r[e];let i=-1;if(t)for(;++i<t.length;){const e=t[i];if(!e.previous||e.previous.call(n,n.previous))return!0}return!1}},resolveAll:it("text"===e?ot:void 0)}}function it(e){return function(t,n){let r,i=-1;for(;++i<=t.length;)void 0===r?t[i]&&"data"===t[i][1].type&&(r=i,i++):t[i]&&"data"===t[i][1].type||(i!==r+2&&(t[r][1].end=t[i-1][1].end,t.splice(r+2,i-r-2),i=r+2),r=void 0);return e?e(t,n):t}}function ot(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||"lineEnding"===e[n][1].type)&&"data"===e[n-1][1].type){const r=e[n-1][1],i=t.sliceStream(r);let o,s=i.length,a=-1,l=0;for(;s--;){const e=i[s];if("string"===typeof e){for(a=e.length;32===e.charCodeAt(a-1);)l++,a--;if(a)break;a=-1}else if(-2===e)o=!0,l++;else if(-1!==e){s++;break}}if(l){const i={type:n===e.length||o||l<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-l,offset:r.end.offset-l,_index:r.start._index+s,_bufferIndex:s?a:r.start._bufferIndex+a},end:Object.assign({},r.end)};r.end=Object.assign({},i.start),r.start.offset===r.end.offset?Object.assign(r,i):(e.splice(n,0,["enter",i,t],["exit",i,t]),n+=2)}n++}return e}function st(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const o=e[i].resolveAll;o&&!r.includes(o)&&(t=o(t,n),r.push(o))}return t}function at(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},o=[];let s=[],a=[],l=!0;const c={consume:function(e){Ue(e)?(r.line++,r.column=1,r.offset+=-3===e?2:1,w()):-1!==e&&(r.column++,r.offset++);r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===s[r._index].length&&(r._bufferIndex=-1,r._index++));u.previous=e,l=!0},enter:function(e,t){const n=t||{};return n.type=e,n.start=p(),u.events.push(["enter",n,u]),a.push(n),n},exit:function(e){const t=a.pop();return t.end=p(),u.events.push(["exit",t,u]),t},attempt:y((function(e,t){b(e,t.from)})),check:y(v),interrupt:y(v,{interrupt:!0})},u={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:f,sliceSerialize:function(e,t){return function(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const o=e[n];let s;if("string"===typeof o)s=o;else switch(o){case-5:s="\r";break;case-4:s="\n";break;case-3:s="\r\n";break;case-2:s=t?" ":"\t";break;case-1:if(!t&&i)continue;s=" ";break;default:s=String.fromCharCode(o)}i=-2===o,r.push(s)}return r.join("")}(f(e),t)},now:p,defineSkip:function(e){i[e.line]=e.column,w()},write:function(e){if(s=xe(s,e),g(),null!==s[s.length-1])return[];return b(t,0),u.events=st(o,u.events,u),u.events}};let d,h=t.tokenize.call(u,c);return t.resolveAll&&o.push(t),u;function f(e){return function(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,o=t.end._bufferIndex;let s;if(n===i)s=[e[n].slice(r,o)];else{if(s=e.slice(n,i),r>-1){const e=s[0];"string"===typeof e?s[0]=e.slice(r):s.shift()}o>0&&s.push(e[i].slice(0,o))}return s}(s,e)}function p(){const{line:e,column:t,offset:n,_index:i,_bufferIndex:o}=r;return{line:e,column:t,offset:n,_index:i,_bufferIndex:o}}function g(){let e;for(;r._index<s.length;){const t=s[r._index];if("string"===typeof t)for(e=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===e&&r._bufferIndex<t.length;)m(t.charCodeAt(r._bufferIndex));else m(t)}}function m(e){l=void 0,d=e,h=h(e)}function v(e,t){t.restore()}function y(e,t){return function(n,i,o){let s,d,h,f;return Array.isArray(n)?g(n):"tokenize"in n?g([n]):function(e){return t;function t(t){const n=null!==t&&e[t],r=null!==t&&e.null;return g([...Array.isArray(n)?n:n?[n]:[],...Array.isArray(r)?r:r?[r]:[]])(t)}}(n);function g(e){return s=e,d=0,0===e.length?o:m(e[d])}function m(e){return function(n){f=function(){const e=p(),t=u.previous,n=u.currentConstruct,i=u.events.length,o=Array.from(a);return{restore:s,from:i};function s(){r=e,u.previous=t,u.currentConstruct=n,u.events.length=i,a=o,w()}}(),h=e,e.partial||(u.currentConstruct=e);if(e.name&&u.parser.constructs.disable.null.includes(e.name))return y(n);return e.tokenize.call(t?Object.assign(Object.create(u),t):u,c,v,y)(n)}}function v(t){return l=!0,e(h,f),i}function y(e){return l=!0,f.restore(),++d<s.length?m(s[d]):o}}}function b(e,t){e.resolveAll&&!o.includes(e)&&o.push(e),e.resolve&&Ae(u.events,t,u.events.length-t,e.resolve(u.events.slice(t),u)),e.resolveTo&&(u.events=e.resolveTo(u.events,u))}function w(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}const lt={name:"thematicBreak",tokenize:function(e,t,n){let r,i=0;return function(t){return e.enter("thematicBreak"),function(e){return r=e,o(e)}(t)};function o(o){return o===r?(e.enter("thematicBreakSequence"),s(o)):i>=3&&(null===o||Ue(o))?(e.exit("thematicBreak"),t(o)):n(o)}function s(t){return t===r?(e.consume(t),i++,s):(e.exit("thematicBreakSequence"),Ve(t)?Ge(e,o,"whitespace")(t):o(t))}}};const ct={name:"list",tokenize:function(e,t,n){const r=this,i=r.events[r.events.length-1];let o=i&&"linePrefix"===i[1].type?i[2].sliceSerialize(i[1],!0).length:0,s=0;return function(t){const i=r.containerState.type||(42===t||43===t||45===t?"listUnordered":"listOrdered");if("listUnordered"===i?!r.containerState.marker||t===r.containerState.marker:Le(t)){if(r.containerState.type||(r.containerState.type=i,e.enter(i,{_container:!0})),"listUnordered"===i)return e.enter("listItemPrefix"),42===t||45===t?e.check(lt,n,l)(t):l(t);if(!r.interrupt||49===t)return e.enter("listItemPrefix"),e.enter("listItemValue"),a(t)}return n(t)};function a(t){return Le(t)&&++s<10?(e.consume(t),a):(!r.interrupt||s<2)&&(r.containerState.marker?t===r.containerState.marker:41===t||46===t)?(e.exit("listItemValue"),l(t)):n(t)}function l(t){return e.enter("listItemMarker"),e.consume(t),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||t,e.check(Qe,r.interrupt?n:c,e.attempt(ut,d,u))}function c(e){return r.containerState.initialBlankLine=!0,o++,d(e)}function u(t){return Ve(t)?(e.enter("listItemPrefixWhitespace"),e.consume(t),e.exit("listItemPrefixWhitespace"),d):n(t)}function d(n){return r.containerState.size=o+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(n)}},continuation:{tokenize:function(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(Qe,i,o);function i(n){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Ge(e,t,"listItemIndent",r.containerState.size+1)(n)}function o(n){return r.containerState.furtherBlankLines||!Ve(n)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,s(n)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(dt,t,s)(n))}function s(i){return r.containerState._closeFlow=!0,r.interrupt=void 0,Ge(e,e.attempt(ct,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(i)}}},exit:function(e){e.exit(this.containerState.type)}},ut={tokenize:function(e,t,n){const r=this;return Ge(e,(function(e){const i=r.events[r.events.length-1];return!Ve(e)&&i&&"listItemPrefixWhitespace"===i[1].type?t(e):n(e)}),"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5)},partial:!0},dt={tokenize:function(e,t,n){const r=this;return Ge(e,(function(e){const i=r.events[r.events.length-1];return i&&"listItemIndent"===i[1].type&&i[2].sliceSerialize(i[1],!0).length===r.containerState.size?t(e):n(e)}),"listItemIndent",r.containerState.size+1)},partial:!0};const ht={name:"blockQuote",tokenize:function(e,t,n){const r=this;return function(t){if(62===t){const n=r.containerState;return n.open||(e.enter("blockQuote",{_container:!0}),n.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(t),e.exit("blockQuoteMarker"),i}return n(t)};function i(n){return Ve(n)?(e.enter("blockQuotePrefixWhitespace"),e.consume(n),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(n))}},continuation:{tokenize:function(e,t,n){const r=this;return function(t){if(Ve(t))return Ge(e,i,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t);return i(t)};function i(r){return e.attempt(ht,t,n)(r)}}},exit:function(e){e.exit("blockQuote")}};function ft(e,t,n,r,i,o,s,a,l){const c=l||Number.POSITIVE_INFINITY;let u=0;return function(t){if(60===t)return e.enter(r),e.enter(i),e.enter(o),e.consume(t),e.exit(o),d;if(null===t||32===t||41===t||Fe(t))return n(t);return e.enter(r),e.enter(s),e.enter(a),e.enter("chunkString",{contentType:"string"}),p(t)};function d(n){return 62===n?(e.enter(o),e.consume(n),e.exit(o),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(n))}function h(t){return 62===t?(e.exit("chunkString"),e.exit(a),d(t)):null===t||60===t||Ue(t)?n(t):(e.consume(t),92===t?f:h)}function f(t){return 60===t||62===t||92===t?(e.consume(t),h):h(t)}function p(i){return u||null!==i&&41!==i&&!ze(i)?u<c&&40===i?(e.consume(i),u++,p):41===i?(e.consume(i),u--,p):null===i||32===i||40===i||Fe(i)?n(i):(e.consume(i),92===i?g:p):(e.exit("chunkString"),e.exit(a),e.exit(s),e.exit(r),t(i))}function g(t){return 40===t||41===t||92===t?(e.consume(t),p):p(t)}}function pt(e,t,n,r,i,o){const s=this;let a,l=0;return function(t){return e.enter(r),e.enter(i),e.consume(t),e.exit(i),e.enter(o),c};function c(d){return l>999||null===d||91===d||93===d&&!a||94===d&&!l&&"_hiddenFootnoteSupport"in s.parser.constructs?n(d):93===d?(e.exit(o),e.enter(i),e.consume(d),e.exit(i),e.exit(r),t):Ue(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),u(d))}function u(t){return null===t||91===t||93===t||Ue(t)||l++>999?(e.exit("chunkString"),c(t)):(e.consume(t),a||(a=!Ve(t)),92===t?d:u)}function d(t){return 91===t||92===t||93===t?(e.consume(t),l++,u):u(t)}}function gt(e,t,n,r,i,o){let s;return function(t){if(34===t||39===t||40===t)return e.enter(r),e.enter(i),e.consume(t),e.exit(i),s=40===t?41:t,a;return n(t)};function a(n){return n===s?(e.enter(i),e.consume(n),e.exit(i),e.exit(r),t):(e.enter(o),l(n))}function l(t){return t===s?(e.exit(o),a(s)):null===t?n(t):Ue(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),Ge(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(t))}function c(t){return t===s||null===t||Ue(t)?(e.exit("chunkString"),l(t)):(e.consume(t),92===t?u:c)}function u(t){return t===s||92===t?(e.consume(t),c):c(t)}}function mt(e,t){let n;return function r(i){if(Ue(i))return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r;if(Ve(i))return Ge(e,r,n?"linePrefix":"lineSuffix")(i);return t(i)}}function vt(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const yt={name:"definition",tokenize:function(e,t,n){const r=this;let i;return function(t){return e.enter("definition"),function(t){return pt.call(r,e,o,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(t)}(t)};function o(t){return i=vt(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),s):n(t)}function s(t){return ze(t)?mt(e,a)(t):a(t)}function a(t){return ft(e,l,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(t)}function l(t){return e.attempt(bt,c,c)(t)}function c(t){return Ve(t)?Ge(e,u,"whitespace")(t):u(t)}function u(o){return null===o||Ue(o)?(e.exit("definition"),r.parser.defined.push(i),t(o)):n(o)}}},bt={tokenize:function(e,t,n){return function(t){return ze(t)?mt(e,r)(t):n(t)};function r(t){return gt(e,i,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(t)}function i(t){return Ve(t)?Ge(e,o,"whitespace")(t):o(t)}function o(e){return null===e||Ue(e)?t(e):n(e)}},partial:!0};const wt={name:"codeIndented",tokenize:function(e,t,n){const r=this;return function(t){return e.enter("codeIndented"),Ge(e,i,"linePrefix",5)(t)};function i(e){const t=r.events[r.events.length-1];return t&&"linePrefix"===t[1].type&&t[2].sliceSerialize(t[1],!0).length>=4?o(e):n(e)}function o(t){return null===t?a(t):Ue(t)?e.attempt(St,o,a)(t):(e.enter("codeFlowValue"),s(t))}function s(t){return null===t||Ue(t)?(e.exit("codeFlowValue"),o(t)):(e.consume(t),s)}function a(n){return e.exit("codeIndented"),t(n)}}},St={tokenize:function(e,t,n){const r=this;return i;function i(t){return r.parser.lazy[r.now().line]?n(t):Ue(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),i):Ge(e,o,"linePrefix",5)(t)}function o(e){const o=r.events[r.events.length-1];return o&&"linePrefix"===o[1].type&&o[2].sliceSerialize(o[1],!0).length>=4?t(e):Ue(e)?i(e):n(e)}},partial:!0};const _t={name:"headingAtx",tokenize:function(e,t,n){let r=0;return function(t){return e.enter("atxHeading"),function(t){return e.enter("atxHeadingSequence"),i(t)}(t)};function i(t){return 35===t&&r++<6?(e.consume(t),i):null===t||ze(t)?(e.exit("atxHeadingSequence"),o(t)):n(t)}function o(n){return 35===n?(e.enter("atxHeadingSequence"),s(n)):null===n||Ue(n)?(e.exit("atxHeading"),t(n)):Ve(n)?Ge(e,o,"whitespace")(n):(e.enter("atxHeadingText"),a(n))}function s(t){return 35===t?(e.consume(t),s):(e.exit("atxHeadingSequence"),o(t))}function a(t){return null===t||35===t||ze(t)?(e.exit("atxHeadingText"),o(t)):(e.consume(t),a)}},resolve:function(e,t){let n,r,i=e.length-2,o=3;"whitespace"===e[o][1].type&&(o+=2);i-2>o&&"whitespace"===e[i][1].type&&(i-=2);"atxHeadingSequence"===e[i][1].type&&(o===i-1||i-4>o&&"whitespace"===e[i-2][1].type)&&(i-=o+1===i?2:4);i>o&&(n={type:"atxHeadingText",start:e[o][1].start,end:e[i][1].end},r={type:"chunkText",start:e[o][1].start,end:e[i][1].end,contentType:"text"},Ae(e,o,i-o+1,[["enter",n,t],["enter",r,t],["exit",r,t],["exit",n,t]]));return e}};const Et={name:"setextUnderline",tokenize:function(e,t,n){const r=this;let i;return function(t){let s,a=r.events.length;for(;a--;)if("lineEnding"!==r.events[a][1].type&&"linePrefix"!==r.events[a][1].type&&"content"!==r.events[a][1].type){s="paragraph"===r.events[a][1].type;break}if(!r.parser.lazy[r.now().line]&&(r.interrupt||s))return e.enter("setextHeadingLine"),i=t,function(t){return e.enter("setextHeadingLineSequence"),o(t)}(t);return n(t)};function o(t){return t===i?(e.consume(t),o):(e.exit("setextHeadingLineSequence"),Ve(t)?Ge(e,s,"lineSuffix")(t):s(t))}function s(r){return null===r||Ue(r)?(e.exit("setextHeadingLine"),t(r)):n(r)}},resolveTo:function(e,t){let n,r,i,o=e.length;for(;o--;)if("enter"===e[o][0]){if("content"===e[o][1].type){n=o;break}"paragraph"===e[o][1].type&&(r=o)}else"content"===e[o][1].type&&e.splice(o,1),i||"definition"!==e[o][1].type||(i=o);const s={type:"setextHeading",start:Object.assign({},e[r][1].start),end:Object.assign({},e[e.length-1][1].end)};e[r][1].type="setextHeadingText",i?(e.splice(r,0,["enter",s,t]),e.splice(i+1,0,["exit",e[n][1],t]),e[n][1].end=Object.assign({},e[i][1].end)):e[n][1]=s;return e.push(["exit",s,t]),e}};const kt=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Pt=["pre","script","style","textarea"],At={name:"htmlFlow",tokenize:function(e,t,n){const r=this;let i,o,s,a,l;return function(t){return function(t){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(t),c}(t)};function c(a){return 33===a?(e.consume(a),u):47===a?(e.consume(a),o=!0,f):63===a?(e.consume(a),i=3,r.interrupt?t:j):Ne(a)?(e.consume(a),s=String.fromCharCode(a),p):n(a)}function u(o){return 45===o?(e.consume(o),i=2,d):91===o?(e.consume(o),i=5,a=0,h):Ne(o)?(e.consume(o),i=4,r.interrupt?t:j):n(o)}function d(i){return 45===i?(e.consume(i),r.interrupt?t:j):n(i)}function h(i){const o="CDATA[";return i===o.charCodeAt(a++)?(e.consume(i),6===a?r.interrupt?t:A:h):n(i)}function f(t){return Ne(t)?(e.consume(t),s=String.fromCharCode(t),p):n(t)}function p(a){if(null===a||47===a||62===a||ze(a)){const l=47===a,c=s.toLowerCase();return l||o||!Pt.includes(c)?kt.includes(s.toLowerCase())?(i=6,l?(e.consume(a),g):r.interrupt?t(a):A(a)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(a):o?m(a):v(a)):(i=1,r.interrupt?t(a):A(a))}return 45===a||je(a)?(e.consume(a),s+=String.fromCharCode(a),p):n(a)}function g(i){return 62===i?(e.consume(i),r.interrupt?t:A):n(i)}function m(t){return Ve(t)?(e.consume(t),m):k(t)}function v(t){return 47===t?(e.consume(t),k):58===t||95===t||Ne(t)?(e.consume(t),y):Ve(t)?(e.consume(t),v):k(t)}function y(t){return 45===t||46===t||58===t||95===t||je(t)?(e.consume(t),y):b(t)}function b(t){return 61===t?(e.consume(t),w):Ve(t)?(e.consume(t),b):v(t)}function w(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),l=t,S):Ve(t)?(e.consume(t),w):_(t)}function S(t){return t===l?(e.consume(t),l=null,E):null===t||Ue(t)?n(t):(e.consume(t),S)}function _(t){return null===t||34===t||39===t||47===t||60===t||61===t||62===t||96===t||ze(t)?b(t):(e.consume(t),_)}function E(e){return 47===e||62===e||Ve(e)?v(e):n(e)}function k(t){return 62===t?(e.consume(t),P):n(t)}function P(t){return null===t||Ue(t)?A(t):Ve(t)?(e.consume(t),P):n(t)}function A(t){return 45===t&&2===i?(e.consume(t),T):60===t&&1===i?(e.consume(t),R):62===t&&4===i?(e.consume(t),D):63===t&&3===i?(e.consume(t),j):93===t&&5===i?(e.consume(t),N):!Ue(t)||6!==i&&7!==i?null===t||Ue(t)?(e.exit("htmlFlowData"),x(t)):(e.consume(t),A):(e.exit("htmlFlowData"),e.check(xt,F,x)(t))}function x(t){return e.check(It,I,F)(t)}function I(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),O}function O(t){return null===t||Ue(t)?x(t):(e.enter("htmlFlowData"),A(t))}function T(t){return 45===t?(e.consume(t),j):A(t)}function R(t){return 47===t?(e.consume(t),s="",C):A(t)}function C(t){if(62===t){const n=s.toLowerCase();return Pt.includes(n)?(e.consume(t),D):A(t)}return Ne(t)&&s.length<8?(e.consume(t),s+=String.fromCharCode(t),C):A(t)}function N(t){return 93===t?(e.consume(t),j):A(t)}function j(t){return 62===t?(e.consume(t),D):45===t&&2===i?(e.consume(t),j):A(t)}function D(t){return null===t||Ue(t)?(e.exit("htmlFlowData"),F(t)):(e.consume(t),D)}function F(n){return e.exit("htmlFlow"),t(n)}},resolveTo:function(e){let t=e.length;for(;t--&&("enter"!==e[t][0]||"htmlFlow"!==e[t][1].type););t>1&&"linePrefix"===e[t-2][1].type&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2));return e},concrete:!0},xt={tokenize:function(e,t,n){return function(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),e.attempt(Qe,t,n)}},partial:!0},It={tokenize:function(e,t,n){const r=this;return function(t){if(Ue(t))return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),i;return n(t)};function i(e){return r.parser.lazy[r.now().line]?n(e):t(e)}},partial:!0};const Ot={tokenize:function(e,t,n){const r=this;return function(t){if(null===t)return n(t);return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),i};function i(e){return r.parser.lazy[r.now().line]?n(e):t(e)}},partial:!0},Tt={name:"codeFenced",tokenize:function(e,t,n){const r=this,i={tokenize:function(e,t,n){let i=0;return s;function s(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),l}function l(t){return e.enter("codeFencedFence"),Ve(t)?Ge(e,c,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):c(t)}function c(t){return t===o?(e.enter("codeFencedFenceSequence"),u(t)):n(t)}function u(t){return t===o?(i++,e.consume(t),u):i>=a?(e.exit("codeFencedFenceSequence"),Ve(t)?Ge(e,d,"whitespace")(t):d(t)):n(t)}function d(r){return null===r||Ue(r)?(e.exit("codeFencedFence"),t(r)):n(r)}},partial:!0};let o,s=0,a=0;return function(t){return function(t){const n=r.events[r.events.length-1];return s=n&&"linePrefix"===n[1].type?n[2].sliceSerialize(n[1],!0).length:0,o=t,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),l(t)}(t)};function l(t){return t===o?(a++,e.consume(t),l):a<3?n(t):(e.exit("codeFencedFenceSequence"),Ve(t)?Ge(e,c,"whitespace")(t):c(t))}function c(n){return null===n||Ue(n)?(e.exit("codeFencedFence"),r.interrupt?t(n):e.check(Ot,f,y)(n)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),u(n))}function u(t){return null===t||Ue(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),c(t)):Ve(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Ge(e,d,"whitespace")(t)):96===t&&t===o?n(t):(e.consume(t),u)}function d(t){return null===t||Ue(t)?c(t):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),h(t))}function h(t){return null===t||Ue(t)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),c(t)):96===t&&t===o?n(t):(e.consume(t),h)}function f(t){return e.attempt(i,y,p)(t)}function p(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),g}function g(t){return s>0&&Ve(t)?Ge(e,m,"linePrefix",s+1)(t):m(t)}function m(t){return null===t||Ue(t)?e.check(Ot,f,y)(t):(e.enter("codeFlowValue"),v(t))}function v(t){return null===t||Ue(t)?(e.exit("codeFlowValue"),m(t)):(e.consume(t),v)}function y(n){return e.exit("codeFenced"),t(n)}},concrete:!0};const Rt=document.createElement("i");function Ct(e){const t="&"+e+";";Rt.innerHTML=t;const n=Rt.textContent;return(59!==n.charCodeAt(n.length-1)||"semi"===e)&&(n!==t&&n)}const Nt={name:"characterReference",tokenize:function(e,t,n){const r=this;let i,o,s=0;return function(t){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(t),e.exit("characterReferenceMarker"),a};function a(t){return 35===t?(e.enter("characterReferenceMarkerNumeric"),e.consume(t),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),i=31,o=je,c(t))}function l(t){return 88===t||120===t?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(t),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),i=6,o=Me,c):(e.enter("characterReferenceValue"),i=7,o=Le,c(t))}function c(a){if(59===a&&s){const i=e.exit("characterReferenceValue");return o!==je||Ct(r.sliceSerialize(i))?(e.enter("characterReferenceMarker"),e.consume(a),e.exit("characterReferenceMarker"),e.exit("characterReference"),t):n(a)}return o(a)&&s++<i?(e.consume(a),c):n(a)}}};const jt={name:"characterEscape",tokenize:function(e,t,n){return function(t){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(t),e.exit("escapeMarker"),r};function r(r){return Be(r)?(e.enter("characterEscapeValue"),e.consume(r),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(r)}}};const Dt={name:"lineEnding",tokenize:function(e,t){return function(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),Ge(e,t,"linePrefix")}}};const Ft={name:"labelEnd",tokenize:function(e,t,n){const r=this;let i,o,s=r.events.length;for(;s--;)if(("labelImage"===r.events[s][1].type||"labelLink"===r.events[s][1].type)&&!r.events[s][1]._balanced){i=r.events[s][1];break}return function(t){if(!i)return n(t);if(i._inactive)return u(t);return o=r.parser.defined.includes(vt(r.sliceSerialize({start:i.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelEnd"),a};function a(t){return 40===t?e.attempt(Lt,c,o?c:u)(t):91===t?e.attempt(Mt,c,o?l:u)(t):o?c(t):u(t)}function l(t){return e.attempt(Bt,c,u)(t)}function c(e){return t(e)}function u(e){return i._balanced=!0,n(e)}},resolveTo:function(e,t){let n,r,i,o,s=e.length,a=0;for(;s--;)if(n=e[s][1],r){if("link"===n.type||"labelLink"===n.type&&n._inactive)break;"enter"===e[s][0]&&"labelLink"===n.type&&(n._inactive=!0)}else if(i){if("enter"===e[s][0]&&("labelImage"===n.type||"labelLink"===n.type)&&!n._balanced&&(r=s,"labelLink"!==n.type)){a=2;break}}else"labelEnd"===n.type&&(i=s);const l={type:"labelLink"===e[r][1].type?"link":"image",start:Object.assign({},e[r][1].start),end:Object.assign({},e[e.length-1][1].end)},c={type:"label",start:Object.assign({},e[r][1].start),end:Object.assign({},e[i][1].end)},u={type:"labelText",start:Object.assign({},e[r+a+2][1].end),end:Object.assign({},e[i-2][1].start)};return o=[["enter",l,t],["enter",c,t]],o=xe(o,e.slice(r+1,r+a+3)),o=xe(o,[["enter",u,t]]),o=xe(o,st(t.parser.constructs.insideSpan.null,e.slice(r+a+4,i-3),t)),o=xe(o,[["exit",u,t],e[i-2],e[i-1],["exit",c,t]]),o=xe(o,e.slice(i+1)),o=xe(o,[["exit",l,t]]),Ae(e,r,e.length,o),e},resolveAll:function(e){let t=-1;for(;++t<e.length;){const n=e[t][1];"labelImage"!==n.type&&"labelLink"!==n.type&&"labelEnd"!==n.type||(e.splice(t+1,"labelImage"===n.type?4:2),n.type="data",t++)}return e}},Lt={tokenize:function(e,t,n){return function(t){return e.enter("resource"),e.enter("resourceMarker"),e.consume(t),e.exit("resourceMarker"),r};function r(t){return ze(t)?mt(e,i)(t):i(t)}function i(t){return 41===t?c(t):ft(e,o,s,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(t)}function o(t){return ze(t)?mt(e,a)(t):c(t)}function s(e){return n(e)}function a(t){return 34===t||39===t||40===t?gt(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(t):c(t)}function l(t){return ze(t)?mt(e,c)(t):c(t)}function c(r){return 41===r?(e.enter("resourceMarker"),e.consume(r),e.exit("resourceMarker"),e.exit("resource"),t):n(r)}}},Mt={tokenize:function(e,t,n){const r=this;return function(t){return pt.call(r,e,i,o,"reference","referenceMarker","referenceString")(t)};function i(e){return r.parser.defined.includes(vt(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(e):n(e)}function o(e){return n(e)}}},Bt={tokenize:function(e,t,n){return function(t){return e.enter("reference"),e.enter("referenceMarker"),e.consume(t),e.exit("referenceMarker"),r};function r(r){return 93===r?(e.enter("referenceMarker"),e.consume(r),e.exit("referenceMarker"),e.exit("reference"),t):n(r)}}};const Ut={name:"labelStartImage",tokenize:function(e,t,n){const r=this;return function(t){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(t),e.exit("labelImageMarker"),i};function i(t){return 91===t?(e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelImage"),o):n(t)}function o(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}},resolveAll:Ft.resolveAll};function zt(e){return null===e||ze(e)||He(e)?1:qe(e)?2:void 0}const Vt={name:"attention",tokenize:function(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=zt(r);let o;return function(t){return o=t,e.enter("attentionSequence"),s(t)};function s(a){if(a===o)return e.consume(a),s;const l=e.exit("attentionSequence"),c=zt(a),u=!c||2===c&&i||n.includes(a),d=!i||2===i&&c||n.includes(r);return l._open=Boolean(42===o?u:u&&(i||!d)),l._close=Boolean(42===o?d:d&&(c||!u)),t(a)}},resolveAll:function(e,t){let n,r,i,o,s,a,l,c,u=-1;for(;++u<e.length;)if("enter"===e[u][0]&&"attentionSequence"===e[u][1].type&&e[u][1]._close)for(n=u;n--;)if("exit"===e[n][0]&&"attentionSequence"===e[n][1].type&&e[n][1]._open&&t.sliceSerialize(e[n][1]).charCodeAt(0)===t.sliceSerialize(e[u][1]).charCodeAt(0)){if((e[n][1]._close||e[u][1]._open)&&(e[u][1].end.offset-e[u][1].start.offset)%3&&!((e[n][1].end.offset-e[n][1].start.offset+e[u][1].end.offset-e[u][1].start.offset)%3))continue;a=e[n][1].end.offset-e[n][1].start.offset>1&&e[u][1].end.offset-e[u][1].start.offset>1?2:1;const d=Object.assign({},e[n][1].end),h=Object.assign({},e[u][1].start);qt(d,-a),qt(h,a),o={type:a>1?"strongSequence":"emphasisSequence",start:d,end:Object.assign({},e[n][1].end)},s={type:a>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[u][1].start),end:h},i={type:a>1?"strongText":"emphasisText",start:Object.assign({},e[n][1].end),end:Object.assign({},e[u][1].start)},r={type:a>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},s.end)},e[n][1].end=Object.assign({},o.start),e[u][1].start=Object.assign({},s.end),l=[],e[n][1].end.offset-e[n][1].start.offset&&(l=xe(l,[["enter",e[n][1],t],["exit",e[n][1],t]])),l=xe(l,[["enter",r,t],["enter",o,t],["exit",o,t],["enter",i,t]]),l=xe(l,st(t.parser.constructs.insideSpan.null,e.slice(n+1,u),t)),l=xe(l,[["exit",i,t],["enter",s,t],["exit",s,t],["exit",r,t]]),e[u][1].end.offset-e[u][1].start.offset?(c=2,l=xe(l,[["enter",e[u][1],t],["exit",e[u][1],t]])):c=0,Ae(e,n-1,u-n+3,l),u=n+l.length-c-2;break}u=-1;for(;++u<e.length;)"attentionSequence"===e[u][1].type&&(e[u][1].type="data");return e}};function qt(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const Ht={name:"autolink",tokenize:function(e,t,n){let r=0;return function(t){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(t),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),i};function i(t){return Ne(t)?(e.consume(t),o):l(t)}function o(e){return 43===e||45===e||46===e||je(e)?(r=1,s(e)):l(e)}function s(t){return 58===t?(e.consume(t),r=0,a):(43===t||45===t||46===t||je(t))&&r++<32?(e.consume(t),s):(r=0,l(t))}function a(r){return 62===r?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(r),e.exit("autolinkMarker"),e.exit("autolink"),t):null===r||32===r||60===r||Fe(r)?n(r):(e.consume(r),a)}function l(t){return 64===t?(e.consume(t),c):De(t)?(e.consume(t),l):n(t)}function c(e){return je(e)?u(e):n(e)}function u(n){return 46===n?(e.consume(n),r=0,c):62===n?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(n),e.exit("autolinkMarker"),e.exit("autolink"),t):d(n)}function d(t){if((45===t||je(t))&&r++<63){const n=45===t?d:u;return e.consume(t),n}return n(t)}}};const Wt={name:"htmlText",tokenize:function(e,t,n){const r=this;let i,o,s;return function(t){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(t),a};function a(t){return 33===t?(e.consume(t),l):47===t?(e.consume(t),w):63===t?(e.consume(t),y):Ne(t)?(e.consume(t),E):n(t)}function l(t){return 45===t?(e.consume(t),c):91===t?(e.consume(t),o=0,f):Ne(t)?(e.consume(t),v):n(t)}function c(t){return 45===t?(e.consume(t),h):n(t)}function u(t){return null===t?n(t):45===t?(e.consume(t),d):Ue(t)?(s=u,C(t)):(e.consume(t),u)}function d(t){return 45===t?(e.consume(t),h):u(t)}function h(e){return 62===e?R(e):45===e?d(e):u(e)}function f(t){const r="CDATA[";return t===r.charCodeAt(o++)?(e.consume(t),6===o?p:f):n(t)}function p(t){return null===t?n(t):93===t?(e.consume(t),g):Ue(t)?(s=p,C(t)):(e.consume(t),p)}function g(t){return 93===t?(e.consume(t),m):p(t)}function m(t){return 62===t?R(t):93===t?(e.consume(t),m):p(t)}function v(t){return null===t||62===t?R(t):Ue(t)?(s=v,C(t)):(e.consume(t),v)}function y(t){return null===t?n(t):63===t?(e.consume(t),b):Ue(t)?(s=y,C(t)):(e.consume(t),y)}function b(e){return 62===e?R(e):y(e)}function w(t){return Ne(t)?(e.consume(t),S):n(t)}function S(t){return 45===t||je(t)?(e.consume(t),S):_(t)}function _(t){return Ue(t)?(s=_,C(t)):Ve(t)?(e.consume(t),_):R(t)}function E(t){return 45===t||je(t)?(e.consume(t),E):47===t||62===t||ze(t)?k(t):n(t)}function k(t){return 47===t?(e.consume(t),R):58===t||95===t||Ne(t)?(e.consume(t),P):Ue(t)?(s=k,C(t)):Ve(t)?(e.consume(t),k):R(t)}function P(t){return 45===t||46===t||58===t||95===t||je(t)?(e.consume(t),P):A(t)}function A(t){return 61===t?(e.consume(t),x):Ue(t)?(s=A,C(t)):Ve(t)?(e.consume(t),A):k(t)}function x(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),i=t,I):Ue(t)?(s=x,C(t)):Ve(t)?(e.consume(t),x):(e.consume(t),O)}function I(t){return t===i?(e.consume(t),i=void 0,T):null===t?n(t):Ue(t)?(s=I,C(t)):(e.consume(t),I)}function O(t){return null===t||34===t||39===t||60===t||61===t||96===t?n(t):47===t||62===t||ze(t)?k(t):(e.consume(t),O)}function T(e){return 47===e||62===e||ze(e)?k(e):n(e)}function R(r){return 62===r?(e.consume(r),e.exit("htmlTextData"),e.exit("htmlText"),t):n(r)}function C(t){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),N}function N(t){return Ve(t)?Ge(e,j,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):j(t)}function j(t){return e.enter("htmlTextData"),s(t)}}};const Gt={name:"labelStartLink",tokenize:function(e,t,n){const r=this;return function(t){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelLink"),i};function i(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}},resolveAll:Ft.resolveAll};const Yt={name:"hardBreakEscape",tokenize:function(e,t,n){return function(t){return e.enter("hardBreakEscape"),e.consume(t),r};function r(r){return Ue(r)?(e.exit("hardBreakEscape"),t(r)):n(r)}}};const Kt={name:"codeText",tokenize:function(e,t,n){let r,i,o=0;return function(t){return e.enter("codeText"),e.enter("codeTextSequence"),s(t)};function s(t){return 96===t?(e.consume(t),o++,s):(e.exit("codeTextSequence"),a(t))}function a(t){return null===t?n(t):32===t?(e.enter("space"),e.consume(t),e.exit("space"),a):96===t?(i=e.enter("codeTextSequence"),r=0,c(t)):Ue(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),a):(e.enter("codeTextData"),l(t))}function l(t){return null===t||32===t||96===t||Ue(t)?(e.exit("codeTextData"),a(t)):(e.consume(t),l)}function c(n){return 96===n?(e.consume(n),r++,c):r===o?(e.exit("codeTextSequence"),e.exit("codeText"),t(n)):(i.type="codeTextData",l(n))}},resolve:function(e){let t,n,r=e.length-4,i=3;if(("lineEnding"===e[i][1].type||"space"===e[i][1].type)&&("lineEnding"===e[r][1].type||"space"===e[r][1].type))for(t=i;++t<r;)if("codeTextData"===e[t][1].type){e[i][1].type="codeTextPadding",e[r][1].type="codeTextPadding",i+=2,r-=2;break}t=i-1,r++;for(;++t<=r;)void 0===n?t!==r&&"lineEnding"!==e[t][1].type&&(n=t):t!==r&&"lineEnding"!==e[t][1].type||(e[n][1].type="codeTextData",t!==n+2&&(e[n][1].end=e[t-1][1].end,e.splice(n+2,t-n-2),r-=t-n-2,t=n+2),n=void 0);return e},previous:function(e){return 96!==e||"characterEscape"===this.events[this.events.length-1][1].type}};const $t={42:ct,43:ct,45:ct,48:ct,49:ct,50:ct,51:ct,52:ct,53:ct,54:ct,55:ct,56:ct,57:ct,62:ht},Qt={91:yt},Jt={[-2]:wt,[-1]:wt,32:wt},Xt={35:_t,42:lt,45:[Et,lt],60:At,61:Et,95:lt,96:Tt,126:Tt},Zt={38:Nt,92:jt},en={[-5]:Dt,[-4]:Dt,[-3]:Dt,33:Ut,38:Nt,42:Vt,60:[Ht,Wt],91:Gt,92:[Yt,jt],93:Ft,95:Vt,96:Kt},tn={null:[Vt,et]},nn={null:[42,95]},rn={null:[]};function on(e){const n=function(e){const t={};let n=-1;for(;++n<e.length;)Re(t,e[n]);return t}([t,...(e||{}).extensions||[]]),r={defined:[],lazy:{},constructs:n,content:i(Ye),document:i(Ke),flow:i(Ze),string:i(tt),text:i(nt)};return r;function i(e){return function(t){return at(r,e,t)}}}const sn=/[\0\t\n\r]/g;function an(e,t){const n=Number.parseInt(e,t);return n<9||11===n||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||65535===(65535&n)||65534===(65535&n)||n>1114111?"\ufffd":String.fromCodePoint(n)}const ln=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function cn(e,t,n){if(t)return t;if(35===n.charCodeAt(0)){const e=n.charCodeAt(1),t=120===e||88===e;return an(n.slice(t?2:1),t?16:10)}return Ct(n)||e}const un={}.hasOwnProperty;function dn(e,t,n){return"string"!==typeof t&&(n=t,t=void 0),function(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(te),autolinkProtocol:P,autolinkEmail:P,atxHeading:o(Q),blockQuote:o(W),characterEscape:P,characterReference:P,codeFenced:o(G),codeFencedFenceInfo:s,codeFencedFenceMeta:s,codeIndented:o(G,s),codeText:o(Y,s),codeTextData:P,data:P,codeFlowValue:P,definition:o(K),definitionDestinationString:s,definitionLabelString:s,definitionTitleString:s,emphasis:o($),hardBreakEscape:o(J),hardBreakTrailing:o(J),htmlFlow:o(Z,s),htmlFlowData:P,htmlText:o(Z,s),htmlTextData:P,image:o(ee),label:s,link:o(te),listItem:o(re),listItemValue:h,listOrdered:o(ne,d),listUnordered:o(ne),paragraph:o(ie),reference:B,referenceString:s,resourceDestinationString:s,resourceTitleString:s,setextHeading:o(Q),strong:o(oe),thematicBreak:o(ae)},exit:{atxHeading:l(),atxHeadingSequence:S,autolink:l(),autolinkEmail:H,autolinkProtocol:q,blockQuote:l(),characterEscapeValue:A,characterReferenceMarkerHexadecimal:z,characterReferenceMarkerNumeric:z,characterReferenceValue:V,codeFenced:l(m),codeFencedFence:g,codeFencedFenceInfo:f,codeFencedFenceMeta:p,codeFlowValue:A,codeIndented:l(v),codeText:l(R),codeTextData:A,data:A,definition:l(),definitionDestinationString:w,definitionLabelString:y,definitionTitleString:b,emphasis:l(),hardBreakEscape:l(I),hardBreakTrailing:l(I),htmlFlow:l(O),htmlFlowData:A,htmlText:l(T),htmlTextData:A,image:l(N),label:D,labelText:j,lineEnding:x,link:l(C),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:U,resourceDestinationString:F,resourceTitleString:L,resource:M,setextHeading:l(k),setextHeadingLineSequence:E,setextHeadingText:_,strong:l(),thematicBreak:l()}};fn(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(e){let r={type:"root",children:[]};const o={stack:[r],tokenStack:[],config:t,enter:a,exit:c,buffer:s,resume:u,data:n},l=[];let d=-1;for(;++d<e.length;)if("listOrdered"===e[d][1].type||"listUnordered"===e[d][1].type)if("enter"===e[d][0])l.push(d);else{d=i(e,l.pop(),d)}for(d=-1;++d<e.length;){const n=t[e[d][0]];un.call(n,e[d][1].type)&&n[e[d][1].type].call(Object.assign({sliceSerialize:e[d][2].sliceSerialize},o),e[d][1])}if(o.tokenStack.length>0){const e=o.tokenStack[o.tokenStack.length-1];(e[1]||gn).call(o,void 0,e[0])}for(r.position={start:hn(e.length>0?e[0][1].start:{line:1,column:1,offset:0}),end:hn(e.length>0?e[e.length-2][1].end:{line:1,column:1,offset:0})},d=-1;++d<t.transforms.length;)r=t.transforms[d](r)||r;return r}function i(e,t,n){let r,i,o,s,a=t-1,l=-1,c=!1;for(;++a<=n;){const t=e[a];switch(t[1].type){case"listUnordered":case"listOrdered":case"blockQuote":"enter"===t[0]?l++:l--,s=void 0;break;case"lineEndingBlank":"enter"===t[0]&&(!r||s||l||o||(o=a),s=void 0);break;case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:s=void 0}if(!l&&"enter"===t[0]&&"listItemPrefix"===t[1].type||-1===l&&"exit"===t[0]&&("listUnordered"===t[1].type||"listOrdered"===t[1].type)){if(r){let s=a;for(i=void 0;s--;){const t=e[s];if("lineEnding"===t[1].type||"lineEndingBlank"===t[1].type){if("exit"===t[0])continue;i&&(e[i][1].type="lineEndingBlank",c=!0),t[1].type="lineEnding",i=s}else if("linePrefix"!==t[1].type&&"blockQuotePrefix"!==t[1].type&&"blockQuotePrefixWhitespace"!==t[1].type&&"blockQuoteMarker"!==t[1].type&&"listItemIndent"!==t[1].type)break}o&&(!i||o<i)&&(r._spread=!0),r.end=Object.assign({},i?e[i][1].start:t[1].end),e.splice(i||a,0,["exit",r,t[2]]),a++,n++}if("listItemPrefix"===t[1].type){const i={type:"listItem",_spread:!1,start:Object.assign({},t[1].start),end:void 0};r=i,e.splice(a,0,["enter",i,t[2]]),a++,n++,o=void 0,s=!0}}}return e[t][1]._spread=c,n}function o(e,t){return n;function n(n){a.call(this,e(n),n),t&&t.call(this,n)}}function s(){this.stack.push({type:"fragment",children:[]})}function a(e,t,n){this.stack[this.stack.length-1].children.push(e),this.stack.push(e),this.tokenStack.push([t,n]),e.position={start:hn(t.start),end:void 0}}function l(e){return t;function t(t){e&&e.call(this,t),c.call(this,t)}}function c(e,t){const n=this.stack.pop(),r=this.tokenStack.pop();if(!r)throw new Error("Cannot close `"+e.type+"` ("+X({start:e.start,end:e.end})+"): it\u2019s not open");if(r[0].type!==e.type)if(t)t.call(this,e,r[0]);else{(r[1]||gn).call(this,e,r[0])}n.position.end=hn(e.end)}function u(){return function(e,t){const n=t||Ee;return ke(e,"boolean"!==typeof n.includeImageAlt||n.includeImageAlt,"boolean"!==typeof n.includeHtml||n.includeHtml)}(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function h(e){if(this.data.expectingFirstListItemValue){this.stack[this.stack.length-2].start=Number.parseInt(this.sliceSerialize(e),10),this.data.expectingFirstListItemValue=void 0}}function f(){const e=this.resume();this.stack[this.stack.length-1].lang=e}function p(){const e=this.resume();this.stack[this.stack.length-1].meta=e}function g(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function m(){const e=this.resume();this.stack[this.stack.length-1].value=e.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function v(){const e=this.resume();this.stack[this.stack.length-1].value=e.replace(/(\r?\n|\r)$/g,"")}function y(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=vt(this.sliceSerialize(e)).toLowerCase()}function b(){const e=this.resume();this.stack[this.stack.length-1].title=e}function w(){const e=this.resume();this.stack[this.stack.length-1].url=e}function S(e){const t=this.stack[this.stack.length-1];if(!t.depth){const n=this.sliceSerialize(e).length;t.depth=n}}function _(){this.data.setextHeadingSlurpLineEnding=!0}function E(e){this.stack[this.stack.length-1].depth=61===this.sliceSerialize(e).codePointAt(0)?1:2}function k(){this.data.setextHeadingSlurpLineEnding=void 0}function P(e){const t=this.stack[this.stack.length-1].children;let n=t[t.length-1];n&&"text"===n.type||(n=se(),n.position={start:hn(e.start),end:void 0},t.push(n)),this.stack.push(n)}function A(e){const t=this.stack.pop();t.value+=this.sliceSerialize(e),t.position.end=hn(e.end)}function x(e){const n=this.stack[this.stack.length-1];if(this.data.atHardBreak){return n.children[n.children.length-1].position.end=hn(e.end),void(this.data.atHardBreak=void 0)}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(n.type)&&(P.call(this,e),A.call(this,e))}function I(){this.data.atHardBreak=!0}function O(){const e=this.resume();this.stack[this.stack.length-1].value=e}function T(){const e=this.resume();this.stack[this.stack.length-1].value=e}function R(){const e=this.resume();this.stack[this.stack.length-1].value=e}function C(){const e=this.stack[this.stack.length-1];if(this.data.inReference){const t=this.data.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0}function N(){const e=this.stack[this.stack.length-1];if(this.data.inReference){const t=this.data.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0}function j(e){const t=this.sliceSerialize(e),n=this.stack[this.stack.length-2];n.label=function(e){return e.replace(ln,cn)}(t),n.identifier=vt(t).toLowerCase()}function D(){const e=this.stack[this.stack.length-1],t=this.resume(),n=this.stack[this.stack.length-1];if(this.data.inReference=!0,"link"===n.type){const t=e.children;n.children=t}else n.alt=t}function F(){const e=this.resume();this.stack[this.stack.length-1].url=e}function L(){const e=this.resume();this.stack[this.stack.length-1].title=e}function M(){this.data.inReference=void 0}function B(){this.data.referenceType="collapsed"}function U(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=vt(this.sliceSerialize(e)).toLowerCase(),this.data.referenceType="full"}function z(e){this.data.characterReferenceType=e.type}function V(e){const t=this.sliceSerialize(e),n=this.data.characterReferenceType;let r;if(n)r=an(t,"characterReferenceMarkerNumeric"===n?10:16),this.data.characterReferenceType=void 0;else{r=Ct(t)}const i=this.stack.pop();i.value+=r,i.position.end=hn(e.end)}function q(e){A.call(this,e);this.stack[this.stack.length-1].url=this.sliceSerialize(e)}function H(e){A.call(this,e);this.stack[this.stack.length-1].url="mailto:"+this.sliceSerialize(e)}function W(){return{type:"blockquote",children:[]}}function G(){return{type:"code",lang:null,meta:null,value:""}}function Y(){return{type:"inlineCode",value:""}}function K(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function $(){return{type:"emphasis",children:[]}}function Q(){return{type:"heading",depth:0,children:[]}}function J(){return{type:"break"}}function Z(){return{type:"html",value:""}}function ee(){return{type:"image",title:null,url:"",alt:null}}function te(){return{type:"link",title:null,url:"",children:[]}}function ne(e){return{type:"list",ordered:"listOrdered"===e.type,start:null,spread:e._spread,children:[]}}function re(e){return{type:"listItem",spread:e._spread,checked:null,children:[]}}function ie(){return{type:"paragraph",children:[]}}function oe(){return{type:"strong",children:[]}}function se(){return{type:"text",value:""}}function ae(){return{type:"thematicBreak"}}}(n)(function(e){for(;!Ie(e););return e}(on(n).document().write(function(){let e,t=1,n="",r=!0;return function(i,o,s){const a=[];let l,c,u,d,h;for(i=n+("string"===typeof i?i.toString():new TextDecoder(o||void 0).decode(i)),u=0,n="",r&&(65279===i.charCodeAt(0)&&u++,r=void 0);u<i.length;){if(sn.lastIndex=u,l=sn.exec(i),d=l&&void 0!==l.index?l.index:i.length,h=i.charCodeAt(d),!l){n=i.slice(u);break}if(10===h&&u===d&&e)a.push(-3),e=void 0;else switch(e&&(a.push(-5),e=void 0),u<d&&(a.push(i.slice(u,d)),t+=d-u),h){case 0:a.push(65533),t++;break;case 9:for(c=4*Math.ceil(t/4),a.push(-2);t++<c;)a.push(-1);break;case 10:a.push(-4),t=1;break;default:e=!0,t=1}u=d+1}return s&&(e&&a.push(-5),n&&a.push(n),a.push(null)),a}}()(e,t,!0))))}function hn(e){return{line:e.line,column:e.column,offset:e.offset}}function fn(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?fn(e,r):pn(e,r)}}function pn(e,t){let n;for(n in t)if(un.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function gn(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+X({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+X({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+X({start:t.start,end:t.end})+") is still open")}function mn(e){const t=this;t.parser=function(n){return dn(n,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}const vn="object"===typeof self?self:globalThis,yn=e=>((e,t)=>{const n=(t,n)=>(e.set(n,t),t),r=i=>{if(e.has(i))return e.get(i);const[o,s]=t[i];switch(o){case 0:case-1:return n(s,i);case 1:{const e=n([],i);for(const t of s)e.push(r(t));return e}case 2:{const e=n({},i);for(const[t,n]of s)e[r(t)]=r(n);return e}case 3:return n(new Date(s),i);case 4:{const{source:e,flags:t}=s;return n(new RegExp(e,t),i)}case 5:{const e=n(new Map,i);for(const[t,n]of s)e.set(r(t),r(n));return e}case 6:{const e=n(new Set,i);for(const t of s)e.add(r(t));return e}case 7:{const{name:e,message:t}=s;return n(new vn[e](t),i)}case 8:return n(BigInt(s),i);case"BigInt":return n(Object(BigInt(s)),i)}return n(new vn[o](s),i)};return r})(new Map,e)(0),bn="",{toString:wn}={},{keys:Sn}=Object,_n=e=>{const t=typeof e;if("object"!==t||!e)return[0,t];const n=wn.call(e).slice(8,-1);switch(n){case"Array":return[1,bn];case"Object":return[2,bn];case"Date":return[3,bn];case"RegExp":return[4,bn];case"Map":return[5,bn];case"Set":return[6,bn]}return n.includes("Array")?[1,n]:n.includes("Error")?[7,n]:[2,n]},En=e=>{let[t,n]=e;return 0===t&&("function"===n||"symbol"===n)},kn=function(e){let{json:t,lossy:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=[];return((e,t,n,r)=>{const i=(e,t)=>{const i=r.push(e)-1;return n.set(t,i),i},o=r=>{if(n.has(r))return n.get(r);let[s,a]=_n(r);switch(s){case 0:{let t=r;switch(a){case"bigint":s=8,t=r.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+a);t=null;break;case"undefined":return i([-1],r)}return i([s,t],r)}case 1:{if(a)return i([a,[...r]],r);const e=[],t=i([s,e],r);for(const n of r)e.push(o(n));return t}case 2:{if(a)switch(a){case"BigInt":return i([a,r.toString()],r);case"Boolean":case"Number":case"String":return i([a,r.valueOf()],r)}if(t&&"toJSON"in r)return o(r.toJSON());const n=[],l=i([s,n],r);for(const t of Sn(r))!e&&En(_n(r[t]))||n.push([o(t),o(r[t])]);return l}case 3:return i([s,r.toISOString()],r);case 4:{const{source:e,flags:t}=r;return i([s,{source:e,flags:t}],r)}case 5:{const t=[],n=i([s,t],r);for(const[i,s]of r)(e||!En(_n(i))&&!En(_n(s)))&&t.push([o(i),o(s)]);return n}case 6:{const t=[],n=i([s,t],r);for(const i of r)!e&&En(_n(i))||t.push(o(i));return n}}const{message:l}=r;return i([s,{name:a,message:l}],r)};return o})(!(t||n),!!t,new Map,r)(e),r},Pn="function"===typeof structuredClone?(e,t)=>t&&("json"in t||"lossy"in t)?yn(kn(e,t)):structuredClone(e):(e,t)=>yn(kn(e,t));function An(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const o=e.charCodeAt(n);let s="";if(37===o&&je(e.charCodeAt(n+1))&&je(e.charCodeAt(n+2)))i=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(s=String.fromCharCode(o));else if(o>55295&&o<57344){const t=e.charCodeAt(n+1);o<56320&&t>56319&&t<57344?(s=String.fromCharCode(o,t),i=1):s="\ufffd"}else s=String.fromCharCode(o);s&&(t.push(e.slice(r,n),encodeURIComponent(s)),r=n+i+1,s=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function xn(e,t){const n=[{type:"text",value:"\u21a9"}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function In(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}const On=function(e){if(null===e||void 0===e)return Rn;if("function"===typeof e)return Tn(e);if("object"===typeof e)return Array.isArray(e)?function(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=On(e[n]);return Tn(r);function r(){let e=-1;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];for(;++e<t.length;)if(t[e].apply(this,r))return!0;return!1}}(e):function(e){const t=e;return Tn(n);function n(n){const r=n;let i;for(i in e)if(r[i]!==t[i])return!1;return!0}}(e);if("string"===typeof e)return function(e){return Tn(t);function t(t){return t&&t.type===e}}(e);throw new Error("Expected function, string, or object as test")};function Tn(e){return function(t,n,r){return Boolean(Cn(t)&&e.call(this,t,"number"===typeof n?n:void 0,r||void 0))}}function Rn(){return!0}function Cn(e){return null!==e&&"object"===typeof e&&"type"in e}const Nn=[],jn=!0,Dn=!1,Fn="skip";function Ln(e,t,n,r){let i;"function"===typeof t&&"function"!==typeof n?(r=n,n=t):i=t;const o=On(i),s=r?-1:1;!function e(i,a,l){const c=i&&"object"===typeof i?i:{};if("string"===typeof c.type){const e="string"===typeof c.tagName?c.tagName:"string"===typeof c.name?c.name:void 0;Object.defineProperty(u,"name",{value:"node ("+i.type+(e?"<"+e+">":"")+")"})}return u;function u(){let c,u,d,h=Nn;if((!t||o(i,a,l[l.length-1]||void 0))&&(h=function(e){if(Array.isArray(e))return e;if("number"===typeof e)return[jn,e];return null===e||void 0===e?Nn:[e]}(n(i,l)),h[0]===Dn))return h;if("children"in i&&i.children){const t=i;if(t.children&&h[0]!==Fn)for(u=(r?t.children.length:-1)+s,d=l.concat(t);u>-1&&u<t.children.length;){const n=t.children[u];if(c=e(n,u,d)(),c[0]===Dn)return c;u="number"===typeof c[1]?c[1]:u+s}}return h}}(e,void 0,[])()}function Mn(e,t,n,r){let i,o,s;"function"===typeof t&&"function"!==typeof n?(o=void 0,s=t,i=n):(o=t,s=n,i=r),Ln(e,o,(function(e,t){const n=t[t.length-1],r=n?n.children.indexOf(e):void 0;return s(e,r,n)}),i)}function Bn(e,t){const n=t.referenceType;let r="]";if("collapsed"===n?r+="[]":"full"===n&&(r+="["+(t.label||t.identifier)+"]"),"imageReference"===t.type)return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),o=i[0];o&&"text"===o.type?o.value="["+o.value:i.unshift({type:"text",value:"["});const s=i[i.length-1];return s&&"text"===s.type?s.value+=r:i.push({type:"text",value:r}),i}function Un(e){const t=e.spread;return null===t||void 0===t?e.children.length>1:t}const zn=9,Vn=32;function qn(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const o=[];for(;r;)o.push(Hn(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return o.push(Hn(t.slice(i),i>0,!1)),o.join("")}function Hn(e,t,n){let r=0,i=e.length;if(t){let t=e.codePointAt(r);for(;t===zn||t===Vn;)r++,t=e.codePointAt(r)}if(n){let t=e.codePointAt(i-1);for(;t===zn||t===Vn;)i--,t=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}const Wn={blockquote:function(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)},break:function(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:"\n"}]},code:function(e,t){const n=t.value?t.value+"\n":"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i},delete:function(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},emphasis:function(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},footnoteReference:function(e,t){const n="string"===typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=An(r.toLowerCase()),o=e.footnoteOrder.indexOf(r);let s,a=e.footnoteCounts.get(r);void 0===a?(a=0,e.footnoteOrder.push(r),s=e.footnoteOrder.length):s=o+1,a+=1,e.footnoteCounts.set(r,a);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(s)}]};e.patch(t,l);const c={type:"element",tagName:"sup",properties:{},children:[l]};return e.patch(t,c),e.applyData(t,c)},heading:function(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},html:function(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}},imageReference:function(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Bn(e,t);const i={src:An(r.url||""),alt:t.alt};null!==r.title&&void 0!==r.title&&(i.title=r.title);const o={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,o),e.applyData(t,o)},image:function(e,t){const n={src:An(t.url)};null!==t.alt&&void 0!==t.alt&&(n.alt=t.alt),null!==t.title&&void 0!==t.title&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)},inlineCode:function(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)},linkReference:function(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Bn(e,t);const i={href:An(r.url||"")};null!==r.title&&void 0!==r.title&&(i.title=r.title);const o={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,o),e.applyData(t,o)},link:function(e,t){const n={href:An(t.url)};null!==t.title&&void 0!==t.title&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)},listItem:function(e,t,n){const r=e.all(t),i=n?function(e){let t=!1;if("list"===e.type){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=Un(n[r])}return t}(n):Un(t),o={},s=[];if("boolean"===typeof t.checked){const e=r[0];let n;e&&"element"===e.type&&"p"===e.tagName?n=e:(n={type:"element",tagName:"p",properties:{},children:[]},r.unshift(n)),n.children.length>0&&n.children.unshift({type:"text",value:" "}),n.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const e=r[a];(i||0!==a||"element"!==e.type||"p"!==e.tagName)&&s.push({type:"text",value:"\n"}),"element"!==e.type||"p"!==e.tagName||i?s.push(e):s.push(...e.children)}const l=r[r.length-1];l&&(i||"element"!==l.type||"p"!==l.tagName)&&s.push({type:"text",value:"\n"});const c={type:"element",tagName:"li",properties:o,children:s};return e.patch(t,c),e.applyData(t,c)},list:function(e,t){const n={},r=e.all(t);let i=-1;for("number"===typeof t.start&&1!==t.start&&(n.start=t.start);++i<r.length;){const e=r[i];if("element"===e.type&&"li"===e.tagName&&e.properties&&Array.isArray(e.properties.className)&&e.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const o={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,o),e.applyData(t,o)},paragraph:function(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},root:function(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)},strong:function(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},table:function(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const n={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],n),i.push(n)}if(n.length>0){const r={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},o=Q(t.children[1]),s=$(t.children[t.children.length-1]);o&&s&&(r.position={start:o,end:s}),i.push(r)}const o={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,o),e.applyData(t,o)},tableCell:function(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},tableRow:function(e,t,n){const r=n?n.children:void 0,i=0===(r?r.indexOf(t):1)?"th":"td",o=n&&"table"===n.type?n.align:void 0,s=o?o.length:t.children.length;let a=-1;const l=[];for(;++a<s;){const n=t.children[a],r={},s=o?o[a]:void 0;s&&(r.align=s);let c={type:"element",tagName:i,properties:r,children:[]};n&&(c.children=e.all(n),e.patch(n,c),c=e.applyData(n,c)),l.push(c)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)},text:function(e,t){const n={type:"text",value:qn(String(t.value))};return e.patch(t,n),e.applyData(t,n)},thematicBreak:function(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)},toml:Gn,yaml:Gn,definition:Gn,footnoteDefinition:Gn};function Gn(){}const Yn={}.hasOwnProperty,Kn={};function $n(e,t){e.position&&(t.position=function(e){const t=Q(e),n=$(e);if(t&&n)return{start:t,end:n}}(e))}function Qn(e,t){let n=t;if(e&&e.data){const t=e.data.hName,r=e.data.hChildren,i=e.data.hProperties;if("string"===typeof t)if("element"===n.type)n.tagName=t;else{n={type:"element",tagName:t,properties:{},children:"children"in n?n.children:[n]}}"element"===n.type&&i&&Object.assign(n.properties,Pn(i)),"children"in n&&n.children&&null!==r&&void 0!==r&&(n.children=r)}return n}function Jn(e,t){const n=t.data||{},r=!("value"in t)||Yn.call(n,"hProperties")||Yn.call(n,"hChildren")?{type:"element",tagName:"div",properties:{},children:e.all(t)}:{type:"text",value:t.value};return e.patch(t,r),e.applyData(t,r)}function Xn(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:"\n"});++r<e.length;)r&&n.push({type:"text",value:"\n"}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:"\n"}),n}function Zn(e){let t=0,n=e.charCodeAt(t);for(;9===n||32===n;)t++,n=e.charCodeAt(t);return e.slice(t)}function er(e,t){const n=function(e,t){const n=t||Kn,r=new Map,i=new Map,o=new Map,s={...Wn,...n.handlers},a={all:function(e){const t=[];if("children"in e){const n=e.children;let r=-1;for(;++r<n.length;){const i=a.one(n[r],e);if(i){if(r&&"break"===n[r-1].type&&(Array.isArray(i)||"text"!==i.type||(i.value=Zn(i.value)),!Array.isArray(i)&&"element"===i.type)){const e=i.children[0];e&&"text"===e.type&&(e.value=Zn(e.value))}Array.isArray(i)?t.push(...i):t.push(i)}}}return t},applyData:Qn,definitionById:r,footnoteById:i,footnoteCounts:o,footnoteOrder:[],handlers:s,one:function(e,t){const n=e.type,r=a.handlers[n];if(Yn.call(a.handlers,n)&&r)return r(a,e,t);if(a.options.passThrough&&a.options.passThrough.includes(n)){if("children"in e){const{children:t,...n}=e,r=Pn(n);return r.children=a.all(e),r}return Pn(e)}return(a.options.unknownHandler||Jn)(a,e,t)},options:n,patch:$n,wrap:Xn};return Mn(e,(function(e){if("definition"===e.type||"footnoteDefinition"===e.type){const t="definition"===e.type?r:i,n=String(e.identifier).toUpperCase();t.has(n)||t.set(n,e)}})),a}(e,t),r=n.one(e,void 0),i=function(e){const t="string"===typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||xn,r=e.options.footnoteBackLabel||In,i=e.options.footnoteLabel||"Footnotes",o=e.options.footnoteLabelTagName||"h2",s=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let l=-1;for(;++l<e.footnoteOrder.length;){const i=e.footnoteById.get(e.footnoteOrder[l]);if(!i)continue;const o=e.all(i),s=String(i.identifier).toUpperCase(),c=An(s.toLowerCase());let u=0;const d=[],h=e.footnoteCounts.get(s);for(;void 0!==h&&++u<=h;){d.length>0&&d.push({type:"text",value:" "});let e="string"===typeof n?n:n(l,u);"string"===typeof e&&(e={type:"text",value:e}),d.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+c+(u>1?"-"+u:""),dataFootnoteBackref:"",ariaLabel:"string"===typeof r?r:r(l,u),className:["data-footnote-backref"]},children:Array.isArray(e)?e:[e]})}const f=o[o.length-1];if(f&&"element"===f.type&&"p"===f.tagName){const e=f.children[f.children.length-1];e&&"text"===e.type?e.value+=" ":f.children.push({type:"text",value:" "}),f.children.push(...d)}else o.push(...d);const p={type:"element",tagName:"li",properties:{id:t+"fn-"+c},children:e.wrap(o,!0)};e.patch(i,p),a.push(p)}if(0!==a.length)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:o,properties:{...Pn(s),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:"\n"},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:"\n"}]}}(n),o=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&o.children.push({type:"text",value:"\n"},i),o}function tr(e,t){return e&&"run"in e?async function(n,r){const i=er(n,{file:r,...t});await e.run(i,r)}:function(n,r){return er(n,{file:r,...t||e})}}function nr(e){if(e)throw e}var rr=n(240);function ir(e){if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function or(){const e=[],t={run:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];let i=-1;const o=n.pop();if("function"!==typeof o)throw new TypeError("Expected function as last argument, not "+o);!function t(r){const s=e[++i];let a=-1;if(r)o(r);else{for(var l=arguments.length,c=new Array(l>1?l-1:0),u=1;u<l;u++)c[u-1]=arguments[u];for(;++a<n.length;)null!==c[a]&&void 0!==c[a]||(c[a]=n[a]);n=c,s?function(e,t){let n;return i;function i(){for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];const l=e.length>i.length;let c;l&&i.push(o);try{c=e.apply(this,i)}catch(r){if(l&&n)throw r;return o(r)}l||(c&&c.then&&"function"===typeof c.then?c.then(s,o):c instanceof Error?o(c):s(c))}function o(e){if(!n){n=!0;for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];t(e,...i)}}function s(e){o(null,e)}}(s,t)(...c):o(null,...c)}}(null,...n)},use:function(n){if("function"!==typeof n)throw new TypeError("Expected `middelware` to be a function, not "+n);return e.push(n),t}};return t}const sr={basename:function(e,t){if(void 0!==t&&"string"!==typeof t)throw new TypeError('"ext" argument must be a string');ar(e);let n,r=0,i=-1,o=e.length;if(void 0===t||0===t.length||t.length>e.length){for(;o--;)if(47===e.codePointAt(o)){if(n){r=o+1;break}}else i<0&&(n=!0,i=o+1);return i<0?"":e.slice(r,i)}if(t===e)return"";let s=-1,a=t.length-1;for(;o--;)if(47===e.codePointAt(o)){if(n){r=o+1;break}}else s<0&&(n=!0,s=o+1),a>-1&&(e.codePointAt(o)===t.codePointAt(a--)?a<0&&(i=o):(a=-1,i=s));r===i?i=s:i<0&&(i=e.length);return e.slice(r,i)},dirname:function(e){if(ar(e),0===e.length)return".";let t,n=-1,r=e.length;for(;--r;)if(47===e.codePointAt(r)){if(t){n=r;break}}else t||(t=!0);return n<0?47===e.codePointAt(0)?"/":".":1===n&&47===e.codePointAt(0)?"//":e.slice(0,n)},extname:function(e){ar(e);let t,n=e.length,r=-1,i=0,o=-1,s=0;for(;n--;){const a=e.codePointAt(n);if(47!==a)r<0&&(t=!0,r=n+1),46===a?o<0?o=n:1!==s&&(s=1):o>-1&&(s=-1);else if(t){i=n+1;break}}if(o<0||r<0||0===s||1===s&&o===r-1&&o===i+1)return"";return e.slice(o,r)},join:function(){let e,t=-1;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];for(;++t<r.length;)ar(r[t]),r[t]&&(e=void 0===e?r[t]:e+"/"+r[t]);return void 0===e?".":function(e){ar(e);const t=47===e.codePointAt(0);let n=function(e,t){let n,r,i="",o=0,s=-1,a=0,l=-1;for(;++l<=e.length;){if(l<e.length)n=e.codePointAt(l);else{if(47===n)break;n=47}if(47===n){if(s===l-1||1===a);else if(s!==l-1&&2===a){if(i.length<2||2!==o||46!==i.codePointAt(i.length-1)||46!==i.codePointAt(i.length-2))if(i.length>2){if(r=i.lastIndexOf("/"),r!==i.length-1){r<0?(i="",o=0):(i=i.slice(0,r),o=i.length-1-i.lastIndexOf("/")),s=l,a=0;continue}}else if(i.length>0){i="",o=0,s=l,a=0;continue}t&&(i=i.length>0?i+"/..":"..",o=2)}else i.length>0?i+="/"+e.slice(s+1,l):i=e.slice(s+1,l),o=l-s-1;s=l,a=0}else 46===n&&a>-1?a++:a=-1}return i}(e,!t);0!==n.length||t||(n=".");n.length>0&&47===e.codePointAt(e.length-1)&&(n+="/");return t?"/"+n:n}(e)},sep:"/"};function ar(e){if("string"!==typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const lr={cwd:function(){return"/"}};function cr(e){return Boolean(null!==e&&"object"===typeof e&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&void 0===e.auth)}function ur(e){if("string"===typeof e)e=new URL(e);else if(!cr(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if("file:"!==e.protocol){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return function(e){if(""!==e.hostname){const e=new TypeError('File URL host must be "localhost" or empty on darwin');throw e.code="ERR_INVALID_FILE_URL_HOST",e}const t=e.pathname;let n=-1;for(;++n<t.length;)if(37===t.codePointAt(n)&&50===t.codePointAt(n+1)){const e=t.codePointAt(n+2);if(70===e||102===e){const e=new TypeError("File URL path must not include encoded / characters");throw e.code="ERR_INVALID_FILE_URL_PATH",e}}return decodeURIComponent(t)}(e)}const dr=["history","path","basename","stem","extname","dirname"];class hr{constructor(e){let t;t=e?cr(e)?{path:e}:"string"===typeof e||function(e){return Boolean(e&&"object"===typeof e&&"byteLength"in e&&"byteOffset"in e)}(e)?{value:e}:e:{},this.cwd=lr.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let n,r=-1;for(;++r<dr.length;){const e=dr[r];e in t&&void 0!==t[e]&&null!==t[e]&&(this[e]="history"===e?[...t[e]]:t[e])}for(n in t)dr.includes(n)||(this[n]=t[n])}get basename(){return"string"===typeof this.path?sr.basename(this.path):void 0}set basename(e){pr(e,"basename"),fr(e,"basename"),this.path=sr.join(this.dirname||"",e)}get dirname(){return"string"===typeof this.path?sr.dirname(this.path):void 0}set dirname(e){gr(this.basename,"dirname"),this.path=sr.join(e||"",this.basename)}get extname(){return"string"===typeof this.path?sr.extname(this.path):void 0}set extname(e){if(fr(e,"extname"),gr(this.dirname,"extname"),e){if(46!==e.codePointAt(0))throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=sr.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){cr(e)&&(e=ur(e)),pr(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return"string"===typeof this.path?sr.basename(this.path,this.extname):void 0}set stem(e){pr(e,"stem"),fr(e,"stem"),this.path=sr.join(this.dirname||"",e+(this.extname||""))}fail(e,t,n){const r=this.message(e,t,n);throw r.fatal=!0,r}info(e,t,n){const r=this.message(e,t,n);return r.fatal=void 0,r}message(e,t,n){const r=new ne(e,t,n);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(e){if(void 0===this.value)return"";if("string"===typeof this.value)return this.value;return new TextDecoder(e||void 0).decode(this.value)}}function fr(e,t){if(e&&e.includes(sr.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+sr.sep+"`")}function pr(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function gr(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}const mr=function(e){const t=this.constructor.prototype,n=t[e],r=function(){return n.apply(r,arguments)};Object.setPrototypeOf(r,t);const i=Object.getOwnPropertyNames(n);for(const o of i){const e=Object.getOwnPropertyDescriptor(n,o);e&&Object.defineProperty(r,o,e)}return r},vr={}.hasOwnProperty;class yr extends mr{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=or()}copy(){const e=new yr;let t=-1;for(;++t<this.attachers.length;){const n=this.attachers[t];e.use(...n)}return e.data(rr(!0,{},this.namespace)),e}data(e,t){return"string"===typeof e?2===arguments.length?(_r("data",this.frozen),this.namespace[e]=t,this):vr.call(this.namespace,e)&&this.namespace[e]||void 0:e?(_r("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...n]=this.attachers[this.freezeIndex];if(!1===n[0])continue;!0===n[0]&&(n[0]=void 0);const r=t.call(e,...n);"function"===typeof r&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const t=Pr(e),n=this.parser||this.Parser;return wr("parse",n),n(String(t),t)}process(e,t){const n=this;return this.freeze(),wr("process",this.parser||this.Parser),Sr("process",this.compiler||this.Compiler),t?r(void 0,t):new Promise(r);function r(r,i){const o=Pr(e),s=n.parse(o);function a(e,n){e||!n?i(e):r?r(n):t(void 0,n)}n.run(s,o,(function(e,t,r){if(e||!t||!r)return a(e);const i=t,o=n.stringify(i,r);var s;"string"===typeof(s=o)||function(e){return Boolean(e&&"object"===typeof e&&"byteLength"in e&&"byteOffset"in e)}(s)?r.value=o:r.result=o,a(e,r)}))}}processSync(e){let t,n=!1;return this.freeze(),wr("processSync",this.parser||this.Parser),Sr("processSync",this.compiler||this.Compiler),this.process(e,(function(e,r){n=!0,nr(e),t=r})),kr("processSync","process",n),t}run(e,t,n){Er(e),this.freeze();const r=this.transformers;return n||"function"!==typeof t||(n=t,t=void 0),n?i(void 0,n):new Promise(i);function i(i,o){const s=Pr(t);r.run(e,s,(function(t,r,s){const a=r||e;t?o(t):i?i(a):n(void 0,a,s)}))}}runSync(e,t){let n,r=!1;return this.run(e,t,(function(e,t){nr(e),n=t,r=!0})),kr("runSync","run",r),n}stringify(e,t){this.freeze();const n=Pr(t),r=this.compiler||this.Compiler;return Sr("stringify",r),Er(e),r(e,n)}use(e){const t=this.attachers,n=this.namespace;if(_r("use",this.frozen),null===e||void 0===e);else if("function"===typeof e){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];c(e,i)}else{if("object"!==typeof e)throw new TypeError("Expected usable value, not `"+e+"`");Array.isArray(e)?l(e):a(e)}return this;function s(e){if("function"===typeof e)c(e,[]);else{if("object"!==typeof e)throw new TypeError("Expected usable value, not `"+e+"`");if(Array.isArray(e)){const[t,...n]=e;c(t,n)}else a(e)}}function a(e){if(!("plugins"in e)&&!("settings"in e))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(e.plugins),e.settings&&(n.settings=rr(!0,n.settings,e.settings))}function l(e){let t=-1;if(null===e||void 0===e);else{if(!Array.isArray(e))throw new TypeError("Expected a list of plugins, not `"+e+"`");for(;++t<e.length;){s(e[t])}}}function c(e,n){let r=-1,i=-1;for(;++r<t.length;)if(t[r][0]===e){i=r;break}if(-1===i)t.push([e,...n]);else if(n.length>0){let[r,...o]=n;const s=t[i][1];ir(s)&&ir(r)&&(r=rr(!0,s,r)),t[i]=[e,r,...o]}}}}const br=(new yr).freeze();function wr(e,t){if("function"!==typeof t)throw new TypeError("Cannot `"+e+"` without `parser`")}function Sr(e,t){if("function"!==typeof t)throw new TypeError("Cannot `"+e+"` without `compiler`")}function _r(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Er(e){if(!ir(e)||"string"!==typeof e.type)throw new TypeError("Expected node, got `"+e+"`")}function kr(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Pr(e){return function(e){return Boolean(e&&"object"===typeof e&&"message"in e&&"messages"in e)}(e)?e:new hr(e)}const Ar=[],xr={allowDangerousHtml:!0},Ir=/^(https?|ircs?|mailto|xmpp)$/i,Or=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Tr(e){const t=e.allowedElements,n=e.allowElement,r=e.children||"",i=e.className,o=e.components,s=e.disallowedElements,a=e.rehypePlugins||Ar,l=e.remarkPlugins||Ar,c=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...xr}:xr,u=e.skipHtml,d=e.unwrapDisallowed,h=e.urlTransform||Rr,f=br().use(mn).use(l).use(tr,c).use(a),p=new hr;"string"===typeof r&&(p.value=r);for(const v of Or)Object.hasOwn(e,v.from)&&(v.from,v.to&&v.to,v.id);const g=f.parse(p);let m=f.runSync(g,p);return i&&(m={type:"element",tagName:"div",properties:{className:i},children:"root"===m.type?m.children:[m]}),Mn(m,(function(e,r,i){if("raw"===e.type&&i&&"number"===typeof r)return u?i.children.splice(r,1):i.children[r]={type:"text",value:e.value},r;if("element"===e.type){let t;for(t in Se)if(Object.hasOwn(Se,t)&&Object.hasOwn(e.properties,t)){const n=e.properties[t],r=Se[t];(null===r||r.includes(e.tagName))&&(e.properties[t]=h(String(n||""),t,e))}}if("element"===e.type){let o=t?!t.includes(e.tagName):!!s&&s.includes(e.tagName);if(!o&&n&&"number"===typeof r&&(o=!n(e,r,i)),o&&i&&"number"===typeof r)return d&&e.children?i.children.splice(r,1,...e.children):i.children.splice(r,1),r}})),ue(m,{Fragment:_e.Fragment,components:o,ignoreInvalidStyle:!0,jsx:_e.jsx,jsxs:_e.jsxs,passKeys:!0,passNode:!0})}function Rr(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t<0||i>-1&&t>i||n>-1&&t>n||r>-1&&t>r||Ir.test(e.slice(0,t))?e:""}class Cr extends Error{constructor(e,t){super(e),this.previous=t}}class Nr extends Cr{}class jr extends Nr{}class Dr extends Nr{}class Fr extends Cr{}class Lr extends Cr{}class Mr extends Cr{}class Br extends Cr{constructor(e,t,n){super(e,n),this.code=t}}var Ur;!function(e){e.Eq="=",e.Lt="<",e.Gt=">",e.GtEq=">=",e.LtEq="<="}(Ur||(Ur={}));class zr{constructor(){this.properties=[],this.constraints=[]}addProperty(e,t){const n=this.properties.findIndex((t=>t.key===e));return n>=0?this.properties[n]={key:e,value:t}:this.properties.push({key:e,value:t}),this}addConstraint(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ur.Eq;return this.constraints.push({key:e,value:t,comparisonOperator:n}),this}getDecorations(){return{properties:this.properties,constraints:this.constraints.map((e=>"(".concat(e.key+e.comparisonOperator+e.value,")")))}}getDemandRequest(){const e=this.getDecorations();let t;t=e.constraints.length?1==e.constraints.length?e.constraints[0]:"(&".concat(e.constraints.join("\n\t"),")"):"(&)";const n={};return e.properties.forEach((e=>n[e.key]=e.value)),{constraints:t,properties:n}}parseConstraint(e){for(const t in Ur){const n=Ur[t],r=e.slice(1,-1).split(n);if(2===r.length)return{key:r[0],value:r[1],comparisonOperator:n}}throw new Fr('Unable to parse constraint "'.concat(e,'"'))}addDecoration(e){return e.properties&&e.properties.forEach((e=>{this.addProperty(e.key,e.value)})),e.constraints&&e.constraints.forEach((e=>{const{key:t,value:n,comparisonOperator:r}={...this.parseConstraint(e)};this.addConstraint(t,n,r)})),this}addDecorations(e){return e.forEach((e=>this.addDecoration(e))),this}}const Vr=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise((n=>setTimeout(n,e*(t?1:1e3))))},qr="undefined"!=typeof window&&void 0!==window.document,Hr="undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node,Wr="object"==typeof self&&self.constructor&&"DedicatedWorkerGlobalScope"===self.constructor.name;Object.freeze({__proto__:null,checkAndThrowUnsupportedInBrowserError:function(e){if(qr)throw new Fr("Feature ".concat(e," is unsupported in the browser."))},isBrowser:qr,isNode:Hr,isWebWorker:Wr});var Gr=Object.freeze({__proto__:null,default:{}});function Yr(){const e=()=>{};return{child:()=>Yr(),debug:e,info:e,warn:e,error:e}}var Kr="undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function $r(){throw new Error("setTimeout has not been defined")}function Qr(){throw new Error("clearTimeout has not been defined")}var Jr=$r,Xr=Qr;function Zr(e){if(Jr===setTimeout)return setTimeout(e,0);if((Jr===$r||!Jr)&&setTimeout)return Jr=setTimeout,setTimeout(e,0);try{return Jr(e,0)}catch(Vr){try{return Jr.call(null,e,0)}catch(Vr){return Jr.call(this,e,0)}}}"function"==typeof Kr.setTimeout&&(Jr=setTimeout),"function"==typeof Kr.clearTimeout&&(Xr=clearTimeout);var ei,ti=[],ni=!1,ri=-1;function ii(){ni&&ei&&(ni=!1,ei.length?ti=ei.concat(ti):ri=-1,ti.length&&oi())}function oi(){if(!ni){var e=Zr(ii);ni=!0;for(var t=ti.length;t;){for(ei=ti,ti=[];++ri<t;)ei&&ei[ri].run();ri=-1,t=ti.length}ei=null,ni=!1,function(e){if(Xr===clearTimeout)return clearTimeout(e);if((Xr===Qr||!Xr)&&clearTimeout)return Xr=clearTimeout,clearTimeout(e);try{return Xr(e)}catch(t){try{return Xr.call(null,e)}catch(t){return Xr.call(this,e)}}}(e)}}function si(e,t){this.fun=e,this.array=t}function ai(){}si.prototype.run=function(){this.fun.apply(null,this.array)};var li=ai,ci=ai,ui=ai,di=ai,hi=ai,fi=ai,pi=ai,gi=Kr.performance||{},mi=gi.now||gi.mozNow||gi.msNow||gi.oNow||gi.webkitNow||function(){return(new Date).getTime()},vi=new Date,yi={nextTick:function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];ti.push(new si(e,t)),1!==ti.length||ni||Zr(oi)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:li,addListener:ci,once:ui,off:di,removeListener:hi,removeAllListeners:fi,emit:pi,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*mi.call(gi),n=Math.floor(t),r=Math.floor(t%1*1e9);return e&&(n-=e[0],(r-=e[1])<0&&(n--,r+=1e9)),[n,r]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-vi)/1e3}},bi="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:{};function wi(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Si(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var n=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})})),n}var _i,Ei,ki={exports:{}};var Pi=function(e){function t(e){let r,i,o,s=null;function a(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];if(!a.enabled)return;const o=a,s=Number(new Date),l=s-(r||s);o.diff=l,o.prev=r,o.curr=s,r=s,n[0]=t.coerce(n[0]),"string"!=typeof n[0]&&n.unshift("%O");let c=0;n[0]=n[0].replace(/%([a-zA-Z%])/g,((e,r)=>{if("%%"===e)return"%";c++;const i=t.formatters[r];if("function"==typeof i){const t=n[c];e=i.call(o,t),n.splice(c,1),c--}return e})),t.formatArgs.call(o,n),(o.log||t.log).apply(o,n)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=n,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(i!==t.namespaces&&(i=t.namespaces,o=t.enabled(e)),o),set:e=>{s=e}}),"function"==typeof t.init&&t.init(a),a}function n(e,n){const r=t(this.namespace+(void 0===n?":":n)+e);return r.log=this.log,r}function r(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(r),...t.skips.map(r).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const r=("string"==typeof e?e:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=function(){if(Ei)return _i;Ei=1;var e=1e3,t=60*e,n=60*t,r=24*n;function i(e,t,n,r){var i=t>=1.5*n;return Math.round(e/n)+" "+r+(i?"s":"")}return _i=function(o,s){s=s||{};var a=typeof o;if("string"===a&&o.length>0)return function(i){if(!((i=String(i)).length>100)){var o=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(i);if(o){var s=parseFloat(o[1]);switch((o[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"weeks":case"week":case"w":return 6048e5*s;case"days":case"day":case"d":return s*r;case"hours":case"hour":case"hrs":case"hr":case"h":return s*n;case"minutes":case"minute":case"mins":case"min":case"m":return s*t;case"seconds":case"second":case"secs":case"sec":case"s":return s*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}(o);if("number"===a&&isFinite(o))return s.long?function(o){var s=Math.abs(o);return s>=r?i(o,s,r,"day"):s>=n?i(o,s,n,"hour"):s>=t?i(o,s,t,"minute"):s>=e?i(o,s,e,"second"):o+" ms"}(o):function(i){var o=Math.abs(i);return o>=r?Math.round(i/r)+"d":o>=n?Math.round(i/n)+"h":o>=t?Math.round(i/t)+"m":o>=e?Math.round(i/e)+"s":i+"ms"}(o);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(o))}}(),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((n=>{t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t};!function(e,t){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(r++,"%c"===e&&(i=r))})),t.splice(i,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&void 0!==yi&&"env"in yi&&(e=yi.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=Pi(t);const{formatters:n}=e.exports;n.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}(ki,ki.exports);var Ai=wi(ki.exports);function xi(e){const t=e.startsWith("golem-js:")?e:"golem-js:".concat(e),n=Ai(t);function r(e,t){t?n("".concat(e," %o"),t):n(e)}return{child:e=>xi("".concat(t,":").concat(e)),info:function(e,t){r(e,t)},error:function(e,t){r(e,t)},warn:function(e,t){r(e,t)},debug:function(e,t){r(e,t)},log:r}}function Ii(){var e;return Hr&&null!==(e={NODE_ENV:"production",PUBLIC_URL:"/degen",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_IMAGE:"5d69025c5ca1d045831f8487786e7851fb4d5250a25d24c185ccc2fb"}.PAYMENT_NETWORK)&&void 0!==e?e:"goerli"}var Oi={},Ti={},Ri={};Object.defineProperty(Ri,"__esModule",{value:!0}),Ri.Configuration=void 0,Ri.Configuration=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.apiKey=e.apiKey,this.username=e.username,this.password=e.password,this.accessToken=e.accessToken,this.basePath=e.basePath,this.baseOptions=e.baseOptions,this.formDataCtor=e.formDataCtor}isJsonMime(e){const t=new RegExp("^(application/json|[^;/ \t]+/[^;/ \t]+[+]json)[ \t]*(;.*)?$","i");return null!==e&&(t.test(e)||"application/json-patch+json"===e.toLowerCase())}};var Ci,Ni,ji={},Di={};Ci=Di,Object.defineProperty(Ci,"__esModule",{value:!0}),Ci.ActivityStateStateEnum=void 0,(Ni=Ci.ActivityStateStateEnum||(Ci.ActivityStateStateEnum={})).New="New",Ni.Initialized="Initialized",Ni.Deployed="Deployed",Ni.Ready="Ready",Ni.Unresponsive="Unresponsive",Ni.Terminated="Terminated";var Fi={};Object.defineProperty(Fi,"__esModule",{value:!0});var Li={};Object.defineProperty(Li,"__esModule",{value:!0});var Mi={};Object.defineProperty(Mi,"__esModule",{value:!0});var Bi={};Object.defineProperty(Bi,"__esModule",{value:!0});var Ui={};Object.defineProperty(Ui,"__esModule",{value:!0});var zi={};Object.defineProperty(zi,"__esModule",{value:!0});var Vi={};Object.defineProperty(Vi,"__esModule",{value:!0});var qi={};Object.defineProperty(qi,"__esModule",{value:!0});var Hi={};Object.defineProperty(Hi,"__esModule",{value:!0});var Wi={};Object.defineProperty(Wi,"__esModule",{value:!0});var Gi={};Object.defineProperty(Gi,"__esModule",{value:!0});var Yi={};Object.defineProperty(Yi,"__esModule",{value:!0});var Ki={};Object.defineProperty(Ki,"__esModule",{value:!0});var $i={};Object.defineProperty($i,"__esModule",{value:!0});var Qi={};Object.defineProperty(Qi,"__esModule",{value:!0});var Ji={};Object.defineProperty(Ji,"__esModule",{value:!0});var Xi={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.ExeScriptCommandResultResultEnum=void 0,(t=e.ExeScriptCommandResultResultEnum||(e.ExeScriptCommandResultResultEnum={})).Ok="Ok",t.Error="Error"}(Xi);var Zi={};Object.defineProperty(Zi,"__esModule",{value:!0});var eo={};Object.defineProperty(eo,"__esModule",{value:!0});var to={};Object.defineProperty(to,"__esModule",{value:!0});var no={};Object.defineProperty(no,"__esModule",{value:!0});var ro={};Object.defineProperty(ro,"__esModule",{value:!0});var io={};Object.defineProperty(io,"__esModule",{value:!0});var oo={};Object.defineProperty(oo,"__esModule",{value:!0});var so={};Object.defineProperty(so,"__esModule",{value:!0});var ao={};Object.defineProperty(ao,"__esModule",{value:!0});var lo={};Object.defineProperty(lo,"__esModule",{value:!0});var co={};Object.defineProperty(co,"__esModule",{value:!0});var uo={};Object.defineProperty(uo,"__esModule",{value:!0});var ho={};Object.defineProperty(ho,"__esModule",{value:!0});var fo={};Object.defineProperty(fo,"__esModule",{value:!0});var po={};Object.defineProperty(po,"__esModule",{value:!0});var go={};Object.defineProperty(go,"__esModule",{value:!0});var mo={};Object.defineProperty(mo,"__esModule",{value:!0});var vo={};Object.defineProperty(vo,"__esModule",{value:!0});var yo={};Object.defineProperty(yo,"__esModule",{value:!0});var bo={};Object.defineProperty(bo,"__esModule",{value:!0});var wo={};Object.defineProperty(wo,"__esModule",{value:!0});var So={};Object.defineProperty(So,"__esModule",{value:!0});var _o={};Object.defineProperty(_o,"__esModule",{value:!0});var Eo={};Object.defineProperty(Eo,"__esModule",{value:!0});var ko={};Object.defineProperty(ko,"__esModule",{value:!0});var Po={};Object.defineProperty(Po,"__esModule",{value:!0});var Ao={};Object.defineProperty(Ao,"__esModule",{value:!0});var xo={};Object.defineProperty(xo,"__esModule",{value:!0});var Io={};Object.defineProperty(Io,"__esModule",{value:!0});var Oo,To={};Object.defineProperty(To,"__esModule",{value:!0}),function(e){var t=bi&&bi.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=bi&&bi.__exportStar||function(e,n){for(var r in e)"default"===r||n.hasOwnProperty(r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(Di,e),n(Fi,e),n(Li,e),n(Mi,e),n(Bi,e),n(Ui,e),n(zi,e),n(Vi,e),n(qi,e),n(Hi,e),n(Wi,e),n(Gi,e),n(Yi,e),n(Ki,e),n($i,e),n(Qi,e),n(Ji,e),n(Xi,e),n(Zi,e),n(eo,e),n(to,e),n(no,e),n(ro,e),n(io,e),n(oo,e),n(so,e),n(ao,e),n(lo,e),n(co,e),n(uo,e),n(ho,e),n(fo,e),n(po,e),n(go,e),n(mo,e),n(vo,e),n(yo,e),n(bo,e),n(wo,e),n(So,e),n(_o,e),n(Eo,e),n(ko,e),n(Po,e),n(Ao,e),n(xo,e),n(Io,e),n(To,e)}(ji);var Ro={},Co={exports:{}},No=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}},jo=No,Do=Object.prototype.toString;function Fo(e){return"[object Array]"===Do.call(e)}function Lo(e){return void 0===e}function Mo(e){return null!==e&&"object"==typeof e}function Bo(e){if("[object Object]"!==Do.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function Uo(e){return"[object Function]"===Do.call(e)}function zo(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),Fo(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}var Vo={isArray:Fo,isArrayBuffer:function(e){return"[object ArrayBuffer]"===Do.call(e)},isBuffer:function(e){return null!==e&&!Lo(e)&&null!==e.constructor&&!Lo(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:Mo,isPlainObject:Bo,isUndefined:Lo,isDate:function(e){return"[object Date]"===Do.call(e)},isFile:function(e){return"[object File]"===Do.call(e)},isBlob:function(e){return"[object Blob]"===Do.call(e)},isFunction:Uo,isStream:function(e){return Mo(e)&&Uo(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:zo,merge:function e(){var t={};function n(n,r){Bo(t[r])&&Bo(n)?t[r]=e(t[r],n):Bo(n)?t[r]=e({},n):Fo(n)?t[r]=n.slice():t[r]=n}for(var r=0,i=arguments.length;r<i;r++)zo(arguments[r],n);return t},extend:function(e,t,n){return zo(t,(function(t,r){e[r]=n&&"function"==typeof t?jo(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}},qo=Vo;function Ho(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Wo=function(e,t,n){if(!t)return e;var r;if(n)r=n(t);else if(qo.isURLSearchParams(t))r=t.toString();else{var i=[];qo.forEach(t,(function(e,t){null!=e&&(qo.isArray(e)?t+="[]":e=[e],qo.forEach(e,(function(e){qo.isDate(e)?e=e.toISOString():qo.isObject(e)&&(e=JSON.stringify(e)),i.push(Ho(t)+"="+Ho(e))})))})),r=i.join("&")}if(r){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e},Go=Vo;function Yo(){this.handlers=[]}Yo.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},Yo.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},Yo.prototype.forEach=function(e){Go.forEach(this.handlers,(function(t){null!==t&&e(t)}))};var Ko,$o,Qo,Jo,Xo,Zo,es,ts,ns,rs,is,os,ss,as,ls,cs,us,ds,hs=Yo,fs=Vo,ps=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e};function gs(){if($o)return Ko;$o=1;var e=ps;return Ko=function(t,n,r,i,o){var s=new Error(t);return e(s,n,r,i,o)},Ko}function ms(){if(os)return is;os=1;var e=ts?es:(ts=1,es=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}),t=rs?ns:(rs=1,ns=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e});return is=function(n,r){return n&&!e(r)?t(n,r):r}}var vs=Vo,ys=function(e,t){fs.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))},bs=ps,ws={"Content-Type":"application/x-www-form-urlencoded"};function Ss(e,t){!vs.isUndefined(e)&&vs.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var _s,Es={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==yi&&"[object process]"===Object.prototype.toString.call(yi))&&(_s=function(){if(ds)return us;ds=1;var e=Vo,t=function(){if(Jo)return Qo;Jo=1;var e=gs();return Qo=function(t,n,r){var i=r.config.validateStatus;r.status&&i&&!i(r.status)?n(e("Request failed with status code "+r.status,r.config,null,r.request,r)):t(r)},Qo}(),n=function(){if(Zo)return Xo;Zo=1;var e=Vo;return Xo=e.isStandardBrowserEnv()?{write:function(t,n,r,i,o,s){var a=[];a.push(t+"="+encodeURIComponent(n)),e.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),e.isString(i)&&a.push("path="+i),e.isString(o)&&a.push("domain="+o),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},Xo}(),r=Wo,i=ms(),o=function(){if(as)return ss;as=1;var e=Vo,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return ss=function(n){var r,i,o,s={};return n?(e.forEach(n.split("\n"),(function(n){if(o=n.indexOf(":"),r=e.trim(n.substr(0,o)).toLowerCase(),i=e.trim(n.substr(o+1)),r){if(s[r]&&t.indexOf(r)>=0)return;s[r]="set-cookie"===r?(s[r]?s[r]:[]).concat([i]):s[r]?s[r]+", "+i:i}})),s):s}}(),s=function(){if(cs)return ls;cs=1;var e=Vo;return ls=e.isStandardBrowserEnv()?function(){var t,n=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function i(e){var t=e;return n&&(r.setAttribute("href",t),t=r.href),r.setAttribute("href",t),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return t=i(window.location.href),function(n){var r=e.isString(n)?i(n):n;return r.protocol===t.protocol&&r.host===t.host}}():function(){return!0}}(),a=gs();return us=function(l){return new Promise((function(c,u){var d=l.data,h=l.headers,f=l.responseType;e.isFormData(d)&&delete h["Content-Type"];var p=new XMLHttpRequest;if(l.auth){var g=l.auth.username||"",m=l.auth.password?unescape(encodeURIComponent(l.auth.password)):"";h.Authorization="Basic "+btoa(g+":"+m)}var v=i(l.baseURL,l.url);function y(){if(p){var e="getAllResponseHeaders"in p?o(p.getAllResponseHeaders()):null,n={data:f&&"text"!==f&&"json"!==f?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:e,config:l,request:p};t(c,u,n),p=null}}if(p.open(l.method.toUpperCase(),r(v,l.params,l.paramsSerializer),!0),p.timeout=l.timeout,"onloadend"in p?p.onloadend=y:p.onreadystatechange=function(){p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))&&setTimeout(y)},p.onabort=function(){p&&(u(a("Request aborted",l,"ECONNABORTED",p)),p=null)},p.onerror=function(){u(a("Network Error",l,null,p)),p=null},p.ontimeout=function(){var e="timeout of "+l.timeout+"ms exceeded";l.timeoutErrorMessage&&(e=l.timeoutErrorMessage),u(a(e,l,l.transitional&&l.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",p)),p=null},e.isStandardBrowserEnv()){var b=(l.withCredentials||s(v))&&l.xsrfCookieName?n.read(l.xsrfCookieName):void 0;b&&(h[l.xsrfHeaderName]=b)}"setRequestHeader"in p&&e.forEach(h,(function(e,t){void 0===d&&"content-type"===t.toLowerCase()?delete h[t]:p.setRequestHeader(t,e)})),e.isUndefined(l.withCredentials)||(p.withCredentials=!!l.withCredentials),f&&"json"!==f&&(p.responseType=l.responseType),"function"==typeof l.onDownloadProgress&&p.addEventListener("progress",l.onDownloadProgress),"function"==typeof l.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",l.onUploadProgress),l.cancelToken&&l.cancelToken.promise.then((function(e){p&&(p.abort(),u(e),p=null)})),d||(d=null),p.send(d)}))},us}()),_s),transformRequest:[function(e,t){return ys(t,"Accept"),ys(t,"Content-Type"),vs.isFormData(e)||vs.isArrayBuffer(e)||vs.isBuffer(e)||vs.isStream(e)||vs.isFile(e)||vs.isBlob(e)?e:vs.isArrayBufferView(e)?e.buffer:vs.isURLSearchParams(e)?(Ss(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):vs.isObject(e)||t&&"application/json"===t["Content-Type"]?(Ss(t,"application/json"),function(e,t,n){if(vs.isString(e))try{return(0,JSON.parse)(e),vs.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional,n=t&&t.silentJSONParsing,r=t&&t.forcedJSONParsing,i=!n&&"json"===this.responseType;if(i||r&&vs.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(i){if("SyntaxError"===e.name)throw bs(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};vs.forEach(["delete","get","head"],(function(e){Es.headers[e]={}})),vs.forEach(["post","put","patch"],(function(e){Es.headers[e]=vs.merge(ws)}));var ks,Ps,As=Es,xs=Vo,Is=As;function Os(){return Ps?ks:(Ps=1,ks=function(e){return!(!e||!e.__CANCEL__)})}var Ts=Vo,Rs=function(e,t,n){var r=this||Is;return xs.forEach(n,(function(n){e=n.call(r,e,t)})),e},Cs=Os(),Ns=As;function js(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var Ds=Vo,Fs=function(e,t){t=t||{};var n={},r=["url","method","data"],i=["headers","auth","proxy","params"],o=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],s=["validateStatus"];function a(e,t){return Ds.isPlainObject(e)&&Ds.isPlainObject(t)?Ds.merge(e,t):Ds.isPlainObject(t)?Ds.merge({},t):Ds.isArray(t)?t.slice():t}function l(r){Ds.isUndefined(t[r])?Ds.isUndefined(e[r])||(n[r]=a(void 0,e[r])):n[r]=a(e[r],t[r])}Ds.forEach(r,(function(e){Ds.isUndefined(t[e])||(n[e]=a(void 0,t[e]))})),Ds.forEach(i,l),Ds.forEach(o,(function(r){Ds.isUndefined(t[r])?Ds.isUndefined(e[r])||(n[r]=a(void 0,e[r])):n[r]=a(void 0,t[r])})),Ds.forEach(s,(function(r){r in t?n[r]=a(e[r],t[r]):r in e&&(n[r]=a(void 0,e[r]))}));var c=r.concat(i).concat(o).concat(s),u=Object.keys(e).concat(Object.keys(t)).filter((function(e){return-1===c.indexOf(e)}));return Ds.forEach(u,l),n},Ls={name:"axios",version:"0.21.4",description:"Promise based HTTP client for the browser and node.js",main:"index.js",scripts:{test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},repository:{type:"git",url:"https://github.com/axios/axios.git"},keywords:["xhr","http","ajax","promise","node"],author:"Matt Zabriskie",license:"MIT",bugs:{url:"https://github.com/axios/axios/issues"},homepage:"https://axios-http.com",devDependencies:{coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},browser:{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},jsdelivr:"dist/axios.min.js",unpkg:"dist/axios.min.js",typings:"./index.d.ts",dependencies:{"follow-redirects":"^1.14.0"},bundlesize:[{path:"./dist/axios.min.js",threshold:"5kB"}]},Ms={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){Ms[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var Bs={},Us=Ls.version.split(".");function zs(e,t){for(var n=t?t.split("."):Us,r=e.split("."),i=0;i<3;i++){if(n[i]>r[i])return!0;if(n[i]<r[i])return!1}return!1}Ms.transitional=function(e,t,n){var r=t&&zs(t);function i(e,t){return"[Axios v"+Ls.version+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,o,s){if(!1===e)throw new Error(i(o," has been removed in "+t));return r&&!Bs[o]&&(Bs[o]=!0,console.warn(i(o," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,o,s)}};var Vs,qs,Hs,Ws,Gs,Ys,Ks,$s,Qs={isOlderVersion:zs,assertOptions:function(e,t,n){if("object"!=typeof e)throw new TypeError("options must be an object");for(var r=Object.keys(e),i=r.length;i-- >0;){var o=r[i],s=t[o];if(s){var a=e[o],l=void 0===a||s(a,o,e);if(!0!==l)throw new TypeError("option "+o+" must be "+l)}else if(!0!==n)throw Error("Unknown option "+o)}},validators:Ms},Js=Vo,Xs=Wo,Zs=hs,ea=function(e){return js(e),e.headers=e.headers||{},e.data=Rs.call(e,e.data,e.headers,e.transformRequest),e.headers=Ts.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),Ts.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||Ns.adapter)(e).then((function(t){return js(e),t.data=Rs.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return Cs(t)||(js(e),t&&t.response&&(t.response.data=Rs.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))},ta=Fs,na=Qs,ra=na.validators;function ia(e){this.defaults=e,this.interceptors={request:new Zs,response:new Zs}}function oa(){if(qs)return Vs;function e(e){this.message=e}return qs=1,e.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,Vs=e}ia.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=ta(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=e.transitional;void 0!==t&&na.assertOptions(t,{silentJSONParsing:ra.transitional(ra.boolean,"1.0.0"),forcedJSONParsing:ra.transitional(ra.boolean,"1.0.0"),clarifyTimeoutError:ra.transitional(ra.boolean,"1.0.0")},!1);var n=[],r=!0;this.interceptors.request.forEach((function(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(r=r&&t.synchronous,n.unshift(t.fulfilled,t.rejected))}));var i,o=[];if(this.interceptors.response.forEach((function(e){o.push(e.fulfilled,e.rejected)})),!r){var s=[ea,void 0];for(Array.prototype.unshift.apply(s,n),s=s.concat(o),i=Promise.resolve(e);s.length;)i=i.then(s.shift(),s.shift());return i}for(var a=e;n.length;){var l=n.shift(),c=n.shift();try{a=l(a)}catch(e){c(e);break}}try{i=ea(a)}catch(e){return Promise.reject(e)}for(;o.length;)i=i.then(o.shift(),o.shift());return i},ia.prototype.getUri=function(e){return e=ta(this.defaults,e),Xs(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},Js.forEach(["delete","get","head","options"],(function(e){ia.prototype[e]=function(t,n){return this.request(ta(n||{},{method:e,url:t,data:(n||{}).data}))}})),Js.forEach(["post","put","patch"],(function(e){ia.prototype[e]=function(t,n,r){return this.request(ta(r||{},{method:e,url:t,data:n}))}}));var sa=Vo,aa=No,la=ia,ca=Fs;function ua(e){var t=new la(e),n=aa(la.prototype.request,t);return sa.extend(n,la.prototype,t),sa.extend(n,t),n}var da=ua(As);da.Axios=la,da.create=function(e){return ua(ca(da.defaults,e))},da.Cancel=oa(),da.CancelToken=function(){if(Ws)return Hs;Ws=1;var e=oa();function t(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var n;this.promise=new Promise((function(e){n=e}));var r=this;t((function(t){r.reason||(r.reason=new e(t),n(r.reason))}))}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.source=function(){var e;return{token:new t((function(t){e=t})),cancel:e}},Hs=t}(),da.isCancel=Os(),da.all=function(e){return Promise.all(e)},da.spread=Ys?Gs:(Ys=1,Gs=function(e){return function(t){return e.apply(null,t)}}),da.isAxiosError=$s?Ks:($s=1,Ks=function(e){return"object"==typeof e&&!0===e.isAxiosError}),Co.exports=da,Co.exports.default=da;var ha=Co.exports,fa={},pa={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RequiredError=e.BaseAPI=e.COLLECTION_FORMATS=e.BASE_PATH=void 0;const t=ha;e.BASE_PATH="http://localhost/activity-api/v1".replace(/\/+$/,""),e.COLLECTION_FORMATS={csv:",",ssv:" ",tsv:"\t",pipes:"|"},e.BaseAPI=class{constructor(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.BASE_PATH,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.default;this.basePath=r,this.axios=i,n&&(this.configuration=n,this.basePath=n.basePath||this.basePath)}};class n extends Error{constructor(e,t){super(t),this.field=e,this.name="RequiredError"}}e.RequiredError=n}(pa);var ga=bi&&bi.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(fa,"__esModule",{value:!0}),fa.createRequestFunction=fa.toPathString=fa.serializeDataIfNeeded=fa.setSearchParams=fa.setOAuthToObject=fa.setBearerAuthToObject=fa.setBasicAuthToObject=fa.setApiKeyToObject=fa.assertParamExists=fa.DUMMY_BASE_URL=void 0;const ma=pa;fa.DUMMY_BASE_URL="https://example.com",fa.assertParamExists=function(e,t,n){if(null==n)throw new ma.RequiredError(t,"Required parameter ".concat(t," was null or undefined when calling ").concat(e,"."))},fa.setApiKeyToObject=function(e,t,n){return ga(this,void 0,void 0,(function*(){if(n&&n.apiKey){const r="function"==typeof n.apiKey?yield n.apiKey(t):yield n.apiKey;e[t]=r}}))},fa.setBasicAuthToObject=function(e,t){t&&(t.username||t.password)&&(e.auth={username:t.username,password:t.password})},fa.setBearerAuthToObject=function(e,t){return ga(this,void 0,void 0,(function*(){if(t&&t.accessToken){const n="function"==typeof t.accessToken?yield t.accessToken():yield t.accessToken;e.Authorization="Bearer "+n}}))},fa.setOAuthToObject=function(e,t,n,r){return ga(this,void 0,void 0,(function*(){if(r&&r.accessToken){const i="function"==typeof r.accessToken?yield r.accessToken(t,n):yield r.accessToken;e.Authorization="Bearer "+i}}))},fa.setSearchParams=function(e){const t=new URLSearchParams(e.search);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(const o of r)for(const e in o)if(Array.isArray(o[e])){t.delete(e);for(const n of o[e])t.append(e,n)}else t.set(e,o[e]);e.search=t.toString()},fa.serializeDataIfNeeded=function(e,t,n){const r="string"!=typeof e;return(r&&n&&n.isJsonMime?n.isJsonMime(t.headers["Content-Type"]):r)?JSON.stringify(void 0!==e?e:{}):e||""},fa.toPathString=function(e){return e.pathname+e.search+e.hash},fa.createRequestFunction=function(e,t,n,r){return function(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n;const s=Object.assign(Object.assign({},e.options),{url:((null==r?void 0:r.basePath)||o)+e.url});return i.request(s)}},function(e){var t=bi&&bi.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.RequestorControlApi=e.RequestorControlApiFactory=e.RequestorControlApiFp=e.RequestorControlApiAxiosParamCreator=void 0;const n=ha,r=fa,i=pa;e.RequestorControlApiAxiosParamCreator=function(e){var n=this;return{callEncrypted:function(i,o){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t(n,void 0,void 0,(function*(){r.assertParamExists("callEncrypted","activityId",i),r.assertParamExists("callEncrypted","body",o);const t="/activity/{activityId}/encrypted".replace("{activityId}",encodeURIComponent(String(i))),n=new URL(t,r.DUMMY_BASE_URL);let a;e&&(a=e.baseOptions);const l=Object.assign(Object.assign({method:"POST"},a),s),c={};yield r.setBearerAuthToObject(c,e),c["Content-Type"]="application/octet-stream",r.setSearchParams(n,{});let u=a&&a.headers?a.headers:{};return l.headers=Object.assign(Object.assign(Object.assign({},c),u),s.headers),l.data=r.serializeDataIfNeeded(o,l,e),{url:r.toPathString(n),options:l}}))},createActivity:function(i,o){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t(n,void 0,void 0,(function*(){r.assertParamExists("createActivity","stringCreateActivityRequest",i);const t=new URL("/activity",r.DUMMY_BASE_URL);let n;e&&(n=e.baseOptions);const a=Object.assign(Object.assign({method:"POST"},n),s),l={},c={};yield r.setBearerAuthToObject(l,e),void 0!==o&&(c.timeout=o),l["Content-Type"]="application/json",r.setSearchParams(t,c);let u=n&&n.headers?n.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},l),u),s.headers),a.data=r.serializeDataIfNeeded(i,a,e),{url:r.toPathString(t),options:a}}))},destroyActivity:function(i,o){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t(n,void 0,void 0,(function*(){r.assertParamExists("destroyActivity","activityId",i);const t="/activity/{activityId}".replace("{activityId}",encodeURIComponent(String(i))),n=new URL(t,r.DUMMY_BASE_URL);let a;e&&(a=e.baseOptions);const l=Object.assign(Object.assign({method:"DELETE"},a),s),c={},u={};yield r.setBearerAuthToObject(c,e),void 0!==o&&(u.timeout=o),r.setSearchParams(n,u);let d=a&&a.headers?a.headers:{};return l.headers=Object.assign(Object.assign(Object.assign({},c),d),s.headers),{url:r.toPathString(n),options:l}}))},exec:function(i,o){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t(n,void 0,void 0,(function*(){r.assertParamExists("exec","activityId",i),r.assertParamExists("exec","script",o);const t="/activity/{activityId}/exec".replace("{activityId}",encodeURIComponent(String(i))),n=new URL(t,r.DUMMY_BASE_URL);let a;e&&(a=e.baseOptions);const l=Object.assign(Object.assign({method:"POST"},a),s),c={};yield r.setBearerAuthToObject(c,e),c["Content-Type"]="application/json",r.setSearchParams(n,{});let u=a&&a.headers?a.headers:{};return l.headers=Object.assign(Object.assign(Object.assign({},c),u),s.headers),l.data=r.serializeDataIfNeeded(o,l,e),{url:r.toPathString(n),options:l}}))},getExecBatchResults:function(i,o,s,a){let l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return t(n,void 0,void 0,(function*(){r.assertParamExists("getExecBatchResults","activityId",i),r.assertParamExists("getExecBatchResults","batchId",o);const t="/activity/{activityId}/exec/{batchId}".replace("{activityId}",encodeURIComponent(String(i))).replace("{batchId}",encodeURIComponent(String(o))),n=new URL(t,r.DUMMY_BASE_URL);let c;e&&(c=e.baseOptions);const u=Object.assign(Object.assign({method:"GET"},c),l),d={},h={};yield r.setBearerAuthToObject(d,e),void 0!==s&&(h.commandIndex=s),void 0!==a&&(h.timeout=a),r.setSearchParams(n,h);let f=c&&c.headers?c.headers:{};return u.headers=Object.assign(Object.assign(Object.assign({},d),f),l.headers),{url:r.toPathString(n),options:u}}))}}},e.RequestorControlApiFp=function(o){const s=e.RequestorControlApiAxiosParamCreator(o);return{callEncrypted(e,a,l){return t(this,void 0,void 0,(function*(){const t=yield s.callEncrypted(e,a,l);return r.createRequestFunction(t,n.default,i.BASE_PATH,o)}))},createActivity(e,a,l){return t(this,void 0,void 0,(function*(){const t=yield s.createActivity(e,a,l);return r.createRequestFunction(t,n.default,i.BASE_PATH,o)}))},destroyActivity(e,a,l){return t(this,void 0,void 0,(function*(){const t=yield s.destroyActivity(e,a,l);return r.createRequestFunction(t,n.default,i.BASE_PATH,o)}))},exec(e,a,l){return t(this,void 0,void 0,(function*(){const t=yield s.exec(e,a,l);return r.createRequestFunction(t,n.default,i.BASE_PATH,o)}))},getExecBatchResults(e,a,l,c,u){return t(this,void 0,void 0,(function*(){const t=yield s.getExecBatchResults(e,a,l,c,u);return r.createRequestFunction(t,n.default,i.BASE_PATH,o)}))}}},e.RequestorControlApiFactory=function(t,n,r){const i=e.RequestorControlApiFp(t);return{callEncrypted:(e,t,o)=>i.callEncrypted(e,t,o).then((e=>e(r,n))),createActivity:(e,t,o)=>i.createActivity(e,t,o).then((e=>e(r,n))),destroyActivity:(e,t,o)=>i.destroyActivity(e,t,o).then((e=>e(r,n))),exec:(e,t,o)=>i.exec(e,t,o).then((e=>e(r,n))),getExecBatchResults:(e,t,o,s,a)=>i.getExecBatchResults(e,t,o,s,a).then((e=>e(r,n)))}},e.RequestorControlApi=class extends i.BaseAPI{callEncrypted(t,n,r){return e.RequestorControlApiFp(this.configuration).callEncrypted(t,n,r).then((e=>e(this.axios,this.basePath)))}createActivity(t,n,r){return e.RequestorControlApiFp(this.configuration).createActivity(t,n,r).then((e=>e(this.axios,this.basePath)))}destroyActivity(t,n,r){return e.RequestorControlApiFp(this.configuration).destroyActivity(t,n,r).then((e=>e(this.axios,this.basePath)))}exec(t,n,r){return e.RequestorControlApiFp(this.configuration).exec(t,n,r).then((e=>e(this.axios,this.basePath)))}getExecBatchResults(t,n,r,i,o){return e.RequestorControlApiFp(this.configuration).getExecBatchResults(t,n,r,i,o).then((e=>e(this.axios,this.basePath)))}}}(Ro);var va,ya={};!function(e){var t=bi&&bi.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.RequestorStateApi=e.RequestorStateApiFactory=e.RequestorStateApiFp=e.RequestorStateApiAxiosParamCreator=void 0;const n=ha,r=fa,i=pa;e.RequestorStateApiAxiosParamCreator=function(e){var n=this;return{getActivityState:function(i){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t(n,void 0,void 0,(function*(){r.assertParamExists("getActivityState","activityId",i);const t="/activity/{activityId}/state".replace("{activityId}",encodeURIComponent(String(i))),n=new URL(t,r.DUMMY_BASE_URL);let s;e&&(s=e.baseOptions);const a=Object.assign(Object.assign({method:"GET"},s),o),l={};yield r.setBearerAuthToObject(l,e),r.setSearchParams(n,{});let c=s&&s.headers?s.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},l),c),o.headers),{url:r.toPathString(n),options:a}}))},getActivityUsage:function(i){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t(n,void 0,void 0,(function*(){r.assertParamExists("getActivityUsage","activityId",i);const t="/activity/{activityId}/usage".replace("{activityId}",encodeURIComponent(String(i))),n=new URL(t,r.DUMMY_BASE_URL);let s;e&&(s=e.baseOptions);const a=Object.assign(Object.assign({method:"GET"},s),o),l={};yield r.setBearerAuthToObject(l,e),r.setSearchParams(n,{});let c=s&&s.headers?s.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},l),c),o.headers),{url:r.toPathString(n),options:a}}))},getRunningCommand:function(i){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t(n,void 0,void 0,(function*(){r.assertParamExists("getRunningCommand","activityId",i);const t="/activity/{activityId}/command".replace("{activityId}",encodeURIComponent(String(i))),n=new URL(t,r.DUMMY_BASE_URL);let s;e&&(s=e.baseOptions);const a=Object.assign(Object.assign({method:"GET"},s),o),l={};yield r.setBearerAuthToObject(l,e),r.setSearchParams(n,{});let c=s&&s.headers?s.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},l),c),o.headers),{url:r.toPathString(n),options:a}}))}}},e.RequestorStateApiFp=function(o){const s=e.RequestorStateApiAxiosParamCreator(o);return{getActivityState(e,a){return t(this,void 0,void 0,(function*(){const t=yield s.getActivityState(e,a);return r.createRequestFunction(t,n.default,i.BASE_PATH,o)}))},getActivityUsage(e,a){return t(this,void 0,void 0,(function*(){const t=yield s.getActivityUsage(e,a);return r.createRequestFunction(t,n.default,i.BASE_PATH,o)}))},getRunningCommand(e,a){return t(this,void 0,void 0,(function*(){const t=yield s.getRunningCommand(e,a);return r.createRequestFunction(t,n.default,i.BASE_PATH,o)}))}}},e.RequestorStateApiFactory=function(t,n,r){const i=e.RequestorStateApiFp(t);return{getActivityState:(e,t)=>i.getActivityState(e,t).then((e=>e(r,n))),getActivityUsage:(e,t)=>i.getActivityUsage(e,t).then((e=>e(r,n))),getRunningCommand:(e,t)=>i.getRunningCommand(e,t).then((e=>e(r,n)))}},e.RequestorStateApi=class extends i.BaseAPI{getActivityState(t,n){return e.RequestorStateApiFp(this.configuration).getActivityState(t,n).then((e=>e(this.axios,this.basePath)))}getActivityUsage(t,n){return e.RequestorStateApiFp(this.configuration).getActivityUsage(t,n).then((e=>e(this.axios,this.basePath)))}getRunningCommand(t,n){return e.RequestorStateApiFp(this.configuration).getRunningCommand(t,n).then((e=>e(this.axios,this.basePath)))}}}(ya);var ba=function e(){return va||(va=1,function(t){var n=bi&&bi.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=bi&&bi.__exportStar||function(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),r((Oo||(Oo=1,function(t){var n=bi&&bi.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=bi&&bi.__exportStar||function(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),r(e(),t),r(Ri,t),r(ji,t)}(Ti)),Ti),t),r(Ro,t),r(ya,t)}(Oi)),Oi}(),wa={},Sa={},_a={};Object.defineProperty(_a,"__esModule",{value:!0}),_a.Configuration=void 0,_a.Configuration=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.apiKey=e.apiKey,this.username=e.username,this.password=e.password,this.accessToken=e.accessToken,this.basePath=e.basePath,this.baseOptions=e.baseOptions,this.formDataCtor=e.formDataCtor}isJsonMime(e){const t=new RegExp("^(application/json|[^;/ \t]+/[^;/ \t]+[+]json)[ \t]*(;.*)?$","i");return null!==e&&(t.test(e)||"application/json-patch+json"===e.toLowerCase())}};var Ea={},ka={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.AgreementStateEnum=void 0,function(e){e.Proposal="Proposal",e.Pending="Pending",e.Cancelled="Cancelled",e.Rejected="Rejected",e.Approved="Approved",e.Expired="Expired",e.Terminated="Terminated"}(e.AgreementStateEnum||(e.AgreementStateEnum={}))}(ka);var Pa={};Object.defineProperty(Pa,"__esModule",{value:!0});var Aa={};Object.defineProperty(Aa,"__esModule",{value:!0});var xa={};Object.defineProperty(xa,"__esModule",{value:!0});var Ia={};Object.defineProperty(Ia,"__esModule",{value:!0});var Oa={};Object.defineProperty(Oa,"__esModule",{value:!0});var Ta={};Object.defineProperty(Ta,"__esModule",{value:!0});var Ra={};Object.defineProperty(Ra,"__esModule",{value:!0});var Ca={};Object.defineProperty(Ca,"__esModule",{value:!0});var Na={};Object.defineProperty(Na,"__esModule",{value:!0});var ja={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.AgreementTerminatedEventAllOfTerminatorEnum=void 0,(t=e.AgreementTerminatedEventAllOfTerminatorEnum||(e.AgreementTerminatedEventAllOfTerminatorEnum={})).Requestor="Requestor",t.Provider="Provider"}(ja);var Da={};Object.defineProperty(Da,"__esModule",{value:!0});var Fa={};Object.defineProperty(Fa,"__esModule",{value:!0});var La={};Object.defineProperty(La,"__esModule",{value:!0});var Ma={};Object.defineProperty(Ma,"__esModule",{value:!0});var Ba={};Object.defineProperty(Ba,"__esModule",{value:!0});var Ua={};Object.defineProperty(Ua,"__esModule",{value:!0});var za={};Object.defineProperty(za,"__esModule",{value:!0});var Va={};Object.defineProperty(Va,"__esModule",{value:!0});var qa={};Object.defineProperty(qa,"__esModule",{value:!0});var Ha={};Object.defineProperty(Ha,"__esModule",{value:!0});var Wa={};Object.defineProperty(Wa,"__esModule",{value:!0});var Ga={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.ProposalAllOfStateEnum=void 0,(t=e.ProposalAllOfStateEnum||(e.ProposalAllOfStateEnum={})).Initial="Initial",t.Draft="Draft",t.Rejected="Rejected",t.Accepted="Accepted",t.Expired="Expired"}(Ga);var Ya={};Object.defineProperty(Ya,"__esModule",{value:!0});var Ka={};Object.defineProperty(Ka,"__esModule",{value:!0});var $a={};Object.defineProperty($a,"__esModule",{value:!0});var Qa={};Object.defineProperty(Qa,"__esModule",{value:!0});var Ja,Xa={};Object.defineProperty(Xa,"__esModule",{value:!0}),function(e){var t=bi&&bi.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=bi&&bi.__exportStar||function(e,n){for(var r in e)"default"===r||n.hasOwnProperty(r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(ka,e),n(Pa,e),n(Aa,e),n(xa,e),n(Ia,e),n(Oa,e),n(Ta,e),n(Ra,e),n(Ca,e),n(Na,e),n(ja,e),n(Da,e),n(Fa,e),n(La,e),n(Ma,e),n(Ba,e),n(Ua,e),n(za,e),n(Va,e),n(qa,e),n(Ha,e),n(Wa,e),n(Ga,e),n(Ya,e),n(Ka,e),n($a,e),n(Qa,e),n(Xa,e)}(Ea);var Za={},el={},tl={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RequiredError=e.BaseAPI=e.COLLECTION_FORMATS=e.BASE_PATH=void 0;const t=ha;e.BASE_PATH="http://localhost/market-api/v1".replace(/\/+$/,""),e.COLLECTION_FORMATS={csv:",",ssv:" ",tsv:"\t",pipes:"|"},e.BaseAPI=class{constructor(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.BASE_PATH,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.default;this.basePath=r,this.axios=i,n&&(this.configuration=n,this.basePath=n.basePath||this.basePath)}};class n extends Error{constructor(e,t){super(t),this.field=e,this.name="RequiredError"}}e.RequiredError=n}(tl);var nl=bi&&bi.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(el,"__esModule",{value:!0}),el.createRequestFunction=el.toPathString=el.serializeDataIfNeeded=el.setSearchParams=el.setOAuthToObject=el.setBearerAuthToObject=el.setBasicAuthToObject=el.setApiKeyToObject=el.assertParamExists=el.DUMMY_BASE_URL=void 0;const rl=tl;var il;el.DUMMY_BASE_URL="https://example.com",el.assertParamExists=function(e,t,n){if(null==n)throw new rl.RequiredError(t,"Required parameter ".concat(t," was null or undefined when calling ").concat(e,"."))},el.setApiKeyToObject=function(e,t,n){return nl(this,void 0,void 0,(function*(){if(n&&n.apiKey){const r="function"==typeof n.apiKey?yield n.apiKey(t):yield n.apiKey;e[t]=r}}))},el.setBasicAuthToObject=function(e,t){t&&(t.username||t.password)&&(e.auth={username:t.username,password:t.password})},el.setBearerAuthToObject=function(e,t){return nl(this,void 0,void 0,(function*(){if(t&&t.accessToken){const n="function"==typeof t.accessToken?yield t.accessToken():yield t.accessToken;e.Authorization="Bearer "+n}}))},el.setOAuthToObject=function(e,t,n,r){return nl(this,void 0,void 0,(function*(){if(r&&r.accessToken){const i="function"==typeof r.accessToken?yield r.accessToken(t,n):yield r.accessToken;e.Authorization="Bearer "+i}}))},el.setSearchParams=function(e){const t=new URLSearchParams(e.search);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(const o of r)for(const e in o)if(Array.isArray(o[e])){t.delete(e);for(const n of o[e])t.append(e,n)}else t.set(e,o[e]);e.search=t.toString()},el.serializeDataIfNeeded=function(e,t,n){const r="string"!=typeof e;return(r&&n&&n.isJsonMime?n.isJsonMime(t.headers["Content-Type"]):r)?JSON.stringify(void 0!==e?e:{}):e||""},el.toPathString=function(e){return e.pathname+e.search+e.hash},el.createRequestFunction=function(e,t,n,r){return function(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n;const s=Object.assign(Object.assign({},e.options),{url:((null==r?void 0:r.basePath)||o)+e.url});return i.request(s)}},function(e){var t=bi&&bi.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.RequestorApi=e.RequestorApiFactory=e.RequestorApiFp=e.RequestorApiAxiosParamCreator=void 0;const n=ha,r=el,i=tl;e.RequestorApiAxiosParamCreator=function(e){var n=this;return{cancelAgreement:function(i,o){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t(n,void 0,void 0,(function*(){r.assertParamExists("cancelAgreement","agreementId",i);const t="/agreements/{agreementId}/cancel".replace("{agreementId}",encodeURIComponent(String(i))),n=new URL(t,r.DUMMY_BASE_URL);let a;e&&(a=e.baseOptions);const l=Object.assign(Object.assign({method:"POST"},a),s),c={};yield r.setBearerAuthToObject(c,e),c["Content-Type"]="application/json",r.setSearchParams(n,{});let u=a&&a.headers?a.headers:{};return l.headers=Object.assign(Object.assign(Object.assign({},c),u),s.headers),l.data=r.serializeDataIfNeeded(o,l,e),{url:r.toPathString(n),options:l}}))},collectAgreementEvents:function(i,o,s,a){let l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return t(n,void 0,void 0,(function*(){const t=new URL("/agreementEvents",r.DUMMY_BASE_URL);let n;e&&(n=e.baseOptions);const c=Object.assign(Object.assign({method:"GET"},n),l),u={},d={};yield r.setBearerAuthToObject(u,e),void 0!==i&&(d.timeout=i),void 0!==o&&(d.afterTimestamp=o instanceof Date?o.toISOString():o),void 0!==s&&(d.maxEvents=s),void 0!==a&&(d.appSessionId=a),r.setSearchParams(t,d);let h=n&&n.headers?n.headers:{};return c.headers=Object.assign(Object.assign(Object.assign({},u),h),l.headers),{url:r.toPathString(t),options:c}}))},collectOffers:function(i,o,s){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return t(n,void 0,void 0,(function*(){r.assertParamExists("collectOffers","subscriptionId",i);const t="/demands/{subscriptionId}/events".replace("{subscriptionId}",encodeURIComponent(String(i))),n=new URL(t,r.DUMMY_BASE_URL);let l;e&&(l=e.baseOptions);const c=Object.assign(Object.assign({method:"GET"},l),a),u={},d={};yield r.setBearerAuthToObject(u,e),void 0!==o&&(d.timeout=o),void 0!==s&&(d.maxEvents=s),r.setSearchParams(n,d);let h=l&&l.headers?l.headers:{};return c.headers=Object.assign(Object.assign(Object.assign({},u),h),a.headers),{url:r.toPathString(n),options:c}}))},confirmAgreement:function(i,o){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t(n,void 0,void 0,(function*(){r.assertParamExists("confirmAgreement","agreementId",i);const t="/agreements/{agreementId}/confirm".replace("{agreementId}",encodeURIComponent(String(i))),n=new URL(t,r.DUMMY_BASE_URL);let a;e&&(a=e.baseOptions);const l=Object.assign(Object.assign({method:"POST"},a),s),c={},u={};yield r.setBearerAuthToObject(c,e),void 0!==o&&(u.appSessionId=o),r.setSearchParams(n,u);let d=a&&a.headers?a.headers:{};return l.headers=Object.assign(Object.assign(Object.assign({},c),d),s.headers),{url:r.toPathString(n),options:l}}))},counterProposalDemand:function(i,o,s){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return t(n,void 0,void 0,(function*(){r.assertParamExists("counterProposalDemand","subscriptionId",i),r.assertParamExists("counterProposalDemand","proposalId",o),r.assertParamExists("counterProposalDemand","demandOfferBase",s);const t="/demands/{subscriptionId}/proposals/{proposalId}".replace("{subscriptionId}",encodeURIComponent(String(i))).replace("{proposalId}",encodeURIComponent(String(o))),n=new URL(t,r.DUMMY_BASE_URL);let l;e&&(l=e.baseOptions);const c=Object.assign(Object.assign({method:"POST"},l),a),u={};yield r.setBearerAuthToObject(u,e),u["Content-Type"]="application/json",r.setSearchParams(n,{});let d=l&&l.headers?l.headers:{};return c.headers=Object.assign(Object.assign(Object.assign({},u),d),a.headers),c.data=r.serializeDataIfNeeded(s,c,e),{url:r.toPathString(n),options:c}}))},createAgreement:function(i){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t(n,void 0,void 0,(function*(){r.assertParamExists("createAgreement","agreementProposal",i);const t=new URL("/agreements",r.DUMMY_BASE_URL);let n;e&&(n=e.baseOptions);const s=Object.assign(Object.assign({method:"POST"},n),o),a={};yield r.setBearerAuthToObject(a,e),a["Content-Type"]="application/json",r.setSearchParams(t,{});let l=n&&n.headers?n.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},a),l),o.headers),s.data=r.serializeDataIfNeeded(i,s,e),{url:r.toPathString(t),options:s}}))},getAgreement:function(i){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t(n,void 0,void 0,(function*(){r.assertParamExists("getAgreement","agreementId",i);const t="/agreements/{agreementId}".replace("{agreementId}",encodeURIComponent(String(i))),n=new URL(t,r.DUMMY_BASE_URL);let s;e&&(s=e.baseOptions);const a=Object.assign(Object.assign({method:"GET"},s),o),l={};yield r.setBearerAuthToObject(l,e),r.setSearchParams(n,{});let c=s&&s.headers?s.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},l),c),o.headers),{url:r.toPathString(n),options:a}}))},getDemands:function(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t(n,void 0,void 0,(function*(){const t=new URL("/demands",r.DUMMY_BASE_URL);let n;e&&(n=e.baseOptions);const o=Object.assign(Object.assign({method:"GET"},n),i),s={};yield r.setBearerAuthToObject(s,e),r.setSearchParams(t,{});let a=n&&n.headers?n.headers:{};return o.headers=Object.assign(Object.assign(Object.assign({},s),a),i.headers),{url:r.toPathString(t),options:o}}))},getProposalOffer:function(i,o){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t(n,void 0,void 0,(function*(){r.assertParamExists("getProposalOffer","subscriptionId",i),r.assertParamExists("getProposalOffer","proposalId",o);const t="/demands/{subscriptionId}/proposals/{proposalId}".replace("{subscriptionId}",encodeURIComponent(String(i))).replace("{proposalId}",encodeURIComponent(String(o))),n=new URL(t,r.DUMMY_BASE_URL);let a;e&&(a=e.baseOptions);const l=Object.assign(Object.assign({method:"GET"},a),s),c={};yield r.setBearerAuthToObject(c,e),r.setSearchParams(n,{});let u=a&&a.headers?a.headers:{};return l.headers=Object.assign(Object.assign(Object.assign({},c),u),s.headers),{url:r.toPathString(n),options:l}}))},queryReplyDemands:function(i,o,s){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return t(n,void 0,void 0,(function*(){r.assertParamExists("queryReplyDemands","subscriptionId",i),r.assertParamExists("queryReplyDemands","queryId",o),r.assertParamExists("queryReplyDemands","body",s);const t="/demands/{subscriptionId}/propertyQuery/{queryId}".replace("{subscriptionId}",encodeURIComponent(String(i))).replace("{queryId}",encodeURIComponent(String(o))),n=new URL(t,r.DUMMY_BASE_URL);let l;e&&(l=e.baseOptions);const c=Object.assign(Object.assign({method:"POST"},l),a),u={};yield r.setBearerAuthToObject(u,e),u["Content-Type"]="application/json",r.setSearchParams(n,{});let d=l&&l.headers?l.headers:{};return c.headers=Object.assign(Object.assign(Object.assign({},u),d),a.headers),c.data=r.serializeDataIfNeeded(s,c,e),{url:r.toPathString(n),options:c}}))},rejectProposalOffer:function(i,o,s){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return t(n,void 0,void 0,(function*(){r.assertParamExists("rejectProposalOffer","subscriptionId",i),r.assertParamExists("rejectProposalOffer","proposalId",o);const t="/demands/{subscriptionId}/proposals/{proposalId}/reject".replace("{subscriptionId}",encodeURIComponent(String(i))).replace("{proposalId}",encodeURIComponent(String(o))),n=new URL(t,r.DUMMY_BASE_URL);let l;e&&(l=e.baseOptions);const c=Object.assign(Object.assign({method:"POST"},l),a),u={};yield r.setBearerAuthToObject(u,e),u["Content-Type"]="application/json",r.setSearchParams(n,{});let d=l&&l.headers?l.headers:{};return c.headers=Object.assign(Object.assign(Object.assign({},u),d),a.headers),c.data=r.serializeDataIfNeeded(s,c,e),{url:r.toPathString(n),options:c}}))},subscribeDemand:function(i){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t(n,void 0,void 0,(function*(){r.assertParamExists("subscribeDemand","demandOfferBase",i);const t=new URL("/demands",r.DUMMY_BASE_URL);let n;e&&(n=e.baseOptions);const s=Object.assign(Object.assign({method:"POST"},n),o),a={};yield r.setBearerAuthToObject(a,e),a["Content-Type"]="application/json",r.setSearchParams(t,{});let l=n&&n.headers?n.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},a),l),o.headers),s.data=r.serializeDataIfNeeded(i,s,e),{url:r.toPathString(t),options:s}}))},terminateAgreement:function(i,o){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t(n,void 0,void 0,(function*(){r.assertParamExists("terminateAgreement","agreementId",i);const t="/agreements/{agreementId}/terminate".replace("{agreementId}",encodeURIComponent(String(i))),n=new URL(t,r.DUMMY_BASE_URL);let a;e&&(a=e.baseOptions);const l=Object.assign(Object.assign({method:"POST"},a),s),c={};yield r.setBearerAuthToObject(c,e),c["Content-Type"]="application/json",r.setSearchParams(n,{});let u=a&&a.headers?a.headers:{};return l.headers=Object.assign(Object.assign(Object.assign({},c),u),s.headers),l.data=r.serializeDataIfNeeded(o,l,e),{url:r.toPathString(n),options:l}}))},unsubscribeDemand:function(i){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t(n,void 0,void 0,(function*(){r.assertParamExists("unsubscribeDemand","subscriptionId",i);const t="/demands/{subscriptionId}".replace("{subscriptionId}",encodeURIComponent(String(i))),n=new URL(t,r.DUMMY_BASE_URL);let s;e&&(s=e.baseOptions);const a=Object.assign(Object.assign({method:"DELETE"},s),o),l={};yield r.setBearerAuthToObject(l,e),r.setSearchParams(n,{});let c=s&&s.headers?s.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},l),c),o.headers),{url:r.toPathString(n),options:a}}))},waitForApproval:function(i,o){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t(n,void 0,void 0,(function*(){r.assertParamExists("waitForApproval","agreementId",i);const t="/agreements/{agreementId}/wait".replace("{agreementId}",encodeURIComponent(String(i))),n=new URL(t,r.DUMMY_BASE_URL);let a;e&&(a=e.baseOptions);const l=Object.assign(Object.assign({method:"POST"},a),s),c={},u={};yield r.setBearerAuthToObject(c,e),void 0!==o&&(u.timeout=o),r.setSearchParams(n,u);let d=a&&a.headers?a.headers:{};return l.headers=Object.assign(Object.assign(Object.assign({},c),d),s.headers),{url:r.toPathString(n),options:l}}))}}},e.RequestorApiFp=function(o){const s=e.RequestorApiAxiosParamCreator(o);return{cancelAgreement(e,a,l){return t(this,void 0,void 0,(function*(){const t=yield s.cancelAgreement(e,a,l);return r.createRequestFunction(t,n.default,i.BASE_PATH,o)}))},collectAgreementEvents(e,a,l,c,u){return t(this,void 0,void 0,(function*(){const t=yield s.collectAgreementEvents(e,a,l,c,u);return r.createRequestFunction(t,n.default,i.BASE_PATH,o)}))},collectOffers(e,a,l,c){return t(this,void 0,void 0,(function*(){const t=yield s.collectOffers(e,a,l,c);return r.createRequestFunction(t,n.default,i.BASE_PATH,o)}))},confirmAgreement(e,a,l){return t(this,void 0,void 0,(function*(){const t=yield s.confirmAgreement(e,a,l);return r.createRequestFunction(t,n.default,i.BASE_PATH,o)}))},counterProposalDemand(e,a,l,c){return t(this,void 0,void 0,(function*(){const t=yield s.counterProposalDemand(e,a,l,c);return r.createRequestFunction(t,n.default,i.BASE_PATH,o)}))},createAgreement(e,a){return t(this,void 0,void 0,(function*(){const t=yield s.createAgreement(e,a);return r.createRequestFunction(t,n.default,i.BASE_PATH,o)}))},getAgreement(e,a){return t(this,void 0,void 0,(function*(){const t=yield s.getAgreement(e,a);return r.createRequestFunction(t,n.default,i.BASE_PATH,o)}))},getDemands(e){return t(this,void 0,void 0,(function*(){const t=yield s.getDemands(e);return r.createRequestFunction(t,n.default,i.BASE_PATH,o)}))},getProposalOffer(e,a,l){return t(this,void 0,void 0,(function*(){const t=yield s.getProposalOffer(e,a,l);return r.createRequestFunction(t,n.default,i.BASE_PATH,o)}))},queryReplyDemands(e,a,l,c){return t(this,void 0,void 0,(function*(){const t=yield s.queryReplyDemands(e,a,l,c);return r.createRequestFunction(t,n.default,i.BASE_PATH,o)}))},rejectProposalOffer(e,a,l,c){return t(this,void 0,void 0,(function*(){const t=yield s.rejectProposalOffer(e,a,l,c);return r.createRequestFunction(t,n.default,i.BASE_PATH,o)}))},subscribeDemand(e,a){return t(this,void 0,void 0,(function*(){const t=yield s.subscribeDemand(e,a);return r.createRequestFunction(t,n.default,i.BASE_PATH,o)}))},terminateAgreement(e,a,l){return t(this,void 0,void 0,(function*(){const t=yield s.terminateAgreement(e,a,l);return r.createRequestFunction(t,n.default,i.BASE_PATH,o)}))},unsubscribeDemand(e,a){return t(this,void 0,void 0,(function*(){const t=yield s.unsubscribeDemand(e,a);return r.createRequestFunction(t,n.default,i.BASE_PATH,o)}))},waitForApproval(e,a,l){return t(this,void 0,void 0,(function*(){const t=yield s.waitForApproval(e,a,l);return r.createRequestFunction(t,n.default,i.BASE_PATH,o)}))}}},e.RequestorApiFactory=function(t,n,r){const i=e.RequestorApiFp(t);return{cancelAgreement:(e,t,o)=>i.cancelAgreement(e,t,o).then((e=>e(r,n))),collectAgreementEvents:(e,t,o,s,a)=>i.collectAgreementEvents(e,t,o,s,a).then((e=>e(r,n))),collectOffers:(e,t,o,s)=>i.collectOffers(e,t,o,s).then((e=>e(r,n))),confirmAgreement:(e,t,o)=>i.confirmAgreement(e,t,o).then((e=>e(r,n))),counterProposalDemand:(e,t,o,s)=>i.counterProposalDemand(e,t,o,s).then((e=>e(r,n))),createAgreement:(e,t)=>i.createAgreement(e,t).then((e=>e(r,n))),getAgreement:(e,t)=>i.getAgreement(e,t).then((e=>e(r,n))),getDemands:e=>i.getDemands(e).then((e=>e(r,n))),getProposalOffer:(e,t,o)=>i.getProposalOffer(e,t,o).then((e=>e(r,n))),queryReplyDemands:(e,t,o,s)=>i.queryReplyDemands(e,t,o,s).then((e=>e(r,n))),rejectProposalOffer:(e,t,o,s)=>i.rejectProposalOffer(e,t,o,s).then((e=>e(r,n))),subscribeDemand:(e,t)=>i.subscribeDemand(e,t).then((e=>e(r,n))),terminateAgreement:(e,t,o)=>i.terminateAgreement(e,t,o).then((e=>e(r,n))),unsubscribeDemand:(e,t)=>i.unsubscribeDemand(e,t).then((e=>e(r,n))),waitForApproval:(e,t,o)=>i.waitForApproval(e,t,o).then((e=>e(r,n)))}},e.RequestorApi=class extends i.BaseAPI{cancelAgreement(t,n,r){return e.RequestorApiFp(this.configuration).cancelAgreement(t,n,r).then((e=>e(this.axios,this.basePath)))}collectAgreementEvents(t,n,r,i,o){return e.RequestorApiFp(this.configuration).collectAgreementEvents(t,n,r,i,o).then((e=>e(this.axios,this.basePath)))}collectOffers(t,n,r,i){return e.RequestorApiFp(this.configuration).collectOffers(t,n,r,i).then((e=>e(this.axios,this.basePath)))}confirmAgreement(t,n,r){return e.RequestorApiFp(this.configuration).confirmAgreement(t,n,r).then((e=>e(this.axios,this.basePath)))}counterProposalDemand(t,n,r,i){return e.RequestorApiFp(this.configuration).counterProposalDemand(t,n,r,i).then((e=>e(this.axios,this.basePath)))}createAgreement(t,n){return e.RequestorApiFp(this.configuration).createAgreement(t,n).then((e=>e(this.axios,this.basePath)))}getAgreement(t,n){return e.RequestorApiFp(this.configuration).getAgreement(t,n).then((e=>e(this.axios,this.basePath)))}getDemands(t){return e.RequestorApiFp(this.configuration).getDemands(t).then((e=>e(this.axios,this.basePath)))}getProposalOffer(t,n,r){return e.RequestorApiFp(this.configuration).getProposalOffer(t,n,r).then((e=>e(this.axios,this.basePath)))}queryReplyDemands(t,n,r,i){return e.RequestorApiFp(this.configuration).queryReplyDemands(t,n,r,i).then((e=>e(this.axios,this.basePath)))}rejectProposalOffer(t,n,r,i){return e.RequestorApiFp(this.configuration).rejectProposalOffer(t,n,r,i).then((e=>e(this.axios,this.basePath)))}subscribeDemand(t,n){return e.RequestorApiFp(this.configuration).subscribeDemand(t,n).then((e=>e(this.axios,this.basePath)))}terminateAgreement(t,n,r){return e.RequestorApiFp(this.configuration).terminateAgreement(t,n,r).then((e=>e(this.axios,this.basePath)))}unsubscribeDemand(t,n){return e.RequestorApiFp(this.configuration).unsubscribeDemand(t,n).then((e=>e(this.axios,this.basePath)))}waitForApproval(t,n,r){return e.RequestorApiFp(this.configuration).waitForApproval(t,n,r).then((e=>e(this.axios,this.basePath)))}}}(Za);var ol=function e(){return il||(il=1,function(t){var n=bi&&bi.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=bi&&bi.__exportStar||function(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),r((Ja||(Ja=1,function(t){var n=bi&&bi.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=bi&&bi.__exportStar||function(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),r(e(),t),r(_a,t),r(Ea,t)}(Sa)),Sa),t),r(Za,t)}(wa)),wa}(),sl={},al={},ll={},cl={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RequiredError=e.BaseAPI=e.COLLECTION_FORMATS=e.BASE_PATH=void 0;const t=ha;e.BASE_PATH="http://localhost/net-api/v1".replace(/\/+$/,""),e.COLLECTION_FORMATS={csv:",",ssv:" ",tsv:"\t",pipes:"|"},e.BaseAPI=class{constructor(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.BASE_PATH,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.default;this.basePath=r,this.axios=i,n&&(this.configuration=n,this.basePath=n.basePath||this.basePath)}};class n extends Error{constructor(e,t){super(t),this.field=e,this.name="RequiredError"}}e.RequiredError=n}(cl);var ul=bi&&bi.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(ll,"__esModule",{value:!0}),ll.createRequestFunction=ll.toPathString=ll.serializeDataIfNeeded=ll.setSearchParams=ll.setOAuthToObject=ll.setBearerAuthToObject=ll.setBasicAuthToObject=ll.setApiKeyToObject=ll.assertParamExists=ll.DUMMY_BASE_URL=void 0;const dl=cl;ll.DUMMY_BASE_URL="https://example.com",ll.assertParamExists=function(e,t,n){if(null==n)throw new dl.RequiredError(t,"Required parameter ".concat(t," was null or undefined when calling ").concat(e,"."))},ll.setApiKeyToObject=function(e,t,n){return ul(this,void 0,void 0,(function*(){if(n&&n.apiKey){const r="function"==typeof n.apiKey?yield n.apiKey(t):yield n.apiKey;e[t]=r}}))},ll.setBasicAuthToObject=function(e,t){t&&(t.username||t.password)&&(e.auth={username:t.username,password:t.password})},ll.setBearerAuthToObject=function(e,t){return ul(this,void 0,void 0,(function*(){if(t&&t.accessToken){const n="function"==typeof t.accessToken?yield t.accessToken():yield t.accessToken;e.Authorization="Bearer "+n}}))},ll.setOAuthToObject=function(e,t,n,r){return ul(this,void 0,void 0,(function*(){if(r&&r.accessToken){const i="function"==typeof r.accessToken?yield r.accessToken(t,n):yield r.accessToken;e.Authorization="Bearer "+i}}))},ll.setSearchParams=function(e){const t=new URLSearchParams(e.search);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(const o of r)for(const e in o)if(Array.isArray(o[e])){t.delete(e);for(const n of o[e])t.append(e,n)}else t.set(e,o[e]);e.search=t.toString()},ll.serializeDataIfNeeded=function(e,t,n){const r="string"!=typeof e;return(r&&n&&n.isJsonMime?n.isJsonMime(t.headers["Content-Type"]):r)?JSON.stringify(void 0!==e?e:{}):e||""},ll.toPathString=function(e){return e.pathname+e.search+e.hash},ll.createRequestFunction=function(e,t,n,r){return function(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n;const s=Object.assign(Object.assign({},e.options),{url:((null==r?void 0:r.basePath)||o)+e.url});return i.request(s)}},function(e){var t=bi&&bi.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.RequestorApi=e.RequestorApiFactory=e.RequestorApiFp=e.RequestorApiAxiosParamCreator=void 0;const n=ha,r=ll,i=cl;e.RequestorApiAxiosParamCreator=function(e){var n=this;return{addAddress:function(i,o){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t(n,void 0,void 0,(function*(){r.assertParamExists("addAddress","networkId",i),r.assertParamExists("addAddress","address",o);const t="/net/{networkId}/addresses".replace("{networkId}",encodeURIComponent(String(i))),n=new URL(t,r.DUMMY_BASE_URL);let a;e&&(a=e.baseOptions);const l=Object.assign(Object.assign({method:"POST"},a),s),c={};yield r.setBearerAuthToObject(c,e),c["Content-Type"]="application/json",r.setSearchParams(n,{});let u=a&&a.headers?a.headers:{};return l.headers=Object.assign(Object.assign(Object.assign({},c),u),s.headers),l.data=r.serializeDataIfNeeded(o,l,e),{url:r.toPathString(n),options:l}}))},addNode:function(i,o){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t(n,void 0,void 0,(function*(){r.assertParamExists("addNode","networkId",i),r.assertParamExists("addNode","node",o);const t="/net/{networkId}/nodes".replace("{networkId}",encodeURIComponent(String(i))),n=new URL(t,r.DUMMY_BASE_URL);let a;e&&(a=e.baseOptions);const l=Object.assign(Object.assign({method:"POST"},a),s),c={};yield r.setBearerAuthToObject(c,e),c["Content-Type"]="application/json",r.setSearchParams(n,{});let u=a&&a.headers?a.headers:{};return l.headers=Object.assign(Object.assign(Object.assign({},c),u),s.headers),l.data=r.serializeDataIfNeeded(o,l,e),{url:r.toPathString(n),options:l}}))},createNetwork:function(i){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t(n,void 0,void 0,(function*(){r.assertParamExists("createNetwork","network",i);const t=new URL("/net",r.DUMMY_BASE_URL);let n;e&&(n=e.baseOptions);const s=Object.assign(Object.assign({method:"POST"},n),o),a={};yield r.setBearerAuthToObject(a,e),a["Content-Type"]="application/json",r.setSearchParams(t,{});let l=n&&n.headers?n.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},a),l),o.headers),s.data=r.serializeDataIfNeeded(i,s,e),{url:r.toPathString(t),options:s}}))},getAddresses:function(i){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t(n,void 0,void 0,(function*(){r.assertParamExists("getAddresses","networkId",i);const t="/net/{networkId}/addresses".replace("{networkId}",encodeURIComponent(String(i))),n=new URL(t,r.DUMMY_BASE_URL);let s;e&&(s=e.baseOptions);const a=Object.assign(Object.assign({method:"GET"},s),o),l={};yield r.setBearerAuthToObject(l,e),r.setSearchParams(n,{});let c=s&&s.headers?s.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},l),c),o.headers),{url:r.toPathString(n),options:a}}))},getConnections:function(i){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t(n,void 0,void 0,(function*(){r.assertParamExists("getConnections","networkId",i);const t="/net/{networkId}/tcp".replace("{networkId}",encodeURIComponent(String(i))),n=new URL(t,r.DUMMY_BASE_URL);let s;e&&(s=e.baseOptions);const a=Object.assign(Object.assign({method:"GET"},s),o),l={};yield r.setBearerAuthToObject(l,e),r.setSearchParams(n,{});let c=s&&s.headers?s.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},l),c),o.headers),{url:r.toPathString(n),options:a}}))},getNetwork:function(i){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t(n,void 0,void 0,(function*(){r.assertParamExists("getNetwork","networkId",i);const t="/net/{networkId}".replace("{networkId}",encodeURIComponent(String(i))),n=new URL(t,r.DUMMY_BASE_URL);let s;e&&(s=e.baseOptions);const a=Object.assign(Object.assign({method:"GET"},s),o),l={};yield r.setBearerAuthToObject(l,e),r.setSearchParams(n,{});let c=s&&s.headers?s.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},l),c),o.headers),{url:r.toPathString(n),options:a}}))},getNetworks:function(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t(n,void 0,void 0,(function*(){const t=new URL("/net",r.DUMMY_BASE_URL);let n;e&&(n=e.baseOptions);const o=Object.assign(Object.assign({method:"GET"},n),i),s={};yield r.setBearerAuthToObject(s,e),r.setSearchParams(t,{});let a=n&&n.headers?n.headers:{};return o.headers=Object.assign(Object.assign(Object.assign({},s),a),i.headers),{url:r.toPathString(t),options:o}}))},getNodes:function(i){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t(n,void 0,void 0,(function*(){r.assertParamExists("getNodes","networkId",i);const t="/net/{networkId}/nodes".replace("{networkId}",encodeURIComponent(String(i))),n=new URL(t,r.DUMMY_BASE_URL);let s;e&&(s=e.baseOptions);const a=Object.assign(Object.assign({method:"GET"},s),o),l={};yield r.setBearerAuthToObject(l,e),r.setSearchParams(n,{});let c=s&&s.headers?s.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},l),c),o.headers),{url:r.toPathString(n),options:a}}))},removeNetwork:function(i){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t(n,void 0,void 0,(function*(){r.assertParamExists("removeNetwork","networkId",i);const t="/net/{networkId}".replace("{networkId}",encodeURIComponent(String(i))),n=new URL(t,r.DUMMY_BASE_URL);let s;e&&(s=e.baseOptions);const a=Object.assign(Object.assign({method:"DELETE"},s),o),l={};yield r.setBearerAuthToObject(l,e),r.setSearchParams(n,{});let c=s&&s.headers?s.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},l),c),o.headers),{url:r.toPathString(n),options:a}}))},removeNode:function(i,o){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t(n,void 0,void 0,(function*(){r.assertParamExists("removeNode","networkId",i),r.assertParamExists("removeNode","nodeId",o);const t="/net/{networkId}/nodes/{nodeId}".replace("{networkId}",encodeURIComponent(String(i))).replace("{nodeId}",encodeURIComponent(String(o))),n=new URL(t,r.DUMMY_BASE_URL);let a;e&&(a=e.baseOptions);const l=Object.assign(Object.assign({method:"DELETE"},a),s),c={};yield r.setBearerAuthToObject(c,e),r.setSearchParams(n,{});let u=a&&a.headers?a.headers:{};return l.headers=Object.assign(Object.assign(Object.assign({},c),u),s.headers),{url:r.toPathString(n),options:l}}))}}},e.RequestorApiFp=function(o){const s=e.RequestorApiAxiosParamCreator(o);return{addAddress(e,a,l){return t(this,void 0,void 0,(function*(){const t=yield s.addAddress(e,a,l);return r.createRequestFunction(t,n.default,i.BASE_PATH,o)}))},addNode(e,a,l){return t(this,void 0,void 0,(function*(){const t=yield s.addNode(e,a,l);return r.createRequestFunction(t,n.default,i.BASE_PATH,o)}))},createNetwork(e,a){return t(this,void 0,void 0,(function*(){const t=yield s.createNetwork(e,a);return r.createRequestFunction(t,n.default,i.BASE_PATH,o)}))},getAddresses(e,a){return t(this,void 0,void 0,(function*(){const t=yield s.getAddresses(e,a);return r.createRequestFunction(t,n.default,i.BASE_PATH,o)}))},getConnections(e,a){return t(this,void 0,void 0,(function*(){const t=yield s.getConnections(e,a);return r.createRequestFunction(t,n.default,i.BASE_PATH,o)}))},getNetwork(e,a){return t(this,void 0,void 0,(function*(){const t=yield s.getNetwork(e,a);return r.createRequestFunction(t,n.default,i.BASE_PATH,o)}))},getNetworks(e){return t(this,void 0,void 0,(function*(){const t=yield s.getNetworks(e);return r.createRequestFunction(t,n.default,i.BASE_PATH,o)}))},getNodes(e,a){return t(this,void 0,void 0,(function*(){const t=yield s.getNodes(e,a);return r.createRequestFunction(t,n.default,i.BASE_PATH,o)}))},removeNetwork(e,a){return t(this,void 0,void 0,(function*(){const t=yield s.removeNetwork(e,a);return r.createRequestFunction(t,n.default,i.BASE_PATH,o)}))},removeNode(e,a,l){return t(this,void 0,void 0,(function*(){const t=yield s.removeNode(e,a,l);return r.createRequestFunction(t,n.default,i.BASE_PATH,o)}))}}},e.RequestorApiFactory=function(t,n,r){const i=e.RequestorApiFp(t);return{addAddress:(e,t,o)=>i.addAddress(e,t,o).then((e=>e(r,n))),addNode:(e,t,o)=>i.addNode(e,t,o).then((e=>e(r,n))),createNetwork:(e,t)=>i.createNetwork(e,t).then((e=>e(r,n))),getAddresses:(e,t)=>i.getAddresses(e,t).then((e=>e(r,n))),getConnections:(e,t)=>i.getConnections(e,t).then((e=>e(r,n))),getNetwork:(e,t)=>i.getNetwork(e,t).then((e=>e(r,n))),getNetworks:e=>i.getNetworks(e).then((e=>e(r,n))),getNodes:(e,t)=>i.getNodes(e,t).then((e=>e(r,n))),removeNetwork:(e,t)=>i.removeNetwork(e,t).then((e=>e(r,n))),removeNode:(e,t,o)=>i.removeNode(e,t,o).then((e=>e(r,n)))}},e.RequestorApi=class extends i.BaseAPI{addAddress(t,n,r){return e.RequestorApiFp(this.configuration).addAddress(t,n,r).then((e=>e(this.axios,this.basePath)))}addNode(t,n,r){return e.RequestorApiFp(this.configuration).addNode(t,n,r).then((e=>e(this.axios,this.basePath)))}createNetwork(t,n){return e.RequestorApiFp(this.configuration).createNetwork(t,n).then((e=>e(this.axios,this.basePath)))}getAddresses(t,n){return e.RequestorApiFp(this.configuration).getAddresses(t,n).then((e=>e(this.axios,this.basePath)))}getConnections(t,n){return e.RequestorApiFp(this.configuration).getConnections(t,n).then((e=>e(this.axios,this.basePath)))}getNetwork(t,n){return e.RequestorApiFp(this.configuration).getNetwork(t,n).then((e=>e(this.axios,this.basePath)))}getNetworks(t){return e.RequestorApiFp(this.configuration).getNetworks(t).then((e=>e(this.axios,this.basePath)))}getNodes(t,n){return e.RequestorApiFp(this.configuration).getNodes(t,n).then((e=>e(this.axios,this.basePath)))}removeNetwork(t,n){return e.RequestorApiFp(this.configuration).removeNetwork(t,n).then((e=>e(this.axios,this.basePath)))}removeNode(t,n,r){return e.RequestorApiFp(this.configuration).removeNode(t,n,r).then((e=>e(this.axios,this.basePath)))}}}(al),function(e){var t=bi&&bi.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=bi&&bi.__exportStar||function(e,n){for(var r in e)"default"===r||n.hasOwnProperty(r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(al,e)}(sl);var hl={},fl={},pl={};Object.defineProperty(pl,"__esModule",{value:!0}),pl.Configuration=void 0,pl.Configuration=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.apiKey=e.apiKey,this.username=e.username,this.password=e.password,this.accessToken=e.accessToken,this.basePath=e.basePath,this.baseOptions=e.baseOptions,this.formDataCtor=e.formDataCtor}isJsonMime(e){const t=new RegExp("^(application/json|[^;/ \t]+/[^;/ \t]+[+]json)[ \t]*(;.*)?$","i");return null!==e&&(t.test(e)||"application/json-patch+json"===e.toLowerCase())}};var gl={},ml={};Object.defineProperty(ml,"__esModule",{value:!0});var vl={};Object.defineProperty(vl,"__esModule",{value:!0});var yl={};Object.defineProperty(yl,"__esModule",{value:!0});var bl={};Object.defineProperty(bl,"__esModule",{value:!0});var wl={};Object.defineProperty(wl,"__esModule",{value:!0});var Sl={};Object.defineProperty(Sl,"__esModule",{value:!0});var _l={};Object.defineProperty(_l,"__esModule",{value:!0});var El={};Object.defineProperty(El,"__esModule",{value:!0});var kl={};Object.defineProperty(kl,"__esModule",{value:!0});var Pl={};Object.defineProperty(Pl,"__esModule",{value:!0});var Al={};Object.defineProperty(Al,"__esModule",{value:!0});var xl={};Object.defineProperty(xl,"__esModule",{value:!0});var Il={};Object.defineProperty(Il,"__esModule",{value:!0});var Ol={};Object.defineProperty(Ol,"__esModule",{value:!0});var Tl={};Object.defineProperty(Tl,"__esModule",{value:!0});var Rl={};Object.defineProperty(Rl,"__esModule",{value:!0});var Cl={};Object.defineProperty(Cl,"__esModule",{value:!0});var Nl={};Object.defineProperty(Nl,"__esModule",{value:!0});var jl={};Object.defineProperty(jl,"__esModule",{value:!0});var Dl={};Object.defineProperty(Dl,"__esModule",{value:!0});var Fl={};Object.defineProperty(Fl,"__esModule",{value:!0});var Ll={};Object.defineProperty(Ll,"__esModule",{value:!0});var Ml={};Object.defineProperty(Ml,"__esModule",{value:!0});var Bl={};Object.defineProperty(Bl,"__esModule",{value:!0});var Ul={};Object.defineProperty(Ul,"__esModule",{value:!0});var zl={};Object.defineProperty(zl,"__esModule",{value:!0});var Vl={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.InvoiceStatus=void 0,(t=e.InvoiceStatus||(e.InvoiceStatus={})).Issued="ISSUED",t.Received="RECEIVED",t.Accepted="ACCEPTED",t.Rejected="REJECTED",t.Failed="FAILED",t.Settled="SETTLED",t.Cancelled="CANCELLED"}(Vl);var ql={};Object.defineProperty(ql,"__esModule",{value:!0});var Hl={};Object.defineProperty(Hl,"__esModule",{value:!0});var Wl={};Object.defineProperty(Wl,"__esModule",{value:!0});var Gl={};Object.defineProperty(Gl,"__esModule",{value:!0});var Yl={};Object.defineProperty(Yl,"__esModule",{value:!0});var Kl={};Object.defineProperty(Kl,"__esModule",{value:!0});var $l,Ql={};function Jl(){return $l||($l=1,function(e){var t=bi&&bi.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=bi&&bi.__exportStar||function(e,n){for(var r in e)"default"===r||n.hasOwnProperty(r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(ic(),e),n(pl,e),n(gl,e)}(fl)),fl}!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RejectionReason=void 0,function(e){e.UnsolicitedService="UNSOLICITED_SERVICE",e.BadService="BAD_SERVICE",e.IncorrectAmount="INCORRECT_AMOUNT"}(e.RejectionReason||(e.RejectionReason={}))}(Ql),function(e){var t=bi&&bi.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=bi&&bi.__exportStar||function(e,n){for(var r in e)"default"===r||n.hasOwnProperty(r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(ml,e),n(vl,e),n(yl,e),n(bl,e),n(wl,e),n(Sl,e),n(_l,e),n(El,e),n(kl,e),n(Pl,e),n(Al,e),n(xl,e),n(Il,e),n(Ol,e),n(Tl,e),n(Rl,e),n(Cl,e),n(Nl,e),n(jl,e),n(Dl,e),n(Fl,e),n(Ll,e),n(Ml,e),n(Bl,e),n(Ul,e),n(zl,e),n(Vl,e),n(ql,e),n(Hl,e),n(Wl,e),n(Gl,e),n(Yl,e),n(Kl,e),n(Ql,e)}(gl);var Xl={},Zl={},ec={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RequiredError=e.BaseAPI=e.COLLECTION_FORMATS=e.BASE_PATH=void 0;const t=ha;e.BASE_PATH="http://localhost/payment-api/v1".replace(/\/+$/,""),e.COLLECTION_FORMATS={csv:",",ssv:" ",tsv:"\t",pipes:"|"},e.BaseAPI=class{constructor(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.BASE_PATH,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.default;this.basePath=r,this.axios=i,n&&(this.configuration=n,this.basePath=n.basePath||this.basePath)}};class n extends Error{constructor(e,t){super(t),this.field=e,this.name="RequiredError"}}e.RequiredError=n}(ec);var tc=bi&&bi.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(Zl,"__esModule",{value:!0}),Zl.createRequestFunction=Zl.toPathString=Zl.serializeDataIfNeeded=Zl.setSearchParams=Zl.setOAuthToObject=Zl.setBearerAuthToObject=Zl.setBasicAuthToObject=Zl.setApiKeyToObject=Zl.assertParamExists=Zl.DUMMY_BASE_URL=void 0;const nc=ec;var rc;function ic(){return rc||(rc=1,function(e){var t=bi&&bi.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=bi&&bi.__exportStar||function(e,n){for(var r in e)"default"===r||n.hasOwnProperty(r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(Jl(),e),n(Xl,e)}(hl)),hl}Zl.DUMMY_BASE_URL="https://example.com",Zl.assertParamExists=function(e,t,n){if(null==n)throw new nc.RequiredError(t,"Required parameter ".concat(t," was null or undefined when calling ").concat(e,"."))},Zl.setApiKeyToObject=function(e,t,n){return tc(this,void 0,void 0,(function*(){if(n&&n.apiKey){const r="function"==typeof n.apiKey?yield n.apiKey(t):yield n.apiKey;e[t]=r}}))},Zl.setBasicAuthToObject=function(e,t){t&&(t.username||t.password)&&(e.auth={username:t.username,password:t.password})},Zl.setBearerAuthToObject=function(e,t){return tc(this,void 0,void 0,(function*(){if(t&&t.accessToken){const n="function"==typeof t.accessToken?yield t.accessToken():yield t.accessToken;e.Authorization="Bearer "+n}}))},Zl.setOAuthToObject=function(e,t,n,r){return tc(this,void 0,void 0,(function*(){if(r&&r.accessToken){const i="function"==typeof r.accessToken?yield r.accessToken(t,n):yield r.accessToken;e.Authorization="Bearer "+i}}))},Zl.setSearchParams=function(e){const t=new URLSearchParams(e.search);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(const o of r)for(const e in o)if(Array.isArray(o[e])){t.delete(e);for(const n of o[e])t.append(e,n)}else t.set(e,o[e]);e.search=t.toString()},Zl.serializeDataIfNeeded=function(e,t,n){const r="string"!=typeof e;return(r&&n&&n.isJsonMime?n.isJsonMime(t.headers["Content-Type"]):r)?JSON.stringify(void 0!==e?e:{}):e||""},Zl.toPathString=function(e){return e.pathname+e.search+e.hash},Zl.createRequestFunction=function(e,t,n,r){return function(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n;const s=Object.assign(Object.assign({},e.options),{url:((null==r?void 0:r.basePath)||o)+e.url});return i.request(s)}},function(e){var t=bi&&bi.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.RequestorApi=e.RequestorApiFactory=e.RequestorApiFp=e.RequestorApiAxiosParamCreator=void 0;const n=ha,r=Zl,i=ec;e.RequestorApiAxiosParamCreator=function(e){var n=this;return{acceptDebitNote:function(i,o,s){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return t(n,void 0,void 0,(function*(){r.assertParamExists("acceptDebitNote","debitNoteId",i),r.assertParamExists("acceptDebitNote","acceptance",o);const t="/debitNotes/{debitNoteId}/accept".replace("{debitNoteId}",encodeURIComponent(String(i))),n=new URL(t,r.DUMMY_BASE_URL);let l;e&&(l=e.baseOptions);const c=Object.assign(Object.assign({method:"POST"},l),a),u={},d={};yield r.setBearerAuthToObject(u,e),void 0!==s&&(d.timeout=s),u["Content-Type"]="application/json",r.setSearchParams(n,d);let h=l&&l.headers?l.headers:{};return c.headers=Object.assign(Object.assign(Object.assign({},u),h),a.headers),c.data=r.serializeDataIfNeeded(o,c,e),{url:r.toPathString(n),options:c}}))},acceptInvoice:function(i,o,s){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return t(n,void 0,void 0,(function*(){r.assertParamExists("acceptInvoice","invoiceId",i),r.assertParamExists("acceptInvoice","acceptance",o);const t="/invoices/{invoiceId}/accept".replace("{invoiceId}",encodeURIComponent(String(i))),n=new URL(t,r.DUMMY_BASE_URL);let l;e&&(l=e.baseOptions);const c=Object.assign(Object.assign({method:"POST"},l),a),u={},d={};yield r.setBearerAuthToObject(u,e),void 0!==s&&(d.timeout=s),u["Content-Type"]="application/json",r.setSearchParams(n,d);let h=l&&l.headers?l.headers:{};return c.headers=Object.assign(Object.assign(Object.assign({},u),h),a.headers),c.data=r.serializeDataIfNeeded(o,c,e),{url:r.toPathString(n),options:c}}))},amendAllocation:function(i,o){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t(n,void 0,void 0,(function*(){r.assertParamExists("amendAllocation","allocationId",i),r.assertParamExists("amendAllocation","allocation",o);const t="/allocations/{allocationId}".replace("{allocationId}",encodeURIComponent(String(i))),n=new URL(t,r.DUMMY_BASE_URL);let a;e&&(a=e.baseOptions);const l=Object.assign(Object.assign({method:"PUT"},a),s),c={};yield r.setBearerAuthToObject(c,e),c["Content-Type"]="application/json",r.setSearchParams(n,{});let u=a&&a.headers?a.headers:{};return l.headers=Object.assign(Object.assign(Object.assign({},c),u),s.headers),l.data=r.serializeDataIfNeeded(o,l,e),{url:r.toPathString(n),options:l}}))},createAllocation:function(i,o,s){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return t(n,void 0,void 0,(function*(){r.assertParamExists("createAllocation","allocation",i);const t=new URL("/allocations",r.DUMMY_BASE_URL);let n;e&&(n=e.baseOptions);const l=Object.assign(Object.assign({method:"POST"},n),a),c={},u={};yield r.setBearerAuthToObject(c,e),void 0!==o&&(u.afterTimestamp=o instanceof Date?o.toISOString():o),void 0!==s&&(u.maxItems=s),c["Content-Type"]="application/json",r.setSearchParams(t,u);let d=n&&n.headers?n.headers:{};return l.headers=Object.assign(Object.assign(Object.assign({},c),d),a.headers),l.data=r.serializeDataIfNeeded(i,l,e),{url:r.toPathString(t),options:l}}))},getAllocation:function(i){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t(n,void 0,void 0,(function*(){r.assertParamExists("getAllocation","allocationId",i);const t="/allocations/{allocationId}".replace("{allocationId}",encodeURIComponent(String(i))),n=new URL(t,r.DUMMY_BASE_URL);let s;e&&(s=e.baseOptions);const a=Object.assign(Object.assign({method:"GET"},s),o),l={};yield r.setBearerAuthToObject(l,e),r.setSearchParams(n,{});let c=s&&s.headers?s.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},l),c),o.headers),{url:r.toPathString(n),options:a}}))},getAllocations:function(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t(n,void 0,void 0,(function*(){const t=new URL("/allocations",r.DUMMY_BASE_URL);let n;e&&(n=e.baseOptions);const o=Object.assign(Object.assign({method:"GET"},n),i),s={};yield r.setBearerAuthToObject(s,e),r.setSearchParams(t,{});let a=n&&n.headers?n.headers:{};return o.headers=Object.assign(Object.assign(Object.assign({},s),a),i.headers),{url:r.toPathString(t),options:o}}))},getDebitNote:function(i){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t(n,void 0,void 0,(function*(){r.assertParamExists("getDebitNote","debitNoteId",i);const t="/debitNotes/{debitNoteId}".replace("{debitNoteId}",encodeURIComponent(String(i))),n=new URL(t,r.DUMMY_BASE_URL);let s;e&&(s=e.baseOptions);const a=Object.assign(Object.assign({method:"GET"},s),o),l={};yield r.setBearerAuthToObject(l,e),r.setSearchParams(n,{});let c=s&&s.headers?s.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},l),c),o.headers),{url:r.toPathString(n),options:a}}))},getDebitNoteEvents:function(i,o,s,a){let l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return t(n,void 0,void 0,(function*(){const t=new URL("/debitNoteEvents",r.DUMMY_BASE_URL);let n;e&&(n=e.baseOptions);const c=Object.assign(Object.assign({method:"GET"},n),l),u={},d={};yield r.setBearerAuthToObject(u,e),void 0!==i&&(d.timeout=i),void 0!==o&&(d.afterTimestamp=o instanceof Date?o.toISOString():o),void 0!==s&&(d.maxEvents=s),void 0!==a&&(d.appSessionId=a),r.setSearchParams(t,d);let h=n&&n.headers?n.headers:{};return c.headers=Object.assign(Object.assign(Object.assign({},u),h),l.headers),{url:r.toPathString(t),options:c}}))},getDebitNotes:function(i,o){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t(n,void 0,void 0,(function*(){const t=new URL("/debitNotes",r.DUMMY_BASE_URL);let n;e&&(n=e.baseOptions);const a=Object.assign(Object.assign({method:"GET"},n),s),l={},c={};yield r.setBearerAuthToObject(l,e),void 0!==i&&(c.afterTimestamp=i instanceof Date?i.toISOString():i),void 0!==o&&(c.maxItems=o),r.setSearchParams(t,c);let u=n&&n.headers?n.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},l),u),s.headers),{url:r.toPathString(t),options:a}}))},getDemandDecorations:function(o){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t(n,void 0,void 0,(function*(){r.assertParamExists("getDemandDecorations","allocationIds",o);const t=new URL("/demandDecorations",r.DUMMY_BASE_URL);let n;e&&(n=e.baseOptions);const a=Object.assign(Object.assign({method:"GET"},n),s),l={},c={};yield r.setBearerAuthToObject(l,e),o&&(c.allocationIds=o.join(i.COLLECTION_FORMATS.csv)),r.setSearchParams(t,c);let u=n&&n.headers?n.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},l),u),s.headers),{url:r.toPathString(t),options:a}}))},getInvoice:function(i){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t(n,void 0,void 0,(function*(){r.assertParamExists("getInvoice","invoiceId",i);const t="/invoices/{invoiceId}".replace("{invoiceId}",encodeURIComponent(String(i))),n=new URL(t,r.DUMMY_BASE_URL);let s;e&&(s=e.baseOptions);const a=Object.assign(Object.assign({method:"GET"},s),o),l={};yield r.setBearerAuthToObject(l,e),r.setSearchParams(n,{});let c=s&&s.headers?s.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},l),c),o.headers),{url:r.toPathString(n),options:a}}))},getInvoiceEvents:function(i,o,s,a){let l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return t(n,void 0,void 0,(function*(){const t=new URL("/invoiceEvents",r.DUMMY_BASE_URL);let n;e&&(n=e.baseOptions);const c=Object.assign(Object.assign({method:"GET"},n),l),u={},d={};yield r.setBearerAuthToObject(u,e),void 0!==i&&(d.timeout=i),void 0!==o&&(d.afterTimestamp=o instanceof Date?o.toISOString():o),void 0!==s&&(d.maxEvents=s),void 0!==a&&(d.appSessionId=a),r.setSearchParams(t,d);let h=n&&n.headers?n.headers:{};return c.headers=Object.assign(Object.assign(Object.assign({},u),h),l.headers),{url:r.toPathString(t),options:c}}))},getInvoices:function(i,o){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t(n,void 0,void 0,(function*(){const t=new URL("/invoices",r.DUMMY_BASE_URL);let n;e&&(n=e.baseOptions);const a=Object.assign(Object.assign({method:"GET"},n),s),l={},c={};yield r.setBearerAuthToObject(l,e),void 0!==i&&(c.afterTimestamp=i instanceof Date?i.toISOString():i),void 0!==o&&(c.maxItems=o),r.setSearchParams(t,c);let u=n&&n.headers?n.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},l),u),s.headers),{url:r.toPathString(t),options:a}}))},getPayment:function(i){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t(n,void 0,void 0,(function*(){r.assertParamExists("getPayment","paymentId",i);const t="/payments/{paymentId}".replace("{paymentId}",encodeURIComponent(String(i))),n=new URL(t,r.DUMMY_BASE_URL);let s;e&&(s=e.baseOptions);const a=Object.assign(Object.assign({method:"GET"},s),o),l={};yield r.setBearerAuthToObject(l,e),r.setSearchParams(n,{});let c=s&&s.headers?s.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},l),c),o.headers),{url:r.toPathString(n),options:a}}))},getPayments:function(i,o,s,a){let l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return t(n,void 0,void 0,(function*(){const t=new URL("/payments",r.DUMMY_BASE_URL);let n;e&&(n=e.baseOptions);const c=Object.assign(Object.assign({method:"GET"},n),l),u={},d={};yield r.setBearerAuthToObject(u,e),void 0!==i&&(d.timeout=i),void 0!==o&&(d.afterTimestamp=o instanceof Date?o.toISOString():o),void 0!==s&&(d.maxEvents=s),void 0!==a&&(d.appSessionId=a),r.setSearchParams(t,d);let h=n&&n.headers?n.headers:{};return c.headers=Object.assign(Object.assign(Object.assign({},u),h),l.headers),{url:r.toPathString(t),options:c}}))},getPaymentsForDebitNote:function(i,o,s){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return t(n,void 0,void 0,(function*(){r.assertParamExists("getPaymentsForDebitNote","debitNoteId",i);const t="/debitNotes/{debitNoteId}/payments".replace("{debitNoteId}",encodeURIComponent(String(i))),n=new URL(t,r.DUMMY_BASE_URL);let l;e&&(l=e.baseOptions);const c=Object.assign(Object.assign({method:"GET"},l),a),u={},d={};yield r.setBearerAuthToObject(u,e),void 0!==o&&(d.afterTimestamp=o instanceof Date?o.toISOString():o),void 0!==s&&(d.maxItems=s),r.setSearchParams(n,d);let h=l&&l.headers?l.headers:{};return c.headers=Object.assign(Object.assign(Object.assign({},u),h),a.headers),{url:r.toPathString(n),options:c}}))},getPaymentsForInvoice:function(i,o,s){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return t(n,void 0,void 0,(function*(){r.assertParamExists("getPaymentsForInvoice","invoiceId",i);const t="/invoices/{invoiceId}/payments".replace("{invoiceId}",encodeURIComponent(String(i))),n=new URL(t,r.DUMMY_BASE_URL);let l;e&&(l=e.baseOptions);const c=Object.assign(Object.assign({method:"GET"},l),a),u={},d={};yield r.setBearerAuthToObject(u,e),void 0!==o&&(d.afterTimestamp=o instanceof Date?o.toISOString():o),void 0!==s&&(d.maxItems=s),r.setSearchParams(n,d);let h=l&&l.headers?l.headers:{};return c.headers=Object.assign(Object.assign(Object.assign({},u),h),a.headers),{url:r.toPathString(n),options:c}}))},getRequestorAccounts:function(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t(n,void 0,void 0,(function*(){const t=new URL("/requestorAccounts",r.DUMMY_BASE_URL);let n;e&&(n=e.baseOptions);const o=Object.assign(Object.assign({method:"GET"},n),i),s={};yield r.setBearerAuthToObject(s,e),r.setSearchParams(t,{});let a=n&&n.headers?n.headers:{};return o.headers=Object.assign(Object.assign(Object.assign({},s),a),i.headers),{url:r.toPathString(t),options:o}}))},issueInvoice:function(i){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t(n,void 0,void 0,(function*(){r.assertParamExists("issueInvoice","invoice",i);const t=new URL("/invoices",r.DUMMY_BASE_URL);let n;e&&(n=e.baseOptions);const s=Object.assign(Object.assign({method:"POST"},n),o),a={};yield r.setBearerAuthToObject(a,e),a["Content-Type"]="application/json",r.setSearchParams(t,{});let l=n&&n.headers?n.headers:{};return s.headers=Object.assign(Object.assign(Object.assign({},a),l),o.headers),s.data=r.serializeDataIfNeeded(i,s,e),{url:r.toPathString(t),options:s}}))},rejectDebitNote:function(i,o,s){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return t(n,void 0,void 0,(function*(){r.assertParamExists("rejectDebitNote","debitNoteId",i),r.assertParamExists("rejectDebitNote","rejection",o);const t="/debitNotes/{debitNoteId}/reject".replace("{debitNoteId}",encodeURIComponent(String(i))),n=new URL(t,r.DUMMY_BASE_URL);let l;e&&(l=e.baseOptions);const c=Object.assign(Object.assign({method:"POST"},l),a),u={},d={};yield r.setBearerAuthToObject(u,e),void 0!==s&&(d.timeout=s),u["Content-Type"]="application/json",r.setSearchParams(n,d);let h=l&&l.headers?l.headers:{};return c.headers=Object.assign(Object.assign(Object.assign({},u),h),a.headers),c.data=r.serializeDataIfNeeded(o,c,e),{url:r.toPathString(n),options:c}}))},rejectInvoice:function(i,o,s){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return t(n,void 0,void 0,(function*(){r.assertParamExists("rejectInvoice","invoiceId",i),r.assertParamExists("rejectInvoice","rejection",o);const t="/invoices/{invoiceId}/reject".replace("{invoiceId}",encodeURIComponent(String(i))),n=new URL(t,r.DUMMY_BASE_URL);let l;e&&(l=e.baseOptions);const c=Object.assign(Object.assign({method:"POST"},l),a),u={},d={};yield r.setBearerAuthToObject(u,e),void 0!==s&&(d.timeout=s),u["Content-Type"]="application/json",r.setSearchParams(n,d);let h=l&&l.headers?l.headers:{};return c.headers=Object.assign(Object.assign(Object.assign({},u),h),a.headers),c.data=r.serializeDataIfNeeded(o,c,e),{url:r.toPathString(n),options:c}}))},releaseAllocation:function(i){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t(n,void 0,void 0,(function*(){r.assertParamExists("releaseAllocation","allocationId",i);const t="/allocations/{allocationId}".replace("{allocationId}",encodeURIComponent(String(i))),n=new URL(t,r.DUMMY_BASE_URL);let s;e&&(s=e.baseOptions);const a=Object.assign(Object.assign({method:"DELETE"},s),o),l={};yield r.setBearerAuthToObject(l,e),r.setSearchParams(n,{});let c=s&&s.headers?s.headers:{};return a.headers=Object.assign(Object.assign(Object.assign({},l),c),o.headers),{url:r.toPathString(n),options:a}}))}}},e.RequestorApiFp=function(o){const s=e.RequestorApiAxiosParamCreator(o);return{acceptDebitNote(e,a,l,c){return t(this,void 0,void 0,(function*(){const t=yield s.acceptDebitNote(e,a,l,c);return r.createRequestFunction(t,n.default,i.BASE_PATH,o)}))},acceptInvoice(e,a,l,c){return t(this,void 0,void 0,(function*(){const t=yield s.acceptInvoice(e,a,l,c);return r.createRequestFunction(t,n.default,i.BASE_PATH,o)}))},amendAllocation(e,a,l){return t(this,void 0,void 0,(function*(){const t=yield s.amendAllocation(e,a,l);return r.createRequestFunction(t,n.default,i.BASE_PATH,o)}))},createAllocation(e,a,l,c){return t(this,void 0,void 0,(function*(){const t=yield s.createAllocation(e,a,l,c);return r.createRequestFunction(t,n.default,i.BASE_PATH,o)}))},getAllocation(e,a){return t(this,void 0,void 0,(function*(){const t=yield s.getAllocation(e,a);return r.createRequestFunction(t,n.default,i.BASE_PATH,o)}))},getAllocations(e){return t(this,void 0,void 0,(function*(){const t=yield s.getAllocations(e);return r.createRequestFunction(t,n.default,i.BASE_PATH,o)}))},getDebitNote(e,a){return t(this,void 0,void 0,(function*(){const t=yield s.getDebitNote(e,a);return r.createRequestFunction(t,n.default,i.BASE_PATH,o)}))},getDebitNoteEvents(e,a,l,c,u){return t(this,void 0,void 0,(function*(){const t=yield s.getDebitNoteEvents(e,a,l,c,u);return r.createRequestFunction(t,n.default,i.BASE_PATH,o)}))},getDebitNotes(e,a,l){return t(this,void 0,void 0,(function*(){const t=yield s.getDebitNotes(e,a,l);return r.createRequestFunction(t,n.default,i.BASE_PATH,o)}))},getDemandDecorations(e,a){return t(this,void 0,void 0,(function*(){const t=yield s.getDemandDecorations(e,a);return r.createRequestFunction(t,n.default,i.BASE_PATH,o)}))},getInvoice(e,a){return t(this,void 0,void 0,(function*(){const t=yield s.getInvoice(e,a);return r.createRequestFunction(t,n.default,i.BASE_PATH,o)}))},getInvoiceEvents(e,a,l,c,u){return t(this,void 0,void 0,(function*(){const t=yield s.getInvoiceEvents(e,a,l,c,u);return r.createRequestFunction(t,n.default,i.BASE_PATH,o)}))},getInvoices(e,a,l){return t(this,void 0,void 0,(function*(){const t=yield s.getInvoices(e,a,l);return r.createRequestFunction(t,n.default,i.BASE_PATH,o)}))},getPayment(e,a){return t(this,void 0,void 0,(function*(){const t=yield s.getPayment(e,a);return r.createRequestFunction(t,n.default,i.BASE_PATH,o)}))},getPayments(e,a,l,c,u){return t(this,void 0,void 0,(function*(){const t=yield s.getPayments(e,a,l,c,u);return r.createRequestFunction(t,n.default,i.BASE_PATH,o)}))},getPaymentsForDebitNote(e,a,l,c){return t(this,void 0,void 0,(function*(){const t=yield s.getPaymentsForDebitNote(e,a,l,c);return r.createRequestFunction(t,n.default,i.BASE_PATH,o)}))},getPaymentsForInvoice(e,a,l,c){return t(this,void 0,void 0,(function*(){const t=yield s.getPaymentsForInvoice(e,a,l,c);return r.createRequestFunction(t,n.default,i.BASE_PATH,o)}))},getRequestorAccounts(e){return t(this,void 0,void 0,(function*(){const t=yield s.getRequestorAccounts(e);return r.createRequestFunction(t,n.default,i.BASE_PATH,o)}))},issueInvoice(e,a){return t(this,void 0,void 0,(function*(){const t=yield s.issueInvoice(e,a);return r.createRequestFunction(t,n.default,i.BASE_PATH,o)}))},rejectDebitNote(e,a,l,c){return t(this,void 0,void 0,(function*(){const t=yield s.rejectDebitNote(e,a,l,c);return r.createRequestFunction(t,n.default,i.BASE_PATH,o)}))},rejectInvoice(e,a,l,c){return t(this,void 0,void 0,(function*(){const t=yield s.rejectInvoice(e,a,l,c);return r.createRequestFunction(t,n.default,i.BASE_PATH,o)}))},releaseAllocation(e,a){return t(this,void 0,void 0,(function*(){const t=yield s.releaseAllocation(e,a);return r.createRequestFunction(t,n.default,i.BASE_PATH,o)}))}}},e.RequestorApiFactory=function(t,n,r){const i=e.RequestorApiFp(t);return{acceptDebitNote:(e,t,o,s)=>i.acceptDebitNote(e,t,o,s).then((e=>e(r,n))),acceptInvoice:(e,t,o,s)=>i.acceptInvoice(e,t,o,s).then((e=>e(r,n))),amendAllocation:(e,t,o)=>i.amendAllocation(e,t,o).then((e=>e(r,n))),createAllocation:(e,t,o,s)=>i.createAllocation(e,t,o,s).then((e=>e(r,n))),getAllocation:(e,t)=>i.getAllocation(e,t).then((e=>e(r,n))),getAllocations:e=>i.getAllocations(e).then((e=>e(r,n))),getDebitNote:(e,t)=>i.getDebitNote(e,t).then((e=>e(r,n))),getDebitNoteEvents:(e,t,o,s,a)=>i.getDebitNoteEvents(e,t,o,s,a).then((e=>e(r,n))),getDebitNotes:(e,t,o)=>i.getDebitNotes(e,t,o).then((e=>e(r,n))),getDemandDecorations:(e,t)=>i.getDemandDecorations(e,t).then((e=>e(r,n))),getInvoice:(e,t)=>i.getInvoice(e,t).then((e=>e(r,n))),getInvoiceEvents:(e,t,o,s,a)=>i.getInvoiceEvents(e,t,o,s,a).then((e=>e(r,n))),getInvoices:(e,t,o)=>i.getInvoices(e,t,o).then((e=>e(r,n))),getPayment:(e,t)=>i.getPayment(e,t).then((e=>e(r,n))),getPayments:(e,t,o,s,a)=>i.getPayments(e,t,o,s,a).then((e=>e(r,n))),getPaymentsForDebitNote:(e,t,o,s)=>i.getPaymentsForDebitNote(e,t,o,s).then((e=>e(r,n))),getPaymentsForInvoice:(e,t,o,s)=>i.getPaymentsForInvoice(e,t,o,s).then((e=>e(r,n))),getRequestorAccounts:e=>i.getRequestorAccounts(e).then((e=>e(r,n))),issueInvoice:(e,t)=>i.issueInvoice(e,t).then((e=>e(r,n))),rejectDebitNote:(e,t,o,s)=>i.rejectDebitNote(e,t,o,s).then((e=>e(r,n))),rejectInvoice:(e,t,o,s)=>i.rejectInvoice(e,t,o,s).then((e=>e(r,n))),releaseAllocation:(e,t)=>i.releaseAllocation(e,t).then((e=>e(r,n)))}},e.RequestorApi=class extends i.BaseAPI{acceptDebitNote(t,n,r,i){return e.RequestorApiFp(this.configuration).acceptDebitNote(t,n,r,i).then((e=>e(this.axios,this.basePath)))}acceptInvoice(t,n,r,i){return e.RequestorApiFp(this.configuration).acceptInvoice(t,n,r,i).then((e=>e(this.axios,this.basePath)))}amendAllocation(t,n,r){return e.RequestorApiFp(this.configuration).amendAllocation(t,n,r).then((e=>e(this.axios,this.basePath)))}createAllocation(t,n,r,i){return e.RequestorApiFp(this.configuration).createAllocation(t,n,r,i).then((e=>e(this.axios,this.basePath)))}getAllocation(t,n){return e.RequestorApiFp(this.configuration).getAllocation(t,n).then((e=>e(this.axios,this.basePath)))}getAllocations(t){return e.RequestorApiFp(this.configuration).getAllocations(t).then((e=>e(this.axios,this.basePath)))}getDebitNote(t,n){return e.RequestorApiFp(this.configuration).getDebitNote(t,n).then((e=>e(this.axios,this.basePath)))}getDebitNoteEvents(t,n,r,i,o){return e.RequestorApiFp(this.configuration).getDebitNoteEvents(t,n,r,i,o).then((e=>e(this.axios,this.basePath)))}getDebitNotes(t,n,r){return e.RequestorApiFp(this.configuration).getDebitNotes(t,n,r).then((e=>e(this.axios,this.basePath)))}getDemandDecorations(t,n){return e.RequestorApiFp(this.configuration).getDemandDecorations(t,n).then((e=>e(this.axios,this.basePath)))}getInvoice(t,n){return e.RequestorApiFp(this.configuration).getInvoice(t,n).then((e=>e(this.axios,this.basePath)))}getInvoiceEvents(t,n,r,i,o){return e.RequestorApiFp(this.configuration).getInvoiceEvents(t,n,r,i,o).then((e=>e(this.axios,this.basePath)))}getInvoices(t,n,r){return e.RequestorApiFp(this.configuration).getInvoices(t,n,r).then((e=>e(this.axios,this.basePath)))}getPayment(t,n){return e.RequestorApiFp(this.configuration).getPayment(t,n).then((e=>e(this.axios,this.basePath)))}getPayments(t,n,r,i,o){return e.RequestorApiFp(this.configuration).getPayments(t,n,r,i,o).then((e=>e(this.axios,this.basePath)))}getPaymentsForDebitNote(t,n,r,i){return e.RequestorApiFp(this.configuration).getPaymentsForDebitNote(t,n,r,i).then((e=>e(this.axios,this.basePath)))}getPaymentsForInvoice(t,n,r,i){return e.RequestorApiFp(this.configuration).getPaymentsForInvoice(t,n,r,i).then((e=>e(this.axios,this.basePath)))}getRequestorAccounts(t){return e.RequestorApiFp(this.configuration).getRequestorAccounts(t).then((e=>e(this.axios,this.basePath)))}issueInvoice(t,n){return e.RequestorApiFp(this.configuration).issueInvoice(t,n).then((e=>e(this.axios,this.basePath)))}rejectDebitNote(t,n,r,i){return e.RequestorApiFp(this.configuration).rejectDebitNote(t,n,r,i).then((e=>e(this.axios,this.basePath)))}rejectInvoice(t,n,r,i){return e.RequestorApiFp(this.configuration).rejectInvoice(t,n,r,i).then((e=>e(this.axios,this.basePath)))}releaseAllocation(t,n){return e.RequestorApiFp(this.configuration).releaseAllocation(t,n).then((e=>e(this.axios,this.basePath)))}}}(Xl);var oc=ic();let sc=class extends cl.BaseAPI{async getIdentity(){var e;const t=await fetch(this.basePath+"/me",{headers:{authorization:"Bearer ".concat(null===(e=this.configuration)||void 0===e?void 0:e.apiKey)}});if(!t.ok)throw new Lr("Failed to get identity: ".concat(t.statusText));return await t.json()}},ac=class extends cl.BaseAPI{async createService(e,t){var n;const r=await fetch("".concat(this.basePath,"/services"),{method:"POST",body:JSON.stringify({listen:{on:"/public/gftp/".concat(e.id),components:t}}),headers:{"Content-Type":"application/json",authorization:"Bearer ".concat(null===(n=this.configuration)||void 0===n?void 0:n.apiKey)}}).catch((e=>{throw new Lr("Failed to create service: ".concat(e),e)}));if(!r.ok)throw new Lr("Failed to create service: ".concat(r.statusText));return await r.json()}async deleteService(e){var t;const n=await fetch("".concat(this.basePath,"/services/").concat(e),{method:"DELETE",headers:{authorization:"Bearer ".concat(null===(t=this.configuration)||void 0===t?void 0:t.apiKey)}}).catch((e=>{throw new Lr("Failed to delete service: ".concat(e))}));if(!n.ok)throw new Lr("Failed to delete service: ".concat(n.statusText))}};class lc extends ba.RequestorStateApi{async getActivityAgreementId(e){var t;try{const n=await fetch(this.basePath+"/activity/"+e+"/agreement",{headers:{authorization:"Bearer ".concat(null===(t=this.configuration)||void 0===t?void 0:t.apiKey)}});if(!n.ok)throw new Lr("Failed to get activity agreement: ".concat(n.statusText));return await n.json()}catch(e){throw new Lr("Failed to get activity agreement: ".concat(e),e)}}}var cc=[],uc=[],dc="undefined"!=typeof Uint8Array?Uint8Array:Array,hc=!1;function fc(){hc=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0;t<64;++t)cc[t]=e[t],uc[e.charCodeAt(t)]=t;uc["-".charCodeAt(0)]=62,uc["_".charCodeAt(0)]=63}function pc(e,t,n){for(var r,i,o=[],s=t;s<n;s+=3)r=(e[s]<<16)+(e[s+1]<<8)+e[s+2],o.push(cc[(i=r)>>18&63]+cc[i>>12&63]+cc[i>>6&63]+cc[63&i]);return o.join("")}function gc(e){var t;hc||fc();for(var n=e.length,r=n%3,i="",o=[],s=16383,a=0,l=n-r;a<l;a+=s)o.push(pc(e,a,a+s>l?l:a+s));return 1===r?(t=e[n-1],i+=cc[t>>2],i+=cc[t<<4&63],i+="=="):2===r&&(t=(e[n-2]<<8)+e[n-1],i+=cc[t>>10],i+=cc[t>>4&63],i+=cc[t<<2&63],i+="="),o.push(i),o.join("")}function mc(e,t,n,r,i){var o,s,a=8*i-r-1,l=(1<<a)-1,c=l>>1,u=-7,d=n?i-1:0,h=n?-1:1,f=e[t+d];for(d+=h,o=f&(1<<-u)-1,f>>=-u,u+=a;u>0;o=256*o+e[t+d],d+=h,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=r;u>0;s=256*s+e[t+d],d+=h,u-=8);if(0===o)o=1-c;else{if(o===l)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,r),o-=c}return(f?-1:1)*s*Math.pow(2,o-r)}function vc(e,t,n,r,i,o){var s,a,l,c=8*o-i-1,u=(1<<c)-1,d=u>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,p=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=u):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),(t+=s+d>=1?h/l:h*Math.pow(2,1-d))*l>=2&&(s++,l/=2),s+d>=u?(a=0,s=u):s+d>=1?(a=(t*l-1)*Math.pow(2,i),s+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,i),s=0));i>=8;e[n+f]=255&a,f+=p,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;e[n+f]=255&s,f+=p,s/=256,c-=8);e[n+f-p]|=128*g}var yc={}.toString,bc=Array.isArray||function(e){return"[object Array]"==yc.call(e)};Ec.TYPED_ARRAY_SUPPORT=void 0===Kr.TYPED_ARRAY_SUPPORT||Kr.TYPED_ARRAY_SUPPORT;var wc=Sc();function Sc(){return Ec.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function _c(e,t){if(Sc()<t)throw new RangeError("Invalid typed array length");return Ec.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=Ec.prototype:(null===e&&(e=new Ec(t)),e.length=t),e}function Ec(e,t,n){if(!(Ec.TYPED_ARRAY_SUPPORT||this instanceof Ec))return new Ec(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return Ac(this,e)}return kc(this,e,t,n)}function kc(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),Ec.TYPED_ARRAY_SUPPORT?(e=t).__proto__=Ec.prototype:e=xc(e,t),e}(e,t,n,r):"string"==typeof t?function(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!Ec.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|Tc(t,n),i=(e=_c(e,r)).write(t,n);return i!==r&&(e=e.slice(0,i)),e}(e,t,n):function(e,t){if(Oc(t)){var n=0|Ic(t.length);return 0===(e=_c(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?_c(e,0):xc(e,t);if("Buffer"===t.type&&bc(t.data))return xc(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function Pc(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function Ac(e,t){if(Pc(t),e=_c(e,t<0?0:0|Ic(t)),!Ec.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function xc(e,t){var n=t.length<0?0:0|Ic(t.length);e=_c(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function Ic(e){if(e>=Sc())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Sc().toString(16)+" bytes");return 0|e}function Oc(e){return!(null==e||!e._isBuffer)}function Tc(e,t){if(Oc(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return ru(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return iu(e).length;default:if(r)return ru(e).length;t=(""+t).toLowerCase(),r=!0}}function Rc(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return Gc(this,t,n);case"utf8":case"utf-8":return Vc(this,t,n);case"ascii":return Hc(this,t,n);case"latin1":case"binary":return Wc(this,t,n);case"base64":return zc(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Yc(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function Cc(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function Nc(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=Ec.from(t,r)),Oc(t))return 0===t.length?-1:jc(e,t,n,r,i);if("number"==typeof t)return t&=255,Ec.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):jc(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function jc(e,t,n,r,i){var o,s=1,a=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,a/=2,l/=2,n/=2}function c(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var u=-1;for(o=n;o<a;o++)if(c(e,o)===c(t,-1===u?0:o-u)){if(-1===u&&(u=o),o-u+1===l)return u*s}else-1!==u&&(o-=o-u),u=-1}else for(n+l>a&&(n=a-l),o=n;o>=0;o--){for(var d=!0,h=0;h<l;h++)if(c(e,o+h)!==c(t,h)){d=!1;break}if(d)return o}return-1}function Dc(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[n+s]=a}return s}function Fc(e,t,n,r){return ou(ru(t,e.length-n),e,n,r)}function Lc(e,t,n,r){return ou(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function Mc(e,t,n,r){return Lc(e,t,n,r)}function Bc(e,t,n,r){return ou(iu(t),e,n,r)}function Uc(e,t,n,r){return ou(function(e,t){for(var n,r,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s)r=(n=e.charCodeAt(s))>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function zc(e,t,n){return 0===t&&n===e.length?gc(e):gc(e.slice(t,n))}function Vc(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,s,a,l,c=e[i],u=null,d=c>239?4:c>223?3:c>191?2:1;if(i+d<=n)switch(d){case 1:c<128&&(u=c);break;case 2:128==(192&(o=e[i+1]))&&(l=(31&c)<<6|63&o)>127&&(u=l);break;case 3:o=e[i+1],s=e[i+2],128==(192&o)&&128==(192&s)&&(l=(15&c)<<12|(63&o)<<6|63&s)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:o=e[i+1],s=e[i+2],a=e[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(l=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&l<1114112&&(u=l)}null===u?(u=65533,d=1):u>65535&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),i+=d}return function(e){var t=e.length;if(t<=qc)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=qc));return n}(r)}Ec.poolSize=8192,Ec._augment=function(e){return e.__proto__=Ec.prototype,e},Ec.from=function(e,t,n){return kc(null,e,t,n)},Ec.TYPED_ARRAY_SUPPORT&&(Ec.prototype.__proto__=Uint8Array.prototype,Ec.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&Ec[Symbol.species]),Ec.alloc=function(e,t,n){return function(e,t,n,r){return Pc(t),t<=0?_c(e,t):void 0!==n?"string"==typeof r?_c(e,t).fill(n,r):_c(e,t).fill(n):_c(e,t)}(null,e,t,n)},Ec.allocUnsafe=function(e){return Ac(null,e)},Ec.allocUnsafeSlow=function(e){return Ac(null,e)},Ec.isBuffer=su,Ec.compare=function(e,t){if(!Oc(e)||!Oc(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},Ec.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Ec.concat=function(e,t){if(!bc(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return Ec.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=Ec.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(!Oc(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},Ec.byteLength=Tc,Ec.prototype._isBuffer=!0,Ec.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)Cc(this,t,t+1);return this},Ec.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)Cc(this,t,t+3),Cc(this,t+1,t+2);return this},Ec.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)Cc(this,t,t+7),Cc(this,t+1,t+6),Cc(this,t+2,t+5),Cc(this,t+3,t+4);return this},Ec.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?Vc(this,0,e):Rc.apply(this,arguments)},Ec.prototype.equals=function(e){if(!Oc(e))throw new TypeError("Argument must be a Buffer");return this===e||0===Ec.compare(this,e)},Ec.prototype.inspect=function(){var e="";return this.length>0&&(e=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(e+=" ... ")),"<Buffer "+e+">"},Ec.prototype.compare=function(e,t,n,r,i){if(!Oc(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),a=Math.min(o,s),l=this.slice(r,i),c=e.slice(t,n),u=0;u<a;++u)if(l[u]!==c[u]){o=l[u],s=c[u];break}return o<s?-1:s<o?1:0},Ec.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},Ec.prototype.indexOf=function(e,t,n){return Nc(this,e,t,n,!0)},Ec.prototype.lastIndexOf=function(e,t,n){return Nc(this,e,t,n,!1)},Ec.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return Dc(this,e,t,n);case"utf8":case"utf-8":return Fc(this,e,t,n);case"ascii":return Lc(this,e,t,n);case"latin1":case"binary":return Mc(this,e,t,n);case"base64":return Bc(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Uc(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},Ec.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var qc=4096;function Hc(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function Wc(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function Gc(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=nu(e[o]);return i}function Yc(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function Kc(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function $c(e,t,n,r,i,o){if(!Oc(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function Qc(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function Jc(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function Xc(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function Zc(e,t,n,r,i){return i||Xc(e,0,n,4),vc(e,t,n,r,23,4),n+4}function eu(e,t,n,r,i){return i||Xc(e,0,n,8),vc(e,t,n,r,52,8),n+8}Ec.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),Ec.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=Ec.prototype;else{var i=t-e;n=new Ec(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+e]}return n},Ec.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||Kc(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},Ec.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||Kc(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},Ec.prototype.readUInt8=function(e,t){return t||Kc(e,1,this.length),this[e]},Ec.prototype.readUInt16LE=function(e,t){return t||Kc(e,2,this.length),this[e]|this[e+1]<<8},Ec.prototype.readUInt16BE=function(e,t){return t||Kc(e,2,this.length),this[e]<<8|this[e+1]},Ec.prototype.readUInt32LE=function(e,t){return t||Kc(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Ec.prototype.readUInt32BE=function(e,t){return t||Kc(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Ec.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||Kc(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},Ec.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||Kc(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},Ec.prototype.readInt8=function(e,t){return t||Kc(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},Ec.prototype.readInt16LE=function(e,t){t||Kc(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},Ec.prototype.readInt16BE=function(e,t){t||Kc(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},Ec.prototype.readInt32LE=function(e,t){return t||Kc(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Ec.prototype.readInt32BE=function(e,t){return t||Kc(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Ec.prototype.readFloatLE=function(e,t){return t||Kc(e,4,this.length),mc(this,e,!0,23,4)},Ec.prototype.readFloatBE=function(e,t){return t||Kc(e,4,this.length),mc(this,e,!1,23,4)},Ec.prototype.readDoubleLE=function(e,t){return t||Kc(e,8,this.length),mc(this,e,!0,52,8)},Ec.prototype.readDoubleBE=function(e,t){return t||Kc(e,8,this.length),mc(this,e,!1,52,8)},Ec.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||$c(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},Ec.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||$c(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},Ec.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||$c(this,e,t,1,255,0),Ec.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},Ec.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||$c(this,e,t,2,65535,0),Ec.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):Qc(this,e,t,!0),t+2},Ec.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||$c(this,e,t,2,65535,0),Ec.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):Qc(this,e,t,!1),t+2},Ec.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||$c(this,e,t,4,4294967295,0),Ec.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):Jc(this,e,t,!0),t+4},Ec.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||$c(this,e,t,4,4294967295,0),Ec.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):Jc(this,e,t,!1),t+4},Ec.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);$c(this,e,t,n,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<n&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},Ec.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);$c(this,e,t,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},Ec.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||$c(this,e,t,1,127,-128),Ec.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},Ec.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||$c(this,e,t,2,32767,-32768),Ec.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):Qc(this,e,t,!0),t+2},Ec.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||$c(this,e,t,2,32767,-32768),Ec.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):Qc(this,e,t,!1),t+2},Ec.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||$c(this,e,t,4,2147483647,-2147483648),Ec.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):Jc(this,e,t,!0),t+4},Ec.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||$c(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),Ec.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):Jc(this,e,t,!1),t+4},Ec.prototype.writeFloatLE=function(e,t,n){return Zc(this,e,t,!0,n)},Ec.prototype.writeFloatBE=function(e,t,n){return Zc(this,e,t,!1,n)},Ec.prototype.writeDoubleLE=function(e,t,n){return eu(this,e,t,!0,n)},Ec.prototype.writeDoubleBE=function(e,t,n){return eu(this,e,t,!1,n)},Ec.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!Ec.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},Ec.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!Ec.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var s=Oc(e)?e:ru(new Ec(e,r).toString()),a=s.length;for(o=0;o<n-t;++o)this[o+t]=s[o%a]}return this};var tu=/[^+\/0-9A-Za-z-_]/g;function nu(e){return e<16?"0"+e.toString(16):e.toString(16)}function ru(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],s=0;s<r;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function iu(e){return function(e){var t,n,r,i,o,s;hc||fc();var a=e.length;if(a%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o="="===e[a-2]?2:"="===e[a-1]?1:0,s=new dc(3*a/4-o),r=o>0?a-4:a;var l=0;for(t=0,n=0;t<r;t+=4,n+=3)i=uc[e.charCodeAt(t)]<<18|uc[e.charCodeAt(t+1)]<<12|uc[e.charCodeAt(t+2)]<<6|uc[e.charCodeAt(t+3)],s[l++]=i>>16&255,s[l++]=i>>8&255,s[l++]=255&i;return 2===o?(i=uc[e.charCodeAt(t)]<<2|uc[e.charCodeAt(t+1)]>>4,s[l++]=255&i):1===o&&(i=uc[e.charCodeAt(t)]<<10|uc[e.charCodeAt(t+1)]<<4|uc[e.charCodeAt(t+2)]>>2,s[l++]=i>>8&255,s[l++]=255&i),s}(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(tu,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function ou(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function su(e){return null!=e&&(!!e._isBuffer||au(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&au(e.slice(0,0))}(e))}function au(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}var lu,cu,uu=Object.freeze({__proto__:null,Buffer:Ec,INSPECT_MAX_BYTES:50,SlowBuffer:function(e){return+e!=e&&(e=0),Ec.alloc(+e)},isBuffer:su,kMaxLength:wc}),du=wu(Kr.fetch)&&wu(Kr.ReadableStream);function hu(e){cu||(cu=new Kr.XMLHttpRequest).open("GET",Kr.location.host?"/":"https://example.com");try{return cu.responseType=e,cu.responseType===e}catch(e){return!1}}var fu=void 0!==Kr.ArrayBuffer,pu=fu&&wu(Kr.ArrayBuffer.prototype.slice),gu=fu&&hu("arraybuffer"),mu=!du&&pu&&hu("ms-stream"),vu=!du&&fu&&hu("moz-chunked-arraybuffer"),yu=wu(cu.overrideMimeType),bu=wu(Kr.VBArray);function wu(e){return"function"==typeof e}cu=null;var Su="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e},_u=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return n},Eu=/%[sdj%]/g;function ku(e){if(!Uu(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(Ou(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,i=r.length,o=String(e).replace(Eu,(function(e){if("%%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}})),s=r[n];n<i;s=r[++n])Lu(s)||!Hu(s)?o+=" "+s:o+=" "+Ou(s);return o}function Pu(e,t){if(Vu(Kr.process))return function(){return Pu(e,t).apply(this,arguments)};if(!0===yi.noDeprecation)return e;var n=!1;return function(){if(!n){if(yi.throwDeprecation)throw new Error(t);yi.traceDeprecation?console.trace(t):console.error(t),n=!0}return e.apply(this,arguments)}}var Au,xu={};function Iu(e){return Vu(Au)&&(Au=yi.env.NODE_DEBUG||""),e=e.toUpperCase(),xu[e]||(new RegExp("\\b"+e+"\\b","i").test(Au)?xu[e]=function(){var t=ku.apply(null,arguments);console.error("%s %d: %s",e,0,t)}:xu[e]=function(){}),xu[e]}function Ou(e,t){var n={seen:[],stylize:Ru};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),Fu(t)?n.showHidden=t:t&&ed(n,t),Vu(n.showHidden)&&(n.showHidden=!1),Vu(n.depth)&&(n.depth=2),Vu(n.colors)&&(n.colors=!1),Vu(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=Tu),Cu(n,e,n.depth)}function Tu(e,t){var n=Ou.styles[t];return n?"\x1b["+Ou.colors[n][0]+"m"+e+"\x1b["+Ou.colors[n][1]+"m":e}function Ru(e,t){return e}function Cu(e,t,n){if(e.customInspect&&t&&Yu(t.inspect)&&t.inspect!==Ou&&(!t.constructor||t.constructor.prototype!==t)){var r=t.inspect(n,e);return Uu(r)||(r=Cu(e,r,n)),r}var i=function(e,t){if(Vu(t))return e.stylize("undefined","undefined");if(Uu(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return Bu(t)?e.stylize(""+t,"number"):Fu(t)?e.stylize(""+t,"boolean"):Lu(t)?e.stylize("null","null"):void 0}(e,t);if(i)return i;var o=Object.keys(t),s=function(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(t)),Gu(t)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return Nu(t);if(0===o.length){if(Yu(t)){var a=t.name?": "+t.name:"";return e.stylize("[Function"+a+"]","special")}if(qu(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(Wu(t))return e.stylize(Date.prototype.toString.call(t),"date");if(Gu(t))return Nu(t)}var l,c="",u=!1,d=["{","}"];return Du(t)&&(u=!0,d=["[","]"]),Yu(t)&&(c=" [Function"+(t.name?": "+t.name:"")+"]"),qu(t)&&(c=" "+RegExp.prototype.toString.call(t)),Wu(t)&&(c=" "+Date.prototype.toUTCString.call(t)),Gu(t)&&(c=" "+Nu(t)),0!==o.length||u&&0!=t.length?n<0?qu(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),l=u?function(e,t,n,r,i){for(var o=[],s=0,a=t.length;s<a;++s)td(t,String(s))?o.push(ju(e,t,n,r,String(s),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(ju(e,t,n,r,i,!0))})),o}(e,t,n,s,o):o.map((function(r){return ju(e,t,n,s,r,u)})),e.seen.pop(),function(e,t,n){var r=e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0);return r>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}(l,c,d)):d[0]+c+d[1]}function Nu(e){return"["+Error.prototype.toString.call(e)+"]"}function ju(e,t,n,r,i,o){var s,a,l;if((l=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?a=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(a=e.stylize("[Setter]","special")),td(r,i)||(s="["+i+"]"),a||(e.seen.indexOf(l.value)<0?(a=Lu(n)?Cu(e,l.value,null):Cu(e,l.value,n-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+a.split("\n").map((function(e){return"   "+e})).join("\n")):a=e.stylize("[Circular]","special")),Vu(s)){if(o&&i.match(/^\d+$/))return a;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function Du(e){return Array.isArray(e)}function Fu(e){return"boolean"==typeof e}function Lu(e){return null===e}function Mu(e){return null==e}function Bu(e){return"number"==typeof e}function Uu(e){return"string"==typeof e}function zu(e){return"symbol"==typeof e}function Vu(e){return void 0===e}function qu(e){return Hu(e)&&"[object RegExp]"===Qu(e)}function Hu(e){return"object"==typeof e&&null!==e}function Wu(e){return Hu(e)&&"[object Date]"===Qu(e)}function Gu(e){return Hu(e)&&("[object Error]"===Qu(e)||e instanceof Error)}function Yu(e){return"function"==typeof e}function Ku(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function $u(e){return Ec.isBuffer(e)}function Qu(e){return Object.prototype.toString.call(e)}function Ju(e){return e<10?"0"+e.toString(10):e.toString(10)}Ou.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},Ou.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var Xu=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Zu(){var e,t;console.log("%s - %s",(t=[Ju((e=new Date).getHours()),Ju(e.getMinutes()),Ju(e.getSeconds())].join(":"),[e.getDate(),Xu[e.getMonth()],t].join(" ")),ku.apply(null,arguments))}function ed(e,t){if(!t||!Hu(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}function td(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var nd="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function rd(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(nd&&e[nd]){var t;if("function"!=typeof(t=e[nd]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,nd,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,r=new Promise((function(e,r){t=e,n=r})),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push((function(e,r){e?n(e):t(r)}));try{e.apply(this,i)}catch(e){n(e)}return r}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),nd&&Object.defineProperty(t,nd,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,_u(e))}function id(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}function od(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function t(){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n]);var r=t.pop();if("function"!=typeof r)throw new TypeError("The last argument must be of type Function");var i=this,o=function(){return r.apply(i,arguments)};e.apply(this,t).then((function(e){yi.nextTick(o.bind(null,null,e))}),(function(e){yi.nextTick(id.bind(null,e,o))}))}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,_u(e)),t}rd.custom=nd;var sd={inherits:Su,_extend:ed,log:Zu,isBuffer:$u,isPrimitive:Ku,isFunction:Yu,isError:Gu,isDate:Wu,isObject:Hu,isRegExp:qu,isUndefined:Vu,isSymbol:zu,isString:Uu,isNumber:Bu,isNullOrUndefined:Mu,isNull:Lu,isBoolean:Fu,isArray:Du,inspect:Ou,deprecate:Pu,format:ku,debuglog:Iu,promisify:rd,callbackify:od},ad=Object.freeze({__proto__:null,_extend:ed,callbackify:od,debuglog:Iu,default:sd,deprecate:Pu,format:ku,inherits:Su,inspect:Ou,isArray:Du,isBoolean:Fu,isBuffer:$u,isDate:Wu,isError:Gu,isFunction:Yu,isNull:Lu,isNullOrUndefined:Mu,isNumber:Bu,isObject:Hu,isPrimitive:Ku,isRegExp:qu,isString:Uu,isSymbol:zu,isUndefined:Vu,log:Zu,promisify:rd});function ld(){}function cd(){cd.init.call(this)}function ud(e){return void 0===e._maxListeners?cd.defaultMaxListeners:e._maxListeners}function dd(e,t,n,r){var i,o,s,a;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((o=e._events)?(o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),s=o[t]):(o=e._events=new ld,e._eventsCount=0),s){if("function"==typeof s?s=o[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),!s.warned&&(i=ud(e))&&i>0&&s.length>i){s.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=s.length,a=l,"function"==typeof console.warn?console.warn(a):console.log(a)}}else s=o[t]=n,++e._eventsCount;return e}function hd(e,t,n){var r=!1;function i(){e.removeListener(t,i),r||(r=!0,n.apply(e,arguments))}return i.listener=n,i}function fd(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function pd(e,t){for(var n=new Array(t);t--;)n[t]=e[t];return n}ld.prototype=Object.create(null),cd.EventEmitter=cd,cd.usingDomains=!1,cd.prototype.domain=void 0,cd.prototype._events=void 0,cd.prototype._maxListeners=void 0,cd.defaultMaxListeners=10,cd.init=function(){this.domain=null,cd.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new ld,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},cd.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},cd.prototype.getMaxListeners=function(){return ud(this)},cd.prototype.emit=function(e){var t,n,r,i,o,s,a,l="error"===e;if(s=this._events)l=l&&null==s.error;else if(!l)return!1;if(a=this.domain,l){if(t=arguments[1],!a){if(t instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}return t||(t=new Error('Uncaught, unspecified "error" event')),t.domainEmitter=this,t.domain=a,t.domainThrown=!1,a.emit("error",t),!1}if(!(n=s[e]))return!1;var u="function"==typeof n;switch(r=arguments.length){case 1:!function(e,t,n){if(t)e.call(n);else for(var r=e.length,i=pd(e,r),o=0;o<r;++o)i[o].call(n)}(n,u,this);break;case 2:!function(e,t,n,r){if(t)e.call(n,r);else for(var i=e.length,o=pd(e,i),s=0;s<i;++s)o[s].call(n,r)}(n,u,this,arguments[1]);break;case 3:!function(e,t,n,r,i){if(t)e.call(n,r,i);else for(var o=e.length,s=pd(e,o),a=0;a<o;++a)s[a].call(n,r,i)}(n,u,this,arguments[1],arguments[2]);break;case 4:!function(e,t,n,r,i,o){if(t)e.call(n,r,i,o);else for(var s=e.length,a=pd(e,s),l=0;l<s;++l)a[l].call(n,r,i,o)}(n,u,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(r-1),o=1;o<r;o++)i[o-1]=arguments[o];!function(e,t,n,r){if(t)e.apply(n,r);else for(var i=e.length,o=pd(e,i),s=0;s<i;++s)o[s].apply(n,r)}(n,u,this,i)}return!0},cd.prototype.addListener=function(e,t){return dd(this,e,t,!1)},cd.prototype.on=cd.prototype.addListener,cd.prototype.prependListener=function(e,t){return dd(this,e,t,!0)},cd.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,hd(this,e,t)),this},cd.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,hd(this,e,t)),this},cd.prototype.removeListener=function(e,t){var n,r,i,o,s;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[e]))return this;if(n===t||n.listener&&n.listener===t)0==--this._eventsCount?this._events=new ld:(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length;o-- >0;)if(n[o]===t||n[o].listener&&n[o].listener===t){s=n[o].listener,i=o;break}if(i<0)return this;if(1===n.length){if(n[0]=void 0,0==--this._eventsCount)return this._events=new ld,this;delete r[e]}else!function(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}(n,i);r.removeListener&&this.emit("removeListener",e,s||t)}return this},cd.prototype.off=function(e,t){return this.removeListener(e,t)},cd.prototype.removeAllListeners=function(e){var t,n;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=new ld,this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=new ld:delete n[e]),this;if(0===arguments.length){for(var r,i=Object.keys(n),o=0;o<i.length;++o)"removeListener"!==(r=i[o])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=new ld,this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)do{this.removeListener(e,t[t.length-1])}while(t[0]);return this},cd.prototype.listeners=function(e){var t,n=this._events;return n&&(t=n[e])?"function"==typeof t?[t.listener||t]:function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(t):[]},cd.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):fd.call(e,t)},cd.prototype.listenerCount=fd,cd.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var gd,md,vd=Si(Object.freeze({__proto__:null,EventEmitter:cd,default:cd})),yd="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e},bd=Si(Object.freeze({__proto__:null,default:yd}));function wd(){return md?gd:(md=1,gd=vd.EventEmitter)}var Sd,_d,Ed,kd,Pd=Si(uu),Ad=Si(ad);function xd(){if(kd)return Ed;function e(e,r){n(e,r),t(e)}function t(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function n(e,t){e.emit("error",t)}return kd=1,Ed={destroy:function(r,i){var o=this,s=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return s||a?(i?i(r):r&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,yi.nextTick(n,this,r)):yi.nextTick(n,this,r)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(r||null,(function(n){!i&&n?o._writableState?o._writableState.errorEmitted?yi.nextTick(t,o):(o._writableState.errorEmitted=!0,yi.nextTick(e,o,n)):yi.nextTick(e,o,n):i?(yi.nextTick(t,o),i(n)):yi.nextTick(t,o)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,r=e._writableState;n&&n.autoDestroy||r&&r.autoDestroy?e.destroy(t):e.emit("error",t)}}}var Id,Od,Td,Rd,Cd,Nd,jd,Dd,Fd,Ld={};function Md(){if(Id)return Ld;Id=1;var e={};function t(t,n,r){r||(r=Error);var i=function(e){var t,r;function i(t,r,i){return e.call(this,function(e,t,r){return"string"==typeof n?n:n(e,t,r)}(t,r,i))||this}return r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,i}(r);i.prototype.name=r.name,i.prototype.code=t,e[t]=i}function n(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map((function(e){return String(e)})),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}return t("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),t("ERR_INVALID_ARG_TYPE",(function(e,t,r){var i,o;if("string"==typeof t&&function(e,t,n){return e.substr(0,4)===t}(t,"not ")?(i="must not be",t=t.replace(/^not /,"")):i="must be",function(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-9,n)===t}(e," argument"))o="The ".concat(e," ").concat(i," ").concat(n(t,"type"));else{var s=function(e,t,n){return"number"!=typeof n&&(n=0),!(n+1>e.length)&&-1!==e.indexOf(".",n)}(e)?"property":"argument";o='The "'.concat(e,'" ').concat(s," ").concat(i," ").concat(n(t,"type"))}return o+". Received type ".concat(typeof r)}),TypeError),t("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),t("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),t("ERR_STREAM_PREMATURE_CLOSE","Premature close"),t("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),t("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),t("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),t("ERR_STREAM_WRITE_AFTER_END","write after end"),t("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),t("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),t("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),Ld.codes=e,Ld}function Bd(){if(Td)return Od;Td=1;var e=Md().codes.ERR_INVALID_OPT_VALUE;return Od={getHighWaterMark:function(t,n,r,i){var o=function(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}(n,i,r);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new e(i?r:"highWaterMark",o);return Math.floor(o)}return t.objectMode?16:16384}}}function Ud(){if(Cd)return Rd;function e(e){try{if(!bi.localStorage)return!1}catch(e){return!1}var t=bi.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}return Cd=1,Rd=function(t,n){if(e("noDeprecation"))return t;var r=!1;return function(){if(!r){if(e("throwDeprecation"))throw new Error(n);e("traceDeprecation")?console.trace(n):console.warn(n),r=!0}return t.apply(this,arguments)}},Rd}function zd(){if(jd)return Nd;function e(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;for(e.entry=null;r;){var i=r.callback;t.pendingcb--,i(undefined),r=r.next}t.corkedRequestsFree.next=e}(t,e)}}var t;jd=1,Nd=S,S.WritableState=w;var n,r={deprecate:Ud()},i=wd(),o=Pd.Buffer,s=(void 0!==bi?bi:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){},a=xd(),l=Bd().getHighWaterMark,c=Md().codes,u=c.ERR_INVALID_ARG_TYPE,d=c.ERR_METHOD_NOT_IMPLEMENTED,h=c.ERR_MULTIPLE_CALLBACK,f=c.ERR_STREAM_CANNOT_PIPE,p=c.ERR_STREAM_DESTROYED,g=c.ERR_STREAM_NULL_VALUES,m=c.ERR_STREAM_WRITE_AFTER_END,v=c.ERR_UNKNOWN_ENCODING,y=a.errorOrDestroy;function b(){}function w(n,r,i){t=t||Vd(),n=n||{},"boolean"!=typeof i&&(i=r instanceof t),this.objectMode=!!n.objectMode,i&&(this.objectMode=this.objectMode||!!n.writableObjectMode),this.highWaterMark=l(this,n,"writableHighWaterMark",i),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var o=!1===n.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=n.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if("function"!=typeof i)throw new h;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,r,i){--t.pendingcb,n?(yi.nextTick(i,r),yi.nextTick(x,e,t),e._writableState.errorEmitted=!0,y(e,r)):(i(r),e._writableState.errorEmitted=!0,y(e,r),x(e,t))}(e,n,r,t,i);else{var o=P(n)||e.destroyed;o||n.corked||n.bufferProcessing||!n.bufferedRequest||k(e,n),r?yi.nextTick(E,e,n,o,i):E(e,n,o,i)}}(r,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==n.emitClose,this.autoDestroy=!!n.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new e(this)}function S(e){var r=this instanceof(t=t||Vd());if(!r&&!n.call(S,this))return new S(e);this._writableState=new w(e,this,r),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),i.call(this)}function _(e,t,n,r,i,o,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new p("write")):n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function E(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),x(e,t)}function k(t,n){n.bufferProcessing=!0;var r=n.bufferedRequest;if(t._writev&&r&&r.next){var i=n.bufferedRequestCount,o=new Array(i),s=n.corkedRequestsFree;s.entry=r;for(var a=0,l=!0;r;)o[a]=r,r.isBuf||(l=!1),r=r.next,a+=1;o.allBuffers=l,_(t,n,!0,n.length,o,"",s.finish),n.pendingcb++,n.lastBufferedRequest=null,s.next?(n.corkedRequestsFree=s.next,s.next=null):n.corkedRequestsFree=new e(n),n.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,u=r.encoding,d=r.callback;if(_(t,n,!1,n.objectMode?1:c.length,c,u,d),r=r.next,n.bufferedRequestCount--,n.writing)break}null===r&&(n.lastBufferedRequest=null)}n.bufferedRequest=r,n.bufferProcessing=!1}function P(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function A(e,t){e._final((function(n){t.pendingcb--,n&&y(e,n),t.prefinished=!0,e.emit("prefinish"),x(e,t)}))}function x(e,t){var n=P(t);if(n&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,yi.nextTick(A,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var r=e._readableState;(!r||r.autoDestroy&&r.endEmitted)&&e.destroy()}return n}return bd(S,i),w.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(w.prototype,"buffer",{get:r.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(n=Function.prototype[Symbol.hasInstance],Object.defineProperty(S,Symbol.hasInstance,{value:function(e){return!!n.call(this,e)||this===S&&e&&e._writableState instanceof w}})):n=function(e){return e instanceof this},S.prototype.pipe=function(){y(this,new f)},S.prototype.write=function(e,t,n){var r,i=this._writableState,a=!1,l=!i.objectMode&&(r=e,o.isBuffer(r)||r instanceof s);return l&&!o.isBuffer(e)&&(e=function(e){return o.from(e)}(e)),"function"==typeof t&&(n=t,t=null),l?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof n&&(n=b),i.ending?function(e,t){var n=new m;y(e,n),yi.nextTick(t,n)}(this,n):(l||function(e,t,n,r){var i;return null===n?i=new g:"string"==typeof n||t.objectMode||(i=new u("chunk",["string","Buffer"],n)),!i||(y(e,i),yi.nextTick(r,i),!1)}(this,i,e,n))&&(i.pendingcb++,a=function(e,t,n,r,i,s){if(!n){var a=function(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=o.from(t,n)),t}(t,r,i);r!==a&&(n=!0,i="buffer",r=a)}var l=t.objectMode?1:r.length;t.length+=l;var c=t.length<t.highWaterMark;if(c||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:s,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else _(e,t,!1,l,r,i,s);return c}(this,i,l,e,t,n)),a},S.prototype.cork=function(){this._writableState.corked++},S.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||k(this,e))},S.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new v(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(S.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(S.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),S.prototype._write=function(e,t,n){n(new d("_write()"))},S.prototype._writev=null,S.prototype.end=function(e,t,n){var r=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||function(e,t,n){t.ending=!0,x(e,t),n&&(t.finished?yi.nextTick(n):e.once("finish",n)),t.ended=!0,e.writable=!1}(this,r,n),this},Object.defineProperty(S.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),S.prototype.destroy=a.destroy,S.prototype._undestroy=a.undestroy,S.prototype._destroy=function(e,t){t(e)},Nd}function Vd(){if(Fd)return Dd;Fd=1;var e=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};Dd=s;var t=uh(),n=zd();bd(s,t);for(var r=e(n.prototype),i=0;i<r.length;i++){var o=r[i];s.prototype[o]||(s.prototype[o]=n.prototype[o])}function s(e){if(!(this instanceof s))return new s(e);t.call(this,e),n.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",a)))}function a(){this._writableState.ended||yi.nextTick(l,this)}function l(e){e.end()}return Object.defineProperty(s.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(s.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(s.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(s.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),Dd}var qd=Ec.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Hd(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),function(e){if(e&&!qd(e))throw new Error("Unknown encoding: "+e)}(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=Gd;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=Yd;break;default:return void(this.write=Wd)}this.charBuffer=new Ec(6),this.charReceived=0,this.charLength=0}function Wd(e){return e.toString(this.encoding)}function Gd(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function Yd(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}Hd.prototype.write=function(e){for(var t="";this.charLength;){var n=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";if(e=e.slice(n,e.length),!((r=(t=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(t.length-1))>=55296&&r<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var r,i=e.length;if(this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,i),i-=this.charReceived),i=(t+=e.toString(this.encoding,0,i)).length-1,(r=t.charCodeAt(i))>=55296&&r<=56319){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),e.copy(this.charBuffer,0,0,o),t.substring(0,i)}return t},Hd.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var n=e[e.length-t];if(1==t&&n>>5==6){this.charLength=2;break}if(t<=2&&n>>4==14){this.charLength=3;break}if(t<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=t},Hd.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var n=this.charReceived,r=this.charBuffer,i=this.encoding;t+=r.slice(0,n).toString(i)}return t};var Kd,$d,Qd,Jd,Xd,Zd,eh,th,nh,rh,ih,oh,sh,ah,lh=Si(Object.freeze({__proto__:null,StringDecoder:Hd}));function ch(){if($d)return Kd;$d=1;var e=Md().codes.ERR_STREAM_PREMATURE_CLOSE;function t(){}return Kd=function n(r,i,o){if("function"==typeof i)return n(r,null,i);i||(i={}),o=function(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r)}}}(o||t);var s=i.readable||!1!==i.readable&&r.readable,a=i.writable||!1!==i.writable&&r.writable,l=function(){r.writable||u()},c=r._writableState&&r._writableState.finished,u=function(){a=!1,c=!0,s||o.call(r)},d=r._readableState&&r._readableState.endEmitted,h=function(){s=!1,d=!0,a||o.call(r)},f=function(e){o.call(r,e)},p=function(){var t;return s&&!d?(r._readableState&&r._readableState.ended||(t=new e),o.call(r,t)):a&&!c?(r._writableState&&r._writableState.ended||(t=new e),o.call(r,t)):void 0},g=function(){r.req.on("finish",u)};return function(e){return e.setHeader&&"function"==typeof e.abort}(r)?(r.on("complete",u),r.on("abort",p),r.req?g():r.on("request",g)):a&&!r._writableState&&(r.on("end",l),r.on("close",l)),r.on("end",h),r.on("finish",u),!1!==i.error&&r.on("error",f),r.on("close",p),function(){r.removeListener("complete",u),r.removeListener("abort",p),r.removeListener("request",g),r.req&&r.req.removeListener("finish",u),r.removeListener("end",l),r.removeListener("close",l),r.removeListener("finish",u),r.removeListener("end",h),r.removeListener("error",f),r.removeListener("close",p)}},Kd}function uh(){if(th)return eh;var e;th=1,eh=S,S.ReadableState=w,vd.EventEmitter;var t,n=function(e,t){return e.listeners(t).length},r=wd(),i=Pd.Buffer,o=(void 0!==bi?bi:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){},s=Ad;t=s&&s.debuglog?s.debuglog("stream"):function(){};var a,l,c,u=function(){if(_d)return Sd;function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function t(t){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?e(Object(i),!0).forEach((function(e){n(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):e(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function n(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,i(r.key),r)}}function i(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}_d=1;var o=Pd.Buffer,s=Ad.inspect,a=s&&s.custom||"inspect";return Sd=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var n,i;return n=e,(i=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return o.alloc(0);for(var t,n,r,i=o.allocUnsafe(e>>>0),s=this.head,a=0;s;)t=s.data,n=i,r=a,o.prototype.copy.call(t,n,r),a+=s.data.length,s=s.next;return i}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,r=t.data;for(e-=r.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(o===i.length?r+=i:r+=i.slice(0,e),0==(e-=o)){o===i.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(o));break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(e){var t=o.allocUnsafe(e),n=this.head,r=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var i=n.data,s=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,s),0==(e-=s)){s===i.length?(++r,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=i.slice(s));break}++r}return this.length-=r,t}},{key:a,value:function(e,n){return s(this,t(t({},n),{},{depth:0,customInspect:!1}))}}])&&r(n.prototype,i),Object.defineProperty(n,"prototype",{writable:!1}),e}()}(),d=xd(),h=Bd().getHighWaterMark,f=Md().codes,p=f.ERR_INVALID_ARG_TYPE,g=f.ERR_STREAM_PUSH_AFTER_EOF,m=f.ERR_METHOD_NOT_IMPLEMENTED,v=f.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;bd(S,r);var y=d.errorOrDestroy,b=["error","close","destroy","pause","resume"];function w(t,n,r){e=e||Vd(),t=t||{},"boolean"!=typeof r&&(r=n instanceof e),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=h(this,t,"readableHighWaterMark",r),this.buffer=new u,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(a||(a=lh.StringDecoder),this.decoder=new a(t.encoding),this.encoding=t.encoding)}function S(t){if(e=e||Vd(),!(this instanceof S))return new S(t);var n=this instanceof e;this._readableState=new w(t,this,n),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),r.call(this)}function _(e,n,r,s,a){t("readableAddChunk",n);var l,c=e._readableState;if(null===n)c.reading=!1,function(e,n){if(t("onEofChunk"),!n.ended){if(n.decoder){var r=n.decoder.end();r&&r.length&&(n.buffer.push(r),n.length+=n.objectMode?1:r.length)}n.ended=!0,n.sync?A(e):(n.needReadable=!1,n.emittedReadable||(n.emittedReadable=!0,x(e)))}}(e,c);else if(a||(l=function(e,t){var n,r;return r=t,i.isBuffer(r)||r instanceof o||"string"==typeof t||void 0===t||e.objectMode||(n=new p("chunk",["string","Buffer","Uint8Array"],t)),n}(c,n)),l)y(e,l);else if(c.objectMode||n&&n.length>0)if("string"==typeof n||c.objectMode||Object.getPrototypeOf(n)===i.prototype||(n=function(e){return i.from(e)}(n)),s)c.endEmitted?y(e,new v):E(e,c,n,!0);else if(c.ended)y(e,new g);else{if(c.destroyed)return!1;c.reading=!1,c.decoder&&!r?(n=c.decoder.write(n),c.objectMode||0!==n.length?E(e,c,n,!1):I(e,c)):E(e,c,n,!1)}else s||(c.reading=!1,I(e,c));return!c.ended&&(c.length<c.highWaterMark||0===c.length)}function E(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&A(e)),I(e,t)}Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),S.prototype.destroy=d.destroy,S.prototype._undestroy=d.undestroy,S.prototype._destroy=function(e,t){t(e)},S.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=i.from(e,t),t=""),n=!0),_(this,e,t,!1,n)},S.prototype.unshift=function(e){return _(this,e,null,!0,!1)},S.prototype.isPaused=function(){return!1===this._readableState.flowing},S.prototype.setEncoding=function(e){a||(a=lh.StringDecoder);var t=new a(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,r="";null!==n;)r+=t.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==r&&this._readableState.buffer.push(r),this._readableState.length=r.length,this};var k=1073741824;function P(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=k?e=k:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function A(e){var n=e._readableState;t("emitReadable",n.needReadable,n.emittedReadable),n.needReadable=!1,n.emittedReadable||(t("emitReadable",n.flowing),n.emittedReadable=!0,yi.nextTick(x,e))}function x(e){var n=e._readableState;t("emitReadable_",n.destroyed,n.length,n.ended),n.destroyed||!n.length&&!n.ended||(e.emit("readable"),n.emittedReadable=!1),n.needReadable=!n.flowing&&!n.ended&&n.length<=n.highWaterMark,N(e)}function I(e,t){t.readingMore||(t.readingMore=!0,yi.nextTick(O,e,t))}function O(e,n){for(;!n.reading&&!n.ended&&(n.length<n.highWaterMark||n.flowing&&0===n.length);){var r=n.length;if(t("maybeReadMore read 0"),e.read(0),r===n.length)break}n.readingMore=!1}function T(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function R(e){t("readable nexttick read 0"),e.read(0)}function C(e,n){t("resume",n.reading),n.reading||e.read(0),n.resumeScheduled=!1,e.emit("resume"),N(e),n.flowing&&!n.reading&&e.read(0)}function N(e){var n=e._readableState;for(t("flow",n.flowing);n.flowing&&null!==e.read(););}function j(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function D(e){var n=e._readableState;t("endReadable",n.endEmitted),n.endEmitted||(n.ended=!0,yi.nextTick(F,n,e))}function F(e,n){if(t("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,n.readable=!1,n.emit("end"),e.autoDestroy)){var r=n._writableState;(!r||r.autoDestroy&&r.finished)&&n.destroy()}}function L(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}return S.prototype.read=function(e){t("read",e),e=parseInt(e,10);var n=this._readableState,r=e;if(0!==e&&(n.emittedReadable=!1),0===e&&n.needReadable&&((0!==n.highWaterMark?n.length>=n.highWaterMark:n.length>0)||n.ended))return t("read: emitReadable",n.length,n.ended),0===n.length&&n.ended?D(this):A(this),null;if(0===(e=P(e,n))&&n.ended)return 0===n.length&&D(this),null;var i,o=n.needReadable;return t("need readable",o),(0===n.length||n.length-e<n.highWaterMark)&&t("length less than watermark",o=!0),n.ended||n.reading?t("reading or ended",o=!1):o&&(t("do read"),n.reading=!0,n.sync=!0,0===n.length&&(n.needReadable=!0),this._read(n.highWaterMark),n.sync=!1,n.reading||(e=P(r,n))),null===(i=e>0?j(e,n):null)?(n.needReadable=n.length<=n.highWaterMark,e=0):(n.length-=e,n.awaitDrain=0),0===n.length&&(n.ended||(n.needReadable=!0),r!==e&&n.ended&&D(this)),null!==i&&this.emit("data",i),i},S.prototype._read=function(e){y(this,new m("_read()"))},S.prototype.pipe=function(e,r){var i=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=e;break;case 1:o.pipes=[o.pipes,e];break;default:o.pipes.push(e)}o.pipesCount+=1,t("pipe count=%d opts=%j",o.pipesCount,r);var s=r&&!1===r.end||e===yi.stdout||e===yi.stderr?p:a;function a(){t("onend"),e.end()}o.endEmitted?yi.nextTick(s):i.once("end",s),e.on("unpipe",(function n(r,s){t("onunpipe"),r===i&&s&&!1===s.hasUnpiped&&(s.hasUnpiped=!0,t("cleanup"),e.removeListener("close",h),e.removeListener("finish",f),e.removeListener("drain",l),e.removeListener("error",d),e.removeListener("unpipe",n),i.removeListener("end",a),i.removeListener("end",p),i.removeListener("data",u),c=!0,!o.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}));var l=function(e){return function(){var r=e._readableState;t("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,0===r.awaitDrain&&n(e,"data")&&(r.flowing=!0,N(e))}}(i);e.on("drain",l);var c=!1;function u(n){t("ondata");var r=e.write(n);t("dest.write",r),!1===r&&((1===o.pipesCount&&o.pipes===e||o.pipesCount>1&&-1!==L(o.pipes,e))&&!c&&(t("false write response, pause",o.awaitDrain),o.awaitDrain++),i.pause())}function d(r){t("onerror",r),p(),e.removeListener("error",d),0===n(e,"error")&&y(e,r)}function h(){e.removeListener("finish",f),p()}function f(){t("onfinish"),e.removeListener("close",h),p()}function p(){t("unpipe"),i.unpipe(e)}return i.on("data",u),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",d),e.once("close",h),e.once("finish",f),e.emit("pipe",i),o.flowing||(t("pipe resume"),i.resume()),e},S.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=L(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},S.prototype.on=function(e,n){var i=r.prototype.on.call(this,e,n),o=this._readableState;return"data"===e?(o.readableListening=this.listenerCount("readable")>0,!1!==o.flowing&&this.resume()):"readable"===e&&(o.endEmitted||o.readableListening||(o.readableListening=o.needReadable=!0,o.flowing=!1,o.emittedReadable=!1,t("on readable",o.length,o.reading),o.length?A(this):o.reading||yi.nextTick(R,this))),i},S.prototype.addListener=S.prototype.on,S.prototype.removeListener=function(e,t){var n=r.prototype.removeListener.call(this,e,t);return"readable"===e&&yi.nextTick(T,this),n},S.prototype.removeAllListeners=function(e){var t=r.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||yi.nextTick(T,this),t},S.prototype.resume=function(){var e=this._readableState;return e.flowing||(t("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,yi.nextTick(C,e,t))}(this,e)),e.paused=!1,this},S.prototype.pause=function(){return t("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(t("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},S.prototype.wrap=function(e){var n=this,r=this._readableState,i=!1;for(var o in e.on("end",(function(){if(t("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&n.push(e)}n.push(null)})),e.on("data",(function(o){t("wrapped data"),r.decoder&&(o=r.decoder.write(o)),r.objectMode&&null==o||(r.objectMode||o&&o.length)&&(n.push(o)||(i=!0,e.pause()))})),e)void 0===this[o]&&"function"==typeof e[o]&&(this[o]=function(t){return function(){return e[t].apply(e,arguments)}}(o));for(var s=0;s<b.length;s++)e.on(b[s],this.emit.bind(this,b[s]));return this._read=function(n){t("wrapped _read",n),i&&(i=!1,e.resume())},this},"function"==typeof Symbol&&(S.prototype[Symbol.asyncIterator]=function(){return void 0===l&&(l=function(){if(Jd)return Qd;var e;function t(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Jd=1;var n=ch(),r=Symbol("lastResolve"),i=Symbol("lastReject"),o=Symbol("error"),s=Symbol("ended"),a=Symbol("lastPromise"),l=Symbol("handlePromise"),c=Symbol("stream");function u(e,t){return{value:e,done:t}}function d(e){var t=e[r];if(null!==t){var n=e[c].read();null!==n&&(e[a]=null,e[r]=null,e[i]=null,t(u(n,!1)))}}function h(e){yi.nextTick(d,e)}var f=Object.getPrototypeOf((function(){})),p=Object.setPrototypeOf((e={get stream(){return this[c]},next:function(){var e=this,t=this[o];if(null!==t)return Promise.reject(t);if(this[s])return Promise.resolve(u(void 0,!0));if(this[c].destroyed)return new Promise((function(t,n){yi.nextTick((function(){e[o]?n(e[o]):t(u(void 0,!0))}))}));var n,r=this[a];if(r)n=new Promise(function(e,t){return function(n,r){e.then((function(){t[s]?n(u(void 0,!0)):t[l](n,r)}),r)}}(r,this));else{var i=this[c].read();if(null!==i)return Promise.resolve(u(i,!1));n=new Promise(this[l])}return this[a]=n,n}},t(e,Symbol.asyncIterator,(function(){return this})),t(e,"return",(function(){var e=this;return new Promise((function(t,n){e[c].destroy(null,(function(e){e?n(e):t(u(void 0,!0))}))}))})),e),f);return Qd=function(e){var d,f=Object.create(p,(t(d={},c,{value:e,writable:!0}),t(d,r,{value:null,writable:!0}),t(d,i,{value:null,writable:!0}),t(d,o,{value:null,writable:!0}),t(d,s,{value:e._readableState.endEmitted,writable:!0}),t(d,l,{value:function(e,t){var n=f[c].read();n?(f[a]=null,f[r]=null,f[i]=null,e(u(n,!1))):(f[r]=e,f[i]=t)},writable:!0}),d));return f[a]=null,n(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=f[i];return null!==t&&(f[a]=null,f[r]=null,f[i]=null,t(e)),void(f[o]=e)}var n=f[r];null!==n&&(f[a]=null,f[r]=null,f[i]=null,n(u(void 0,!0))),f[s]=!0})),e.on("readable",h.bind(null,f)),f},Qd}()),l(this)}),Object.defineProperty(S.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(S.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(S.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),S._fromList=j,Object.defineProperty(S.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(S.from=function(e,t){return void 0===c&&(c=Zd?Xd:(Zd=1,Xd=function(){throw new Error("Readable.from is not available in the browser")})),c(S,e,t)}),eh}function dh(){if(rh)return nh;rh=1,nh=a;var e=Md().codes,t=e.ERR_METHOD_NOT_IMPLEMENTED,n=e.ERR_MULTIPLE_CALLBACK,r=e.ERR_TRANSFORM_ALREADY_TRANSFORMING,i=e.ERR_TRANSFORM_WITH_LENGTH_0,o=Vd();function s(e,t){var r=this._transformState;r.transforming=!1;var i=r.writecb;if(null===i)return this.emit("error",new n);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),i(e);var o=this._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}function a(e){if(!(this instanceof a))return new a(e);o.call(this,e),this._transformState={afterTransform:s.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",l)}function l(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?c(this,null,null):this._flush((function(t,n){c(e,t,n)}))}function c(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new i;if(e._transformState.transforming)throw new r;return e.push(null)}return bd(a,o),a.prototype.push=function(e,t){return this._transformState.needTransform=!1,o.prototype.push.call(this,e,t)},a.prototype._transform=function(e,n,r){r(new t("_transform()"))},a.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},a.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},a.prototype._destroy=function(e,t){o.prototype._destroy.call(this,e,(function(e){t(e)}))},nh}var hh=ph,fh=vd.EventEmitter;function ph(){fh.call(this)}bd(ph,fh),ph.Readable=uh(),ph.Writable=zd(),ph.Duplex=Vd(),ph.Transform=dh(),ph.PassThrough=function(){if(oh)return ih;oh=1,ih=t;var e=dh();function t(n){if(!(this instanceof t))return new t(n);e.call(this,n)}return bd(t,e),t.prototype._transform=function(e,t,n){n(null,e)},ih}(),ph.finished=ch(),ph.pipeline=function(){if(ah)return sh;var e;ah=1;var t=Md().codes,n=t.ERR_MISSING_ARGS,r=t.ERR_STREAM_DESTROYED;function i(e){if(e)throw e}function o(e){e()}function s(e,t){return e.pipe(t)}return sh=function(){for(var t=arguments.length,a=new Array(t),l=0;l<t;l++)a[l]=arguments[l];var c,u=function(e){return e.length?"function"!=typeof e[e.length-1]?i:e.pop():i}(a);if(Array.isArray(a[0])&&(a=a[0]),a.length<2)throw new n("streams");var d=a.map((function(t,n){var i=n<a.length-1;return function(t,n,i,o){o=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(o);var s=!1;t.on("close",(function(){s=!0})),void 0===e&&(e=ch()),e(t,{readable:n,writable:i},(function(e){if(e)return o(e);s=!0,o()}));var a=!1;return function(e){if(!s&&!a)return a=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void o(e||new r("pipe"))}}(t,i,n>0,(function(e){c||(c=e),e&&d.forEach(o),i||(d.forEach(o),u(c))}))}));return a.reduce(s)},sh}(),ph.Stream=ph,ph.prototype.pipe=function(e,t){var n=this;function r(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function i(){n.readable&&n.resume&&n.resume()}n.on("data",r),e.on("drain",i),e._isStdio||t&&!1===t.end||(n.on("end",s),n.on("close",a));var o=!1;function s(){o||(o=!0,e.end())}function a(){o||(o=!0,"function"==typeof e.destroy&&e.destroy())}function l(e){if(c(),0===fh.listenerCount(this,"error"))throw e}function c(){n.removeListener("data",r),e.removeListener("drain",i),n.removeListener("end",s),n.removeListener("close",a),n.removeListener("error",l),e.removeListener("error",l),n.removeListener("end",c),n.removeListener("close",c),e.removeListener("close",c)}return n.on("error",l),e.on("error",l),n.on("end",c),n.on("close",c),e.on("close",c),e.emit("pipe",n),e};function gh(e,t,n){var r,i=this;if(hh.Readable.call(i),i._mode=n,i.headers={},i.rawHeaders=[],i.trailers={},i.rawTrailers=[],i.on("end",(function(){yi.nextTick((function(){i.emit("close")}))})),"fetch"===n){i._fetchResponse=t,i.url=t.url,i.statusCode=t.status,i.statusMessage=t.statusText;for(var o,s,a=t.headers[Symbol.iterator]();o=(s=a.next()).value,!s.done;)i.headers[o[0].toLowerCase()]=o[1],i.rawHeaders.push(o[0],o[1]);var l=t.body.getReader();(r=function(){l.read().then((function(e){i._destroyed||(e.done?i.push(null):(i.push(new Ec(e.value)),r()))}))})()}else if(i._xhr=e,i._pos=0,i.url=e.responseURL,i.statusCode=e.status,i.statusMessage=e.statusText,e.getAllResponseHeaders().split(/\r?\n/).forEach((function(e){var t=e.match(/^([^:]+):\s*(.*)/);if(t){var n=t[1].toLowerCase();"set-cookie"===n?(void 0===i.headers[n]&&(i.headers[n]=[]),i.headers[n].push(t[2])):void 0!==i.headers[n]?i.headers[n]+=", "+t[2]:i.headers[n]=t[2],i.rawHeaders.push(t[1],t[2])}})),i._charset="x-user-defined",!yu){var c=i.rawHeaders["mime-type"];if(c){var u=c.match(/;\s*charset=([^;])(;|$)/);u&&(i._charset=u[1].toLowerCase())}i._charset||(i._charset="utf-8")}}function mh(e){var t,n=this;hh.Writable.call(n),n._opts=e,n._body=[],n._headers={},e.auth&&n.setHeader("Authorization","Basic "+new Ec(e.auth).toString("base64")),Object.keys(e.headers).forEach((function(t){n.setHeader(t,e.headers[t])}));var r=!0;if("disable-fetch"===e.mode)r=!1,t=!0;else if("prefer-streaming"===e.mode)t=!1;else if("allow-wrong-content-type"===e.mode)t=!yu;else{if(e.mode&&"default"!==e.mode&&"prefer-fast"!==e.mode)throw new Error("Invalid value for opts.mode");t=!0}n._mode=function(e,t){return du&&t?"fetch":vu?"moz-chunked-arraybuffer":mu?"ms-stream":gu&&e?"arraybuffer":bu&&e?"text:vbarray":"text"}(t,r),n.on("finish",(function(){n._onFinish()}))}Su(gh,hh.Readable),gh.prototype._read=function(){},gh.prototype._onXHRProgress=function(){var e=this,t=e._xhr,n=null;switch(e._mode){case"text:vbarray":if(4!==t.readyState)break;try{n=new Kr.VBArray(t.responseBody).toArray()}catch(e){}if(null!==n){e.push(new Ec(n));break}case"text":try{n=t.responseText}catch(t){e._mode="text:vbarray";break}if(n.length>e._pos){var r=n.substr(e._pos);if("x-user-defined"===e._charset){for(var i=new Ec(r.length),o=0;o<r.length;o++)i[o]=255&r.charCodeAt(o);e.push(i)}else e.push(r,e._charset);e._pos=n.length}break;case"arraybuffer":if(4!==t.readyState||!t.response)break;n=t.response,e.push(new Ec(new Uint8Array(n)));break;case"moz-chunked-arraybuffer":if(n=t.response,3!==t.readyState||!n)break;e.push(new Ec(new Uint8Array(n)));break;case"ms-stream":if(n=t.response,3!==t.readyState)break;var s=new Kr.MSStreamReader;s.onprogress=function(){s.result.byteLength>e._pos&&(e.push(new Ec(new Uint8Array(s.result.slice(e._pos)))),e._pos=s.result.byteLength)},s.onload=function(){e.push(null)},s.readAsArrayBuffer(n)}4===e._xhr.readyState&&"ms-stream"!==e._mode&&e.push(null)},Su(mh,hh.Writable);var vh=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"];mh.prototype.setHeader=function(e,t){var n=e.toLowerCase();-1===vh.indexOf(n)&&(this._headers[n]={name:e,value:t})},mh.prototype.getHeader=function(e){return this._headers[e.toLowerCase()].value},mh.prototype.removeHeader=function(e){delete this._headers[e.toLowerCase()]},mh.prototype._onFinish=function(){var e=this;if(!e._destroyed){var t,n=e._opts,r=e._headers;if("POST"!==n.method&&"PUT"!==n.method&&"PATCH"!==n.method||(t=function(){if(void 0!==lu)return lu;try{new Kr.Blob([new ArrayBuffer(1)]),lu=!0}catch(e){lu=!1}return lu}()?new Kr.Blob(e._body.map((function(e){return function(e){if(e instanceof Uint8Array){if(0===e.byteOffset&&e.byteLength===e.buffer.byteLength)return e.buffer;if("function"==typeof e.buffer.slice)return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}if(su(e)){for(var t=new Uint8Array(e.length),n=e.length,r=0;r<n;r++)t[r]=e[r];return t.buffer}throw new Error("Argument must be a Buffer")}(e)})),{type:(r["content-type"]||{}).value||""}):Ec.concat(e._body).toString()),"fetch"===e._mode){var i=Object.keys(r).map((function(e){return[r[e].name,r[e].value]}));Kr.fetch(e._opts.url,{method:e._opts.method,headers:i,body:t,mode:"cors",credentials:n.withCredentials?"include":"same-origin"}).then((function(t){e._fetchResponse=t,e._connect()}),(function(t){e.emit("error",t)}))}else{var o=e._xhr=new Kr.XMLHttpRequest;try{o.open(e._opts.method,e._opts.url,!0)}catch(t){return void yi.nextTick((function(){e.emit("error",t)}))}"responseType"in o&&(o.responseType=e._mode.split(":")[0]),"withCredentials"in o&&(o.withCredentials=!!n.withCredentials),"text"===e._mode&&"overrideMimeType"in o&&o.overrideMimeType("text/plain; charset=x-user-defined"),Object.keys(r).forEach((function(e){o.setRequestHeader(r[e].name,r[e].value)})),e._response=null,o.onreadystatechange=function(){switch(o.readyState){case 3:case 4:e._onXHRProgress()}},"moz-chunked-arraybuffer"===e._mode&&(o.onprogress=function(){e._onXHRProgress()}),o.onerror=function(){e._destroyed||e.emit("error",new Error("XHR error"))};try{o.send(t)}catch(t){return void yi.nextTick((function(){e.emit("error",t)}))}}}},mh.prototype._onXHRProgress=function(){var e=this;(function(e){try{var t=e.status;return null!==t&&0!==t}catch(e){return!1}})(e._xhr)&&!e._destroyed&&(e._response||e._connect(),e._response._onXHRProgress())},mh.prototype._connect=function(){var e=this;e._destroyed||(e._response=new gh(e._xhr,e._fetchResponse,e._mode),e.emit("response",e._response))},mh.prototype._write=function(e,t,n){this._body.push(e),n()},mh.prototype.abort=mh.prototype.destroy=function(){var e=this;e._destroyed=!0,e._response&&(e._response._destroyed=!0),e._xhr&&e._xhr.abort()},mh.prototype.end=function(e,t,n){"function"==typeof e&&(n=e,e=void 0),hh.Writable.prototype.end.call(this,e,t,n)},mh.prototype.flushHeaders=function(){},mh.prototype.setTimeout=function(){},mh.prototype.setNoDelay=function(){},mh.prototype.setSocketKeepAlive=function(){};var yh=2147483647,bh=36,wh=1,Sh=26,_h=38,Eh=700,kh=72,Ph=128,Ah="-",xh=/[^\x20-\x7E]/,Ih=/[\x2E\u3002\uFF0E\uFF61]/g,Oh={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Th=bh-wh,Rh=Math.floor,Ch=String.fromCharCode;function Nh(e){throw new RangeError(Oh[e])}function jh(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function Dh(e,t,n){var r=0;for(e=n?Rh(e/Eh):e>>1,e+=Rh(e/t);e>Th*Sh>>1;r+=bh)e=Rh(e/Th);return Rh(r+(Th+1)*e/(e+_h))}function Fh(e){return function(e,t){var n=e.split("@"),r="";n.length>1&&(r=n[0]+"@",e=n[1]);var i=function(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}((e=e.replace(Ih,".")).split("."),(function(e){return xh.test(e)?"xn--"+function(e){var t,n,r,i,o,s,a,l,c,u,d,h,f,p,g,m=[];for(e=function(e){for(var t,n,r=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}(e),h=e.length,t=Ph,n=0,o=kh,s=0;s<h;++s)(d=e[s])<128&&m.push(Ch(d));for(r=i=m.length,i&&m.push(Ah);r<h;){for(a=yh,s=0;s<h;++s)(d=e[s])>=t&&d<a&&(a=d);for(a-t>Rh((yh-n)/(f=r+1))&&Nh("overflow"),n+=(a-t)*f,t=a,s=0;s<h;++s)if((d=e[s])<t&&++n>yh&&Nh("overflow"),d==t){for(l=n,c=bh;!(l<(u=c<=o?wh:c>=o+Sh?Sh:c-o));c+=bh)g=l-u,p=bh-u,m.push(Ch(jh(u+g%p,0))),l=Rh(g/p);m.push(Ch(jh(l,0))),o=Dh(n,f,r==i),n=0,++r}++n,++t}return m.join("")}(e):e})).join(".");return r+i}(e)}function Lh(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var Mh=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function Bh(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}}function Uh(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var zh=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t};function Vh(e,t,n,r){t=t||"&",n=n||"=";var i={};if("string"!=typeof e||0===e.length)return i;var o=/\+/g;e=e.split(t);var s=1e3;r&&"number"==typeof r.maxKeys&&(s=r.maxKeys);var a=e.length;s>0&&a>s&&(a=s);for(var l=0;l<a;++l){var c,u,d,h,f=e[l].replace(o,"%20"),p=f.indexOf(n);p>=0?(c=f.substr(0,p),u=f.substr(p+1)):(c=f,u=""),d=decodeURIComponent(c),h=decodeURIComponent(u),Lh(i,d)?Mh(i[d])?i[d].push(h):i[d]=[i[d],h]:i[d]=h}return i}const qh=Kr.URL,Hh=Kr.URLSearchParams;var Wh={parse:af,resolve:hf,resolveObject:ff,fileURLToPath:cf,format:uf,Url:Gh,URL:qh,URLSearchParams:Hh};function Gh(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var Yh=/^([a-z0-9.+-]+:)/i,Kh=/:[0-9]*$/,$h=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Qh=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),Jh=["'"].concat(Qh),Xh=["%","/","?",";","#"].concat(Jh),Zh=["/","?","#"],ef=255,tf=/^[+a-z0-9A-Z_-]{0,63}$/,nf=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,rf={javascript:!0,"javascript:":!0},of={javascript:!0,"javascript:":!0},sf={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function af(e,t,n){if(e&&Hu(e)&&e instanceof Gh)return e;var r=new Gh;return r.parse(e,t,n),r}function lf(e,t,n,r){if(!Uu(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var i=t.indexOf("?"),o=-1!==i&&i<t.indexOf("#")?"?":"#",s=t.split(o);s[0]=s[0].replace(/\\/g,"/");var a=t=s.join(o);if(a=a.trim(),!r&&1===t.split("#").length){var l=$h.exec(a);if(l)return e.path=a,e.href=a,e.pathname=l[1],l[2]?(e.search=l[2],e.query=n?Vh(e.search.substr(1)):e.search.substr(1)):n&&(e.search="",e.query={}),e}var c,u,d,h,f=Yh.exec(a);if(f){var p=(f=f[0]).toLowerCase();e.protocol=p,a=a.substr(f.length)}if(r||f||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var g="//"===a.substr(0,2);!g||f&&of[f]||(a=a.substr(2),e.slashes=!0)}if(!of[f]&&(g||f&&!sf[f])){var m,v,y=-1;for(c=0;c<Zh.length;c++)-1!==(u=a.indexOf(Zh[c]))&&(-1===y||u<y)&&(y=u);for(-1!==(v=-1===y?a.lastIndexOf("@"):a.lastIndexOf("@",y))&&(m=a.slice(0,v),a=a.slice(v+1),e.auth=decodeURIComponent(m)),y=-1,c=0;c<Xh.length;c++)-1!==(u=a.indexOf(Xh[c]))&&(-1===y||u<y)&&(y=u);-1===y&&(y=a.length),e.host=a.slice(0,y),a=a.slice(y),pf(e),e.hostname=e.hostname||"";var b="["===e.hostname[0]&&"]"===e.hostname[e.hostname.length-1];if(!b){var w=e.hostname.split(/\./);for(c=0,d=w.length;c<d;c++){var S=w[c];if(S&&!S.match(tf)){for(var _="",E=0,k=S.length;E<k;E++)S.charCodeAt(E)>127?_+="x":_+=S[E];if(!_.match(tf)){var P=w.slice(0,c),A=w.slice(c+1),x=S.match(nf);x&&(P.push(x[1]),A.unshift(x[2])),A.length&&(a="/"+A.join(".")+a),e.hostname=P.join(".");break}}}}e.hostname.length>ef?e.hostname="":e.hostname=e.hostname.toLowerCase(),b||(e.hostname=Fh(e.hostname)),h=e.port?":"+e.port:"";var I=e.hostname||"";e.host=I+h,e.href+=e.host,b&&(e.hostname=e.hostname.substr(1,e.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!rf[p])for(c=0,d=Jh.length;c<d;c++){var O=Jh[c];if(-1!==a.indexOf(O)){var T=encodeURIComponent(O);T===O&&(T=escape(O)),a=a.split(O).join(T)}}var R=a.indexOf("#");-1!==R&&(e.hash=a.substr(R),a=a.slice(0,R));var C=a.indexOf("?");if(-1!==C?(e.search=a.substr(C),e.query=a.substr(C+1),n&&(e.query=Vh(e.query)),a=a.slice(0,C)):n&&(e.search="",e.query={}),a&&(e.pathname=a),sf[p]&&e.hostname&&!e.pathname&&(e.pathname="/"),e.pathname||e.search){h=e.pathname||"";var N=e.search||"";e.path=h+N}return e.href=df(e),e}function cf(e){if("string"==typeof e)e=(new Gh).parse(e);else if(!(e instanceof Gh))throw new TypeError('The "path" argument must be of type string or an instance of URL. Received type '+typeof e+String(e));if("file:"!==e.protocol)throw new TypeError("The URL must be of scheme file");return function(e){const t=e.pathname;for(let n=0;n<t.length;n++)if("%"===t[n]){const e=32|t.codePointAt(n+2);if("2"===t[n+1]&&102===e)throw new TypeError("must not include encoded / characters")}return decodeURIComponent(t)}(e)}function uf(e){return Uu(e)&&(e=lf({},e)),df(e)}function df(e){var t=e.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var n=e.protocol||"",r=e.pathname||"",i=e.hash||"",o=!1,s="";e.host?o=t+e.host:e.hostname&&(o=t+(-1===e.hostname.indexOf(":")?e.hostname:"["+this.hostname+"]"),e.port&&(o+=":"+e.port)),e.query&&Hu(e.query)&&Object.keys(e.query).length&&(s=function(e,t,n,r){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?Uh(zh(e),(function(r){var i=encodeURIComponent(Bh(r))+n;return Mh(e[r])?Uh(e[r],(function(e){return i+encodeURIComponent(Bh(e))})).join(t):i+encodeURIComponent(Bh(e[r]))})).join(t):""}(e.query));var a=e.search||s&&"?"+s||"";return n&&":"!==n.substr(-1)&&(n+=":"),e.slashes||(!n||sf[n])&&!1!==o?(o="//"+(o||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):o||(o=""),i&&"#"!==i.charAt(0)&&(i="#"+i),a&&"?"!==a.charAt(0)&&(a="?"+a),n+o+(r=r.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(a=a.replace("#","%23"))+i}function hf(e,t){return af(e,!1,!0).resolve(t)}function ff(e,t){return e?af(e,!1,!0).resolveObject(t):t}function pf(e){var t=e.host,n=Kh.exec(t);n&&(":"!==(n=n[0])&&(e.port=n.substr(1)),t=t.substr(0,t.length-n.length)),t&&(e.hostname=t)}Gh.prototype.parse=function(e,t,n){return lf(this,e,t,n)},Gh.prototype.format=function(){return df(this)},Gh.prototype.resolve=function(e){return this.resolveObject(af(e,!1,!0)).format()},Gh.prototype.resolveObject=function(e){if(Uu(e)){var t=new Gh;t.parse(e,!1,!0),e=t}for(var n,r=new Gh,i=Object.keys(this),o=0;o<i.length;o++){var s=i[o];r[s]=this[s]}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var a=Object.keys(e),l=0;l<a.length;l++){var c=a[l];"protocol"!==c&&(r[c]=e[c])}return sf[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!sf[e.protocol]){for(var u=Object.keys(e),d=0;d<u.length;d++){var h=u[d];r[h]=e[h]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||of[e.protocol])r.pathname=e.pathname;else{for(n=(e.pathname||"").split("/");n.length&&!(e.host=n.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==n[0]&&n.unshift(""),n.length<2&&n.unshift(""),r.pathname=n.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var f=r.pathname||"",p=r.search||"";r.path=f+p}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var g,m=r.pathname&&"/"===r.pathname.charAt(0),v=e.host||e.pathname&&"/"===e.pathname.charAt(0),y=v||m||r.host&&e.pathname,b=y,w=r.pathname&&r.pathname.split("/")||[],S=r.protocol&&!sf[r.protocol];if(n=e.pathname&&e.pathname.split("/")||[],S&&(r.hostname="",r.port=null,r.host&&(""===w[0]?w[0]=r.host:w.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===n[0]?n[0]=e.host:n.unshift(e.host)),e.host=null),y=y&&(""===n[0]||""===w[0])),v)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,w=n;else if(n.length)w||(w=[]),w.pop(),w=w.concat(n),r.search=e.search,r.query=e.query;else if(!Mu(e.search))return S&&(r.hostname=r.host=w.shift(),(g=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=g.shift(),r.host=r.hostname=g.shift())),r.search=e.search,r.query=e.query,Lu(r.pathname)&&Lu(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r;if(!w.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var _=w.slice(-1)[0],E=(r.host||e.host||w.length>1)&&("."===_||".."===_)||""===_,k=0,P=w.length;P>=0;P--)"."===(_=w[P])?w.splice(P,1):".."===_?(w.splice(P,1),k++):k&&(w.splice(P,1),k--);if(!y&&!b)for(;k--;k)w.unshift("..");!y||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),E&&"/"!==w.join("/").substr(-1)&&w.push("");var A=""===w[0]||w[0]&&"/"===w[0].charAt(0);return S&&(r.hostname=r.host=A?"":w.length?w.shift():"",(g=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=g.shift(),r.host=r.hostname=g.shift())),(y=y||r.host&&w.length)&&!A&&w.unshift(""),w.length?r.pathname=w.join("/"):(r.pathname=null,r.path=null),Lu(r.pathname)&&Lu(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},Gh.prototype.parseHost=function(){return pf(this)};var gf=Object.freeze({__proto__:null,URL:qh,URLSearchParams:Hh,Url:Gh,default:Wh,fileURLToPath:cf,format:uf,parse:af,resolve:hf,resolveObject:ff});function mf(e,t){"string"==typeof e&&(e=af(e));var n=-1===Kr.location.protocol.search(/^https?:$/)?"http:":"",r=e.protocol||n,i=e.hostname||e.host,o=e.port,s=e.path||"/";i&&-1!==i.indexOf(":")&&(i="["+i+"]"),e.url=(i?r+"//"+i:"")+(o?":"+o:"")+s,e.method=(e.method||"GET").toUpperCase(),e.headers=e.headers||{};var a=new mh(e);return t&&a.on("response",t),a}function vf(e,t){var n=mf(e,t);return n.end(),n}function yf(){}yf.defaultMaxSockets=4;var bf=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"],wf={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"},Sf={request:mf,get:vf,Agent:yf,METHODS:bf,STATUS_CODES:wf},_f=Object.freeze({__proto__:null,Agent:yf,METHODS:bf,STATUS_CODES:wf,default:Sf,get:vf,request:mf}),Ef=Jl();let kf;const Pf=new Uint8Array(16);function Af(){if(!kf&&(kf="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!kf))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return kf(Pf)}const xf=[];for(let n=0;n<256;++n)xf.push((n+256).toString(16).slice(1));var If,Of,Tf={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function Rf(e,t,n){if(Tf.randomUUID&&!t&&!e)return Tf.randomUUID();const r=(e=e||{}).random||(e.rng||Af)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=r[e];return t}return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return xf[e[t+0]]+xf[e[t+1]]+xf[e[t+2]]+xf[e[t+3]]+"-"+xf[e[t+4]]+xf[e[t+5]]+"-"+xf[e[t+6]]+xf[e[t+7]]+"-"+xf[e[t+8]]+xf[e[t+9]]+"-"+xf[e[t+10]]+xf[e[t+11]]+xf[e[t+12]]+xf[e[t+13]]+xf[e[t+14]]+xf[e[t+15]]}(r)}var Cf=Nf;function Nf(e){var t=this;if(t instanceof Nf||(t=new Nf),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach((function(e){t.push(e)}));else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}function jf(e,t,n){var r=t===e.head?new Lf(n,null,t,e):new Lf(n,t,t.next,e);return null===r.next&&(e.tail=r),null===r.prev&&(e.head=r),e.length++,r}function Df(e,t){e.tail=new Lf(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function Ff(e,t){e.head=new Lf(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function Lf(e,t,n,r){if(!(this instanceof Lf))return new Lf(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}Nf.Node=Lf,Nf.create=Nf,Nf.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t},Nf.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},Nf.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},Nf.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)Df(this,arguments[e]);return this.length},Nf.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)Ff(this,arguments[e]);return this.length},Nf.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},Nf.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},Nf.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;null!==n;r++)e.call(t,n.value,r,this),n=n.next},Nf.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;null!==n;r--)e.call(t,n.value,r,this),n=n.prev},Nf.prototype.get=function(e){for(var t=0,n=this.head;null!==n&&t<e;t++)n=n.next;if(t===e&&null!==n)return n.value},Nf.prototype.getReverse=function(e){for(var t=0,n=this.tail;null!==n&&t<e;t++)n=n.prev;if(t===e&&null!==n)return n.value},Nf.prototype.map=function(e,t){t=t||this;for(var n=new Nf,r=this.head;null!==r;)n.push(e.call(t,r.value,this)),r=r.next;return n},Nf.prototype.mapReverse=function(e,t){t=t||this;for(var n=new Nf,r=this.tail;null!==r;)n.push(e.call(t,r.value,this)),r=r.prev;return n},Nf.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");r=this.head.next,n=this.head.value}for(var i=0;null!==r;i++)n=e(n,r.value,i),r=r.next;return n},Nf.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");r=this.tail.prev,n=this.tail.value}for(var i=this.length-1;null!==r;i--)n=e(n,r.value,i),r=r.prev;return n},Nf.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;null!==n;t++)e[t]=n.value,n=n.next;return e},Nf.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;null!==n;t++)e[t]=n.value,n=n.prev;return e},Nf.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var n=new Nf;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;null!==i&&r<e;r++)i=i.next;for(;null!==i&&r<t;r++,i=i.next)n.push(i.value);return n},Nf.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var n=new Nf;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;null!==i&&r>t;r--)i=i.prev;for(;null!==i&&r>e;r--,i=i.prev)n.push(i.value);return n},Nf.prototype.splice=function(e,t){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var n=0,r=this.head;null!==r&&n<e;n++)r=r.next;var i=[];for(n=0;r&&n<t;n++)i.push(r.value),r=this.removeNode(r);for(null===r&&(r=this.tail),r!==this.head&&r!==this.tail&&(r=r.prev),n=0;n<(arguments.length<=2?0:arguments.length-2);n++)r=jf(this,r,n+2<2||arguments.length<=n+2?void 0:arguments[n+2]);return i},Nf.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;null!==n;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};try{(Of||(Of=1,If=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}),If)(Nf)}catch(Ur){}const Mf=Cf,Bf=Symbol("max"),Uf=Symbol("length"),zf=Symbol("lengthCalculator"),Vf=Symbol("allowStale"),qf=Symbol("maxAge"),Hf=Symbol("dispose"),Wf=Symbol("noDisposeOnSet"),Gf=Symbol("lruList"),Yf=Symbol("cache"),Kf=Symbol("updateAgeOnGet"),$f=()=>1,Qf=(e,t,n)=>{const r=e[Yf].get(t);if(r){const t=r.value;if(Jf(e,t)){if(Zf(e,r),!e[Vf])return}else n&&(e[Kf]&&(r.value.now=Date.now()),e[Gf].unshiftNode(r));return t.value}},Jf=(e,t)=>{if(!t||!t.maxAge&&!e[qf])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[qf]&&n>e[qf]},Xf=e=>{if(e[Uf]>e[Bf])for(let t=e[Gf].tail;e[Uf]>e[Bf]&&null!==t;){const n=t.prev;Zf(e,t),t=n}},Zf=(e,t)=>{if(t){const n=t.value;e[Hf]&&e[Hf](n.key,n.value),e[Uf]-=n.length,e[Yf].delete(n.key),e[Gf].removeNode(t)}};class ep{constructor(e,t,n,r,i){this.key=e,this.value=t,this.length=n,this.now=r,this.maxAge=i||0}}const tp=(e,t,n,r)=>{let i=n.value;Jf(e,i)&&(Zf(e,n),e[Vf]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};var np=class{constructor(e){if("number"==typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!=typeof e.max||e.max<0))throw new TypeError("max must be a non-negative number");this[Bf]=e.max||1/0;const t=e.length||$f;if(this[zf]="function"!=typeof t?$f:t,this[Vf]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw new TypeError("maxAge must be a number");this[qf]=e.maxAge||0,this[Hf]=e.dispose,this[Wf]=e.noDisposeOnSet||!1,this[Kf]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!=typeof e||e<0)throw new TypeError("max must be a non-negative number");this[Bf]=e||1/0,Xf(this)}get max(){return this[Bf]}set allowStale(e){this[Vf]=!!e}get allowStale(){return this[Vf]}set maxAge(e){if("number"!=typeof e)throw new TypeError("maxAge must be a non-negative number");this[qf]=e,Xf(this)}get maxAge(){return this[qf]}set lengthCalculator(e){"function"!=typeof e&&(e=$f),e!==this[zf]&&(this[zf]=e,this[Uf]=0,this[Gf].forEach((e=>{e.length=this[zf](e.value,e.key),this[Uf]+=e.length}))),Xf(this)}get lengthCalculator(){return this[zf]}get length(){return this[Uf]}get itemCount(){return this[Gf].length}rforEach(e,t){t=t||this;for(let n=this[Gf].tail;null!==n;){const r=n.prev;tp(this,e,n,t),n=r}}forEach(e,t){t=t||this;for(let n=this[Gf].head;null!==n;){const r=n.next;tp(this,e,n,t),n=r}}keys(){return this[Gf].toArray().map((e=>e.key))}values(){return this[Gf].toArray().map((e=>e.value))}reset(){this[Hf]&&this[Gf]&&this[Gf].length&&this[Gf].forEach((e=>this[Hf](e.key,e.value))),this[Yf]=new Map,this[Gf]=new Mf,this[Uf]=0}dump(){return this[Gf].map((e=>!Jf(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)})).toArray().filter((e=>e))}dumpLru(){return this[Gf]}set(e,t,n){if((n=n||this[qf])&&"number"!=typeof n)throw new TypeError("maxAge must be a number");const r=n?Date.now():0,i=this[zf](t,e);if(this[Yf].has(e)){if(i>this[Bf])return Zf(this,this[Yf].get(e)),!1;const o=this[Yf].get(e).value;return this[Hf]&&(this[Wf]||this[Hf](e,o.value)),o.now=r,o.maxAge=n,o.value=t,this[Uf]+=i-o.length,o.length=i,this.get(e),Xf(this),!0}const o=new ep(e,t,i,r,n);return o.length>this[Bf]?(this[Hf]&&this[Hf](e,t),!1):(this[Uf]+=o.length,this[Gf].unshift(o),this[Yf].set(e,this[Gf].head),Xf(this),!0)}has(e){if(!this[Yf].has(e))return!1;const t=this[Yf].get(e).value;return!Jf(this,t)}get(e){return Qf(this,e,!0)}peek(e){return Qf(this,e,!1)}pop(){const e=this[Gf].tail;return e?(Zf(this,e),e.value):null}del(e){Zf(this,this[Yf].get(e))}load(e){this.reset();const t=Date.now();for(let n=e.length-1;n>=0;n--){const r=e[n],i=r.e||0;if(0===i)this.set(r.k,r.v);else{const e=i-t;e>0&&this.set(r.k,r.v,e)}}}prune(){this[Yf].forEach(((e,t)=>Qf(this,t,!1)))}};const rp=Object.freeze({loose:!0}),ip=Object.freeze({});var op=e=>e?"object"!=typeof e?rp:e:ip,sp={exports:{}},ap={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},lp="object"==typeof yi&&yi.env&&yi.env.NODE_DEBUG&&/\bsemver\b/i.test(yi.env.NODE_DEBUG)?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return console.error("SEMVER",...t)}:()=>{};!function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=ap,o=lp,s=(t=e.exports={}).re=[],a=t.safeRe=[],l=t.src=[],c=t.t={};let u=0;const d="[a-zA-Z0-9-]",h=[["\\s",1],["\\d",i],[d,r]],f=(e,t,n)=>{const r=(e=>{for(const[t,n]of h)e=e.split("".concat(t,"*")).join("".concat(t,"{0,").concat(n,"}")).split("".concat(t,"+")).join("".concat(t,"{1,").concat(n,"}"));return e})(t),i=u++;o(e,i,t),c[e]=i,l[i]=t,s[i]=new RegExp(t,n?"g":void 0),a[i]=new RegExp(r,n?"g":void 0)};f("NUMERICIDENTIFIER","0|[1-9]\\d*"),f("NUMERICIDENTIFIERLOOSE","\\d+"),f("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-]".concat(d,"*")),f("MAINVERSION","(".concat(l[c.NUMERICIDENTIFIER],")\\.(").concat(l[c.NUMERICIDENTIFIER],")\\.(").concat(l[c.NUMERICIDENTIFIER],")")),f("MAINVERSIONLOOSE","(".concat(l[c.NUMERICIDENTIFIERLOOSE],")\\.(").concat(l[c.NUMERICIDENTIFIERLOOSE],")\\.(").concat(l[c.NUMERICIDENTIFIERLOOSE],")")),f("PRERELEASEIDENTIFIER","(?:".concat(l[c.NUMERICIDENTIFIER],"|").concat(l[c.NONNUMERICIDENTIFIER],")")),f("PRERELEASEIDENTIFIERLOOSE","(?:".concat(l[c.NUMERICIDENTIFIERLOOSE],"|").concat(l[c.NONNUMERICIDENTIFIER],")")),f("PRERELEASE","(?:-(".concat(l[c.PRERELEASEIDENTIFIER],"(?:\\.").concat(l[c.PRERELEASEIDENTIFIER],")*))")),f("PRERELEASELOOSE","(?:-?(".concat(l[c.PRERELEASEIDENTIFIERLOOSE],"(?:\\.").concat(l[c.PRERELEASEIDENTIFIERLOOSE],")*))")),f("BUILDIDENTIFIER","".concat(d,"+")),f("BUILD","(?:\\+(".concat(l[c.BUILDIDENTIFIER],"(?:\\.").concat(l[c.BUILDIDENTIFIER],")*))")),f("FULLPLAIN","v?".concat(l[c.MAINVERSION]).concat(l[c.PRERELEASE],"?").concat(l[c.BUILD],"?")),f("FULL","^".concat(l[c.FULLPLAIN],"$")),f("LOOSEPLAIN","[v=\\s]*".concat(l[c.MAINVERSIONLOOSE]).concat(l[c.PRERELEASELOOSE],"?").concat(l[c.BUILD],"?")),f("LOOSE","^".concat(l[c.LOOSEPLAIN],"$")),f("GTLT","((?:<|>)?=?)"),f("XRANGEIDENTIFIERLOOSE","".concat(l[c.NUMERICIDENTIFIERLOOSE],"|x|X|\\*")),f("XRANGEIDENTIFIER","".concat(l[c.NUMERICIDENTIFIER],"|x|X|\\*")),f("XRANGEPLAIN","[v=\\s]*(".concat(l[c.XRANGEIDENTIFIER],")(?:\\.(").concat(l[c.XRANGEIDENTIFIER],")(?:\\.(").concat(l[c.XRANGEIDENTIFIER],")(?:").concat(l[c.PRERELEASE],")?").concat(l[c.BUILD],"?)?)?")),f("XRANGEPLAINLOOSE","[v=\\s]*(".concat(l[c.XRANGEIDENTIFIERLOOSE],")(?:\\.(").concat(l[c.XRANGEIDENTIFIERLOOSE],")(?:\\.(").concat(l[c.XRANGEIDENTIFIERLOOSE],")(?:").concat(l[c.PRERELEASELOOSE],")?").concat(l[c.BUILD],"?)?)?")),f("XRANGE","^".concat(l[c.GTLT],"\\s*").concat(l[c.XRANGEPLAIN],"$")),f("XRANGELOOSE","^".concat(l[c.GTLT],"\\s*").concat(l[c.XRANGEPLAINLOOSE],"$")),f("COERCE","(^|[^\\d])(\\d{1,".concat(n,"})(?:\\.(\\d{1,").concat(n,"}))?(?:\\.(\\d{1,").concat(n,"}))?(?:$|[^\\d])")),f("COERCERTL",l[c.COERCE],!0),f("LONETILDE","(?:~>?)"),f("TILDETRIM","(\\s*)".concat(l[c.LONETILDE],"\\s+"),!0),t.tildeTrimReplace="$1~",f("TILDE","^".concat(l[c.LONETILDE]).concat(l[c.XRANGEPLAIN],"$")),f("TILDELOOSE","^".concat(l[c.LONETILDE]).concat(l[c.XRANGEPLAINLOOSE],"$")),f("LONECARET","(?:\\^)"),f("CARETTRIM","(\\s*)".concat(l[c.LONECARET],"\\s+"),!0),t.caretTrimReplace="$1^",f("CARET","^".concat(l[c.LONECARET]).concat(l[c.XRANGEPLAIN],"$")),f("CARETLOOSE","^".concat(l[c.LONECARET]).concat(l[c.XRANGEPLAINLOOSE],"$")),f("COMPARATORLOOSE","^".concat(l[c.GTLT],"\\s*(").concat(l[c.LOOSEPLAIN],")$|^$")),f("COMPARATOR","^".concat(l[c.GTLT],"\\s*(").concat(l[c.FULLPLAIN],")$|^$")),f("COMPARATORTRIM","(\\s*)".concat(l[c.GTLT],"\\s*(").concat(l[c.LOOSEPLAIN],"|").concat(l[c.XRANGEPLAIN],")"),!0),t.comparatorTrimReplace="$1$2$3",f("HYPHENRANGE","^\\s*(".concat(l[c.XRANGEPLAIN],")\\s+-\\s+(").concat(l[c.XRANGEPLAIN],")\\s*$")),f("HYPHENRANGELOOSE","^\\s*(".concat(l[c.XRANGEPLAINLOOSE],")\\s+-\\s+(").concat(l[c.XRANGEPLAINLOOSE],")\\s*$")),f("STAR","(<|>)?=?\\s*\\*"),f("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),f("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(sp,sp.exports);var cp=sp.exports;const up=/^[0-9]+$/,dp=(e,t)=>{const n=up.test(e),r=up.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1};var hp={compareIdentifiers:dp,rcompareIdentifiers:(e,t)=>dp(t,e)};const fp=lp,{MAX_LENGTH:pp,MAX_SAFE_INTEGER:gp}=ap,{safeRe:mp,t:vp}=cp,yp=op,{compareIdentifiers:bp}=hp;var wp=class e{constructor(t,n){if(n=yp(n),t instanceof e){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if("string"!=typeof t)throw new TypeError('Invalid version. Must be a string. Got type "'.concat(typeof t,'".'));if(t.length>pp)throw new TypeError("version is longer than ".concat(pp," characters"));fp("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?mp[vp.LOOSE]:mp[vp.FULL]);if(!r)throw new TypeError("Invalid Version: ".concat(t));if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>gp||this.major<0)throw new TypeError("Invalid major version");if(this.minor>gp||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>gp||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<gp)return t}return e})):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version="".concat(this.major,".").concat(this.minor,".").concat(this.patch),this.prerelease.length&&(this.version+="-".concat(this.prerelease.join("."))),this.version}toString(){return this.version}compare(t){if(fp("SemVer.compare",this.version,this.options,t),!(t instanceof e)){if("string"==typeof t&&t===this.version)return 0;t=new e(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof e||(t=new e(t,this.options)),bp(this.major,t.major)||bp(this.minor,t.minor)||bp(this.patch,t.patch)}comparePre(t){if(t instanceof e||(t=new e(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const e=this.prerelease[n],r=t.prerelease[n];if(fp("prerelease compare",n,e,r),void 0===e&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===e)return-1;if(e!==r)return bp(e,r)}while(++n)}compareBuild(t){t instanceof e||(t=new e(t,this.options));let n=0;do{const e=this.build[n],r=t.build[n];if(fp("prerelease compare",n,e,r),void 0===e&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===e)return-1;if(e!==r)return bp(e,r)}while(++n)}inc(e,t,n){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,n),this.inc("pre",t,n);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,n),this.inc("pre",t,n);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const e=Number(n)?1:0;if(!t&&!1===n)throw new Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[e];else{let r=this.prerelease.length;for(;--r>=0;)"number"==typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);if(-1===r){if(t===this.prerelease.join(".")&&!1===n)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let r=[t,e];!1===n&&(r=[t]),0===bp(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=r):this.prerelease=r}break}default:throw new Error("invalid increment argument: ".concat(e))}return this.raw=this.format(),this.build.length&&(this.raw+="+".concat(this.build.join("."))),this}};const Sp=wp;var _p=(e,t,n)=>new Sp(e,n).compare(new Sp(t,n));const Ep=_p,kp=_p,Pp=_p,Ap=_p,xp=_p,Ip=_p;var Op,Tp,Rp,Cp,Np=(e,t,n,r)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return((e,t,n)=>0===Ep(e,t,n))(e,n,r);case"!=":return((e,t,n)=>0!==kp(e,t,n))(e,n,r);case">":return((e,t,n)=>Pp(e,t,n)>0)(e,n,r);case">=":return((e,t,n)=>Ap(e,t,n)>=0)(e,n,r);case"<":return((e,t,n)=>xp(e,t,n)<0)(e,n,r);case"<=":return((e,t,n)=>Ip(e,t,n)<=0)(e,n,r);default:throw new TypeError("Invalid operator: ".concat(t))}};const jp=function e(){if(Cp)return Rp;Cp=1;class t{constructor(e,n){if(n=r(n),e instanceof t)return e.loose===!!n.loose&&e.includePrerelease===!!n.includePrerelease?e:new t(e.raw,n);if(e instanceof i)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease,this.raw=e.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map((e=>this.parseRange(e.trim()))).filter((e=>e.length)),!this.set.length)throw new TypeError("Invalid SemVer Range: ".concat(this.raw));if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter((e=>!p(e[0]))),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const t of this.set)if(1===t.length&&g(t[0])){this.set=[t];break}}this.format()}format(){return this.range=this.set.map((e=>e.join(" ").trim())).join("||").trim(),this.range}toString(){return this.range}parseRange(e){const t=((this.options.includePrerelease&&h)|(this.options.loose&&f))+":"+e,r=n.get(t);if(r)return r;const s=this.options.loose,g=s?a[l.HYPHENRANGELOOSE]:a[l.HYPHENRANGE];e=e.replace(g,x(this.options.includePrerelease)),o("hyphen replace",e),e=e.replace(a[l.COMPARATORTRIM],c),o("comparator trim",e),e=e.replace(a[l.TILDETRIM],u),o("tilde trim",e),e=e.replace(a[l.CARETTRIM],d),o("caret trim",e);let m=e.split(" ").map((e=>v(e,this.options))).join(" ").split(/\s+/).map((e=>A(e,this.options)));s&&(m=m.filter((e=>(o("loose invalid filter",e,this.options),!!e.match(a[l.COMPARATORLOOSE]))))),o("range list",m);const y=new Map,b=m.map((e=>new i(e,this.options)));for(const n of b){if(p(n))return[n];y.set(n.value,n)}y.size>1&&y.has("")&&y.delete("");const w=[...y.values()];return n.set(t,w),w}intersects(e,n){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some((t=>m(t,n)&&e.set.some((e=>m(e,n)&&t.every((t=>e.every((e=>t.intersects(e,n)))))))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new s(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(I(this.set[t],e,this.options))return!0;return!1}}Rp=t;const n=new np({max:1e3}),r=op,i=function(){if(Tp)return Op;Tp=1;const t=Symbol("SemVer ANY");class n{static get ANY(){return t}constructor(e,i){if(i=r(i),e instanceof n){if(e.loose===!!i.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),a("comparator",e,i),this.options=i,this.loose=!!i.loose,this.parse(e),this.semver===t?this.value="":this.value=this.operator+this.semver.version,a("comp",this)}parse(e){const n=this.options.loose?i[o.COMPARATORLOOSE]:i[o.COMPARATOR],r=e.match(n);if(!r)throw new TypeError("Invalid comparator: ".concat(e));this.operator=void 0!==r[1]?r[1]:"","="===this.operator&&(this.operator=""),r[2]?this.semver=new l(r[2],this.options.loose):this.semver=t}toString(){return this.value}test(e){if(a("Comparator.test",e,this.options.loose),this.semver===t||e===t)return!0;if("string"==typeof e)try{e=new l(e,this.options)}catch(t){return!1}return s(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof n))throw new TypeError("a Comparator is required");return""===this.operator?""===this.value||new c(e.value,t).test(this.value):""===e.operator?""===e.value||new c(this.value,t).test(e.semver):!((t=r(t)).includePrerelease&&("<0.0.0-0"===this.value||"<0.0.0-0"===e.value)||!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))||(!this.operator.startsWith(">")||!e.operator.startsWith(">"))&&(!this.operator.startsWith("<")||!e.operator.startsWith("<"))&&(this.semver.version!==e.semver.version||!this.operator.includes("=")||!e.operator.includes("="))&&!(s(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<"))&&!(s(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}}Op=n;const r=op,{safeRe:i,t:o}=cp,s=Np,a=lp,l=wp,c=e();return Op}(),o=lp,s=wp,{safeRe:a,t:l,comparatorTrimReplace:c,tildeTrimReplace:u,caretTrimReplace:d}=cp,{FLAG_INCLUDE_PRERELEASE:h,FLAG_LOOSE:f}=ap,p=e=>"<0.0.0-0"===e.value,g=e=>""===e.value,m=(e,t)=>{let n=!0;const r=e.slice();let i=r.pop();for(;n&&r.length;)n=r.every((e=>i.intersects(e,t))),i=r.pop();return n},v=(e,t)=>(o("comp",e,t),e=S(e,t),o("caret",e),e=b(e,t),o("tildes",e),e=E(e,t),o("xrange",e),e=P(e,t),o("stars",e),e),y=e=>!e||"x"===e.toLowerCase()||"*"===e,b=(e,t)=>e.trim().split(/\s+/).map((e=>w(e,t))).join(" "),w=(e,t)=>{const n=t.loose?a[l.TILDELOOSE]:a[l.TILDE];return e.replace(n,((t,n,r,i,s)=>{let a;return o("tilde",e,t,n,r,i,s),y(n)?a="":y(r)?a=">=".concat(n,".0.0 <").concat(+n+1,".0.0-0"):y(i)?a=">=".concat(n,".").concat(r,".0 <").concat(n,".").concat(+r+1,".0-0"):s?(o("replaceTilde pr",s),a=">=".concat(n,".").concat(r,".").concat(i,"-").concat(s," <").concat(n,".").concat(+r+1,".0-0")):a=">=".concat(n,".").concat(r,".").concat(i," <").concat(n,".").concat(+r+1,".0-0"),o("tilde return",a),a}))},S=(e,t)=>e.trim().split(/\s+/).map((e=>_(e,t))).join(" "),_=(e,t)=>{o("caret",e,t);const n=t.loose?a[l.CARETLOOSE]:a[l.CARET],r=t.includePrerelease?"-0":"";return e.replace(n,((t,n,i,s,a)=>{let l;return o("caret",e,t,n,i,s,a),y(n)?l="":y(i)?l=">=".concat(n,".0.0").concat(r," <").concat(+n+1,".0.0-0"):y(s)?l="0"===n?">=".concat(n,".").concat(i,".0").concat(r," <").concat(n,".").concat(+i+1,".0-0"):">=".concat(n,".").concat(i,".0").concat(r," <").concat(+n+1,".0.0-0"):a?(o("replaceCaret pr",a),l="0"===n?"0"===i?">=".concat(n,".").concat(i,".").concat(s,"-").concat(a," <").concat(n,".").concat(i,".").concat(+s+1,"-0"):">=".concat(n,".").concat(i,".").concat(s,"-").concat(a," <").concat(n,".").concat(+i+1,".0-0"):">=".concat(n,".").concat(i,".").concat(s,"-").concat(a," <").concat(+n+1,".0.0-0")):(o("no pr"),l="0"===n?"0"===i?">=".concat(n,".").concat(i,".").concat(s).concat(r," <").concat(n,".").concat(i,".").concat(+s+1,"-0"):">=".concat(n,".").concat(i,".").concat(s).concat(r," <").concat(n,".").concat(+i+1,".0-0"):">=".concat(n,".").concat(i,".").concat(s," <").concat(+n+1,".0.0-0")),o("caret return",l),l}))},E=(e,t)=>(o("replaceXRanges",e,t),e.split(/\s+/).map((e=>k(e,t))).join(" ")),k=(e,t)=>{e=e.trim();const n=t.loose?a[l.XRANGELOOSE]:a[l.XRANGE];return e.replace(n,((n,r,i,s,a,l)=>{o("xRange",e,n,r,i,s,a,l);const c=y(i),u=c||y(s),d=u||y(a),h=d;return"="===r&&h&&(r=""),l=t.includePrerelease?"-0":"",c?n=">"===r||"<"===r?"<0.0.0-0":"*":r&&h?(u&&(s=0),a=0,">"===r?(r=">=",u?(i=+i+1,s=0,a=0):(s=+s+1,a=0)):"<="===r&&(r="<",u?i=+i+1:s=+s+1),"<"===r&&(l="-0"),n="".concat(r+i,".").concat(s,".").concat(a).concat(l)):u?n=">=".concat(i,".0.0").concat(l," <").concat(+i+1,".0.0-0"):d&&(n=">=".concat(i,".").concat(s,".0").concat(l," <").concat(i,".").concat(+s+1,".0-0")),o("xRange return",n),n}))},P=(e,t)=>(o("replaceStars",e,t),e.trim().replace(a[l.STAR],"")),A=(e,t)=>(o("replaceGTE0",e,t),e.trim().replace(a[t.includePrerelease?l.GTE0PRE:l.GTE0],"")),x=e=>(t,n,r,i,o,s,a,l,c,u,d,h,f)=>"".concat(n=y(r)?"":y(i)?">=".concat(r,".0.0").concat(e?"-0":""):y(o)?">=".concat(r,".").concat(i,".0").concat(e?"-0":""):s?">=".concat(n):">=".concat(n).concat(e?"-0":"")," ").concat(l=y(c)?"":y(u)?"<".concat(+c+1,".0.0-0"):y(d)?"<".concat(c,".").concat(+u+1,".0-0"):h?"<=".concat(c,".").concat(u,".").concat(d,"-").concat(h):e?"<".concat(c,".").concat(u,".").concat(+d+1,"-0"):"<=".concat(l)).trim(),I=(e,t,n)=>{for(let r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(let n=0;n<e.length;n++)if(o(e[n].semver),e[n].semver!==i.ANY&&e[n].semver.prerelease.length>0){const r=e[n].semver;if(r.major===t.major&&r.minor===t.minor&&r.patch===t.patch)return!0}return!1}return!0};return Rp}();var Dp=wi(((e,t,n)=>{try{t=new jp(t,n)}catch(e){return!1}return t.test(e)}));const Fp=wp;const Lp=wp,Mp=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e instanceof Fp)return e;try{return new Fp(e,t)}catch(e){if(!n)return null;throw e}},{safeRe:Bp,t:Up}=cp;var zp=wi(((e,t)=>{if(e instanceof Lp)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let n=null;if((t=t||{}).rtl){let t;for(;(t=Bp[Up.COERCERTL].exec(e))&&(!n||n.index+n[0].length!==e.length);)n&&t.index+t[0].length===n.index+n[0].length||(n=t),Bp[Up.COERCERTL].lastIndex=t.index+t[1].length+t[2].length;Bp[Up.COERCERTL].lastIndex=-1}else n=e.match(Bp[Up.COERCE]);return null===n?null:Mp("".concat(n[2],".").concat(n[3]||"0",".").concat(n[4]||"0"),t)}));const Vp=["ECONNREFUSED"],qp="0.13.2";class Hp{constructor(e){var t;if(this.httpAgent=new yf,this.controller=null!==(t=null==e?void 0:e.abortController)&&void 0!==t?t:new AbortController,this.apiKey=(null==e?void 0:e.apiKey)||function(){var e;return Hr&&null!==(e=null===process||void 0===process?void 0:{NODE_ENV:"production",PUBLIC_URL:"/degen",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_IMAGE:"5d69025c5ca1d045831f8487786e7851fb4d5250a25d24c185ccc2fb"}.YAGNA_APPKEY)&&void 0!==e?e:""}(),!this.apiKey)throw new Dr("Api key not defined");this.apiBaseUrl=(null==e?void 0:e.basePath)||(Hr?null===process||void 0===process?void 0:{NODE_ENV:"production",PUBLIC_URL:"/degen",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_IMAGE:"5d69025c5ca1d045831f8487786e7851fb4d5250a25d24c185ccc2fb"}.YAGNA_API_URL:"")||"http://127.0.0.1:7465",this.api=this.createApi()}getApi(){return this.api}async connect(){return await this.assertSupportedVersion(),this.api.identity.getIdentity()}async assertSupportedVersion(){const e=await this.getVersion(),t=zp(e);if(!t)throw new Lr("Unreadable yana version '".concat(e,"'. Can't proceed without checking yagna version support status."));if(!Dp(t,">=".concat(qp)))throw new Lr("You run yagna in version ".concat(e," and the minimal version supported by the SDK is ").concat(qp,". Please consult the golem-js README to find matching SDK version or upgrade your yagna installation."));return t.version}async end(){var e,t;this.controller.abort(),null===(t=(e=this.httpAgent).destroy)||void 0===t||t.call(e)}async getVersion(){try{return(await fetch("".concat(this.apiBaseUrl,"/version/get"),{method:"GET",signal:this.controller.signal}).then((e=>e.json()))).current.version}catch(Ur){throw new Lr("Failed to establish yagna version due to: ".concat(Ur),Ur)}}createApi(){const e=this.getApiConfig(),t={market:new ol.RequestorApi(e,this.getApiUrl("market")),activity:{control:new ba.RequestorControlApi(e,this.getApiUrl("activity")),state:new lc(e,this.getApiUrl("activity"))},net:new sl.RequestorApi(e,this.getApiUrl("net")),payment:new oc.RequestorApi(e,this.getApiUrl("payment")),identity:new sc(e,this.getApiUrl()),gsb:new ac(e,this.getApiUrl("gsb")),yagnaOptions:{apiKey:this.apiKey,basePath:this.apiBaseUrl},appSessionId:Rf()};return this.addErrorHandler(t),t}getApiConfig(){return new Ef.Configuration({apiKey:this.apiKey,accessToken:this.apiKey,baseOptions:{httpAgent:this.httpAgent,signal:this.controller.signal}})}getApiUrl(e){return e?"".concat(this.apiBaseUrl,"/").concat(e,"-api/v1"):this.apiBaseUrl}errorHandler(e){var t;return"code"in e&&Vp.includes(null!==(t=e.code)&&void 0!==t?t:"")?Promise.reject(new Nr("No connection to Yagna. Make sure the service is running at the address ".concat(this.apiBaseUrl),e)):Promise.reject(new Lr("Yagna request failed. ".concat(e),e))}addErrorHandler(e){e.identity.axios.interceptors.response.use(void 0,this.errorHandler.bind(this))}}const Wp=Object.freeze({payment:{driver:"erc20",network:"goerli"},engine:"vm",minMemGib:.5,minStorageGib:2,minCpuThreads:1,minCpuCores:1,capabilities:[]});var Gp;!function(e){e.Unknown="",e.GVMKitSquash="gvmkit-squash"}(Gp||(Gp={}));class Yp{constructor(e){if(!e.imageHash&&!e.manifest&&!e.imageTag)throw new Dr("You must define a package or manifest option");this.packageFormat=Gp.GVMKitSquash,this.imageHash=e.imageHash,this.imageTag=e.imageTag,this.engine=e.engine||Wp.engine,this.minMemGib=e.minMemGib||Wp.minMemGib,this.minStorageGib=e.minStorageGib||Wp.minStorageGib,this.minCpuThreads=e.minCpuThreads||Wp.minCpuThreads,this.minCpuCores=e.minCpuCores||Wp.minCpuCores,this.capabilities=e.capabilities||Wp.capabilities,this.manifest=e.manifest,this.manifestSig=e.manifestSig,this.manifestSigAlgorithm=e.manifestSigAlgorithm,this.manifestCert=e.manifestCert,this.logger=e.logger}}class Kp{constructor(e){this.options=e,this.logger=e.logger||xi("work")}static create(e){const t=new Yp(e);return new Kp(t)}static getImageIdentifier(e){return/^(.*?)\/(.*?):(.*)$/.test(e)?{imageTag:e}:{imageHash:e}}async getDemandDecoration(){const e=new zr;if(e.addProperty("golem.srv.comp.vm.package_format",this.options.packageFormat).addConstraint("golem.inf.mem.gib",this.options.minMemGib.toString(),Ur.GtEq).addConstraint("golem.inf.storage.gib",this.options.minStorageGib.toString(),Ur.GtEq).addConstraint("golem.runtime.name",this.options.engine).addConstraint("golem.inf.cpu.cores",this.options.minCpuCores.toString(),Ur.GtEq).addConstraint("golem.inf.cpu.threads",this.options.minCpuThreads.toString(),Ur.GtEq),this.options.imageHash||this.options.imageTag){const t=await this.resolveTaskPackageUrl();e.addProperty("golem.srv.comp.task_package",t)}return this.options.capabilities.length&&this.options.capabilities.forEach((t=>e.addConstraint("golem.runtime.capabilities",t))),this.addManifestDecorations(e),e.getDecorations()}async resolveTaskPackageUrl(){const e=Hr&&null!==(t=null===process||void 0===process?void 0:{NODE_ENV:"production",PUBLIC_URL:"/degen",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_IMAGE:"5d69025c5ca1d045831f8487786e7851fb4d5250a25d24c185ccc2fb"}.GOLEM_REGISTRY_URL)&&void 0!==t?t:"https://registry.golem.network";var t;const n=!!Hr&&"true"===(null===process||void 0===process?void 0:{NODE_ENV:"production",PUBLIC_URL:"/degen",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_IMAGE:"5d69025c5ca1d045831f8487786e7851fb4d5250a25d24c185ccc2fb"}.GOLEM_DEV_MODE);let r=this.options.imageHash;const i=this.options.imageTag,o="".concat(e,"/v1/image/info?").concat(n?"dev=true":"count=true","&").concat(i?"tag=".concat(i):"hash=".concat(r));try{const t=await fetch(o);if(!t.ok)throw this.logger.error("Unable to get image",{url:i||r,from:e}),new Lr("Unable to get image ".concat(await t.text()));const n=await t.json(),s=n.http;return r=n.sha3,"hash:sha3:".concat(r,":").concat(s)}catch(t){if(t instanceof Cr)throw t;throw this.logger.error("Unable to get image",{url:i||r,from:e}),new Lr("Failed to fetch image: ".concat(t))}}addManifestDecorations(e){this.options.manifest&&(e.addProperty("golem.srv.comp.payload",this.options.manifest),this.options.manifestSig&&e.addProperty("golem.srv.comp.payload.sig",this.options.manifestSig),this.options.manifestSigAlgorithm&&e.addProperty("golem.srv.comp.payload.sig.algorithm",this.options.manifestSigAlgorithm),this.options.manifestCert&&e.addProperty("golem.srv.comp.payload.cert",this.options.manifestCert))}get details(){return{minMemGib:this.options.minMemGib,minStorageGib:this.options.minStorageGib,minCpuThreads:this.options.minCpuThreads,minCpuCores:this.options.minCpuCores,engine:this.options.engine,capabilities:this.options.capabilities,imageHash:this.options.imageHash}}}Object.freeze({__proto__:null,acceptAll:()=>()=>!0,allowProvidersById:e=>t=>e.includes(t.provider.id),allowProvidersByName:e=>t=>e.includes(t.provider.name),allowProvidersByNameRegex:e=>t=>!!t.provider.name.match(e),disallowProvidersById:e=>t=>!e.includes(t.provider.id),disallowProvidersByName:e=>t=>!e.includes(t.provider.name),disallowProvidersByNameRegex:e=>t=>!t.provider.name.match(e),limitPriceFilter:e=>t=>t.pricing.cpuSec<=e.cpuPerSec&&t.pricing.envSec<=e.envPerSec&&t.pricing.start<=e.start});const $p={subnetTag:"public",maxOfferEvents:10,offerFetchingIntervalSec:20,expirationSec:1800,debitNotesAcceptanceTimeoutSec:120,midAgreementDebitNoteIntervalSec:120,midAgreementPaymentTimeoutSec:43200,proposalFilter:()=>!0};class Qp{constructor(e){var t,n,r,i,o,s,a,l;if(this.logger=(null==e?void 0:e.logger)||xi("market"),this.eventTarget=null==e?void 0:e.eventTarget,this.subnetTag=null!==(n=null!==(t=null==e?void 0:e.subnetTag)&&void 0!==t?t:function(){var e;return Hr&&null!==(e=null===process||void 0===process?void 0:{NODE_ENV:"production",PUBLIC_URL:"/degen",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_IMAGE:"5d69025c5ca1d045831f8487786e7851fb4d5250a25d24c185ccc2fb"}.YAGNA_SUBNET)&&void 0!==e?e:"public"}())&&void 0!==n?n:$p.subnetTag,this.offerFetchingIntervalSec=null!==(r=null==e?void 0:e.offerFetchingIntervalSec)&&void 0!==r?r:$p.offerFetchingIntervalSec,this.maxOfferEvents=null!==(i=null==e?void 0:e.maxOfferEvents)&&void 0!==i?i:$p.maxOfferEvents,this.expirationSec=null!==(o=null==e?void 0:e.expirationSec)&&void 0!==o?o:$p.expirationSec,!this.isPositiveInt(this.expirationSec))throw new Dr("The demand expiration time has to be a positive integer");if(this.debitNotesAcceptanceTimeoutSec=null!==(s=null==e?void 0:e.debitNotesAcceptanceTimeoutSec)&&void 0!==s?s:$p.debitNotesAcceptanceTimeoutSec,!this.isPositiveInt(this.debitNotesAcceptanceTimeoutSec))throw new Dr("The debit note acceptance timeout time has to be a positive integer");if(this.midAgreementDebitNoteIntervalSec=null!==(a=null==e?void 0:e.midAgreementDebitNoteIntervalSec)&&void 0!==a?a:$p.midAgreementDebitNoteIntervalSec,!this.isPositiveInt(this.midAgreementDebitNoteIntervalSec))throw new Dr("The debit note interval time has to be a positive integer");if(this.midAgreementPaymentTimeoutSec=null!==(l=null==e?void 0:e.midAgreementPaymentTimeoutSec)&&void 0!==l?l:$p.midAgreementPaymentTimeoutSec,!this.isPositiveInt(this.midAgreementPaymentTimeoutSec))throw new Dr("The mid-agreement payment timeout time has to be a positive integer")}isPositiveInt(e){return e>0&&Number.isInteger(e)}}class Jp extends Qp{constructor(e){var t,n;super(e),this.debitNotesAcceptanceTimeoutSec=null!==(t=null==e?void 0:e.debitNotesAcceptanceTimeoutSec)&&void 0!==t?t:$p.debitNotesAcceptanceTimeoutSec,this.proposalFilter=null!==(n=null==e?void 0:e.proposalFilter)&&void 0!==n?n:$p.proposalFilter}}const Xp="GolemEvent";class Zp extends Event{constructor(e,t){super(e,t),this.detail=t.detail,this.name=this.constructor.name,this.timestamp=(new Date).valueOf()}}class eg extends Zp{constructor(e){super(Xp,{detail:e})}}class tg extends eg{constructor(){super(void 0)}}class ng extends eg{constructor(){super(void 0)}}class rg extends eg{}class ig extends eg{}class og extends eg{}class sg extends eg{}class ag extends eg{}class lg extends eg{}class cg extends eg{}class ug extends eg{}class dg extends eg{}class hg extends eg{}class fg extends eg{}class pg extends eg{}class gg extends eg{}class mg extends eg{}class vg extends eg{}class yg extends eg{}class bg extends eg{}class wg extends eg{}class Sg extends eg{}class _g extends eg{}class Eg extends eg{}class kg extends eg{}class Pg extends eg{}class Ag extends eg{}class xg extends eg{}class Ig extends eg{}class Og extends eg{}class Tg extends eg{}class Rg extends eg{}var Cg;Object.freeze({__proto__:null,ActivityCreated:xg,ActivityDestroyed:Ig,ActivityStateChanged:Og,AgreementConfirmed:bg,AgreementCreated:yg,AgreementRejected:wg,AgreementTerminated:Sg,AllocationCreated:lg,BaseEvent:eg,CollectFailed:hg,ComputationFailed:rg,ComputationFinished:ng,ComputationStarted:tg,DebitNoteAccepted:Pg,DebitNoteReceived:Eg,DemandFailed:ug,DemandSubscribed:cg,DemandUnsubscribed:dg,EVENT_TYPE:Xp,InvoiceReceived:_g,PackageCreated:vg,PaymentAccepted:kg,PaymentFailed:Ag,ProposalConfirmed:class extends eg{},ProposalFailed:mg,ProposalReceived:fg,ProposalRejected:pg,ProposalResponded:gg,ScriptExecuted:Rg,ScriptSent:Tg,TaskFinished:ag,TaskRedone:og,TaskRejected:sg,TaskStarted:ig});!function(e){e[e.ServiceNotInitialized=0]="ServiceNotInitialized",e[e.MissingAllocation=1]="MissingAllocation",e[e.SubscriptionFailed=2]="SubscriptionFailed",e[e.InvalidProposal=3]="InvalidProposal",e[e.ProposalResponseFailed=4]="ProposalResponseFailed",e[e.ProposalRejectionFailed=5]="ProposalRejectionFailed",e[e.DemandExpired=6]="DemandExpired",e[e.AgreementTerminationFailed=7]="AgreementTerminationFailed",e[e.AgreementCreationFailed=8]="AgreementCreationFailed",e[e.AgreementApprovalFailed=9]="AgreementApprovalFailed"}(Cg||(Cg={}));class Ng extends Br{constructor(e,t,n,r){super(e,t,r),this.code=t,this.demand=n,this.previous=r}}class jg{constructor(e,t,n,r){this.taskPackage=e,this.allocation=t,this.yagnaApi=n,this.options=new Qp(r)}async create(){var e,t,n,r;try{const t=await this.getDecorations(),n=(new zr).addDecorations(t).getDemandRequest(),{data:r}=await this.yagnaApi.market.subscribeDemand(n);return null===(e=this.options.eventTarget)||void 0===e||e.dispatchEvent(new cg({id:r,details:(new zr).addDecorations(t).getDecorations()})),this.options.logger.info("Demand published on the market"),new Lg(r,n,this.allocation,this.yagnaApi,this.options)}catch(e){const i=(null===(n=null===(t=e.response)||void 0===t?void 0:t.data)||void 0===n?void 0:n.message)||e.toString();throw null===(r=this.options.eventTarget)||void 0===r||r.dispatchEvent(new ug({reason:i})),new Ng("Could not publish demand on the market. ".concat(i),Cg.SubscriptionFailed,void 0,e)}}async getDecorations(){return[await this.taskPackage.getDemandDecoration(),await this.allocation.getDemandDecoration(),this.getBaseDecorations()]}getBaseDecorations(){const e=new zr;return e.addProperty("golem.srv.caps.multi-activity",!0).addProperty("golem.srv.comp.expiration",Date.now()+1e3*this.options.expirationSec).addProperty("golem.node.debug.subnet",this.options.subnetTag).addProperty("golem.com.payment.debit-notes.accept-timeout?",this.options.debitNotesAcceptanceTimeoutSec).addConstraint("golem.com.pricing.model","linear").addConstraint("golem.node.debug.subnet",this.options.subnetTag),e.addProperty("golem.com.scheme.payu.debit-note.interval-sec?",this.options.midAgreementDebitNoteIntervalSec).addProperty("golem.com.scheme.payu.payment-timeout-sec?",this.options.midAgreementPaymentTimeoutSec),e.getDecorations()}}class Dg{constructor(e,t,n,r,i,o){this.demand=e,this.parentId=t,this.setCounteringProposalReference=n,this.api=r,this.eventTarget=o,this.id=i.proposalId,this.issuerId=i.issuerId,this.properties=i.properties,this.constraints=i.constraints,this.state=i.state,this.prevProposalId=i.prevProposalId,this.timestamp=i.timestamp,this.counteringProposalId=null,this.provider=this.getProviderInfo(),this.validate()}get details(){return{transferProtocol:this.properties["golem.activity.caps.transfer.protocol"],cpuBrand:this.properties["golem.inf.cpu.brand"],cpuCapabilities:this.properties["golem.inf.cpu.capabilities"],cpuCores:this.properties["golem.inf.cpu.cores"],cpuThreads:this.properties["golem.inf.cpu.threads"],memory:this.properties["golem.inf.mem.gib"],storage:this.properties["golem.inf.storage.gib"],publicNet:this.properties["golem.node.net.is-public"],runtimeCapabilities:this.properties["golem.runtime.capabilities"],runtimeName:this.properties["golem.runtime.name"],state:this.state}}get pricing(){var e,t;const n=this.properties["golem.com.usage.vector"],r=this.properties["golem.com.pricing.model.linear.coeffs"],i=n.findIndex((e=>"golem.usage.duration_sec"===e)),o=n.findIndex((e=>"golem.usage.cpu_sec"===e)),s=null!==(e=r[i])&&void 0!==e?e:0;return{cpuSec:null!==(t=r[o])&&void 0!==t?t:0,envSec:s,start:r[r.length-1]}}validate(){const e=this.properties["golem.com.usage.vector"],t=this.properties["golem.com.pricing.model.linear.coeffs"];if(!e||0===e.length)throw new Ng("Broken proposal: the `golem.com.usage.vector` does not contain price information",Cg.InvalidProposal,this.demand);if(!t||0===t.length)throw new Ng("Broken proposal: the `golem.com.pricing.model.linear.coeffs` does not contain pricing information",Cg.InvalidProposal,this.demand);if(e.length<t.length-1)throw new Ng("Broken proposal: the `golem.com.usage.vector` has less pricing information than `golem.com.pricing.model.linear.coeffs`",Cg.InvalidProposal,this.demand);if(t.length<e.length)throw new Ng("Broken proposal: the `golem.com.pricing.model.linear.coeffs` should contain 3 price values",Cg.InvalidProposal,this.demand)}isInitial(){return this.state===Ea.ProposalAllOfStateEnum.Initial}isDraft(){return this.state===Ea.ProposalAllOfStateEnum.Draft}isExpired(){return this.state===Ea.ProposalAllOfStateEnum.Expired}isRejected(){return this.state===Ea.ProposalAllOfStateEnum.Rejected}async reject(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"no reason";var t,n,r;try{await this.api.rejectProposalOffer(this.demand.id,this.id,{message:e}),null===(t=this.eventTarget)||void 0===t||t.dispatchEvent(new pg({id:this.id,provider:this.provider,parentId:this.id,reason:e}))}catch(e){throw new Ng("Failed to reject proposal. ".concat((null===(r=null===(n=null==e?void 0:e.response)||void 0===n?void 0:n.data)||void 0===r?void 0:r.message)||e),Cg.ProposalRejectionFailed,this.demand,e)}}async respond(e){var t,n,r,i;try{this.demand.demandRequest.properties["golem.com.payment.chosen-platform"]=e;const{data:n}=await this.api.counterProposalDemand(this.demand.id,this.id,this.demand.demandRequest,{timeout:2e4});return this.setCounteringProposalReference&&this.setCounteringProposalReference(this.id,n),null===(t=this.eventTarget)||void 0===t||t.dispatchEvent(new gg({id:this.id,provider:this.provider,counteringProposalId:n})),n}catch(e){const t=(null===(r=null===(n=null==e?void 0:e.response)||void 0===n?void 0:n.data)||void 0===r?void 0:r.message)||e.toString();throw null===(i=this.eventTarget)||void 0===i||i.dispatchEvent(new mg({id:this.id,provider:this.provider,parentId:this.id,reason:t})),new Ng("Failed to respond proposal. ".concat(t),Cg.ProposalResponseFailed,this.demand,e)}}hasPaymentPlatform(e){return this.getProviderPaymentPlatforms().includes(e)}getEstimatedCost(){const e=this.properties["golem.inf.cpu.threads"]||1;return this.pricing.start+this.pricing.cpuSec*e+this.pricing.envSec}getProviderPaymentPlatforms(){return Object.keys(this.properties).filter((e=>e.startsWith("golem.com.payment.platform."))).map((e=>e.split(".")[4]))||[]}getProviderInfo(){return{id:this.issuerId,name:this.properties["golem.node.id.name"],walletAddress:this.properties["golem.com.payment.platform.".concat(this.demand.allocation.paymentPlatform,".address")]}}}const Fg="ProposalReceived";class Lg extends EventTarget{static async create(e,t,n,r){return new jg(e,t,n,r).create()}constructor(e,t,n,r,i){super(),this.id=e,this.demandRequest=t,this.allocation=n,this.yagnaApi=r,this.options=i,this.isRunning=!0,this.proposalReferences=[],this.logger=this.options.logger||xi("market"),this.subscribe().catch((e=>this.logger.error("Unable to subscribe for demand events",e)))}async unsubscribe(){var e;this.isRunning=!1,await this.yagnaApi.market.unsubscribeDemand(this.id),null===(e=this.options.eventTarget)||void 0===e||e.dispatchEvent(new dg({id:this.id})),this.logger.debug("Demand unsubscribed",{id:this.id})}findParentProposal(e){if(!e)return null;for(const t of this.proposalReferences)if(t.counteringProposalId===e)return t.id;return null}setCounteringProposalReference(e,t){this.proposalReferences.push(new Bg(e,t))}async subscribe(){for(var e,t,n,r,i,o,s,a;this.isRunning;)try{const{data:i}=await this.yagnaApi.market.collectOffers(this.id,this.options.offerFetchingIntervalSec,this.options.maxOfferEvents,{timeout:0});for(const o of i){if("ProposalRejectedEvent"===o.eventType){this.logger.warn("Proposal rejected",{reason:null===(e=o.reason)||void 0===e?void 0:e.message}),null===(t=this.options.eventTarget)||void 0===t||t.dispatchEvent(new pg({id:o.proposalId,parentId:this.findParentProposal(o.proposalId),reason:null===(n=o.reason)||void 0===n?void 0:n.message}));continue}if("ProposalEvent"!==o.eventType)continue;const i=new Dg(this,"Draft"===o.proposal.state?this.findParentProposal(o.proposal.prevProposalId):null,this.setCounteringProposalReference.bind(this),this.yagnaApi.market,o.proposal,this.options.eventTarget);this.dispatchEvent(new Mg(Fg,i)),null===(r=this.options.eventTarget)||void 0===r||r.dispatchEvent(new fg({id:i.id,parentId:this.findParentProposal(o.proposal.prevProposalId),provider:i.provider,details:i.details}))}}catch(e){if(this.isRunning){const t=(null===(o=null===(i=e.response)||void 0===i?void 0:i.data)||void 0===o?void 0:o.message)||e;if(null===(s=this.options.eventTarget)||void 0===s||s.dispatchEvent(new hg({id:this.id,reason:t})),this.logger.warn("Unable to collect offers.",{reason:t}),"ECONNREFUSED"===e.code){this.dispatchEvent(new Mg(Fg,void 0,new Lr("Unable to collect offers. ".concat(t),e)));break}if(404===(null===(a=e.response)||void 0===a?void 0:a.status)){this.dispatchEvent(new Mg(Fg,void 0,new Ng("Demand expired. ".concat(t),Cg.DemandExpired,this,e)));break}await Vr(2)}}}}class Mg extends Event{constructor(e,t,n){super(e,t),this.proposal=t,this.error=n}}class Bg{constructor(e,t){this.id=e,this.counteringProposalId=t}}var Ug=function(e){if(e=e||{},this.Promise=e.Promise||Promise,this.queues=Object.create(null),this.domainReentrant=e.domainReentrant||!1,this.domainReentrant){if(void 0===yi||void 0===yi.domain)throw new Error("Domain-reentrant locks require `process.domain` to exist. Please flip `opts.domainReentrant = false`, use a NodeJS version that still implements Domain, or install a browser polyfill.");this.domains=Object.create(null)}this.timeout=e.timeout||Ug.DEFAULT_TIMEOUT,this.maxOccupationTime=e.maxOccupationTime||Ug.DEFAULT_MAX_OCCUPATION_TIME,this.maxExecutionTime=e.maxExecutionTime||Ug.DEFAULT_MAX_EXECUTION_TIME,e.maxPending===1/0||Number.isInteger(e.maxPending)&&e.maxPending>=0?this.maxPending=e.maxPending:this.maxPending=Ug.DEFAULT_MAX_PENDING};Ug.DEFAULT_TIMEOUT=0,Ug.DEFAULT_MAX_OCCUPATION_TIME=0,Ug.DEFAULT_MAX_EXECUTION_TIME=0,Ug.DEFAULT_MAX_PENDING=1e3,Ug.prototype.acquire=function(e,t,n,r){if(Array.isArray(e))return this._acquireBatch(e,t,n,r);if("function"!=typeof t)throw new Error("You must pass a function to execute");var i=null,o=null,s=null;"function"!=typeof n&&(r=n,n=null,s=new this.Promise((function(e,t){i=e,o=t}))),r=r||{};var a=!1,l=null,c=null,u=null,d=this,h=function(t,r,l){c&&(clearTimeout(c),c=null),u&&(clearTimeout(u),u=null),t&&(d.queues[e]&&0===d.queues[e].length&&delete d.queues[e],d.domainReentrant&&delete d.domains[e]),a||(s?r?o(r):i(l):"function"==typeof n&&n(r,l),a=!0),t&&d.queues[e]&&d.queues[e].length>0&&d.queues[e].shift()()},f=function(n){if(a)return h(n);l&&(clearTimeout(l),l=null),d.domainReentrant&&n&&(d.domains[e]=yi.domain);var i=r.maxExecutionTime||d.maxExecutionTime;if(i&&(u=setTimeout((function(){d.queues[e]&&h(n,new Error("Maximum execution time is exceeded "+e))}),i)),1===t.length){var o=!1;try{t((function(e,t){o||(o=!0,h(n,e,t))}))}catch(e){o||(o=!0,h(n,e))}}else d._promiseTry((function(){return t()})).then((function(e){h(n,void 0,e)}),(function(e){h(n,e)}))};d.domainReentrant&&yi.domain&&(f=yi.domain.bind(f));var p=r.maxPending||d.maxPending;if(d.queues[e])if(d.domainReentrant&&yi.domain&&yi.domain===d.domains[e])f(!1);else if(d.queues[e].length>=p)h(!1,new Error("Too many pending tasks in queue "+e));else{var g=function(){f(!0)};r.skipQueue?d.queues[e].unshift(g):d.queues[e].push(g);var m=r.timeout||d.timeout;m&&(l=setTimeout((function(){l=null,h(!1,new Error("async-lock timed out in queue "+e))}),m))}else d.queues[e]=[],f(!0);var v=r.maxOccupationTime||d.maxOccupationTime;return v&&(c=setTimeout((function(){d.queues[e]&&h(!1,new Error("Maximum occupation time is exceeded in queue "+e))}),v)),s||void 0},Ug.prototype._acquireBatch=function(e,t,n,r){"function"!=typeof n&&(r=n,n=null);var i=this,o=e.reduceRight((function(e,t){return function(e,t){return function(n){i.acquire(e,t,n,r)}}(t,e)}),t);if("function"!=typeof n)return new this.Promise((function(e,t){1===o.length?o((function(n,r){n?t(n):e(r)})):e(o())}));o(n)},Ug.prototype.isBusy=function(e){return e?!!this.queues[e]:Object.keys(this.queues).length>0},Ug.prototype._promiseTry=function(e){try{return this.Promise.resolve(e())}catch(e){return this.Promise.reject(e)}};var zg=wi(Ug);class Vg{constructor(e){var t,n;this.batch=new Map,this.lock=new zg,this.config={minBatchSize:null!==(t=null==e?void 0:e.minBatchSize)&&void 0!==t?t:100,releaseTimeoutMs:null!==(n=null==e?void 0:e.releaseTimeoutMs)&&void 0!==n?n:1e3}}async addProposal(e){const t=this.getProviderKey(e);await this.lock.acquire("proposals-batch",(()=>{let n=this.batch.get(t);n||(n=new Set,this.batch.set(t,n)),n.add(e)}))}async*readProposals(){let e,t;const n=new Promise((t=>{e=setTimeout(t,this.config.releaseTimeoutMs)})),r=new Promise((e=>{t=setInterval((()=>{this.batch.size>=this.config.minBatchSize&&e(!0)}),1e3)}));await Promise.race([n,r]),clearTimeout(e),clearInterval(t);const i=[];await this.lock.acquire("proposals-batch",(()=>{this.batch.forEach((e=>i.push(this.getBestProposal(e)))),this.batch.clear()})),yield i}getBestProposal(e){return[...e].sort(((e,t)=>{const n=e.getEstimatedCost(),r=t.getEstimatedCost(),i=new Date(e.timestamp).valueOf(),o=new Date(t.timestamp).valueOf();return n!==r?n-r:o-i}))[0]}getProviderKey(e){return[e.provider.id,e.properties["golem.inf.cpu.cores"],e.properties["golem.inf.cpu.threads"],e.properties["golem.inf.mem.gib"],e.properties["golem.inf.storage.gib"]].join("-")}}class qg{constructor(e,t,n){var r;this.agreementPoolService=e,this.yagnaApi=t,this.maxResubscribeRetries=5,this.proposalsCount={initial:0,confirmed:0,rejected:0},this.isRunning=!1,this.options=new Jp(n),this.logger=(null===(r=this.options)||void 0===r?void 0:r.logger)||xi("market"),this.proposalsBatch=new Vg({minBatchSize:null==n?void 0:n.minProposalsBatchSize,releaseTimeoutMs:null==n?void 0:n.proposalsBatchReleaseTimeoutMs})}async run(e,t){this.isRunning=!0,this.taskPackage=e,this.allocation=t,await this.createDemand(),this.startProcessingProposalsBatch().catch((e=>this.logger.error("Error processing proposal batch",e))),this.logger.info("Market Service has started")}async end(){this.isRunning=!1,this.demand&&(this.demand.removeEventListener(Fg,this.demandEventListener.bind(this)),await this.demand.unsubscribe().catch((e=>this.logger.error("Could not unsubscribe demand.",e)))),this.logger.info("Market Service has been stopped")}getProposalsCount(){return this.proposalsCount}async createDemand(){if(!this.taskPackage||!this.allocation)throw new Ng("The service has not been started correctly.",Cg.ServiceNotInitialized,this.demand);return this.demand=await Lg.create(this.taskPackage,this.allocation,this.yagnaApi,this.options),this.demand.addEventListener(Fg,this.demandEventListener.bind(this)),this.proposalsCount={initial:0,confirmed:0,rejected:0},this.logger.debug("New demand has been created",{id:this.demand.id}),!0}demandEventListener(e){const t=e.proposal,n=e.error;return n instanceof Ng&&n.code===Cg.DemandExpired?(this.logger.error("Demand expired. Trying to subscribe a new one..."),void this.resubscribeDemand().catch((e=>{var t;return null===(t=this.logger)||void 0===t?void 0:t.warn("Could not resubscribe demand.",e)}))):n||!t?(this.logger.error("Collecting offers failed. Trying to subscribe a new demand..."),void this.resubscribeDemand().catch((e=>{var t;return null===(t=this.logger)||void 0===t?void 0:t.warn("Could not resubscribe demand.",e)}))):void(t.isInitial()?this.proposalsBatch.addProposal(t):t.isDraft()?this.processDraftProposal(t):t.isExpired()?this.logger.debug("Proposal hes expired",{id:t.id}):t.isRejected()&&(this.proposalsCount.rejected++,this.logger.debug("Proposal hes rejected",{id:t.id})))}async resubscribeDemand(){this.demand&&(this.demand.removeEventListener(Fg,this.demandEventListener.bind(this)),await this.demand.unsubscribe().catch((e=>this.logger.error("Could not unsubscribe demand.",e))));let e=1,t=!1;for(;!t&&e<=this.maxResubscribeRetries;)t=Boolean(await this.createDemand().catch((e=>this.logger.error("Could not resubscribe demand.",e)))),++e,await Vr(20)}async processInitialProposal(e){if(!this.allocation)throw new Ng("Allocation is missing. The service has not been started correctly.",Cg.MissingAllocation,this.demand);this.logger.debug("New proposal has been received",{id:e.id}),this.proposalsCount.initial++;try{const{result:t,reason:n}=await this.isProposalValid(e);if(t){const t=this.allocation.paymentPlatform;await e.respond(t).catch((t=>this.logger.debug("Unable to respond proposal",{id:e.id,e:t}))),this.logger.debug("Proposal has been responded",{id:e.id})}else this.proposalsCount.rejected++,this.logger.error("Proposal has been rejected",{id:e.id,reason:n})}catch(Vr){this.logger.error("Unable to respond proposal",{id:e.id,error:Vr})}}async isProposalValid(e){if(!this.allocation)throw new Ng("Allocation is missing. The service has not been started correctly.",Cg.MissingAllocation,this.demand);const t=e.properties["golem.com.payment.debit-notes.accept-timeout?"];return t&&t<this.options.debitNotesAcceptanceTimeoutSec?{result:!1,reason:"Debit note acceptance timeout too short"}:e.hasPaymentPlatform(this.allocation.paymentPlatform)?await this.options.proposalFilter(e)?{result:!0}:{result:!1,reason:"Proposal rejected by Proposal Filter"}:{result:!1,reason:"No common payment platform"}}async processDraftProposal(e){await this.agreementPoolService.addProposal(e),this.proposalsCount.confirmed++,this.logger.debug("Proposal has been confirmed and added to agreement pool",{providerName:e.provider.name,issuerId:e.issuerId,id:e.id})}async startProcessingProposalsBatch(){for await(const e of this.proposalsBatch.readProposals())if(e.forEach((e=>this.processInitialProposal(e))),!this.isRunning)break}}Object.freeze({__proto__:null,getHealthyProvidersWhiteList:async function(){try{const e=await fetch("https://provider-health.golem.network/v1/provider-whitelist");if(e.ok)return e.json();{const t=await e.text();throw new Fr("Request to download healthy provider whitelist failed: ".concat(t))}}catch(Ur){throw new Fr("Failed to download healthy provider whitelist due to an error: ".concat(Ur),Ur)}}});const Hg=()=>async e=>{const t=e.filter((e=>e.agreement));return t.length?t[Math.floor(Math.random()*t.length)]:e[Math.floor(Math.random()*e.length)]};Object.freeze({__proto__:null,bestAgreementSelector:e=>async t=>(t.sort(((t,n)=>((null==e?void 0:e[t.proposal.provider.id])||0)>=((null==e?void 0:e[n.proposal.provider.id])||0)?1:-1)),t[0]),randomAgreementSelector:()=>async e=>e[Math.floor(Math.random()*e.length)],randomAgreementSelectorWithPriorityForExistingOnes:Hg});const Wg={agreementRequestTimeout:3e4,agreementWaitingForApprovalTimeout:60,agreementSelector:Hg(),agreementMaxEvents:100,agreementEventsFetchingIntervalSec:5,agreementMaxPoolSize:5};class Gg{constructor(e){this.options=e,this.agreementRequestTimeout=(null==e?void 0:e.agreementRequestTimeout)||Wg.agreementRequestTimeout,this.agreementWaitingForApprovalTimeout=(null==e?void 0:e.agreementWaitingForApprovalTimeout)||Wg.agreementWaitingForApprovalTimeout,this.logger=null==e?void 0:e.logger,this.eventTarget=null==e?void 0:e.eventTarget}}class Yg extends Gg{constructor(e){var t,n,r,i;super(e),this.agreementSelector=null!==(t=null==e?void 0:e.agreementSelector)&&void 0!==t?t:Wg.agreementSelector,this.agreementMaxEvents=null!==(n=null==e?void 0:e.agreementMaxEvents)&&void 0!==n?n:Wg.agreementMaxEvents,this.agreementMaxPoolSize=null!==(r=null==e?void 0:e.agreementMaxPoolSize)&&void 0!==r?r:Wg.agreementMaxPoolSize,this.agreementEventsFetchingIntervalSec=null!==(i=null==e?void 0:e.agreementEventsFetchingIntervalSec)&&void 0!==i?i:Wg.agreementEventsFetchingIntervalSec}}class Kg{constructor(e,t){this.yagnaApi=e,this.options=new Gg(t),this.logger=(null==t?void 0:t.logger)||xi("market")}async create(e){var t,n,r,i;try{const n={proposalId:e.id,validTo:new Date(+new Date+36e5).toISOString()},{data:r}=await this.yagnaApi.market.createAgreement(n,{timeout:this.options.agreementRequestTimeout}),{data:i}=await this.yagnaApi.market.getAgreement(r),o=new Qg(r,e,this.yagnaApi,this.options);return null===(t=this.options.eventTarget)||void 0===t||t.dispatchEvent(new yg({id:r,provider:e.provider,validTo:null==i?void 0:i.validTo,proposalId:e.id})),this.logger.debug("Agreement created",{id:r}),o}catch(t){throw new Ng("Unable to create agreement ".concat((null===(r=null===(n=null==t?void 0:t.response)||void 0===n?void 0:n.data)||void 0===r?void 0:r.message)||(null===(i=null==t?void 0:t.response)||void 0===i?void 0:i.data)||t),Cg.AgreementCreationFailed,e.demand,t)}}}var $g;!function(e){e.Proposal="Proposal",e.Pending="Pending",e.Cancelled="Cancelled",e.Rejected="Rejected",e.Approved="Approved",e.Expired="Expired",e.Terminated="Terminated"}($g||($g={}));class Qg{constructor(e,t,n,r){this.id=e,this.proposal=t,this.yagnaApi=n,this.options=r,this.logger=r.logger||xi("market")}static async create(e,t,n){return new Kg(t,n).create(e)}async refreshDetails(){const{data:e}=await this.yagnaApi.market.getAgreement(this.id,{timeout:this.options.agreementRequestTimeout});this.agreementData=e}async getState(){return await this.refreshDetails(),this.agreementData.state}getProviderInfo(){return this.proposal.provider}async confirm(e){var t,n;try{await this.yagnaApi.market.confirmAgreement(this.id,e),await this.yagnaApi.market.waitForApproval(this.id,this.options.agreementWaitingForApprovalTimeout),this.logger.debug("Agreement approved",{id:this.id}),null===(t=this.options.eventTarget)||void 0===t||t.dispatchEvent(new bg({id:this.id,provider:this.getProviderInfo()}))}catch(e){throw this.logger.error("Unable to confirm agreement with provider",{providerName:this.getProviderInfo().name,error:e}),null===(n=this.options.eventTarget)||void 0===n||n.dispatchEvent(new wg({id:this.id,provider:this.getProviderInfo(),reason:e.toString()})),e}}async isFinalState(){const e=await this.getState();return e!==$g.Pending&&e!==$g.Proposal}async terminate(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{message:"Finished"};var t,n,r,i;try{await this.getState()!==$g.Terminated&&await this.yagnaApi.market.terminateAgreement(this.id,e,{timeout:this.options.agreementRequestTimeout}),null===(t=this.options.eventTarget)||void 0===t||t.dispatchEvent(new Sg({id:this.id,provider:this.getProviderInfo(),reason:e.message})),this.logger.debug("Agreement terminated",{id:this.id})}catch(e){throw new Ng("Unable to terminate agreement ".concat(this.id,". ").concat((null===(r=null===(n=e.response)||void 0===n?void 0:n.data)||void 0===r?void 0:r.message)||(null===(i=e.response)||void 0===i?void 0:i.data)||e),Cg.AgreementTerminationFailed,this.proposal.demand)}}}var Jg,Xg={load:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var r,i,o;for(r in t)o=t[r],n[r]=null!=(i=e[r])?i:o;return n},overwrite:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var r,i;for(r in e)i=e[r],void 0!==t[r]&&(n[r]=i);return n}},Zg=class{constructor(e,t){this.incr=e,this.decr=t,this._first=null,this._last=null,this.length=0}push(e){var t;this.length++,"function"==typeof this.incr&&this.incr(),t={value:e,prev:this._last,next:null},null!=this._last?(this._last.next=t,this._last=t):this._first=this._last=t}shift(){var e;if(null!=this._first)return this.length--,"function"==typeof this.decr&&this.decr(),e=this._first.value,null!=(this._first=this._first.next)?this._first.prev=null:this._last=null,e}first(){if(null!=this._first)return this._first.value}getArray(){var e,t,n;for(e=this._first,n=[];null!=e;)n.push((t=e,e=e.next,t.value));return n}forEachShift(e){var t;for(t=this.shift();null!=t;)e(t),t=this.shift()}debug(){var e,t,n,r,i;for(e=this._first,i=[];null!=e;)i.push((t=e,e=e.next,{value:t.value,prev:null!=(n=t.prev)?n.value:void 0,next:null!=(r=t.next)?r.value:void 0}));return i}};function em(e,t,n,r,i,o,s){try{var a=e[o](s),l=a.value}catch(e){return void n(e)}a.done?t(l):Promise.resolve(l).then(r,i)}function tm(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function s(e){em(o,r,i,s,a,"next",e)}function a(e){em(o,r,i,s,a,"throw",e)}s(void 0)}))}}Jg=class{constructor(e){var t=this;if(this.instance=e,this._events={},null!=this.instance.on||null!=this.instance.once||null!=this.instance.removeAllListeners)throw new Error("An Emitter already exists for this object");this.instance.on=(e,t)=>this._addListener(e,"many",t),this.instance.once=(e,t)=>this._addListener(e,"once",t),this.instance.removeAllListeners=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null!=e?delete t._events[e]:t._events={}}}_addListener(e,t,n){var r;return null==(r=this._events)[e]&&(r[e]=[]),this._events[e].push({cb:n,status:t}),this.instance}listenerCount(e){return null!=this._events[e]?this._events[e].length:0}trigger(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=this;return tm((function*(){var t,r;try{if("debug"!==e&&i.trigger("debug","Event triggered: ".concat(e),n),null==i._events[e])return;return i._events[e]=i._events[e].filter((function(e){return"none"!==e.status})),r=i._events[e].map(function(){var e=tm((function*(e){var t,r;if("none"!==e.status){"once"===e.status&&(e.status="none");try{return"function"==typeof(null!=(r="function"==typeof e.cb?e.cb(...n):void 0)?r.then:void 0)?yield r:r}catch(e){return t=e,i.trigger("error",t),null}}}));return function(t){return e.apply(this,arguments)}}()),(yield Promise.all(r)).find((function(e){return null!=e}))}catch(e){return t=e,i.trigger("error",t),null}}))()}};var nm,rm,im=Jg;nm=Zg,rm=im;var om,sm,am,lm,cm,um=class{constructor(e){this.Events=new rm(this),this._length=0,this._lists=function(){var t,n,r;for(r=[],t=1,n=e;1<=n?t<=n:t>=n;1<=n?++t:--t)r.push(new nm((()=>this.incr()),(()=>this.decr())));return r}.call(this)}incr(){if(0==this._length++)return this.Events.trigger("leftzero")}decr(){if(0==--this._length)return this.Events.trigger("zero")}push(e){return this._lists[e.options.priority].push(e)}queued(e){return null!=e?this._lists[e].length:this._length}shiftAll(e){return this._lists.forEach((function(t){return t.forEachShift(e)}))}getFirst(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._lists;var t,n,r;for(t=0,n=e.length;t<n;t++)if((r=e[t]).length>0)return r;return[]}shiftLastFrom(e){return this.getFirst(this._lists.slice(e).reverse()).shift()}};function dm(){return sm?om:(sm=1,e=class extends Error{},om=e);var e}function hm(e,t,n,r,i,o,s){try{var a=e[o](s),l=a.value}catch(e){return void n(e)}a.done?t(l):Promise.resolve(l).then(r,i)}function fm(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function s(e){hm(o,r,i,s,a,"next",e)}function a(e){hm(o,r,i,s,a,"throw",e)}s(void 0)}))}}cm=Xg,am=dm(),lm=class{constructor(e,t,n,r,i,o,s,a){this.task=e,this.args=t,this.rejectOnDrop=i,this.Events=o,this._states=s,this.Promise=a,this.options=cm.load(n,r),this.options.priority=this._sanitizePriority(this.options.priority),this.options.id===r.id&&(this.options.id="".concat(this.options.id,"-").concat(this._randomIndex())),this.promise=new this.Promise(((e,t)=>{this._resolve=e,this._reject=t})),this.retryCount=0}_sanitizePriority(e){var t;return(t=~~e!==e?5:e)<0?0:t>9?9:t}_randomIndex(){return Math.random().toString(36).slice(2)}doDrop(){let{error:e,message:t="This job has been dropped by Bottleneck"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!!this._states.remove(this.options.id)&&(this.rejectOnDrop&&this._reject(null!=e?e:new am(t)),this.Events.trigger("dropped",{args:this.args,options:this.options,task:this.task,promise:this.promise}),!0)}_assertStatus(e){var t;if((t=this._states.jobStatus(this.options.id))!==e&&("DONE"!==e||null!==t))throw new am("Invalid job status ".concat(t,", expected ").concat(e,". Please open an issue at https://github.com/SGrondin/bottleneck/issues"))}doReceive(){return this._states.start(this.options.id),this.Events.trigger("received",{args:this.args,options:this.options})}doQueue(e,t){return this._assertStatus("RECEIVED"),this._states.next(this.options.id),this.Events.trigger("queued",{args:this.args,options:this.options,reachedHWM:e,blocked:t})}doRun(){return 0===this.retryCount?(this._assertStatus("QUEUED"),this._states.next(this.options.id)):this._assertStatus("EXECUTING"),this.Events.trigger("scheduled",{args:this.args,options:this.options})}doExecute(e,t,n,r){var i=this;return fm((function*(){var o,s,a;0===i.retryCount?(i._assertStatus("RUNNING"),i._states.next(i.options.id)):i._assertStatus("EXECUTING"),s={args:i.args,options:i.options,retryCount:i.retryCount},i.Events.trigger("executing",s);try{if(a=yield null!=e?e.schedule(i.options,i.task,...i.args):i.task(...i.args),t())return i.doDone(s),yield r(i.options,s),i._assertStatus("DONE"),i._resolve(a)}catch(e){return o=e,i._onFailure(o,s,t,n,r)}}))()}doExpire(e,t,n){var r,i;return this._states.jobStatus("RUNNING"===this.options.id)&&this._states.next(this.options.id),this._assertStatus("EXECUTING"),i={args:this.args,options:this.options,retryCount:this.retryCount},r=new am("This job timed out after ".concat(this.options.expiration," ms.")),this._onFailure(r,i,e,t,n)}_onFailure(e,t,n,r,i){var o=this;return fm((function*(){var s,a;if(n())return null!=(s=yield o.Events.trigger("failed",e,t))?(a=~~s,o.Events.trigger("retry","Retrying ".concat(o.options.id," after ").concat(a," ms"),t),o.retryCount++,r(a)):(o.doDone(t),yield i(o.options,t),o._assertStatus("DONE"),o._reject(e))}))()}doDone(e){return this._assertStatus("EXECUTING"),this._states.next(this.options.id),this.Events.trigger("done",e)}};var pm,gm,mm,vm=lm;function ym(e,t,n,r,i,o,s){try{var a=e[o](s),l=a.value}catch(e){return void n(e)}a.done?t(l):Promise.resolve(l).then(r,i)}function bm(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function s(e){ym(o,r,i,s,a,"next",e)}function a(e){ym(o,r,i,s,a,"throw",e)}s(void 0)}))}}mm=Xg,pm=dm(),gm=class{constructor(e,t,n){this.instance=e,this.storeOptions=t,this.clientId=this.instance._randomIndex(),mm.load(n,n,this),this._nextRequest=this._lastReservoirRefresh=this._lastReservoirIncrease=Date.now(),this._running=0,this._done=0,this._unblockTime=0,this.ready=this.Promise.resolve(),this.clients={},this._startHeartbeat()}_startHeartbeat(){var e;return null==this.heartbeat&&(null!=this.storeOptions.reservoirRefreshInterval&&null!=this.storeOptions.reservoirRefreshAmount||null!=this.storeOptions.reservoirIncreaseInterval&&null!=this.storeOptions.reservoirIncreaseAmount)?"function"==typeof(e=this.heartbeat=setInterval((()=>{var e,t,n,r,i;if(r=Date.now(),null!=this.storeOptions.reservoirRefreshInterval&&r>=this._lastReservoirRefresh+this.storeOptions.reservoirRefreshInterval&&(this._lastReservoirRefresh=r,this.storeOptions.reservoir=this.storeOptions.reservoirRefreshAmount,this.instance._drainAll(this.computeCapacity())),null!=this.storeOptions.reservoirIncreaseInterval&&r>=this._lastReservoirIncrease+this.storeOptions.reservoirIncreaseInterval){var o=this.storeOptions;if(e=o.reservoirIncreaseAmount,n=o.reservoirIncreaseMaximum,i=o.reservoir,this._lastReservoirIncrease=r,(t=null!=n?Math.min(e,n-i):e)>0)return this.storeOptions.reservoir+=t,this.instance._drainAll(this.computeCapacity())}}),this.heartbeatInterval)).unref?e.unref():void 0:clearInterval(this.heartbeat)}__publish__(e){var t=this;return bm((function*(){return yield t.yieldLoop(),t.instance.Events.trigger("message",e.toString())}))()}__disconnect__(e){var t=this;return bm((function*(){return yield t.yieldLoop(),clearInterval(t.heartbeat),t.Promise.resolve()}))()}yieldLoop(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new this.Promise((function(t,n){return setTimeout(t,e)}))}computePenalty(){var e;return null!=(e=this.storeOptions.penalty)?e:15*this.storeOptions.minTime||5e3}__updateSettings__(e){var t=this;return bm((function*(){return yield t.yieldLoop(),mm.overwrite(e,e,t.storeOptions),t._startHeartbeat(),t.instance._drainAll(t.computeCapacity()),!0}))()}__running__(){var e=this;return bm((function*(){return yield e.yieldLoop(),e._running}))()}__queued__(){var e=this;return bm((function*(){return yield e.yieldLoop(),e.instance.queued()}))()}__done__(){var e=this;return bm((function*(){return yield e.yieldLoop(),e._done}))()}__groupCheck__(e){var t=this;return bm((function*(){return yield t.yieldLoop(),t._nextRequest+t.timeout<e}))()}computeCapacity(){var e,t,n=this.storeOptions;return e=n.maxConcurrent,t=n.reservoir,null!=e&&null!=t?Math.min(e-this._running,t):null!=e?e-this._running:null!=t?t:null}conditionsCheck(e){var t;return null==(t=this.computeCapacity())||e<=t}__incrementReservoir__(e){var t=this;return bm((function*(){var n;return yield t.yieldLoop(),n=t.storeOptions.reservoir+=e,t.instance._drainAll(t.computeCapacity()),n}))()}__currentReservoir__(){var e=this;return bm((function*(){return yield e.yieldLoop(),e.storeOptions.reservoir}))()}isBlocked(e){return this._unblockTime>=e}check(e,t){return this.conditionsCheck(e)&&this._nextRequest-t<=0}__check__(e){var t=this;return bm((function*(){var n;return yield t.yieldLoop(),n=Date.now(),t.check(e,n)}))()}__register__(e,t,n){var r=this;return bm((function*(){var e,n;return yield r.yieldLoop(),e=Date.now(),r.conditionsCheck(t)?(r._running+=t,null!=r.storeOptions.reservoir&&(r.storeOptions.reservoir-=t),n=Math.max(r._nextRequest-e,0),r._nextRequest=e+n+r.storeOptions.minTime,{success:!0,wait:n,reservoir:r.storeOptions.reservoir}):{success:!1}}))()}strategyIsBlock(){return 3===this.storeOptions.strategy}__submit__(e,t){var n=this;return bm((function*(){var r,i,o;if(yield n.yieldLoop(),null!=n.storeOptions.maxConcurrent&&t>n.storeOptions.maxConcurrent)throw new pm("Impossible to add a job having a weight of ".concat(t," to a limiter having a maxConcurrent setting of ").concat(n.storeOptions.maxConcurrent));return i=Date.now(),o=null!=n.storeOptions.highWater&&e===n.storeOptions.highWater&&!n.check(t,i),(r=n.strategyIsBlock()&&(o||n.isBlocked(i)))&&(n._unblockTime=i+n.computePenalty(),n._nextRequest=n._unblockTime+n.storeOptions.minTime,n.instance._dropAllQueued()),{reachedHWM:o,blocked:r,strategy:n.storeOptions.strategy}}))()}__free__(e,t){var n=this;return bm((function*(){return yield n.yieldLoop(),n._running-=t,n._done+=t,n.instance._drainAll(n.computeCapacity()),{running:n._running}}))()}};var wm,Sm=gm,_m=Si(Object.freeze({__proto__:null,default:{}}));wm=dm();var Em,km,Pm=class{constructor(e){this.status=e,this._jobs={},this.counts=this.status.map((function(){return 0}))}next(e){var t,n;return n=(t=this._jobs[e])+1,null!=t&&n<this.status.length?(this.counts[t]--,this.counts[n]++,this._jobs[e]++):null!=t?(this.counts[t]--,delete this._jobs[e]):void 0}start(e){return this._jobs[e]=0,this.counts[0]++}remove(e){var t;return null!=(t=this._jobs[e])&&(this.counts[t]--,delete this._jobs[e]),null!=t}jobStatus(e){var t;return null!=(t=this.status[this._jobs[e]])?t:null}statusJobs(e){var t,n,r,i;if(null!=e){if((n=this.status.indexOf(e))<0)throw new wm("status must be one of ".concat(this.status.join(", ")));for(t in i=[],r=this._jobs)r[t]===n&&i.push(t);return i}return Object.keys(this._jobs)}statusCounts(){return this.counts.reduce(((e,t,n)=>(e[this.status[n]]=t,e)),{})}};function Am(e,t,n,r,i,o,s){try{var a=e[o](s),l=a.value}catch(e){return void n(e)}a.done?t(l):Promise.resolve(l).then(r,i)}function xm(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function s(e){Am(o,r,i,s,a,"next",e)}function a(e){Am(o,r,i,s,a,"throw",e)}s(void 0)}))}}Em=Zg,km=class{constructor(e,t){this.schedule=this.schedule.bind(this),this.name=e,this.Promise=t,this._running=0,this._queue=new Em}isEmpty(){return 0===this._queue.length}_tryToRun(){var e=this;return xm((function*(){var t,n,r,i,o,s,a;if(e._running<1&&e._queue.length>0){e._running++;var l=e._queue.shift();return a=l.task,t=l.args,o=l.resolve,i=l.reject,n=yield xm((function*(){try{return s=yield a(...t),function(){return o(s)}}catch(e){return r=e,function(){return i(r)}}}))(),e._running--,e._tryToRun(),n()}}))()}schedule(e){for(var t,n,r,i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];return r=n=null,t=new this.Promise((function(e,t){return r=e,n=t})),this._queue.push({task:e,args:o,resolve:r,reject:n}),this._tryToRun(),t}};var Im,Om,Tm,Rm,Cm,Nm,jm,Dm=km,Fm={version:"2.19.5"},Lm={},Mm={"blacklist_client.lua":"local blacklist = ARGV[num_static_argv + 1]\n\nif redis.call('zscore', client_last_seen_key, blacklist) then\n  redis.call('zadd', client_last_seen_key, 0, blacklist)\nend\n\n\nreturn {}\n","check.lua":"local weight = tonumber(ARGV[num_static_argv + 1])\n\nlocal capacity = process_tick(now, false)['capacity']\nlocal nextRequest = tonumber(redis.call('hget', settings_key, 'nextRequest'))\n\nreturn conditions_check(capacity, weight) and nextRequest - now <= 0\n","conditions_check.lua":"local conditions_check = function (capacity, weight)\n  return capacity == nil or weight <= capacity\nend\n","current_reservoir.lua":"return process_tick(now, false)['reservoir']\n","done.lua":"process_tick(now, false)\n\nreturn tonumber(redis.call('hget', settings_key, 'done'))\n","free.lua":"local index = ARGV[num_static_argv + 1]\n\nredis.call('zadd', job_expirations_key, 0, index)\n\nreturn process_tick(now, false)['running']\n","get_time.lua":"redis.replicate_commands()\n\nlocal get_time = function ()\n  local time = redis.call('time')\n\n  return tonumber(time[1]..string.sub(time[2], 1, 3))\nend\n","group_check.lua":"return not (redis.call('exists', settings_key) == 1)\n","heartbeat.lua":"process_tick(now, true)\n","increment_reservoir.lua":"local incr = tonumber(ARGV[num_static_argv + 1])\n\nredis.call('hincrby', settings_key, 'reservoir', incr)\n\nlocal reservoir = process_tick(now, true)['reservoir']\n\nlocal groupTimeout = tonumber(redis.call('hget', settings_key, 'groupTimeout'))\nrefresh_expiration(0, 0, groupTimeout)\n\nreturn reservoir\n","init.lua":"local clear = tonumber(ARGV[num_static_argv + 1])\nlocal limiter_version = ARGV[num_static_argv + 2]\nlocal num_local_argv = num_static_argv + 2\n\nif clear == 1 then\n  redis.call('del', unpack(KEYS))\nend\n\nif redis.call('exists', settings_key) == 0 then\n  -- Create\n  local args = {'hmset', settings_key}\n\n  for i = num_local_argv + 1, #ARGV do\n    table.insert(args, ARGV[i])\n  end\n\n  redis.call(unpack(args))\n  redis.call('hmset', settings_key,\n    'nextRequest', now,\n    'lastReservoirRefresh', now,\n    'lastReservoirIncrease', now,\n    'running', 0,\n    'done', 0,\n    'unblockTime', 0,\n    'capacityPriorityCounter', 0\n  )\n\nelse\n  -- Apply migrations\n  local settings = redis.call('hmget', settings_key,\n    'id',\n    'version'\n  )\n  local id = settings[1]\n  local current_version = settings[2]\n\n  if current_version ~= limiter_version then\n    local version_digits = {}\n    for k, v in string.gmatch(current_version, \"([^.]+)\") do\n      table.insert(version_digits, tonumber(k))\n    end\n\n    -- 2.10.0\n    if version_digits[2] < 10 then\n      redis.call('hsetnx', settings_key, 'reservoirRefreshInterval', '')\n      redis.call('hsetnx', settings_key, 'reservoirRefreshAmount', '')\n      redis.call('hsetnx', settings_key, 'lastReservoirRefresh', '')\n      redis.call('hsetnx', settings_key, 'done', 0)\n      redis.call('hset', settings_key, 'version', '2.10.0')\n    end\n\n    -- 2.11.1\n    if version_digits[2] < 11 or (version_digits[2] == 11 and version_digits[3] < 1) then\n      if redis.call('hstrlen', settings_key, 'lastReservoirRefresh') == 0 then\n        redis.call('hmset', settings_key,\n          'lastReservoirRefresh', now,\n          'version', '2.11.1'\n        )\n      end\n    end\n\n    -- 2.14.0\n    if version_digits[2] < 14 then\n      local old_running_key = 'b_'..id..'_running'\n      local old_executing_key = 'b_'..id..'_executing'\n\n      if redis.call('exists', old_running_key) == 1 then\n        redis.call('rename', old_running_key, job_weights_key)\n      end\n      if redis.call('exists', old_executing_key) == 1 then\n        redis.call('rename', old_executing_key, job_expirations_key)\n      end\n      redis.call('hset', settings_key, 'version', '2.14.0')\n    end\n\n    -- 2.15.2\n    if version_digits[2] < 15 or (version_digits[2] == 15 and version_digits[3] < 2) then\n      redis.call('hsetnx', settings_key, 'capacityPriorityCounter', 0)\n      redis.call('hset', settings_key, 'version', '2.15.2')\n    end\n\n    -- 2.17.0\n    if version_digits[2] < 17 then\n      redis.call('hsetnx', settings_key, 'clientTimeout', 10000)\n      redis.call('hset', settings_key, 'version', '2.17.0')\n    end\n\n    -- 2.18.0\n    if version_digits[2] < 18 then\n      redis.call('hsetnx', settings_key, 'reservoirIncreaseInterval', '')\n      redis.call('hsetnx', settings_key, 'reservoirIncreaseAmount', '')\n      redis.call('hsetnx', settings_key, 'reservoirIncreaseMaximum', '')\n      redis.call('hsetnx', settings_key, 'lastReservoirIncrease', now)\n      redis.call('hset', settings_key, 'version', '2.18.0')\n    end\n\n  end\n\n  process_tick(now, false)\nend\n\nlocal groupTimeout = tonumber(redis.call('hget', settings_key, 'groupTimeout'))\nrefresh_expiration(0, 0, groupTimeout)\n\nreturn {}\n","process_tick.lua":"local process_tick = function (now, always_publish)\n\n  local compute_capacity = function (maxConcurrent, running, reservoir)\n    if maxConcurrent ~= nil and reservoir ~= nil then\n      return math.min((maxConcurrent - running), reservoir)\n    elseif maxConcurrent ~= nil then\n      return maxConcurrent - running\n    elseif reservoir ~= nil then\n      return reservoir\n    else\n      return nil\n    end\n  end\n\n  local settings = redis.call('hmget', settings_key,\n    'id',\n    'maxConcurrent',\n    'running',\n    'reservoir',\n    'reservoirRefreshInterval',\n    'reservoirRefreshAmount',\n    'lastReservoirRefresh',\n    'reservoirIncreaseInterval',\n    'reservoirIncreaseAmount',\n    'reservoirIncreaseMaximum',\n    'lastReservoirIncrease',\n    'capacityPriorityCounter',\n    'clientTimeout'\n  )\n  local id = settings[1]\n  local maxConcurrent = tonumber(settings[2])\n  local running = tonumber(settings[3])\n  local reservoir = tonumber(settings[4])\n  local reservoirRefreshInterval = tonumber(settings[5])\n  local reservoirRefreshAmount = tonumber(settings[6])\n  local lastReservoirRefresh = tonumber(settings[7])\n  local reservoirIncreaseInterval = tonumber(settings[8])\n  local reservoirIncreaseAmount = tonumber(settings[9])\n  local reservoirIncreaseMaximum = tonumber(settings[10])\n  local lastReservoirIncrease = tonumber(settings[11])\n  local capacityPriorityCounter = tonumber(settings[12])\n  local clientTimeout = tonumber(settings[13])\n\n  local initial_capacity = compute_capacity(maxConcurrent, running, reservoir)\n\n  --\n  -- Process 'running' changes\n  --\n  local expired = redis.call('zrangebyscore', job_expirations_key, '-inf', '('..now)\n\n  if #expired > 0 then\n    redis.call('zremrangebyscore', job_expirations_key, '-inf', '('..now)\n\n    local flush_batch = function (batch, acc)\n      local weights = redis.call('hmget', job_weights_key, unpack(batch))\n                      redis.call('hdel',  job_weights_key, unpack(batch))\n      local clients = redis.call('hmget', job_clients_key, unpack(batch))\n                      redis.call('hdel',  job_clients_key, unpack(batch))\n\n      -- Calculate sum of removed weights\n      for i = 1, #weights do\n        acc['total'] = acc['total'] + (tonumber(weights[i]) or 0)\n      end\n\n      -- Calculate sum of removed weights by client\n      local client_weights = {}\n      for i = 1, #clients do\n        local removed = tonumber(weights[i]) or 0\n        if removed > 0 then\n          acc['client_weights'][clients[i]] = (acc['client_weights'][clients[i]] or 0) + removed\n        end\n      end\n    end\n\n    local acc = {\n      ['total'] = 0,\n      ['client_weights'] = {}\n    }\n    local batch_size = 1000\n\n    -- Compute changes to Zsets and apply changes to Hashes\n    for i = 1, #expired, batch_size do\n      local batch = {}\n      for j = i, math.min(i + batch_size - 1, #expired) do\n        table.insert(batch, expired[j])\n      end\n\n      flush_batch(batch, acc)\n    end\n\n    -- Apply changes to Zsets\n    if acc['total'] > 0 then\n      redis.call('hincrby', settings_key, 'done', acc['total'])\n      running = tonumber(redis.call('hincrby', settings_key, 'running', -acc['total']))\n    end\n\n    for client, weight in pairs(acc['client_weights']) do\n      redis.call('zincrby', client_running_key, -weight, client)\n    end\n  end\n\n  --\n  -- Process 'reservoir' changes\n  --\n  local reservoirRefreshActive = reservoirRefreshInterval ~= nil and reservoirRefreshAmount ~= nil\n  if reservoirRefreshActive and now >= lastReservoirRefresh + reservoirRefreshInterval then\n    reservoir = reservoirRefreshAmount\n    redis.call('hmset', settings_key,\n      'reservoir', reservoir,\n      'lastReservoirRefresh', now\n    )\n  end\n\n  local reservoirIncreaseActive = reservoirIncreaseInterval ~= nil and reservoirIncreaseAmount ~= nil\n  if reservoirIncreaseActive and now >= lastReservoirIncrease + reservoirIncreaseInterval then\n    local num_intervals = math.floor((now - lastReservoirIncrease) / reservoirIncreaseInterval)\n    local incr = reservoirIncreaseAmount * num_intervals\n    if reservoirIncreaseMaximum ~= nil then\n      incr = math.min(incr, reservoirIncreaseMaximum - (reservoir or 0))\n    end\n    if incr > 0 then\n      reservoir = (reservoir or 0) + incr\n    end\n    redis.call('hmset', settings_key,\n      'reservoir', reservoir,\n      'lastReservoirIncrease', lastReservoirIncrease + (num_intervals * reservoirIncreaseInterval)\n    )\n  end\n\n  --\n  -- Clear unresponsive clients\n  --\n  local unresponsive = redis.call('zrangebyscore', client_last_seen_key, '-inf', (now - clientTimeout))\n  local unresponsive_lookup = {}\n  local terminated_clients = {}\n  for i = 1, #unresponsive do\n    unresponsive_lookup[unresponsive[i]] = true\n    if tonumber(redis.call('zscore', client_running_key, unresponsive[i])) == 0 then\n      table.insert(terminated_clients, unresponsive[i])\n    end\n  end\n  if #terminated_clients > 0 then\n    redis.call('zrem', client_running_key,         unpack(terminated_clients))\n    redis.call('hdel', client_num_queued_key,      unpack(terminated_clients))\n    redis.call('zrem', client_last_registered_key, unpack(terminated_clients))\n    redis.call('zrem', client_last_seen_key,       unpack(terminated_clients))\n  end\n\n  --\n  -- Broadcast capacity changes\n  --\n  local final_capacity = compute_capacity(maxConcurrent, running, reservoir)\n\n  if always_publish or (initial_capacity ~= nil and final_capacity == nil) then\n    -- always_publish or was not unlimited, now unlimited\n    redis.call('publish', 'b_'..id, 'capacity:'..(final_capacity or ''))\n\n  elseif initial_capacity ~= nil and final_capacity ~= nil and final_capacity > initial_capacity then\n    -- capacity was increased\n    -- send the capacity message to the limiter having the lowest number of running jobs\n    -- the tiebreaker is the limiter having not registered a job in the longest time\n\n    local lowest_concurrency_value = nil\n    local lowest_concurrency_clients = {}\n    local lowest_concurrency_last_registered = {}\n    local client_concurrencies = redis.call('zrange', client_running_key, 0, -1, 'withscores')\n\n    for i = 1, #client_concurrencies, 2 do\n      local client = client_concurrencies[i]\n      local concurrency = tonumber(client_concurrencies[i+1])\n\n      if (\n        lowest_concurrency_value == nil or lowest_concurrency_value == concurrency\n      ) and (\n        not unresponsive_lookup[client]\n      ) and (\n        tonumber(redis.call('hget', client_num_queued_key, client)) > 0\n      ) then\n        lowest_concurrency_value = concurrency\n        table.insert(lowest_concurrency_clients, client)\n        local last_registered = tonumber(redis.call('zscore', client_last_registered_key, client))\n        table.insert(lowest_concurrency_last_registered, last_registered)\n      end\n    end\n\n    if #lowest_concurrency_clients > 0 then\n      local position = 1\n      local earliest = lowest_concurrency_last_registered[1]\n\n      for i,v in ipairs(lowest_concurrency_last_registered) do\n        if v < earliest then\n          position = i\n          earliest = v\n        end\n      end\n\n      local next_client = lowest_concurrency_clients[position]\n      redis.call('publish', 'b_'..id,\n        'capacity-priority:'..(final_capacity or '')..\n        ':'..next_client..\n        ':'..capacityPriorityCounter\n      )\n      redis.call('hincrby', settings_key, 'capacityPriorityCounter', '1')\n    else\n      redis.call('publish', 'b_'..id, 'capacity:'..(final_capacity or ''))\n    end\n  end\n\n  return {\n    ['capacity'] = final_capacity,\n    ['running'] = running,\n    ['reservoir'] = reservoir\n  }\nend\n","queued.lua":"local clientTimeout = tonumber(redis.call('hget', settings_key, 'clientTimeout'))\nlocal valid_clients = redis.call('zrangebyscore', client_last_seen_key, (now - clientTimeout), 'inf')\nlocal client_queued = redis.call('hmget', client_num_queued_key, unpack(valid_clients))\n\nlocal sum = 0\nfor i = 1, #client_queued do\n  sum = sum + tonumber(client_queued[i])\nend\n\nreturn sum\n","refresh_expiration.lua":"local refresh_expiration = function (now, nextRequest, groupTimeout)\n\n  if groupTimeout ~= nil then\n    local ttl = (nextRequest + groupTimeout) - now\n\n    for i = 1, #KEYS do\n      redis.call('pexpire', KEYS[i], ttl)\n    end\n  end\n\nend\n","refs.lua":"local settings_key = KEYS[1]\nlocal job_weights_key = KEYS[2]\nlocal job_expirations_key = KEYS[3]\nlocal job_clients_key = KEYS[4]\nlocal client_running_key = KEYS[5]\nlocal client_num_queued_key = KEYS[6]\nlocal client_last_registered_key = KEYS[7]\nlocal client_last_seen_key = KEYS[8]\n\nlocal now = tonumber(ARGV[1])\nlocal client = ARGV[2]\n\nlocal num_static_argv = 2\n","register.lua":"local index = ARGV[num_static_argv + 1]\nlocal weight = tonumber(ARGV[num_static_argv + 2])\nlocal expiration = tonumber(ARGV[num_static_argv + 3])\n\nlocal state = process_tick(now, false)\nlocal capacity = state['capacity']\nlocal reservoir = state['reservoir']\n\nlocal settings = redis.call('hmget', settings_key,\n  'nextRequest',\n  'minTime',\n  'groupTimeout'\n)\nlocal nextRequest = tonumber(settings[1])\nlocal minTime = tonumber(settings[2])\nlocal groupTimeout = tonumber(settings[3])\n\nif conditions_check(capacity, weight) then\n\n  redis.call('hincrby', settings_key, 'running', weight)\n  redis.call('hset', job_weights_key, index, weight)\n  if expiration ~= nil then\n    redis.call('zadd', job_expirations_key, now + expiration, index)\n  end\n  redis.call('hset', job_clients_key, index, client)\n  redis.call('zincrby', client_running_key, weight, client)\n  redis.call('hincrby', client_num_queued_key, client, -1)\n  redis.call('zadd', client_last_registered_key, now, client)\n\n  local wait = math.max(nextRequest - now, 0)\n  local newNextRequest = now + wait + minTime\n\n  if reservoir == nil then\n    redis.call('hset', settings_key,\n      'nextRequest', newNextRequest\n    )\n  else\n    reservoir = reservoir - weight\n    redis.call('hmset', settings_key,\n      'reservoir', reservoir,\n      'nextRequest', newNextRequest\n    )\n  end\n\n  refresh_expiration(now, newNextRequest, groupTimeout)\n\n  return {true, wait, reservoir}\n\nelse\n  return {false}\nend\n","register_client.lua":"local queued = tonumber(ARGV[num_static_argv + 1])\n\n-- Could have been re-registered concurrently\nif not redis.call('zscore', client_last_seen_key, client) then\n  redis.call('zadd', client_running_key, 0, client)\n  redis.call('hset', client_num_queued_key, client, queued)\n  redis.call('zadd', client_last_registered_key, 0, client)\nend\n\nredis.call('zadd', client_last_seen_key, now, client)\n\nreturn {}\n","running.lua":"return process_tick(now, false)['running']\n","submit.lua":"local queueLength = tonumber(ARGV[num_static_argv + 1])\nlocal weight = tonumber(ARGV[num_static_argv + 2])\n\nlocal capacity = process_tick(now, false)['capacity']\n\nlocal settings = redis.call('hmget', settings_key,\n  'id',\n  'maxConcurrent',\n  'highWater',\n  'nextRequest',\n  'strategy',\n  'unblockTime',\n  'penalty',\n  'minTime',\n  'groupTimeout'\n)\nlocal id = settings[1]\nlocal maxConcurrent = tonumber(settings[2])\nlocal highWater = tonumber(settings[3])\nlocal nextRequest = tonumber(settings[4])\nlocal strategy = tonumber(settings[5])\nlocal unblockTime = tonumber(settings[6])\nlocal penalty = tonumber(settings[7])\nlocal minTime = tonumber(settings[8])\nlocal groupTimeout = tonumber(settings[9])\n\nif maxConcurrent ~= nil and weight > maxConcurrent then\n  return redis.error_reply('OVERWEIGHT:'..weight..':'..maxConcurrent)\nend\n\nlocal reachedHWM = (highWater ~= nil and queueLength == highWater\n  and not (\n    conditions_check(capacity, weight)\n    and nextRequest - now <= 0\n  )\n)\n\nlocal blocked = strategy == 3 and (reachedHWM or unblockTime >= now)\n\nif blocked then\n  local computedPenalty = penalty\n  if computedPenalty == nil then\n    if minTime == 0 then\n      computedPenalty = 5000\n    else\n      computedPenalty = 15 * minTime\n    end\n  end\n\n  local newNextRequest = now + computedPenalty + minTime\n\n  redis.call('hmset', settings_key,\n    'unblockTime', now + computedPenalty,\n    'nextRequest', newNextRequest\n  )\n\n  local clients_queued_reset = redis.call('hkeys', client_num_queued_key)\n  local queued_reset = {}\n  for i = 1, #clients_queued_reset do\n    table.insert(queued_reset, clients_queued_reset[i])\n    table.insert(queued_reset, 0)\n  end\n  redis.call('hmset', client_num_queued_key, unpack(queued_reset))\n\n  redis.call('publish', 'b_'..id, 'blocked:')\n\n  refresh_expiration(now, newNextRequest, groupTimeout)\nend\n\nif not blocked and not reachedHWM then\n  redis.call('hincrby', client_num_queued_key, client, 1)\nend\n\nreturn {reachedHWM, blocked, strategy}\n","update_settings.lua":"local args = {'hmset', settings_key}\n\nfor i = num_static_argv + 1, #ARGV do\n  table.insert(args, ARGV[i])\nend\n\nredis.call(unpack(args))\n\nprocess_tick(now, true)\n\nlocal groupTimeout = tonumber(redis.call('hget', settings_key, 'groupTimeout'))\nrefresh_expiration(0, 0, groupTimeout)\n\nreturn {}\n","validate_client.lua":"if not redis.call('zscore', client_last_seen_key, client) then\n  return redis.error_reply('UNKNOWN_CLIENT')\nend\n\nredis.call('zadd', client_last_seen_key, now, client)\n","validate_keys.lua":"if not (redis.call('exists', settings_key) == 1) then\n  return redis.error_reply('SETTINGS_KEY_NOT_FOUND')\nend\n"};function Bm(){if(Tm)return Om;function e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function t(e,t,n,r,i,o,s){try{var a=e[o](s),l=a.value}catch(e){return void n(e)}a.done?t(l):Promise.resolve(l).then(r,i)}function n(e){return function(){var n=this,r=arguments;return new Promise((function(i,o){var s=e.apply(n,r);function a(e){t(s,i,o,a,l,"next",e)}function l(e){t(s,i,o,a,l,"throw",e)}a(void 0)}))}}var r,i,o,s,a,l;return Tm=1,l=Xg,r=im,s=_m,o=_m,Im||(Im=1,function(e){var t,n,r;t={refs:(n=Mm)["refs.lua"],validate_keys:n["validate_keys.lua"],validate_client:n["validate_client.lua"],refresh_expiration:n["refresh_expiration.lua"],process_tick:n["process_tick.lua"],conditions_check:n["conditions_check.lua"],get_time:n["get_time.lua"]},e.allKeys=function(e){return["b_".concat(e,"_settings"),"b_".concat(e,"_job_weights"),"b_".concat(e,"_job_expirations"),"b_".concat(e,"_job_clients"),"b_".concat(e,"_client_running"),"b_".concat(e,"_client_num_queued"),"b_".concat(e,"_client_last_registered"),"b_".concat(e,"_client_last_seen")]},r={init:{keys:e.allKeys,headers:["process_tick"],refresh_expiration:!0,code:n["init.lua"]},group_check:{keys:e.allKeys,headers:[],refresh_expiration:!1,code:n["group_check.lua"]},register_client:{keys:e.allKeys,headers:["validate_keys"],refresh_expiration:!1,code:n["register_client.lua"]},blacklist_client:{keys:e.allKeys,headers:["validate_keys","validate_client"],refresh_expiration:!1,code:n["blacklist_client.lua"]},heartbeat:{keys:e.allKeys,headers:["validate_keys","validate_client","process_tick"],refresh_expiration:!1,code:n["heartbeat.lua"]},update_settings:{keys:e.allKeys,headers:["validate_keys","validate_client","process_tick"],refresh_expiration:!0,code:n["update_settings.lua"]},running:{keys:e.allKeys,headers:["validate_keys","validate_client","process_tick"],refresh_expiration:!1,code:n["running.lua"]},queued:{keys:e.allKeys,headers:["validate_keys","validate_client"],refresh_expiration:!1,code:n["queued.lua"]},done:{keys:e.allKeys,headers:["validate_keys","validate_client","process_tick"],refresh_expiration:!1,code:n["done.lua"]},check:{keys:e.allKeys,headers:["validate_keys","validate_client","process_tick","conditions_check"],refresh_expiration:!1,code:n["check.lua"]},submit:{keys:e.allKeys,headers:["validate_keys","validate_client","process_tick","conditions_check"],refresh_expiration:!0,code:n["submit.lua"]},register:{keys:e.allKeys,headers:["validate_keys","validate_client","process_tick","conditions_check"],refresh_expiration:!0,code:n["register.lua"]},free:{keys:e.allKeys,headers:["validate_keys","validate_client","process_tick"],refresh_expiration:!0,code:n["free.lua"]},current_reservoir:{keys:e.allKeys,headers:["validate_keys","validate_client","process_tick"],refresh_expiration:!1,code:n["current_reservoir.lua"]},increment_reservoir:{keys:e.allKeys,headers:["validate_keys","validate_client","process_tick"],refresh_expiration:!0,code:n["increment_reservoir.lua"]}},e.names=Object.keys(r),e.keys=function(e,t){return r[e].keys(t)},e.payload=function(e){var n;return n=r[e],Array.prototype.concat(t.refs,n.headers.map((function(e){return t[e]})),n.refresh_expiration?t.refresh_expiration:"",n.code).join("\n")}}(Lm)),a=Lm,i=function(){class t{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.deleteKey=this.deleteKey.bind(this),this.limiterOptions=e,l.load(this.limiterOptions,this.defaults,this),this.Events=new r(this),this.instances={},this.Bottleneck=Um(),this._startAutoCleanup(),this.sharedConnection=null!=this.connection,null==this.connection&&("redis"===this.limiterOptions.datastore?this.connection=new s(Object.assign({},this.limiterOptions,{Events:this.Events})):"ioredis"===this.limiterOptions.datastore&&(this.connection=new o(Object.assign({},this.limiterOptions,{Events:this.Events}))))}key(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";var t;return null!=(t=this.instances[e])?t:(()=>{var t;return t=this.instances[e]=new this.Bottleneck(Object.assign(this.limiterOptions,{id:"".concat(this.id,"-").concat(e),timeout:this.timeout,connection:this.connection})),this.Events.trigger("created",t,e),t})()}deleteKey(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";var t=this;return n((function*(){var n,r;return r=t.instances[e],t.connection&&(n=yield t.connection.__runCommand__(["del",...a.allKeys("".concat(t.id,"-").concat(e))])),null!=r&&(delete t.instances[e],yield r.disconnect()),null!=r||n>0}))()}limiters(){var e,t,n,r;for(e in n=[],t=this.instances)r=t[e],n.push({key:e,limiter:r});return n}keys(){return Object.keys(this.instances)}clusterKeys(){var t=this;return n((function*(){var n,r,i,o,s,a,l;if(null==t.connection)return t.Promise.resolve(t.keys());for(s=[],n=null,l="b_".concat(t.id,"-").length;0!==n;){var c=e(yield t.connection.__runCommand__(["scan",null!=n?n:0,"match","b_".concat(t.id,"-*_settings"),"count",1e4]),2);for(n=~~c[0],i=0,a=(r=c[1]).length;i<a;i++)o=r[i],s.push(o.slice(l,-9))}return s}))()}_startAutoCleanup(){var e,t=this;return clearInterval(this.interval),"function"==typeof(e=this.interval=setInterval(n((function*(){var e,n,r,i,o,s;for(n in o=Date.now(),i=[],r=t.instances){s=r[n];try{(yield s._store.__groupCheck__(o))?i.push(t.deleteKey(n)):i.push(void 0)}catch(t){e=t,i.push(s.Events.trigger("error",e))}}return i})),this.timeout/2)).unref?e.unref():void 0}updateSettings(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(l.overwrite(e,this.defaults,this),l.overwrite(e,e,this.limiterOptions),null!=e.timeout)return this._startAutoCleanup()}disconnect(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];var t;if(!this.sharedConnection)return null!=(t=this.connection)?t.disconnect(e):void 0}}return t.prototype.defaults={timeout:3e5,connection:null,Promise:Promise,id:"group-key"},t}.call(void 0),Om=i}function Um(){if(jm)return Nm;function e(e,t){return r(e)||function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}(e,t)||n()}function t(e){return r(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||n()}function n(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function r(e){if(Array.isArray(e))return e}function i(e,t,n,r,i,o,s){try{var a=e[o](s),l=a.value}catch(e){return void n(e)}a.done?t(l):Promise.resolve(l).then(r,i)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var s=e.apply(t,n);function a(e){i(s,r,o,a,l,"next",e)}function l(e){i(s,r,o,a,l,"throw",e)}a(void 0)}))}}jm=1;var s,a,l,c,u,d,h,f,p,g=[].splice;return p=Xg,u=um,l=vm,c=Sm,d=_m,a=im,h=Pm,f=Dm,s=function(){class n{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var t,r,i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];this._addToQueue=this._addToQueue.bind(this),this._validateOptions(e,o),p.load(e,this.instanceDefaults,this),this._queues=new u(10),this._scheduled={},this._states=new h(["RECEIVED","QUEUED","RUNNING","EXECUTING"].concat(this.trackDoneStatus?["DONE"]:[])),this._limiter=null,this.Events=new a(this),this._submitLock=new f("submit",this.Promise),this._registerLock=new f("register",this.Promise),r=p.load(e,this.storeDefaults,{}),this._store=function(){if("redis"===this.datastore||"ioredis"===this.datastore||null!=this.connection)return t=p.load(e,this.redisStoreDefaults,{}),new d(this,r,t);if("local"===this.datastore)return t=p.load(e,this.localStoreDefaults,{}),new c(this,r,t);throw new n.prototype.BottleneckError("Invalid datastore type: ".concat(this.datastore))}.call(this),this._queues.on("leftzero",(()=>{var e;return null!=(e=this._store.heartbeat)&&"function"==typeof e.ref?e.ref():void 0})),this._queues.on("zero",(()=>{var e;return null!=(e=this._store.heartbeat)&&"function"==typeof e.unref?e.unref():void 0}))}_validateOptions(e,t){if(null==e||"object"!=typeof e||0!==t.length)throw new n.prototype.BottleneckError("Bottleneck v2 takes a single object argument. Refer to https://github.com/SGrondin/bottleneck#upgrading-to-v2 if you're upgrading from Bottleneck v1.")}ready(){return this._store.ready}clients(){return this._store.clients}channel(){return"b_".concat(this.id)}channel_client(){return"b_".concat(this.id,"_").concat(this._store.clientId)}publish(e){return this._store.__publish__(e)}disconnect(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._store.__disconnect__(e)}chain(e){return this._limiter=e,this}queued(e){return this._queues.queued(e)}clusterQueued(){return this._store.__queued__()}empty(){return 0===this.queued()&&this._submitLock.isEmpty()}running(){return this._store.__running__()}done(){return this._store.__done__()}jobStatus(e){return this._states.jobStatus(e)}jobs(e){return this._states.statusJobs(e)}counts(){return this._states.statusCounts()}_randomIndex(){return Math.random().toString(36).slice(2)}check(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this._store.__check__(e)}_clearGlobalState(e){return null!=this._scheduled[e]&&(clearTimeout(this._scheduled[e].expiration),delete this._scheduled[e],!0)}_free(e,t,n,r){var i=this;return o((function*(){var t,o;try{if(o=(yield i._store.__free__(e,n.weight)).running,i.Events.trigger("debug","Freed ".concat(n.id),r),0===o&&i.empty())return i.Events.trigger("idle")}catch(e){return t=e,i.Events.trigger("error",t)}}))()}_run(e,t,n){var r,i,o;return t.doRun(),r=this._clearGlobalState.bind(this,e),o=this._run.bind(this,e,t),i=this._free.bind(this,e,t),this._scheduled[e]={timeout:setTimeout((()=>t.doExecute(this._limiter,r,o,i)),n),expiration:null!=t.options.expiration?setTimeout((function(){return t.doExpire(r,o,i)}),n+t.options.expiration):void 0,job:t}}_drainOne(e){return this._registerLock.schedule((()=>{var t,n,r,i,o;if(0===this.queued())return this.Promise.resolve(null);o=this._queues.getFirst();var s=r=o.first();return i=s.options,t=s.args,null!=e&&i.weight>e?this.Promise.resolve(null):(this.Events.trigger("debug","Draining ".concat(i.id),{args:t,options:i}),n=this._randomIndex(),this._store.__register__(n,i.weight,i.expiration).then((e=>{let{success:s,wait:a,reservoir:l}=e;var c;return this.Events.trigger("debug","Drained ".concat(i.id),{success:s,args:t,options:i}),s?(o.shift(),(c=this.empty())&&this.Events.trigger("empty"),0===l&&this.Events.trigger("depleted",c),this._run(n,r,a),this.Promise.resolve(i.weight)):this.Promise.resolve(null)})))}))}_drainAll(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._drainOne(e).then((n=>{var r;return null!=n?(r=null!=e?e-n:e,this._drainAll(r,t+n)):this.Promise.resolve(t)})).catch((e=>this.Events.trigger("error",e)))}_dropAllQueued(e){return this._queues.shiftAll((function(t){return t.doDrop({message:e})}))}stop(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t,r;return e=p.load(e,this.stopDefaults),r=e=>{var t;return t=()=>{var t;return(t=this._states.counts)[0]+t[1]+t[2]+t[3]===e},new this.Promise(((e,n)=>t()?e():this.on("done",(()=>{if(t())return this.removeAllListeners("done"),e()}))))},t=e.dropWaitingJobs?(this._run=function(t,n){return n.doDrop({message:e.dropErrorMessage})},this._drainOne=()=>this.Promise.resolve(null),this._registerLock.schedule((()=>this._submitLock.schedule((()=>{var t,n,i;for(t in n=this._scheduled)i=n[t],"RUNNING"===this.jobStatus(i.job.options.id)&&(clearTimeout(i.timeout),clearTimeout(i.expiration),i.job.doDrop({message:e.dropErrorMessage}));return this._dropAllQueued(e.dropErrorMessage),r(0)}))))):this.schedule({priority:9,weight:0},(()=>r(1))),this._receive=function(t){return t._reject(new n.prototype.BottleneckError(e.enqueueErrorMessage))},this.stop=()=>this.Promise.reject(new n.prototype.BottleneckError("stop() has already been called")),t}_addToQueue(e){var t=this;return o((function*(){var r,i,o,s,a,l,c;r=e.args,s=e.options;try{var u=yield t._store.__submit__(t.queued(),s.weight);a=u.reachedHWM,i=u.blocked,c=u.strategy}catch(i){return o=i,t.Events.trigger("debug","Could not queue ".concat(s.id),{args:r,options:s,error:o}),e.doDrop({error:o}),!1}return i?(e.doDrop(),!0):a&&(null!=(l=c===n.prototype.strategy.LEAK?t._queues.shiftLastFrom(s.priority):c===n.prototype.strategy.OVERFLOW_PRIORITY?t._queues.shiftLastFrom(s.priority+1):c===n.prototype.strategy.OVERFLOW?e:void 0)&&l.doDrop(),null==l||c===n.prototype.strategy.OVERFLOW)?(null==l&&e.doDrop(),a):(e.doQueue(a,i),t._queues.push(e),yield t._drainAll(),a)}))()}_receive(e){return null!=this._states.jobStatus(e.options.id)?(e._reject(new n.prototype.BottleneckError("A job with the same id already exists (id=".concat(e.options.id,")"))),!1):(e.doReceive(),this._submitLock.schedule(this._addToQueue,e))}submit(){for(var n,r,i,o,s,a,c,u,d,h=this,f=arguments.length,m=new Array(f),v=0;v<f;v++)m[v]=arguments[v];return"function"==typeof m[0]?(a=t(m),r=a[0],m=a.slice(1),c=e(g.call(m,-1),1),n=c[0],o=p.load({},this.jobDefaults)):(o=(u=t(m))[0],r=u[1],m=u.slice(2),d=e(g.call(m,-1),1),n=d[0],o=p.load(o,this.jobDefaults)),s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new h.Promise((function(e,n){return r(...t,(function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return(null!=r[0]?n:e)(r)}))}))},(i=new l(s,m,o,this.jobDefaults,this.rejectOnDrop,this.Events,this._states,this.Promise)).promise.then((function(e){return"function"==typeof n?n(...e):void 0})).catch((function(e){return Array.isArray(e)?"function"==typeof n?n(...e):void 0:"function"==typeof n?n(e):void 0})),this._receive(i)}schedule(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i,o,s;if("function"==typeof n[0]){var a=t(n);s=a[0],n=a.slice(1),o={}}else{var c=t(n);o=c[0],s=c[1],n=c.slice(2)}return i=new l(s,n,o,this.jobDefaults,this.rejectOnDrop,this.Events,this._states,this.Promise),this._receive(i),i.promise}wrap(e){var t,n;return t=this.schedule.bind(this),(n=function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t(e.bind(this),...r)}).withOptions=function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return t(n,e,...i)},n}updateSettings(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=this;return o((function*(){return yield t._store.__updateSettings__(p.overwrite(e,t.storeDefaults)),p.overwrite(e,t.instanceDefaults,t),t}))()}currentReservoir(){return this._store.__currentReservoir__()}incrementReservoir(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this._store.__incrementReservoir__(e)}}return n.default=n,n.Events=a,n.version=n.prototype.version=Fm.version,n.strategy=n.prototype.strategy={LEAK:1,OVERFLOW:2,OVERFLOW_PRIORITY:4,BLOCK:3},n.BottleneckError=n.prototype.BottleneckError=dm(),n.Group=n.prototype.Group=Bm(),n.RedisConnection=n.prototype.RedisConnection=_m,n.IORedisConnection=n.prototype.IORedisConnection=_m,n.Batcher=n.prototype.Batcher=function(){return Cm?Rm:(Cm=1,n=Xg,t=im,e=function(){class e{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=e,n.load(this.options,this.defaults,this),this.Events=new t(this),this._arr=[],this._resetPromise(),this._lastFlush=Date.now()}_resetPromise(){return this._promise=new this.Promise(((e,t)=>this._resolve=e))}_flush(){return clearTimeout(this._timeout),this._lastFlush=Date.now(),this._resolve(),this.Events.trigger("batch",this._arr),this._arr=[],this._resetPromise()}add(e){var t;return this._arr.push(e),t=this._promise,this._arr.length===this.maxSize?this._flush():null!=this.maxTime&&1===this._arr.length&&(this._timeout=setTimeout((()=>this._flush()),this.maxTime)),t}}return e.prototype.defaults={maxTime:null,maxSize:null,Promise:Promise},e}.call(void 0),Rm=e);var e,t,n}(),n.prototype.jobDefaults={priority:5,weight:1,expiration:null,id:"<no-id>"},n.prototype.storeDefaults={maxConcurrent:null,minTime:0,highWater:null,strategy:n.prototype.strategy.LEAK,penalty:null,reservoir:null,reservoirRefreshInterval:null,reservoirRefreshAmount:null,reservoirIncreaseInterval:null,reservoirIncreaseAmount:null,reservoirIncreaseMaximum:null},n.prototype.localStoreDefaults={Promise:Promise,timeout:null,heartbeatInterval:250},n.prototype.redisStoreDefaults={Promise:Promise,timeout:null,heartbeatInterval:5e3,clientTimeout:1e4,Redis:null,clientOptions:{},clusterNodes:null,clearDatastore:!1,connection:null},n.prototype.instanceDefaults={datastore:"local",connection:null,id:"<no-id>",rejectOnDrop:!0,trackDoneStatus:!1,Promise:Promise},n.prototype.stopDefaults={enqueueErrorMessage:"This limiter has been stopped and cannot accept new jobs.",dropWaitingJobs:!0,dropErrorMessage:"This limiter has been stopped."},n}.call(void 0),Nm=s}var zm=wi(Um());class Vm{constructor(e){this.proposal=e}}class qm{constructor(e,t){this.yagnaApi=e,this.pool=new Set,this.candidateMap=new Map,this.agreements=new Map,this.isServiceRunning=!1,this.config=new Yg(t),this.logger=(null==t?void 0:t.logger)||xi("agreement"),this.limiter=new zm({maxConcurrent:1})}async run(){this.isServiceRunning=!0,this.subscribeForAgreementEvents().catch((e=>this.logger.warn("Unable to subscribe for agreement events",e))),this.logger.info("Agreement Pool Service has started")}async addProposal(e){this.logger.debug("New proposal added to pool",{providerName:e.provider.name}),this.pool.add(new Vm(e))}async releaseAgreement(e,t){const n=Array.from(this.pool).filter((e=>e.agreement)).length>=this.config.agreementMaxPoolSize;if(t&&n&&this.logger.debug("Agreement cannot return to the pool because the pool is already full",{id:e}),t&&!n){const t=this.candidateMap.get(e);if(t)return this.pool.add(t),void this.logger.debug("Agreement has been released for reuse",{id:e});this.logger.debug("Agreement not found in the pool",{id:e})}else{const n=this.agreements.get(e);if(!n)return void this.logger.debug("Agreement not found in the pool",{id:e});this.logger.debug("Agreement has been released and will be terminated",{id:e});try{this.removeAgreementFromPool(n),await n.terminate()}catch(t){this.logger.warn("Unable to terminate agreement",{id:e,error:t})}}}async getAgreement(){var e;let t;for(;!t&&this.isServiceRunning;)t=await this.getAgreementFormPool(),t||await Vr(2);if(!t||!this.isServiceRunning)throw new Ng("Unable to get agreement. Agreement service is not running",Cg.ServiceNotInitialized,null===(e=null==t?void 0:t.proposal)||void 0===e?void 0:e.demand);return t}async getAgreementFormPool(){var e,t;const n=await this.limiter.schedule((async()=>{if(0===this.pool.size)return;const e=Array.from(this.pool),t=await this.config.agreementSelector(e);return this.pool.delete(t),t}));if(n)return(null===(e=null==n?void 0:n.agreement)||void 0===e?void 0:e.id)?this.agreements.get(null===(t=null==n?void 0:n.agreement)||void 0===t?void 0:t.id):n&&!(null==n?void 0:n.agreement)?await this.createAgreement(n):void 0}async end(){this.isServiceRunning=!1,await this.terminateAll({message:"All computations done"}),this.logger.info("Agreement Pool Service has been stopped")}async terminateAll(e){const t=Array.from(this.candidateMap).map((e=>{let[t]=e;return this.agreements.get(t)})).filter((e=>void 0!==e));this.logger.debug("Trying to terminate all agreements....",{size:t.length}),await Promise.all(t.map((t=>t.terminate(e).catch((e=>this.logger.warn("Agreement cannot be terminated.",{id:t.id,error:e}))))))}async createAgreement(e){try{let t=await Qg.create(e.proposal,this.yagnaApi,this.config.options);t=await this.waitForAgreementApproval(t);const n=await t.getState();if(n!==$g.Approved)throw new Ng("Agreement ".concat(t.id," cannot be approved. Current state: ").concat(n),Cg.AgreementApprovalFailed,t.proposal.demand);return this.logger.info("Agreement confirmed by provider",{providerName:t.getProviderInfo().name}),this.agreements.set(t.id,t),e.agreement={id:t.id,provider:t.getProviderInfo()},this.candidateMap.set(t.id,e),t}catch(e){return this.logger.debug("Unable to create agreement form available proposal",e),void await Vr(2)}}async waitForAgreementApproval(e){return await e.getState()===$g.Proposal&&(await e.confirm(this.yagnaApi.appSessionId),this.logger.debug("Agreement proposed to provider",{providerName:e.getProviderInfo().name})),await this.yagnaApi.market.waitForApproval(e.id,this.config.agreementWaitingForApprovalTimeout),e}async subscribeForAgreementEvents(){let e;for(;this.isServiceRunning;)try{const{data:t}=await this.yagnaApi.market.collectAgreementEvents(this.config.agreementEventsFetchingIntervalSec,e,this.config.agreementMaxEvents,this.yagnaApi.appSessionId);t.forEach((t=>{e=t.eventDate,"AgreementTerminatedEvent"===t.eventtype&&this.handleTerminationAgreementEvent(t.agreementId,t.reason)}))}catch(e){this.logger.debug("Unable to get agreement events.",e),await Vr(2)}}async handleTerminationAgreementEvent(e,t){const n=this.agreements.get(e);n&&(await n.terminate(t),this.removeAgreementFromPool(n))}removeAgreementFromPool(e){this.agreements.delete(e.id);const t=this.candidateMap.get(e.id);t&&(this.pool.delete(t),this.candidateMap.delete(e.id))}}var Hm=Xi.ExeScriptCommandResultResultEnum;class Wm{constructor(e){this.index=e.index,this.eventDate=e.eventDate,this.result=e.result,this.stdout=e.stdout,this.stderr=e.stderr,this.message=e.message,this.isBatchFinished=e.isBatchFinished,this.data=e.data}getOutputAsJson(){if(!this.stdout)throw new Fr("Can't convert Result output to JSON, because the output is missing!");try{return JSON.parse(this.stdout.toString().trim())}catch(Ur){throw new Fr('Failed to parse output to JSON! Output: "'.concat(this.stdout.toString(),'". Error: ').concat(Ur))}}}var Gm=Si(gf);function Ym(e,t){"string"==typeof e&&(e=af(e));var n=-1===Kr.location.protocol.search(/^https?:$/)?"http:":"",r=e.protocol||n,i=e.hostname||e.host,o=e.port,s=e.path||"/";i&&-1!==i.indexOf(":")&&(i="["+i+"]"),e.url=(i?r+"//"+i:"")+(o?":"+o:"")+s,e.method=(e.method||"GET").toUpperCase(),e.headers=e.headers||{};var a=new mh(e);return t&&a.on("response",t),a}function Km(e,t){var n=Ym(e,t);return n.end(),n}function $m(){}$m.defaultMaxSockets=4;var Qm=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"],Jm={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"},Xm={request:Ym,get:Km,Agent:$m,METHODS:Qm,STATUS_CODES:Jm},Zm=Si(Object.freeze({__proto__:null,Agent:$m,METHODS:Qm,STATUS_CODES:Jm,default:Xm,get:Km,request:Ym})),ev=Si(_f),tv=Gm.parse,nv=vd,rv=Zm,iv=ev,ov=["pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","secureProtocol","servername","checkServerIdentity"],sv=[239,187,191],av=262144,lv=/^(cookie|authorization)$/i;function cv(e,t){var n=cv.CONNECTING,r=t&&t.headers,i=!1;Object.defineProperty(this,"readyState",{get:function(){return n}}),Object.defineProperty(this,"url",{get:function(){return e}});var o,s=this;function a(t){n!==cv.CLOSED&&(n=cv.CONNECTING,p("error",new dv("error",{message:t})),h&&(e=h,h=null,i=!1),setTimeout((function(){n!==cv.CONNECTING||s.connectionInProgress||(s.connectionInProgress=!0,f())}),s.reconnectInterval))}s.reconnectInterval=1e3,s.connectionInProgress=!1;var l="";r&&r["Last-Event-ID"]&&(l=r["Last-Event-ID"],delete r["Last-Event-ID"]);var c=!1,u="",d="",h=null;function f(){var u=tv(e),d="https:"===u.protocol;if(u.headers={"Cache-Control":"no-cache",Accept:"text/event-stream"},l&&(u.headers["Last-Event-ID"]=l),r){var m=i?function(e){var t={};for(var n in e)lv.test(n)||(t[n]=e[n]);return t}(r):r;for(var v in m){var y=m[v];y&&(u.headers[v]=y)}}if(u.rejectUnauthorized=!(t&&!t.rejectUnauthorized),t&&void 0!==t.createConnection&&(u.createConnection=t.createConnection),t&&t.proxy){var b=tv(t.proxy);d="https:"===b.protocol,u.protocol=d?"https:":"http:",u.path=e,u.headers.Host=u.host,u.hostname=b.hostname,u.host=b.host,u.port=b.port}if(t&&t.https)for(var w in t.https)if(-1!==ov.indexOf(w)){var S=t.https[w];void 0!==S&&(u[w]=S)}t&&void 0!==t.withCredentials&&(u.withCredentials=t.withCredentials),o=(d?rv:iv).request(u,(function(t){if(s.connectionInProgress=!1,500===t.statusCode||502===t.statusCode||503===t.statusCode||504===t.statusCode)return p("error",new dv("error",{status:t.statusCode,message:t.statusMessage})),void a();if(301===t.statusCode||302===t.statusCode||307===t.statusCode){var r=t.headers.location;if(!r)return void p("error",new dv("error",{status:t.statusCode,message:t.statusMessage}));var o=new URL(e).origin,l=new URL(r).origin;return i=o!==l,307===t.statusCode&&(h=e),e=r,void yi.nextTick(f)}if(200!==t.statusCode)return p("error",new dv("error",{status:t.statusCode,message:t.statusMessage})),s.close();var u,d;n=cv.OPEN,t.on("close",(function(){t.removeAllListeners("close"),t.removeAllListeners("end"),a()})),t.on("end",(function(){t.removeAllListeners("close"),t.removeAllListeners("end"),a()})),p("open",new dv("open"));var m=0,v=-1,y=0,b=0;t.on("data",(function(e){u?(e.length>u.length-b&&((y=2*u.length+e.length)>av&&(y=u.length+e.length+av),d=Ec.alloc(y),u.copy(d,0,0,b),u=d),e.copy(u,b),b+=e.length):(function(e){return sv.every((function(t,n){return e[n]===t}))}(u=e)&&(u=u.slice(sv.length)),b=u.length);for(var t=0,n=b;t<n;){c&&(10===u[t]&&++t,c=!1);for(var r,i=-1,o=v,s=m;i<0&&s<n;++s)58===(r=u[s])?o<0&&(o=s-t):13===r?(c=!0,i=s-t):10===r&&(i=s-t);if(i<0){m=n-t,v=o;break}m=0,v=-1,g(u,t,o,i),t+=i+1}t===n?(u=void 0,b=0):t>0&&(u=u.slice(t,b),b=u.length)}))})),o.on("error",(function(e){s.connectionInProgress=!1,a(e.message)})),o.setNoDelay&&o.setNoDelay(!0),o.end()}function p(){s.listeners(arguments[0]).length>0&&s.emit.apply(s,arguments)}function g(t,n,r,i){if(0===i){if(u.length>0){var o=d||"message";p(o,new hv(o,{data:u.slice(0,-1),lastEventId:l,origin:new URL(e).origin})),u=""}d=void 0}else if(r>0){var a,c=r<0,h=t.slice(n,n+(c?i:r)).toString();n+=a=c?i:32!==t[n+r+1]?r+1:r+2;var f=i-a,g=t.slice(n,n+f).toString();if("data"===h)u+=g+"\n";else if("event"===h)d=g;else if("id"===h)l=g;else if("retry"===h){var m=parseInt(g,10);Number.isNaN(m)||(s.reconnectInterval=m)}}}f(),this._close=function(){n!==cv.CLOSED&&(n=cv.CLOSED,o.abort&&o.abort(),o.xhr&&o.xhr.abort&&o.xhr.abort())}}var uv=cv;function dv(e,t){if(Object.defineProperty(this,"type",{writable:!1,value:e,enumerable:!0}),t)for(var n in t)t.hasOwnProperty(n)&&Object.defineProperty(this,n,{writable:!1,value:t[n],enumerable:!0})}function hv(e,t){for(var n in Object.defineProperty(this,"type",{writable:!1,value:e,enumerable:!0}),t)t.hasOwnProperty(n)&&Object.defineProperty(this,n,{writable:!1,value:t[n],enumerable:!0})}Ad.inherits(cv,nv.EventEmitter),cv.prototype.constructor=cv,["open","error","message"].forEach((function(e){Object.defineProperty(cv.prototype,"on"+e,{get:function(){var t=this.listeners(e)[0];return t?t._listener?t._listener:t:void 0},set:function(t){this.removeAllListeners(e),this.addEventListener(e,t)}})})),Object.defineProperty(cv,"CONNECTING",{enumerable:!0,value:0}),Object.defineProperty(cv,"OPEN",{enumerable:!0,value:1}),Object.defineProperty(cv,"CLOSED",{enumerable:!0,value:2}),cv.prototype.CONNECTING=0,cv.prototype.OPEN=1,cv.prototype.CLOSED=2,cv.prototype.close=function(){this._close()},cv.prototype.addEventListener=function(e,t){"function"==typeof t&&(t._listener=t,this.on(e,t))},cv.prototype.dispatchEvent=function(e){if(!e.type)throw new Error("UNSPECIFIED_EVENT_TYPE_ERR");this.emit(e.type,e.detail)},cv.prototype.removeEventListener=function(e,t){"function"==typeof t&&(t._listener=void 0,this.removeListener(e,t))};var fv=wi(uv);const pv=1e4,gv=3e5,mv=5;class vv{constructor(e){this.activityRequestTimeout=(null==e?void 0:e.activityRequestTimeout)||pv,this.activityExecuteTimeout=(null==e?void 0:e.activityExecuteTimeout)||gv,this.activityExeBatchResultPollIntervalSeconds=(null==e?void 0:e.activityExeBatchResultPollIntervalSeconds)||mv,this.logger=(null==e?void 0:e.logger)||xi("work"),this.eventTarget=null==e?void 0:e.eventTarget}}var yv,bv;!function(e){e[e.ServiceNotInitialized=0]="ServiceNotInitialized",e[e.ScriptExecutionFailed=1]="ScriptExecutionFailed",e[e.ActivityDestroyingFailed=2]="ActivityDestroyingFailed",e[e.ActivityResultsFetchingFailed=3]="ActivityResultsFetchingFailed",e[e.ActivityCreationFailed=4]="ActivityCreationFailed",e[e.TaskAddingFailed=5]="TaskAddingFailed",e[e.TaskExecutionFailed=6]="TaskExecutionFailed",e[e.TaskRejected=7]="TaskRejected",e[e.NetworkSetupMissing=8]="NetworkSetupMissing",e[e.ScriptInitializationFailed=9]="ScriptInitializationFailed",e[e.ActivityDeploymentFailed=10]="ActivityDeploymentFailed",e[e.ActivityStatusQueryFailed=11]="ActivityStatusQueryFailed"}(yv||(yv={}));class wv extends Br{constructor(e,t,n,r,i,o){super(e,t,o),this.code=t,this.agreement=n,this.activity=r,this.provider=i,this.previous=o}}class Sv{constructor(e,t,n){this.agreement=e,this.yagnaApi=t,this.options=new vv(n)}async create(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t,n;try{if(e)throw new Fr("Creating an activity in secure mode is not implemented");return await this.createActivity()}catch(e){throw this.options.logger.error("Unable to create activity",e),new wv("Unable to create activity: ".concat((null===(n=null===(t=null==e?void 0:e.response)||void 0===t?void 0:t.data)||void 0===n?void 0:n.message)||e),yv.ActivityCreationFailed,this.agreement,void 0,this.agreement.getProviderInfo(),e)}}async createActivity(){var e;const{data:t}=await this.yagnaApi.activity.control.createActivity({agreementId:this.agreement.id}),n="string"==typeof t?t:t.activityId;return this.options.logger.debug("Activity created",{id:n}),null===(e=this.options.eventTarget)||void 0===e||e.dispatchEvent(new xg({id:n,agreementId:this.agreement.id})),new _v(n,this.agreement,this.yagnaApi,this.options)}}!function(e){e.New="New",e.Initialized="Initialized",e.Deployed="Deployed",e.Ready="Ready",e.Unresponsive="Unresponsive",e.Terminated="Terminated"}(bv||(bv={}));class _v{constructor(e,t,n,r){this.id=e,this.agreement=t,this.yagnaApi=n,this.options=r,this.isRunning=!0,this.currentState=bv.New,this.logger=(null==r?void 0:r.logger)||xi("work")}static async create(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Sv(e,t,n).create(r)}getProviderInfo(){return this.agreement.getProviderInfo()}async execute(e,t,n){var r,i,o;let s,a,l=new Date;try{s=await this.send(e),l=new Date,a=JSON.parse(e.text).length}catch(e){const t=(null===(i=null===(r=null==e?void 0:e.response)||void 0===r?void 0:r.data)||void 0===i?void 0:i.message)||e.message||e;throw this.logger.error("Execution of script failed.",{reason:t}),new wv("Unable to execute script ".concat(t),yv.ScriptExecutionFailed,this.agreement,this,this.getProviderInfo(),e)}return this.logger.debug("Script sent.",{batchId:s}),null===(o=this.options.eventTarget)||void 0===o||o.dispatchEvent(new Tg({activityId:this.id,agreementId:this.agreement.id})),t?this.streamingBatch(s,a,l,n):this.pollingBatch(s,l,n)}async stop(){return this.isRunning=!1,await this.end(),!0}async getState(){var e,t,n,r,i;try{const{data:t}=await this.yagnaApi.activity.state.getActivityState(this.id),n=t.state[0];return this.currentState!==bv[n]&&(null===(e=this.options.eventTarget)||void 0===e||e.dispatchEvent(new Og({id:this.id,state:bv[n]})),this.currentState=bv[n]),bv[n]}catch(e){throw this.logger.warn("Cannot query activity state",{reason:(null===(n=null===(t=null==e?void 0:e.response)||void 0===t?void 0:t.data)||void 0===n?void 0:n.message)||(null==e?void 0:e.message)||e}),new wv("Cannot query activity state: ".concat((null===(i=null===(r=null==e?void 0:e.response)||void 0===r?void 0:r.data)||void 0===i?void 0:i.message)||(null==e?void 0:e.message)||e),yv.ActivityStatusQueryFailed,this.agreement,this,this.getProviderInfo(),e)}}async send(e){const{data:t}=await this.yagnaApi.activity.control.exec(this.id,e,{timeout:this.options.activityRequestTimeout});return t}async end(){var e,t,n,r;try{null===(e=this.eventSource)||void 0===e||e.close(),await this.yagnaApi.activity.control.destroyActivity(this.id,this.options.activityRequestTimeout/1e3,{timeout:this.options.activityRequestTimeout+1e3}),null===(t=this.options.eventTarget)||void 0===t||t.dispatchEvent(new Ig({id:this.id,agreementId:this.agreement.id})),this.logger.debug("Activity destroyed",{id:this.id})}catch(e){throw new wv("Unable to destroy activity ".concat(this.id,". ").concat((null===(r=null===(n=null==e?void 0:e.response)||void 0===n?void 0:n.data)||void 0===r?void 0:r.message)||(null==e?void 0:e.message)||e),yv.ActivityDestroyingFailed,this.agreement,this,this.getProviderInfo())}}async pollingBatch(e,t,n){this.logger.debug("Starting to poll for batch results");let r,i=!1,o=0;const s=this,{id:a,agreement:l,logger:c}=s,u=()=>this.isRunning,{activityExecuteTimeout:d,eventTarget:h,activityExeBatchResultPollIntervalSeconds:f}=this.options,p=this.yagnaApi.activity,g=this.handleError.bind(this);return new hh.Readable({objectMode:!0,async read(){for(;!i;){if(c.debug("Polling for batch script execution result"),t.valueOf()+(n||d)<=(new Date).valueOf())return c.debug("Activity probably timed-out, will stop polling for batch execution results"),this.destroy(new Mr("Activity ".concat(a," timeout.")));if(!u())return c.debug("Activity is no longer running, will stop polling for batch execution results"),this.destroy(new jr("Activity ".concat(a," has been interrupted.")));try{c.debug("Trying to poll for batch execution results from yagna");const{data:t}=await p.control.getExecBatchResults(a,e,void 0,f,{timeout:0});if(o=0,!u())return c.debug("Activity is no longer running, will stop polling for batch execution results"),this.destroy(new jr("Activity ".concat(a," has been interrupted.")));const n=t.map((e=>new Wm(e))).slice(r+1);c.debug("Received batch execution results",{results:n,activityId:a}),Array.isArray(n)&&n.length&&n.forEach((e=>{this.push(e),i=e.isBatchFinished||!1,r=e.index}))}catch(e){if(!u())return c.debug("Activity is no longer running, will stop polling for batch execution results"),this.destroy(new jr("Activity ".concat(a," has been interrupted."),e));c.error("Processing batch execution results failed",e);try{o=await g(e,r,o,5)}catch(e){return null==h||h.dispatchEvent(new Rg({activityId:a,agreementId:l.id,success:!1})),this.destroy(new wv("Unable to get activity results. ".concat((null==e?void 0:e.message)||e),yv.ActivityResultsFetchingFailed,l,s,s.getProviderInfo(),e))}}}null==h||h.dispatchEvent(new Rg({activityId:a,agreementId:l.id,success:!0})),this.push(null)}})}async streamingBatch(e,t,n,r){const i=this.yagnaApi.activity.control.basePath,o=this.yagnaApi.yagnaOptions.apiKey,s=new fv("".concat(i,"/activity/").concat(this.id,"/exec/").concat(e),{headers:{Accept:"text/event-stream",Authorization:"Bearer ".concat(o)}});s.addEventListener("runtime",(e=>f.push(this.parseEventToResult(e.data,t)))),s.addEventListener("error",(e=>{var t,n;return h.push(null!==(n=null===(t=e.data)||void 0===t?void 0:t.message)&&void 0!==n?n:e)})),this.eventSource=s;let a=!1;const l=this,c=()=>this.isRunning,u=this.options.activityExecuteTimeout,{logger:d}=this,h=[],f=[];return new hh.Readable({objectMode:!0,async read(){for(;!a;){let e;if(n.valueOf()+(r||u)<=(new Date).valueOf()&&(d.debug("Activity probably timed-out, will stop streaming batch execution results"),e=new Mr("Activity ".concat(l.id," timeout."))),c()||(d.debug("Activity is no longer running, will stop streaming batch execution results"),e=new jr("Activity ".concat(l.id," has been interrupted."))),h.length&&(e=new wv("Unable to get activity results. ".concat(JSON.stringify(h)),yv.ActivityResultsFetchingFailed,l.agreement,l,l.getProviderInfo())),e)return null==s||s.close(),this.destroy(e);if(f.length){const e=f.shift();this.push(e),a=(null==e?void 0:e.isBatchFinished)||!1}await Vr(500,!0)}this.push(null),null==s||s.close()}})}async handleError(e,t,n,r){if(!this.isRunning)throw this.logger.debug("Activity is no longer running, will stop polling for batch execution results"),new jr("Activity ".concat(this.id," has been interrupted."),e);if(this.isTimeoutError(e))return this.logger.warn("API request timeout.",e),n;const{terminated:i,reason:o,errorMessage:s}=await this.isTerminated();if(i){const t=(o||"")+(s||"");throw this.logger.warn("Activity terminated by provider.",{reason:t,id:this.id}),e}const a="There was an error retrieving activity results.";if(++n<r)return this.logger.debug("".concat(a," Retrying in ").concat(this.options.activityExeBatchResultPollIntervalSeconds," seconds.")),n;throw this.logger.warn("".concat(a," Giving up after ").concat(n," attempts."),e),new wv("Command #".concat(t||0," getExecBatchResults error: ").concat(e.message),yv.ActivityResultsFetchingFailed,this.agreement,this,this.getProviderInfo())}isTimeoutError(e){if(!function(e){return Boolean(e&&"response"in e&&"object"==typeof e.response&&"status"in e.response)}(e))return!1;const t=e.message&&e.message.includes("timeout");return e.response&&408===e.response.status||"ETIMEDOUT"===e.code||"ECONNABORTED"===e.code&&t}async isTerminated(){var e;try{const{data:t}=await this.yagnaApi.activity.state.getActivityState(this.id);return{terminated:bv[null===(e=null==t?void 0:t.state)||void 0===e?void 0:e[0]]===bv.Terminated,reason:null==t?void 0:t.reason,errorMessage:null==t?void 0:t.errorMessage}}catch(e){return this.logger.debug("Cannot query activity state:",e),{terminated:!1}}}parseEventToResult(e,t){var n,r,i,o,s,a,l,c,u;try{const d=JSON.parse(e);return new Wm({index:d.index,eventDate:d.timestamp,result:(null===(n=null==d?void 0:d.kind)||void 0===n?void 0:n.finished)?0===(null===(i=null===(r=null==d?void 0:d.kind)||void 0===r?void 0:r.finished)||void 0===i?void 0:i.return_code)?Hm.Ok:Hm.Error:(null===(o=null==d?void 0:d.kind)||void 0===o?void 0:o.stderr)?Hm.Error:Hm.Ok,stdout:null===(s=null==d?void 0:d.kind)||void 0===s?void 0:s.stdout,stderr:null===(a=null==d?void 0:d.kind)||void 0===a?void 0:a.stderr,message:null===(c=null===(l=null==d?void 0:d.kind)||void 0===l?void 0:l.finished)||void 0===c?void 0:c.message,isBatchFinished:d.index+1>=t&&Boolean(null===(u=null==d?void 0:d.kind)||void 0===u?void 0:u.finished)})}catch(t){throw new Fr("Cannot parse ".concat(e," as StreamingBatchEvent"))}}}class Ev{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.commands=e}static create(e){return new Ev(e)}add(e){this.commands.push(e)}async before(){await Promise.all(this.commands.map((e=>e.before())))}async after(e){return Promise.all(this.commands.map(((t,n)=>t.after(e[n]))))}getExeScriptRequest(){if(!this.commands.length)throw new Fr("There are no commands in the script");return{text:JSON.stringify(this.commands.map((e=>e.toJson())))}}}const kv=new Wm({result:Hm.Error,eventDate:(new Date).toISOString(),index:-1,message:"No result due to error"});class Pv{constructor(e,t){this.commandName=e,this.args=t||{}}toJson(){return{[this.commandName]:this.args}}toExeScriptRequest(){return{text:JSON.stringify([this.toJson()])}}async before(){}async after(e){return null!=e?e:kv}}class Av extends Pv{constructor(e){super("deploy",e)}}class xv extends Pv{constructor(e){super("start",e)}}class Iv extends Pv{constructor(e,t,n,r){super("run",{entry_point:e,args:t,env:n,capture:r||{stdout:{atEnd:{format:"string"}},stderr:{atEnd:{format:"string"}}}})}}class Ov extends Pv{constructor(e,t,n){super("transfer",{from:e,to:t,args:n}),this.from=e,this.to=t}}class Tv extends Ov{constructor(e,t,n){super(),this.storageProvider=e,this.src=t,this.dstPath=n,this.args.to="container:".concat(n)}async before(){this.args.from=await this.storageProvider.publishFile(this.src)}async after(e){return await this.storageProvider.release([this.args.from]),e}}class Rv extends Ov{constructor(e,t,n){super(),this.storageProvider=e,this.src=t,this.dstPath=n,this.args.to="container:".concat(n)}async before(){this.args.from=await this.storageProvider.publishData(this.src)}async after(e){return await this.storageProvider.release([this.args.from]),e}}class Cv extends Ov{constructor(e,t,n){super(),this.storageProvider=e,this.srcPath=t,this.dstPath=n,this.args={from:"container:".concat(t)}}async before(){this.args.to=await this.storageProvider.receiveFile(this.dstPath)}async after(e){return await this.storageProvider.release([this.args.to]),e}}class Nv extends Ov{constructor(e,t){super(),this.storageProvider=e,this.srcPath=t,this.chunks=[],this.args={from:"container:".concat(t)}}async before(){this.args.to=await this.storageProvider.receiveData((e=>{this.chunks.push(e)}))}async after(e){return await this.storageProvider.release([this.args.to]),e.result===Hm.Ok?new Wm({...e,data:this.combineChunks()}):new Wm({...e,result:Hm.Error,data:void 0})}combineChunks(){const e=new Uint8Array(this.chunks.reduce(((e,t)=>e+t.length),0));let t=0;for(const n of this.chunks)e.set(n,t),t+=n.length;return this.chunks=[],e}}function jv(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function Dv(e){var t=Fv(e),n="/"===Bv(e,-1);return(e=jv(Mv(e.split("/"),(function(e){return!!e})),!t).join("/"))||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e}function Fv(e){return"/"===e.charAt(0)}var Lv=function(){return Dv(Mv(Array.prototype.slice.call(arguments,0),(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))};function Mv(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}var Bv=function(e,t,n){return e.substr(t,n)},Uv={},zv={};class Vv{constructor(e){if(this.publishedUrls=new Set,this.isInitialized=!1,this.lock=!1,qr)throw new Nr("File transfer by GFTP module is unsupported in the browser context.");this.logger=e||xi("storage")}async init(){this.isInitialized?this.logger.warn("GFTP init attempted even though it was already ready - check the logic of your application"):(await this.startGftpServer(),this.logger.info("GFTP Version: ".concat(await this.jsonrpc("version"))))}startGftpServer(){return new Promise(((e,t)=>{var n,r,i,o,s,a;this.logger.debug("Starting GFTP server"),this.gftpServerProcess=zv.spawn("gftp",["server"]),this.gftpServerProcess.on("spawn",(()=>{this.logger.info("GFTP server spawned"),this.isInitialized=!0,e()})),this.gftpServerProcess.on("error",(e=>{this.logger.error("Error while spawning GFTP server",e),t(e)})),null===(r=null===(n=this.gftpServerProcess)||void 0===n?void 0:n.stdout)||void 0===r||r.setEncoding("utf-8"),null===(o=null===(i=this.gftpServerProcess)||void 0===i?void 0:i.stderr)||void 0===o||o.setEncoding("utf-8"),this.reader=null===(a=null===(s=this.gftpServerProcess)||void 0===s?void 0:s.stdout)||void 0===a?void 0:a.iterator()}))}isInitiated(){return!!this.gftpServerProcess}async generateTempFileName(){const{randomUUID:e}=await Promise.resolve().then((function(){return cP})),t=await Promise.resolve().then((function(){return Gr})),n=Lv(t.dirSync().name,e().toString());return Uv.existsSync(n)&&Uv.unlinkSync(n),n}async receiveFile(e){const{url:t}=await this.jsonrpc("receive",{output_file:e});return t}receiveData(){throw new Nr("receiveData is not implemented in GftpStorageProvider")}async publishFile(e){const t=await this.uploadFile(e);return this.publishedUrls.add(t),t}async publishData(e){let t;return t=Buffer.isBuffer(e)?await this.uploadBytes(e):await this.uploadBytes(Buffer.from(e)),this.publishedUrls.add(t),t}release(){return Promise.resolve(void 0)}async releaseAll(){const e=Array.from(this.publishedUrls).filter((e=>!!e));e.length&&await this.jsonrpc("close",{urls:e})}async close(){var e;await this.releaseAll(),null===(e=this.gftpServerProcess)||void 0===e||e.kill()}async jsonrpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,r,i,o;for(this.isInitiated()||await this.init();this.lock;)await Vr(100,!0);this.lock=!0;const s='{"jsonrpc": "2.0", "id": "1", "method": "'.concat(e,'", "params": ').concat(JSON.stringify(t),"}\n");try{null===(r=null===(n=this.gftpServerProcess)||void 0===n?void 0:n.stdin)||void 0===r||r.write(s);const e=null===(o=await(null===(i=this.reader)||void 0===i?void 0:i.next()))||void 0===o?void 0:o.value;if(!e)throw new Fr("Unable to get GFTP command result");const{result:t}=JSON.parse(e);if(void 0===t)throw new Fr(e);return t}catch(e){throw new Fr("Error while obtaining response to JSONRPC. query: ".concat(s," error: ").concat(JSON.stringify(e)),e)}finally{this.lock=!1}}async uploadStream(e){var t;const n=await this.generateTempFileName(),r=Uv.createWriteStream(n,{encoding:"binary"});await new Promise((async t=>{r.once("finish",t);for await(const n of e)r.write(n);r.end()}));const i=await this.jsonrpc("publish",{files:[n.toString()]});if(1!==i.length)throw"invalid gftp publish response";return null===(t=i[0])||void 0===t?void 0:t.url}async uploadBytes(e){return await this.uploadStream(async function*(){yield e}())}async uploadFile(e){var t;return null===(t=(await this.jsonrpc("publish",{files:[e.toString()]}))[0])||void 0===t?void 0:t.url}}class qv{close(){return Promise.resolve(void 0)}init(){return Promise.resolve(void 0)}publishData(e){return Promise.reject(new Fr("NullStorageProvider does not support upload data"))}publishFile(e){return Promise.reject(new Fr("NullStorageProvider does not support upload files"))}receiveFile(e){return Promise.reject(new Fr("NullStorageProvider does not support download files"))}receiveData(e){return Promise.reject(new Fr("NullStorageProvider does not support download data"))}release(e){return Promise.resolve(void 0)}}var Hv={},Wv={},Gv={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.BitWidth=void 0,(t=e.BitWidth||(e.BitWidth={}))[t.WIDTH8=0]="WIDTH8",t[t.WIDTH16=1]="WIDTH16",t[t.WIDTH32=2]="WIDTH32",t[t.WIDTH64=3]="WIDTH64"}(Gv);var Yv={};Object.defineProperty(Yv,"__esModule",{value:!0}),Yv.paddingSize=Yv.fromByteWidth=Yv.uwidth=Yv.fwidth=Yv.iwidth=Yv.toByteWidth=void 0;const Kv=Gv;Yv.toByteWidth=function(e){return 1<<e},Yv.iwidth=function(e){return e>=-128&&e<=127?Kv.BitWidth.WIDTH8:e>=-32768&&e<=32767?Kv.BitWidth.WIDTH16:e>=-2147483648&&e<=2147483647?Kv.BitWidth.WIDTH32:Kv.BitWidth.WIDTH64},Yv.fwidth=function(e){return e===Math.fround(e)?Kv.BitWidth.WIDTH32:Kv.BitWidth.WIDTH64},Yv.uwidth=function(e){return e<=255?Kv.BitWidth.WIDTH8:e<=65535?Kv.BitWidth.WIDTH16:e<=4294967295?Kv.BitWidth.WIDTH32:Kv.BitWidth.WIDTH64},Yv.fromByteWidth=function(e){return 1===e?Kv.BitWidth.WIDTH8:2===e?Kv.BitWidth.WIDTH16:4===e?Kv.BitWidth.WIDTH32:Kv.BitWidth.WIDTH64},Yv.paddingSize=function(e,t){return 1+~e&t-1};var $v={};Object.defineProperty($v,"__esModule",{value:!0}),$v.toUTF8Array=$v.fromUTF8Array=void 0,$v.fromUTF8Array=function(e){return(new TextDecoder).decode(e)},$v.toUTF8Array=function(e){return(new TextEncoder).encode(e)};var Qv={};!function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.ValueType=void 0,(t=e.ValueType||(e.ValueType={}))[t.NULL=0]="NULL",t[t.INT=1]="INT",t[t.UINT=2]="UINT",t[t.FLOAT=3]="FLOAT",t[t.KEY=4]="KEY",t[t.STRING=5]="STRING",t[t.INDIRECT_INT=6]="INDIRECT_INT",t[t.INDIRECT_UINT=7]="INDIRECT_UINT",t[t.INDIRECT_FLOAT=8]="INDIRECT_FLOAT",t[t.MAP=9]="MAP",t[t.VECTOR=10]="VECTOR",t[t.VECTOR_INT=11]="VECTOR_INT",t[t.VECTOR_UINT=12]="VECTOR_UINT",t[t.VECTOR_FLOAT=13]="VECTOR_FLOAT",t[t.VECTOR_KEY=14]="VECTOR_KEY",t[t.VECTOR_STRING_DEPRECATED=15]="VECTOR_STRING_DEPRECATED",t[t.VECTOR_INT2=16]="VECTOR_INT2",t[t.VECTOR_UINT2=17]="VECTOR_UINT2",t[t.VECTOR_FLOAT2=18]="VECTOR_FLOAT2",t[t.VECTOR_INT3=19]="VECTOR_INT3",t[t.VECTOR_UINT3=20]="VECTOR_UINT3",t[t.VECTOR_FLOAT3=21]="VECTOR_FLOAT3",t[t.VECTOR_INT4=22]="VECTOR_INT4",t[t.VECTOR_UINT4=23]="VECTOR_UINT4",t[t.VECTOR_FLOAT4=24]="VECTOR_FLOAT4",t[t.BLOB=25]="BLOB",t[t.BOOL=26]="BOOL",t[t.VECTOR_BOOL=36]="VECTOR_BOOL"}(Qv);var Jv={};Object.defineProperty(Jv,"__esModule",{value:!0}),Jv.packedType=Jv.fixedTypedVectorElementSize=Jv.fixedTypedVectorElementType=Jv.typedVectorElementType=Jv.toTypedVector=Jv.isAVector=Jv.isFixedTypedVector=Jv.isTypedVector=Jv.isTypedVectorElement=Jv.isIndirectNumber=Jv.isNumber=Jv.isInline=void 0;const Xv=Qv;function Zv(e){return e===Xv.ValueType.VECTOR_BOOL||e>=Xv.ValueType.VECTOR_INT&&e<=Xv.ValueType.VECTOR_STRING_DEPRECATED}function ey(e){return e>=Xv.ValueType.VECTOR_INT2&&e<=Xv.ValueType.VECTOR_FLOAT4}Jv.isInline=function(e){return e===Xv.ValueType.BOOL||e<=Xv.ValueType.FLOAT},Jv.isNumber=function(e){return e>=Xv.ValueType.INT&&e<=Xv.ValueType.FLOAT},Jv.isIndirectNumber=function(e){return e>=Xv.ValueType.INDIRECT_INT&&e<=Xv.ValueType.INDIRECT_FLOAT},Jv.isTypedVectorElement=function(e){return e===Xv.ValueType.BOOL||e>=Xv.ValueType.INT&&e<=Xv.ValueType.STRING},Jv.isTypedVector=Zv,Jv.isFixedTypedVector=ey,Jv.isAVector=function(e){return Zv(e)||ey(e)||e===Xv.ValueType.VECTOR},Jv.toTypedVector=function(e,t){if(0===t)return e-Xv.ValueType.INT+Xv.ValueType.VECTOR_INT;if(2===t)return e-Xv.ValueType.INT+Xv.ValueType.VECTOR_INT2;if(3===t)return e-Xv.ValueType.INT+Xv.ValueType.VECTOR_INT3;if(4===t)return e-Xv.ValueType.INT+Xv.ValueType.VECTOR_INT4;throw"Unexpected length "+t},Jv.typedVectorElementType=function(e){return e-Xv.ValueType.VECTOR_INT+Xv.ValueType.INT},Jv.fixedTypedVectorElementType=function(e){return(e-Xv.ValueType.VECTOR_INT2)%3+Xv.ValueType.INT},Jv.fixedTypedVectorElementSize=function(e){return 2+((e-Xv.ValueType.VECTOR_INT2)/3>>0)},Jv.packedType=function(e,t){return t|e<<2};var ty={};Object.defineProperty(ty,"__esModule",{value:!0}),ty.StackValue=void 0;const ny=Gv,ry=Yv,iy=Qv,oy=Jv;ty.StackValue=class{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;this.builder=e,this.type=t,this.width=n,this.value=r,this.offset=i}elementWidth(e,t){if((0,oy.isInline)(this.type))return this.width;for(let n=0;n<4;n++){const r=1<<n,i=e+(0,ry.paddingSize)(e,r)+t*r-this.offset,o=(0,ry.uwidth)(i);if(1<<o===r)return o}throw"Element is unknown. Size: ".concat(e," at index: ").concat(t,". This might be a bug. Please create an issue https://github.com/google/flatbuffers/issues/new")}writeToBuffer(e){const t=this.builder.computeOffset(e);if(this.type===iy.ValueType.FLOAT)this.width===ny.BitWidth.WIDTH32?this.builder.view.setFloat32(this.builder.offset,this.value,!0):this.builder.view.setFloat64(this.builder.offset,this.value,!0);else if(this.type===iy.ValueType.INT){const t=(0,ry.fromByteWidth)(e);this.builder.pushInt(this.value,t)}else if(this.type===iy.ValueType.UINT){const t=(0,ry.fromByteWidth)(e);this.builder.pushUInt(this.value,t)}else if(this.type===iy.ValueType.NULL)this.builder.pushInt(0,this.width);else{if(this.type!==iy.ValueType.BOOL)throw"Unexpected type: ".concat(this.type,". This might be a bug. Please create an issue https://github.com/google/flatbuffers/issues/new");this.builder.pushInt(this.value?1:0,this.width)}this.offset=t}storedWidth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ny.BitWidth.WIDTH8;return(0,oy.isInline)(this.type)?Math.max(e,this.width):this.width}storedPackedType(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ny.BitWidth.WIDTH8;return(0,oy.packedType)(this.type,this.storedWidth(e))}isOffset(){return!(0,oy.isInline)(this.type)}},Object.defineProperty(Wv,"__esModule",{value:!0}),Wv.Builder=void 0;const sy=Gv,ay=Yv,ly=$v,cy=Qv,uy=Jv,dy=ty;Wv.Builder=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2048,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.dedupStrings=t,this.dedupKeys=n,this.dedupKeyVectors=r,this.stack=[],this.stackPointers=[],this.offset=0,this.finished=!1,this.stringLookup={},this.keyLookup={},this.keyVectorLookup={},this.indirectIntLookup={},this.indirectUIntLookup={},this.indirectFloatLookup={},this.buffer=new ArrayBuffer(e>0?e:2048),this.view=new DataView(this.buffer)}align(e){const t=(0,ay.toByteWidth)(e);return this.offset+=(0,ay.paddingSize)(this.offset,t),t}computeOffset(e){const t=this.offset+e;let n=this.buffer.byteLength;const r=n;for(;n<t;)n<<=1;if(r<n){const e=this.buffer;this.buffer=new ArrayBuffer(n),this.view=new DataView(this.buffer),new Uint8Array(this.buffer).set(new Uint8Array(e),0)}return t}pushInt(e,t){if(t===sy.BitWidth.WIDTH8)this.view.setInt8(this.offset,e);else if(t===sy.BitWidth.WIDTH16)this.view.setInt16(this.offset,e,!0);else if(t===sy.BitWidth.WIDTH32)this.view.setInt32(this.offset,e,!0);else{if(t!==sy.BitWidth.WIDTH64)throw"Unexpected width: ".concat(t," for value: ").concat(e);this.view.setBigInt64(this.offset,BigInt(e),!0)}}pushUInt(e,t){if(t===sy.BitWidth.WIDTH8)this.view.setUint8(this.offset,e);else if(t===sy.BitWidth.WIDTH16)this.view.setUint16(this.offset,e,!0);else if(t===sy.BitWidth.WIDTH32)this.view.setUint32(this.offset,e,!0);else{if(t!==sy.BitWidth.WIDTH64)throw"Unexpected width: ".concat(t," for value: ").concat(e);this.view.setBigUint64(this.offset,BigInt(e),!0)}}writeInt(e,t){const n=this.computeOffset(t);this.pushInt(e,(0,ay.fromByteWidth)(t)),this.offset=n}writeUInt(e,t){const n=this.computeOffset(t);this.pushUInt(e,(0,ay.fromByteWidth)(t)),this.offset=n}writeBlob(e){const t=e.byteLength,n=(0,ay.uwidth)(t),r=this.align(n);this.writeUInt(t,r);const i=this.offset,o=this.computeOffset(t);new Uint8Array(this.buffer).set(new Uint8Array(e),i),this.stack.push(this.offsetStackValue(i,cy.ValueType.BLOB,n)),this.offset=o}writeString(e){if(this.dedupStrings&&Object.prototype.hasOwnProperty.call(this.stringLookup,e))return void this.stack.push(this.stringLookup[e]);const t=(0,ly.toUTF8Array)(e),n=t.length,r=(0,ay.uwidth)(n),i=this.align(r);this.writeUInt(n,i);const o=this.offset,s=this.computeOffset(n+1);new Uint8Array(this.buffer).set(t,o);const a=this.offsetStackValue(o,cy.ValueType.STRING,r);this.stack.push(a),this.dedupStrings&&(this.stringLookup[e]=a),this.offset=s}writeKey(e){if(this.dedupKeys&&Object.prototype.hasOwnProperty.call(this.keyLookup,e))return void this.stack.push(this.keyLookup[e]);const t=(0,ly.toUTF8Array)(e),n=t.length,r=this.computeOffset(n+1);new Uint8Array(this.buffer).set(t,this.offset);const i=this.offsetStackValue(this.offset,cy.ValueType.KEY,sy.BitWidth.WIDTH8);this.stack.push(i),this.dedupKeys&&(this.keyLookup[e]=i),this.offset=r}writeStackValue(e,t){const n=this.computeOffset(t);if(e.isOffset()){const n=this.offset-e.offset;if(!(8===t||BigInt(n)<BigInt(1)<<BigInt(8*t)))throw"Unexpected size ".concat(t,". This might be a bug. Please create an issue https://github.com/google/flatbuffers/issues/new");this.writeUInt(n,t)}else e.writeToBuffer(t);this.offset=n}integrityCheckOnValueAddition(){if(this.finished)throw"Adding values after finish is prohibited";if(0!==this.stackPointers.length&&!1===this.stackPointers[this.stackPointers.length-1].isVector&&this.stack[this.stack.length-1].type!==cy.ValueType.KEY)throw"Adding value to a map before adding a key is prohibited"}integrityCheckOnKeyAddition(){if(this.finished)throw"Adding values after finish is prohibited";if(0===this.stackPointers.length||this.stackPointers[this.stackPointers.length-1].isVector)throw"Adding key before starting a map is prohibited"}startVector(){this.stackPointers.push({stackPosition:this.stack.length,isVector:!0})}startMap(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.stackPointers.push({stackPosition:this.stack.length,isVector:!1,presorted:e})}endVector(e){const t=this.stack.length-e.stackPosition,n=this.createVector(e.stackPosition,t,1);this.stack.splice(e.stackPosition,t),this.stack.push(n)}endMap(e){e.presorted||this.sort(e);let t="";for(let o=e.stackPosition;o<this.stack.length;o+=2)t+=",".concat(this.stack[o].offset);const n=this.stack.length-e.stackPosition>>1;this.dedupKeyVectors&&!Object.prototype.hasOwnProperty.call(this.keyVectorLookup,t)&&(this.keyVectorLookup[t]=this.createVector(e.stackPosition,n,2));const r=this.dedupKeyVectors?this.keyVectorLookup[t]:this.createVector(e.stackPosition,n,2),i=this.createVector(e.stackPosition+1,n,2,r);this.stack.splice(e.stackPosition,n<<1),this.stack.push(i)}sort(e){const t=this.view,n=this.stack;function r(e,n){if(e.type!==cy.ValueType.KEY||n.type!==cy.ValueType.KEY)throw"Stack values are not keys ".concat(e," | ").concat(n,". Check if you combined [addKey] with add... method calls properly.");let r,i,o=0;do{if(r=t.getUint8(e.offset+o),i=t.getUint8(n.offset+o),i<r)return!0;if(r<i)return!1;o+=1}while(0!==r&&0!==i);return!1}function i(e,t,n){if(t===n)return;const r=e[t],i=e[t+1];e[t]=e[n],e[t+1]=e[n+1],e[n]=r,e[n+1]=i}function o(e,n){if(e.type!==cy.ValueType.KEY||n.type!==cy.ValueType.KEY)throw"Stack values are not keys ".concat(e," | ").concat(n,". Check if you combined [addKey] with add... method calls properly.");if(e.offset===n.offset)return!1;let r,i,o=0;do{if(r=t.getUint8(e.offset+o),i=t.getUint8(n.offset+o),r<i)return!0;if(i<r)return!1;o+=1}while(0!==r&&0!==i);return!1}let s=!0;for(let a=e.stackPosition;a<this.stack.length-2;a+=2)if(r(this.stack[a],this.stack[a+2])){s=!1;break}s||(this.stack.length-e.stackPosition>40?function e(t,r){if(t<r){const s=n[t+2*(r-t>>2)];let a=t,l=r;do{for(;o(n[a],s);)a+=2;for(;o(s,n[l]);)l-=2;a<=l&&(i(n,a,l),a+=2,l-=2)}while(a<=l);e(t,l),e(a,r)}}(e.stackPosition,this.stack.length-2):function(){for(let t=e.stackPosition;t<n.length;t+=2){let e=t;for(let i=t+2;i<n.length;i+=2)r(n[e],n[i])&&(e=i);e!==t&&i(n,e,t)}}())}end(){if(this.stackPointers.length<1)return;const e=this.stackPointers.pop();e.isVector?this.endVector(e):this.endMap(e)}createVector(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=(0,ay.uwidth)(t),o=1;if(null!==r){const e=r.elementWidth(this.offset,0);e>i&&(i=e),o+=2}let s=cy.ValueType.KEY,a=null===r;for(let d=e;d<this.stack.length;d+=n){const t=this.stack[d].elementWidth(this.offset,d+o);t>i&&(i=t),d===e?(s=this.stack[d].type,a=a&&(0,uy.isTypedVectorElement)(s)):s!==this.stack[d].type&&(a=!1)}const l=this.align(i),c=a&&(0,uy.isNumber)(s)&&t>=2&&t<=4;null!==r&&(this.writeStackValue(r,l),this.writeUInt(1<<r.width,l)),c||this.writeUInt(t,l);const u=this.offset;for(let d=e;d<this.stack.length;d+=n)this.writeStackValue(this.stack[d],l);if(!a)for(let d=e;d<this.stack.length;d+=n)this.writeUInt(this.stack[d].storedPackedType(),1);if(null!==r)return this.offsetStackValue(u,cy.ValueType.MAP,i);if(a){const e=(0,uy.toTypedVector)(s,c?t:0);return this.offsetStackValue(u,e,i)}return this.offsetStackValue(u,cy.ValueType.VECTOR,i)}nullStackValue(){return new dy.StackValue(this,cy.ValueType.NULL,sy.BitWidth.WIDTH8)}boolStackValue(e){return new dy.StackValue(this,cy.ValueType.BOOL,sy.BitWidth.WIDTH8,e)}intStackValue(e){return new dy.StackValue(this,cy.ValueType.INT,(0,ay.iwidth)(e),e)}uintStackValue(e){return new dy.StackValue(this,cy.ValueType.UINT,(0,ay.uwidth)(e),e)}floatStackValue(e){return new dy.StackValue(this,cy.ValueType.FLOAT,(0,ay.fwidth)(e),e)}offsetStackValue(e,t,n){return new dy.StackValue(this,t,n,null,e)}finishBuffer(){if(1!==this.stack.length)throw"Stack has to be exactly 1, but it is ".concat(this.stack.length,". You have to end all started vectors and maps before calling [finish]");const e=this.stack[0],t=this.align(e.elementWidth(this.offset,0));this.writeStackValue(e,t),this.writeUInt(e.storedPackedType(),1),this.writeUInt(t,1),this.finished=!0}add(e){if(this.integrityCheckOnValueAddition(),void 0===e)throw"You need to provide a value";if(null===e)this.stack.push(this.nullStackValue());else if("boolean"==typeof e)this.stack.push(this.boolStackValue(e));else if("bigint"==typeof e)this.stack.push(this.intStackValue(e));else if("number"==typeof e)Number.isInteger(e)?this.stack.push(this.intStackValue(e)):this.stack.push(this.floatStackValue(e));else if(ArrayBuffer.isView(e))this.writeBlob(e.buffer);else if("string"==typeof e||e instanceof String)this.writeString(e);else if(Array.isArray(e)){this.startVector();for(let t=0;t<e.length;t++)this.add(e[t]);this.end()}else{if("object"!=typeof e)throw"Unexpected value input ".concat(e);{const t=Object.getOwnPropertyNames(e).sort();this.startMap(!0);for(let n=0;n<t.length;n++){const r=t[n];this.addKey(r),this.add(e[r])}this.end()}}}finish(){this.finished||this.finishBuffer();const e=this.buffer.slice(0,this.offset);return new Uint8Array(e)}isFinished(){return this.finished}addKey(e){this.integrityCheckOnKeyAddition(),this.writeKey(e)}addInt(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.integrityCheckOnValueAddition(),!t)return void this.stack.push(this.intStackValue(e));if(n&&Object.prototype.hasOwnProperty.call(this.indirectIntLookup,e))return void this.stack.push(this.indirectIntLookup[e]);const r=this.intStackValue(e),i=this.align(r.width),o=this.computeOffset(i),s=this.offset;r.writeToBuffer(i);const a=this.offsetStackValue(s,cy.ValueType.INDIRECT_INT,r.width);this.stack.push(a),this.offset=o,n&&(this.indirectIntLookup[e]=a)}addUInt(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.integrityCheckOnValueAddition(),!t)return void this.stack.push(this.uintStackValue(e));if(n&&Object.prototype.hasOwnProperty.call(this.indirectUIntLookup,e))return void this.stack.push(this.indirectUIntLookup[e]);const r=this.uintStackValue(e),i=this.align(r.width),o=this.computeOffset(i),s=this.offset;r.writeToBuffer(i);const a=this.offsetStackValue(s,cy.ValueType.INDIRECT_UINT,r.width);this.stack.push(a),this.offset=o,n&&(this.indirectUIntLookup[e]=a)}addFloat(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.integrityCheckOnValueAddition(),!t)return void this.stack.push(this.floatStackValue(e));if(n&&Object.prototype.hasOwnProperty.call(this.indirectFloatLookup,e))return void this.stack.push(this.indirectFloatLookup[e]);const r=this.floatStackValue(e),i=this.align(r.width),o=this.computeOffset(i),s=this.offset;r.writeToBuffer(i);const a=this.offsetStackValue(s,cy.ValueType.INDIRECT_FLOAT,r.width);this.stack.push(a),this.offset=o,n&&(this.indirectFloatLookup[e]=a)}};var hy={},fy={};Object.defineProperty(fy,"__esModule",{value:!0}),fy.keyForIndex=fy.diffKeys=fy.keyIndex=fy.indirect=fy.readFloat=fy.readUInt=fy.readInt=fy.validateOffset=void 0;const py=Gv,gy=Yv,my=$v;function vy(e,t,n){return n<2?n<1?e.getUint8(t):e.getUint16(t,!0):n<3?e.getUint32(t,!0):void 0===e.getBigUint64?BigInt(e.getUint32(t,!0))+(BigInt(e.getUint32(t+4,!0))<<BigInt(32)):e.getBigUint64(t,!0)}function yy(e,t,n){return t-vy(e,t,n)}function by(e,t,n,r,i){const o=r+t*i,s=o-Number(vy(n,o,(0,gy.fromByteWidth)(i)));for(let a=0;a<e.length;a++){const t=e[a]-n.getUint8(s+a);if(0!==t)return t}return 0===n.getUint8(s+e.length)?0:-1}fy.validateOffset=function(e,t,n){if(e.byteLength<=t+n||0!=(t&(0,gy.toByteWidth)(n)-1))throw"Bad offset: "+t+", width: "+n},fy.readInt=function(e,t,n){return n<2?n<1?e.getInt8(t):e.getInt16(t,!0):n<3?e.getInt32(t,!0):void 0===e.setBigInt64?BigInt(e.getUint32(t,!0))+(BigInt(e.getUint32(t+4,!0))<<BigInt(32)):e.getBigInt64(t,!0)},fy.readUInt=vy,fy.readFloat=function(e,t,n){if(n<py.BitWidth.WIDTH32)throw"Bad width: "+n;return n===py.BitWidth.WIDTH32?e.getFloat32(t,!0):e.getFloat64(t,!0)},fy.indirect=yy,fy.keyIndex=function(e,t,n,r,i,o){const s=(0,my.toUTF8Array)(e),a=yy(t,n,r)-3*i,l=(0,gy.fromByteWidth)(i),c=a-Number(vy(t,a,l)),u=Number(vy(t,a+i,l));let d=0,h=o-1;for(;d<=h;){const e=h+d>>1,n=by(s,e,t,c,u);if(0===n)return e;n<0?h=e-1:d=e+1}return null},fy.diffKeys=by,fy.keyForIndex=function(e,t,n,r,i){const o=yy(t,n,r)-3*i,s=(0,gy.fromByteWidth)(i),a=o-Number(vy(t,o,s)),l=Number(vy(t,o+i,s)),c=a+e*l,u=c-Number(vy(t,c,(0,gy.fromByteWidth)(l)));let d=0;for(;0!==t.getUint8(u+d);)d++;return(0,my.fromUTF8Array)(new Uint8Array(t.buffer,u,d))},Object.defineProperty(hy,"__esModule",{value:!0}),hy.Reference=hy.toReference=void 0;const wy=Yv,Sy=Qv,_y=Jv,Ey=fy,ky=$v,Py=Gv;function Ay(e,t,n,r,i,o,s,a){const l=(0,Ey.indirect)(n,r,i),c=l+e*o,u=n.getUint8(l+s*o+e);return new xy(n,c,(0,wy.fromByteWidth)(o),u,"".concat(a,"/").concat(t))}hy.toReference=function(e){const t=e.byteLength;if(t<3)throw"Buffer needs to be bigger than 3";const n=new DataView(e),r=n.getUint8(t-1),i=n.getUint8(t-2),o=(0,wy.fromByteWidth)(r);return new xy(n,t-r-2,o,i,"/")};class xy{constructor(e,t,n,r,i){this.dataView=e,this.offset=t,this.parentWidth=n,this.packedType=r,this.path=i,this._length=-1,this.byteWidth=1<<(3&r),this.valueType=r>>2}isNull(){return this.valueType===Sy.ValueType.NULL}isNumber(){return(0,_y.isNumber)(this.valueType)||(0,_y.isIndirectNumber)(this.valueType)}isFloat(){return Sy.ValueType.FLOAT===this.valueType||Sy.ValueType.INDIRECT_FLOAT===this.valueType}isInt(){return this.isNumber()&&!this.isFloat()}isString(){return Sy.ValueType.STRING===this.valueType||Sy.ValueType.KEY===this.valueType}isBool(){return Sy.ValueType.BOOL===this.valueType}isBlob(){return Sy.ValueType.BLOB===this.valueType}isVector(){return(0,_y.isAVector)(this.valueType)}isMap(){return Sy.ValueType.MAP===this.valueType}boolValue(){return this.isBool()?(0,Ey.readInt)(this.dataView,this.offset,this.parentWidth)>0:null}intValue(){return this.valueType===Sy.ValueType.INT?(0,Ey.readInt)(this.dataView,this.offset,this.parentWidth):this.valueType===Sy.ValueType.UINT?(0,Ey.readUInt)(this.dataView,this.offset,this.parentWidth):this.valueType===Sy.ValueType.INDIRECT_INT?(0,Ey.readInt)(this.dataView,(0,Ey.indirect)(this.dataView,this.offset,this.parentWidth),(0,wy.fromByteWidth)(this.byteWidth)):this.valueType===Sy.ValueType.INDIRECT_UINT?(0,Ey.readUInt)(this.dataView,(0,Ey.indirect)(this.dataView,this.offset,this.parentWidth),(0,wy.fromByteWidth)(this.byteWidth)):null}floatValue(){return this.valueType===Sy.ValueType.FLOAT?(0,Ey.readFloat)(this.dataView,this.offset,this.parentWidth):this.valueType===Sy.ValueType.INDIRECT_FLOAT?(0,Ey.readFloat)(this.dataView,(0,Ey.indirect)(this.dataView,this.offset,this.parentWidth),(0,wy.fromByteWidth)(this.byteWidth)):null}numericValue(){return this.floatValue()||this.intValue()}stringValue(){if(this.valueType===Sy.ValueType.STRING||this.valueType===Sy.ValueType.KEY){const e=(0,Ey.indirect)(this.dataView,this.offset,this.parentWidth);return(0,ky.fromUTF8Array)(new Uint8Array(this.dataView.buffer,e,this.length()))}return null}blobValue(){if(this.isBlob()){const e=(0,Ey.indirect)(this.dataView,this.offset,this.parentWidth);return new Uint8Array(this.dataView.buffer,e,this.length())}return null}get(e){const t=this.length();if(Number.isInteger(e)&&(0,_y.isAVector)(this.valueType)){if(e>=t||e<0)throw"Key: [".concat(e,"] is not applicable on ").concat(this.path," of ").concat(this.valueType," length: ").concat(t);const n=(0,Ey.indirect)(this.dataView,this.offset,this.parentWidth),r=n+e*this.byteWidth;let i=this.dataView.getUint8(n+t*this.byteWidth+e);if((0,_y.isTypedVector)(this.valueType)){const e=(0,_y.typedVectorElementType)(this.valueType);i=(0,_y.packedType)(e,Py.BitWidth.WIDTH8)}else if((0,_y.isFixedTypedVector)(this.valueType)){const e=(0,_y.fixedTypedVectorElementType)(this.valueType);i=(0,_y.packedType)(e,Py.BitWidth.WIDTH8)}return new xy(this.dataView,r,(0,wy.fromByteWidth)(this.byteWidth),i,"".concat(this.path,"[").concat(e,"]"))}if("string"==typeof e){const n=(0,Ey.keyIndex)(e,this.dataView,this.offset,this.parentWidth,this.byteWidth,t);if(null!==n)return Ay(n,e,this.dataView,this.offset,this.parentWidth,this.byteWidth,t,this.path)}throw"Key [".concat(e,"] is not applicable on ").concat(this.path," of ").concat(this.valueType)}length(){let e;if(this._length>-1)return this._length;if((0,_y.isFixedTypedVector)(this.valueType))this._length=(0,_y.fixedTypedVectorElementSize)(this.valueType);else if(this.valueType===Sy.ValueType.BLOB||this.valueType===Sy.ValueType.MAP||(0,_y.isAVector)(this.valueType))this._length=(0,Ey.readUInt)(this.dataView,(0,Ey.indirect)(this.dataView,this.offset,this.parentWidth)-this.byteWidth,(0,wy.fromByteWidth)(this.byteWidth));else if(this.valueType===Sy.ValueType.NULL)this._length=0;else if(this.valueType===Sy.ValueType.STRING){const t=(0,Ey.indirect)(this.dataView,this.offset,this.parentWidth);let n=this.byteWidth;for(e=(0,Ey.readUInt)(this.dataView,t-n,(0,wy.fromByteWidth)(this.byteWidth));0!==this.dataView.getInt8(t+e);)n<<=1,e=(0,Ey.readUInt)(this.dataView,t-n,(0,wy.fromByteWidth)(this.byteWidth));this._length=e}else if(this.valueType===Sy.ValueType.KEY){const t=(0,Ey.indirect)(this.dataView,this.offset,this.parentWidth);for(e=1;0!==this.dataView.getInt8(t+e);)e++;this._length=e}else this._length=1;return Number(this._length)}toObject(){const e=this.length();if(this.isVector()){const t=[];for(let n=0;n<e;n++)t.push(this.get(n).toObject());return t}if(this.isMap()){const t={};for(let n=0;n<e;n++){const r=(0,Ey.keyForIndex)(n,this.dataView,this.offset,this.parentWidth,this.byteWidth);t[r]=Ay(n,r,this.dataView,this.offset,this.parentWidth,this.byteWidth,e,this.path).toObject()}return t}return this.isNull()?null:this.isBool()?this.boolValue():this.isNumber()?this.numericValue():this.blobValue()||this.stringValue()}}hy.Reference=xy,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.encode=e.toObject=e.builder=e.toReference=void 0;const t=Wv,n=hy;var r=hy;Object.defineProperty(e,"toReference",{enumerable:!0,get:function(){return r.toReference}}),e.builder=function(){return new t.Builder},e.toObject=function(e){return(0,n.toReference)(e).toObject()},e.encode=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2048,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];const s=new t.Builder(n>0?n:2048,r,i,o);return s.add(e),s.finish()}}(Hv);var Iy,Oy={exports:{}};Iy=Oy,function(){var e="input is invalid type",t="object"==typeof window,n=t?window:{};n.JS_SHA3_NO_WINDOW&&(t=!1);var r=!t&&"object"==typeof self;!n.JS_SHA3_NO_NODE_JS&&"object"==typeof yi&&yi.versions&&yi.versions.node?n=bi:r&&(n=self);for(var i=!n.JS_SHA3_NO_COMMON_JS&&Iy.exports,o=!n.JS_SHA3_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,s="0123456789abcdef".split(""),a=[4,1024,262144,67108864],l=[0,8,16,24],c=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],u=[224,256,384,512],d=[128,256],h=["hex","buffer","arrayBuffer","array","digest"],f={128:168,256:136},p=n.JS_SHA3_NO_NODE_JS||!Array.isArray?function(e){return"[object Array]"===Object.prototype.toString.call(e)}:Array.isArray,g=!o||!n.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView?ArrayBuffer.isView:function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer},m=function(t){var n=typeof t;if("string"===n)return[t,!0];if("object"!==n||null===t)throw new Error(e);if(o&&t.constructor===ArrayBuffer)return[new Uint8Array(t),!1];if(!p(t)&&!g(t))throw new Error(e);return[t,!1]},v=function(e){return 0===m(e)[0].length},y=function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n];return t},b=function(e,t,n){return function(r){return new j(e,t,e).update(r)[n]()}},w=function(e,t,n){return function(r,i){return new j(e,t,i).update(r)[n]()}},S=function(e,t,n){return function(t,r,i,o){return A["cshake"+e].update(t,r,i,o)[n]()}},_=function(e,t,n){return function(t,r,i,o){return A["kmac"+e].update(t,r,i,o)[n]()}},E=function(e,t,n,r){for(var i=0;i<h.length;++i){var o=h[i];e[o]=t(n,r,o)}return e},k=function(e,t){var n=b(e,t,"hex");return n.create=function(){return new j(e,t,e)},n.update=function(e){return n.create().update(e)},E(n,b,e,t)},P=[{name:"keccak",padding:[1,256,65536,16777216],bits:u,createMethod:k},{name:"sha3",padding:[6,1536,393216,100663296],bits:u,createMethod:k},{name:"shake",padding:[31,7936,2031616,520093696],bits:d,createMethod:function(e,t){var n=w(e,t,"hex");return n.create=function(n){return new j(e,t,n)},n.update=function(e,t){return n.create(t).update(e)},E(n,w,e,t)}},{name:"cshake",padding:a,bits:d,createMethod:function(e,t){var n=f[e],r=S(e,0,"hex");return r.create=function(r,i,o){return v(i)&&v(o)?A["shake"+e].create(r):new j(e,t,r).bytepad([i,o],n)},r.update=function(e,t,n,i){return r.create(t,n,i).update(e)},E(r,S,e,t)}},{name:"kmac",padding:a,bits:d,createMethod:function(e,t){var n=f[e],r=_(e,0,"hex");return r.create=function(r,i,o){return new D(e,t,i).bytepad(["KMAC",o],n).bytepad([r],n)},r.update=function(e,t,n,i){return r.create(e,n,i).update(t)},E(r,_,e,t)}}],A={},x=[],I=0;I<P.length;++I)for(var O=P[I],T=O.bits,R=0;R<T.length;++R){var C=O.name+"_"+T[R];if(x.push(C),A[C]=O.createMethod(T[R],O.padding),"sha3"!==O.name){var N=O.name+T[R];x.push(N),A[N]=A[C]}}function j(e,t,n){this.blocks=[],this.s=[],this.padding=t,this.outputBits=n,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(e<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=n>>5,this.extraBytes=(31&n)>>3;for(var r=0;r<50;++r)this.s[r]=0}function D(e,t,n){j.call(this,e,t,n)}j.prototype.update=function(e){if(this.finalized)throw new Error("finalize already called");var t=m(e);e=t[0];for(var n,r,i=t[1],o=this.blocks,s=this.byteCount,a=e.length,c=this.blockCount,u=0,d=this.s;u<a;){if(this.reset)for(this.reset=!1,o[0]=this.block,n=1;n<c+1;++n)o[n]=0;if(i)for(n=this.start;u<a&&n<s;++u)(r=e.charCodeAt(u))<128?o[n>>2]|=r<<l[3&n++]:r<2048?(o[n>>2]|=(192|r>>6)<<l[3&n++],o[n>>2]|=(128|63&r)<<l[3&n++]):r<55296||r>=57344?(o[n>>2]|=(224|r>>12)<<l[3&n++],o[n>>2]|=(128|r>>6&63)<<l[3&n++],o[n>>2]|=(128|63&r)<<l[3&n++]):(r=65536+((1023&r)<<10|1023&e.charCodeAt(++u)),o[n>>2]|=(240|r>>18)<<l[3&n++],o[n>>2]|=(128|r>>12&63)<<l[3&n++],o[n>>2]|=(128|r>>6&63)<<l[3&n++],o[n>>2]|=(128|63&r)<<l[3&n++]);else for(n=this.start;u<a&&n<s;++u)o[n>>2]|=e[u]<<l[3&n++];if(this.lastByteIndex=n,n>=s){for(this.start=n-s,this.block=o[c],n=0;n<c;++n)d[n]^=o[n];F(d),this.reset=!0}else this.start=n}return this},j.prototype.encode=function(e,t){var n=255&e,r=1,i=[n];for(n=255&(e>>=8);n>0;)i.unshift(n),n=255&(e>>=8),++r;return t?i.push(r):i.unshift(r),this.update(i),i.length},j.prototype.encodeString=function(e){var t=m(e);e=t[0];var n=t[1],r=0,i=e.length;if(n)for(var o=0;o<e.length;++o){var s=e.charCodeAt(o);s<128?r+=1:s<2048?r+=2:s<55296||s>=57344?r+=3:(s=65536+((1023&s)<<10|1023&e.charCodeAt(++o)),r+=4)}else r=i;return r+=this.encode(8*r),this.update(e),r},j.prototype.bytepad=function(e,t){for(var n=this.encode(t),r=0;r<e.length;++r)n+=this.encodeString(e[r]);var i=(t-n%t)%t,o=[];return o.length=i,this.update(o),this},j.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex,n=this.blockCount,r=this.s;if(e[t>>2]|=this.padding[3&t],this.lastByteIndex===this.byteCount)for(e[0]=e[n],t=1;t<n+1;++t)e[t]=0;for(e[n-1]|=2147483648,t=0;t<n;++t)r[t]^=e[t];F(r)}},j.prototype.toString=j.prototype.hex=function(){this.finalize();for(var e,t=this.blockCount,n=this.s,r=this.outputBlocks,i=this.extraBytes,o=0,a=0,l="";a<r;){for(o=0;o<t&&a<r;++o,++a)e=n[o],l+=s[e>>4&15]+s[15&e]+s[e>>12&15]+s[e>>8&15]+s[e>>20&15]+s[e>>16&15]+s[e>>28&15]+s[e>>24&15];a%t==0&&(n=y(n),F(n),o=0)}return i&&(e=n[o],l+=s[e>>4&15]+s[15&e],i>1&&(l+=s[e>>12&15]+s[e>>8&15]),i>2&&(l+=s[e>>20&15]+s[e>>16&15])),l},j.prototype.arrayBuffer=function(){this.finalize();var e,t=this.blockCount,n=this.s,r=this.outputBlocks,i=this.extraBytes,o=0,s=0,a=this.outputBits>>3;e=i?new ArrayBuffer(r+1<<2):new ArrayBuffer(a);for(var l=new Uint32Array(e);s<r;){for(o=0;o<t&&s<r;++o,++s)l[s]=n[o];s%t==0&&(n=y(n),F(n))}return i&&(l[s]=n[o],e=e.slice(0,a)),e},j.prototype.buffer=j.prototype.arrayBuffer,j.prototype.digest=j.prototype.array=function(){this.finalize();for(var e,t,n=this.blockCount,r=this.s,i=this.outputBlocks,o=this.extraBytes,s=0,a=0,l=[];a<i;){for(s=0;s<n&&a<i;++s,++a)e=a<<2,t=r[s],l[e]=255&t,l[e+1]=t>>8&255,l[e+2]=t>>16&255,l[e+3]=t>>24&255;a%n==0&&(r=y(r),F(r))}return o&&(e=a<<2,t=r[s],l[e]=255&t,o>1&&(l[e+1]=t>>8&255),o>2&&(l[e+2]=t>>16&255)),l},D.prototype=new j,D.prototype.finalize=function(){return this.encode(this.outputBits,!0),j.prototype.finalize.call(this)};var F=function(e){var t,n,r,i,o,s,a,l,u,d,h,f,p,g,m,v,y,b,w,S,_,E,k,P,A,x,I,O,T,R,C,N,j,D,F,L,M,B,U,z,V,q,H,W,G,Y,K,$,Q,J,X,Z,ee,te,ne,re,ie,oe,se,ae,le,ce,ue;for(r=0;r<48;r+=2)i=e[0]^e[10]^e[20]^e[30]^e[40],o=e[1]^e[11]^e[21]^e[31]^e[41],s=e[2]^e[12]^e[22]^e[32]^e[42],a=e[3]^e[13]^e[23]^e[33]^e[43],l=e[4]^e[14]^e[24]^e[34]^e[44],u=e[5]^e[15]^e[25]^e[35]^e[45],d=e[6]^e[16]^e[26]^e[36]^e[46],h=e[7]^e[17]^e[27]^e[37]^e[47],t=(f=e[8]^e[18]^e[28]^e[38]^e[48])^(s<<1|a>>>31),n=(p=e[9]^e[19]^e[29]^e[39]^e[49])^(a<<1|s>>>31),e[0]^=t,e[1]^=n,e[10]^=t,e[11]^=n,e[20]^=t,e[21]^=n,e[30]^=t,e[31]^=n,e[40]^=t,e[41]^=n,t=i^(l<<1|u>>>31),n=o^(u<<1|l>>>31),e[2]^=t,e[3]^=n,e[12]^=t,e[13]^=n,e[22]^=t,e[23]^=n,e[32]^=t,e[33]^=n,e[42]^=t,e[43]^=n,t=s^(d<<1|h>>>31),n=a^(h<<1|d>>>31),e[4]^=t,e[5]^=n,e[14]^=t,e[15]^=n,e[24]^=t,e[25]^=n,e[34]^=t,e[35]^=n,e[44]^=t,e[45]^=n,t=l^(f<<1|p>>>31),n=u^(p<<1|f>>>31),e[6]^=t,e[7]^=n,e[16]^=t,e[17]^=n,e[26]^=t,e[27]^=n,e[36]^=t,e[37]^=n,e[46]^=t,e[47]^=n,t=d^(i<<1|o>>>31),n=h^(o<<1|i>>>31),e[8]^=t,e[9]^=n,e[18]^=t,e[19]^=n,e[28]^=t,e[29]^=n,e[38]^=t,e[39]^=n,e[48]^=t,e[49]^=n,g=e[0],m=e[1],Y=e[11]<<4|e[10]>>>28,K=e[10]<<4|e[11]>>>28,O=e[20]<<3|e[21]>>>29,T=e[21]<<3|e[20]>>>29,ae=e[31]<<9|e[30]>>>23,le=e[30]<<9|e[31]>>>23,q=e[40]<<18|e[41]>>>14,H=e[41]<<18|e[40]>>>14,D=e[2]<<1|e[3]>>>31,F=e[3]<<1|e[2]>>>31,v=e[13]<<12|e[12]>>>20,y=e[12]<<12|e[13]>>>20,$=e[22]<<10|e[23]>>>22,Q=e[23]<<10|e[22]>>>22,R=e[33]<<13|e[32]>>>19,C=e[32]<<13|e[33]>>>19,ce=e[42]<<2|e[43]>>>30,ue=e[43]<<2|e[42]>>>30,te=e[5]<<30|e[4]>>>2,ne=e[4]<<30|e[5]>>>2,L=e[14]<<6|e[15]>>>26,M=e[15]<<6|e[14]>>>26,b=e[25]<<11|e[24]>>>21,w=e[24]<<11|e[25]>>>21,J=e[34]<<15|e[35]>>>17,X=e[35]<<15|e[34]>>>17,N=e[45]<<29|e[44]>>>3,j=e[44]<<29|e[45]>>>3,P=e[6]<<28|e[7]>>>4,A=e[7]<<28|e[6]>>>4,re=e[17]<<23|e[16]>>>9,ie=e[16]<<23|e[17]>>>9,B=e[26]<<25|e[27]>>>7,U=e[27]<<25|e[26]>>>7,S=e[36]<<21|e[37]>>>11,_=e[37]<<21|e[36]>>>11,Z=e[47]<<24|e[46]>>>8,ee=e[46]<<24|e[47]>>>8,W=e[8]<<27|e[9]>>>5,G=e[9]<<27|e[8]>>>5,x=e[18]<<20|e[19]>>>12,I=e[19]<<20|e[18]>>>12,oe=e[29]<<7|e[28]>>>25,se=e[28]<<7|e[29]>>>25,z=e[38]<<8|e[39]>>>24,V=e[39]<<8|e[38]>>>24,E=e[48]<<14|e[49]>>>18,k=e[49]<<14|e[48]>>>18,e[0]=g^~v&b,e[1]=m^~y&w,e[10]=P^~x&O,e[11]=A^~I&T,e[20]=D^~L&B,e[21]=F^~M&U,e[30]=W^~Y&$,e[31]=G^~K&Q,e[40]=te^~re&oe,e[41]=ne^~ie&se,e[2]=v^~b&S,e[3]=y^~w&_,e[12]=x^~O&R,e[13]=I^~T&C,e[22]=L^~B&z,e[23]=M^~U&V,e[32]=Y^~$&J,e[33]=K^~Q&X,e[42]=re^~oe&ae,e[43]=ie^~se&le,e[4]=b^~S&E,e[5]=w^~_&k,e[14]=O^~R&N,e[15]=T^~C&j,e[24]=B^~z&q,e[25]=U^~V&H,e[34]=$^~J&Z,e[35]=Q^~X&ee,e[44]=oe^~ae&ce,e[45]=se^~le&ue,e[6]=S^~E&g,e[7]=_^~k&m,e[16]=R^~N&P,e[17]=C^~j&A,e[26]=z^~q&D,e[27]=V^~H&F,e[36]=J^~Z&W,e[37]=X^~ee&G,e[46]=ae^~ce&te,e[47]=le^~ue&ne,e[8]=E^~g&v,e[9]=k^~m&y,e[18]=N^~P&x,e[19]=j^~A&I,e[28]=q^~D&L,e[29]=H^~F&M,e[38]=Z^~W&Y,e[39]=ee^~G&K,e[48]=ce^~te&re,e[49]=ue^~ne&ie,e[0]^=c[r],e[1]^=c[r+1]};if(i)Iy.exports=A;else for(I=0;I<x.length;++I)n[x[I]]=A[x[I]]}();var Ty=Oy.exports;class Ry{constructor(e,t){var n;this.yagnaApi=e,this.options=t,this.services=new Map,this.logger=null!==(n=t.logger)&&void 0!==n?n:Yr()}close(){return this.release(Array.from(this.services.keys()))}init(){return Promise.resolve(void 0)}async publishData(e){const t=await this.createFileInfo(),n=await this.createSocket(t,["GetMetadata","GetChunk"]);return n.addEventListener("message",(t=>{const r=Hv.toObject(t.data);"GetMetadata"===r.component?this.respond(n,r.id,{fileSize:e.byteLength}):"GetChunk"===r.component?this.respond(n,r.id,{content:e.slice(r.payload.offset,r.payload.offset+r.payload.size),offset:r.payload.offset}):this.logger.error("[WebSocketBrowserStorageProvider] Unsupported message in publishData(): ".concat(r.component))})),t.url}async publishFile(){throw new Fr("Not implemented")}async receiveData(e){const t=[],n=await this.createFileInfo(),r=await this.createSocket(n,["UploadChunk","UploadFinished"]);return r.addEventListener("message",(n=>{const i=Hv.toObject(n.data);if("UploadChunk"===i.component)t.push(i.payload.chunk),this.respond(r,i.id,null);else if("UploadFinished"===i.component){this.respond(r,i.id,null);const n=this.completeReceive(i.payload.hash,t);e(n)}else this.logger.error("[WebSocketBrowserStorageProvider] Unsupported message in receiveData(): ".concat(i.component))})),n.url}async receiveFile(){throw new Fr("Not implemented")}async release(e){e.forEach((e=>{const t=this.services.get(e);t&&this.deleteService(t).catch((e=>this.logger.warn("[WebSocketBrowserStorageProvider] Failed to delete service",{serviceId:t,error:e}))),this.services.delete(e)}))}async createFileInfo(){const e=Rf();return{id:e,url:"gftp://".concat((await this.yagnaApi.identity.getIdentity()).identity,"/").concat(e)}}async createSocket(e,t){const n=await this.createService(e,t),r=new WebSocket(n.url,["gsb+flexbuffers"]);return r.addEventListener("error",(()=>{this.logger.error("[WebSocketBrowserStorageProvider] Socket Error (".concat(e.id,")"))})),r.binaryType="arraybuffer",r}async createService(e,t){const n=(await this.yagnaApi.gsb.createService(e,t)).servicesId,r="/gsb-api/v1/services/".concat(n,"?authToken=").concat(this.yagnaApi.yagnaOptions.apiKey),i=new URL(r,this.yagnaApi.yagnaOptions.basePath);return i.protocol="ws:",this.services.set(e.url,n),{url:i,serviceId:n}}async deleteService(e){await this.yagnaApi.gsb.deleteService(e)}respond(e,t,n){e.send(Hv.encode({id:t,payload:n}))}completeReceive(e,t){t.sort(((e,t)=>e.offset-t.offset));const n=t.reduce(((e,t)=>e+t.content.byteLength),0),r=new Uint8Array(n);t.forEach((e=>{r.set(e.content,e.offset)}));const i=Ty.sha3_256(r);if(e!==i)throw new Fr("File corrupted, expected hash ".concat(e,", got ").concat(i));return r}}class Cy{static create(e,t,n){return new Cy(e,t,n||xi("work"))}constructor(e,t,n){this.activity=e,this.storageProvider=t,this.logger=n,this.script=new Ev([])}run(e,t){return t?this.script.add(new Iv(e,t)):this.script.add(new Iv("/bin/sh",["-c",e])),this}transfer(e,t){return this.script.add(new Ov(e,t)),this}uploadFile(e,t){return this.script.add(new Tv(this.storageProvider,e,t)),this}uploadJson(e,t){const n=(new TextEncoder).encode(JSON.stringify(e));return this.script.add(new Rv(this.storageProvider,n,t)),this}uploadData(e,t){return this.script.add(new Rv(this.storageProvider,e,t)),this}downloadFile(e,t){return this.script.add(new Cv(this.storageProvider,e,t)),this}async end(){await this.script.before();try{const e=[],t=this.script.getExeScriptRequest();this.logger.debug("Sending exec script request to the exe-unit on provider:",{script:t});const n=await this.activity.execute(t);return new Promise(((t,r)=>{this.logger.debug("Reading the results of the batch script"),n.on("data",(t=>{this.logger.debug("Received data for batch script execution",{res:t}),e.push(t)})),n.on("end",(()=>{this.logger.debug("End of batch script execution"),this.script.after(e).then((e=>t(e))).catch((e=>r(e)))})),n.on("error",(t=>{const n=t instanceof wv?t:new wv("Unable to execute script ".concat(t),yv.ScriptExecutionFailed,this.activity.agreement,this.activity,this.activity.agreement.getProviderInfo(),t);this.logger.debug("Error in batch script execution"),this.script.after(e).then((()=>r(n))).catch((()=>r(n)))}))}))}catch(Ur){if(this.logger.error("Failed to send the exec script to the exe-unit on provider",{error:Ur}),await this.script.after([]),Ur instanceof wv)throw Ur;throw new wv("Unable to execute script ".concat(Ur),yv.ScriptExecutionFailed,this.activity.agreement,this.activity,this.activity.agreement.getProviderInfo(),Ur)}}async endStream(){const e=this.script;let t;await e.before();try{t=await this.activity.execute(this.script.getExeScriptRequest())}catch(t){if(await e.after([]),t instanceof wv)throw t;throw new wv("Unable to execute script ".concat(t),yv.ScriptExecutionFailed,this.activity.agreement,this.activity,this.activity.agreement.getProviderInfo(),t)}const n=[],r=this.activity,i=new hh.Transform({objectMode:!0,transform(t,i,o){var s,a;const l="Error"===(null==t?void 0:t.result)?new wv("".concat(null==t?void 0:t.message,". Stdout: ").concat(null===(s=null==t?void 0:t.stdout)||void 0===s?void 0:s.trim(),". Stderr: ").concat(null===(a=null==t?void 0:t.stderr)||void 0===a?void 0:a.trim()),yv.ScriptExecutionFailed,r.agreement,r,r.agreement.getProviderInfo()):null;l?(e.after(n).catch(),this.destroy(l)):(n.push(t),o(null,t))}});return hh.pipeline(t,i,(()=>{e.after(n).catch()}))}}class Ny{constructor(e,t){this.streamOfActivityResults=e,this.activity=t,this.streamOfActivityResults.on("data",(e=>this.lastResult=e)),this.streamOfActivityResults.on("error",(e=>this.streamError=e));const{stdout:n,stderr:r}=this.transformResultsStream();this.stdout=n,this.stderr=r}waitForExit(e){return new Promise(((t,n)=>{const r=null!=e?e:2e4,i=setTimeout((()=>{n(new wv("Unable to get activity results. The waiting time (".concat(r," ms) for the final result has been exceeded"),yv.ActivityResultsFetchingFailed,this.activity.agreement,this.activity,this.activity.getProviderInfo(),new Mr("The waiting time (".concat(r," ms) for the final result has been exceeded")))),this.activity.stop().catch()}),r),o=()=>{clearTimeout(i),this.lastResult?t(this.lastResult):(n(new wv("An error occurred while retrieving the results. ".concat(this.streamError),yv.ActivityResultsFetchingFailed,this.activity.agreement,this.activity,this.activity.getProviderInfo())),this.activity.stop().catch())};if(this.streamOfActivityResults.closed)return o();this.streamOfActivityResults.on("close",o)}))}transformResultsStream(){const e=e=>new hh.Transform({objectMode:!0,transform(t,n,r){r(null,null==t?void 0:t[e])}});return{stdout:this.streamOfActivityResults.pipe(e("stdout")),stderr:this.streamOfActivityResults.pipe(e("stderr"))}}}class jy{constructor(e,t){var n,r;this.activity=e,this.options=t,this.activityPreparingTimeout=(null==t?void 0:t.activityPreparingTimeout)||3e5,this.logger=null!==(n=null==t?void 0:t.logger)&&void 0!==n?n:xi("work"),this.activityStateCheckingInterval=(null==t?void 0:t.activityStateCheckingInterval)||1e3,this.provider=e.agreement.getProviderInfo(),this.storageProvider=null!==(r=null==t?void 0:t.storageProvider)&&void 0!==r?r:new qv,this.networkNode=null==t?void 0:t.networkNode}async before(){var e,t;let n=await this.activity.getState().catch((e=>this.logger.warn("Error while getting activity state",{error:e})));if(n!==bv.Ready){if(n===bv.Initialized){const n=await this.activity.execute(new Ev([new Av(null===(t=null===(e=this.networkNode)||void 0===e?void 0:e.getNetworkConfig)||void 0===t?void 0:t.call(e)),new xv]).getExeScriptRequest(),void 0,this.activityPreparingTimeout).catch((e=>{throw new wv("Unable to deploy activity. ".concat(e),yv.ActivityDeploymentFailed,this.activity.agreement,this.activity,this.activity.getProviderInfo(),e)}));let r;await Promise.race([new Promise(((e,t)=>r=setTimeout((()=>t(new Mr("Preparing activity timeout"))),this.activityPreparingTimeout))),(async()=>{for await(const e of n)if(e.result===Hm.Error)throw new wv("Preparing activity failed. Error: ".concat(e.message),yv.ActivityDeploymentFailed,this.activity.agreement,this.activity,this.activity.getProviderInfo())})()]).catch((e=>{if(e instanceof wv)throw e;throw new wv("Preparing activity failed. Error: ".concat(e.toString()),yv.ActivityDeploymentFailed,this.activity.agreement,this.activity,this.activity.getProviderInfo(),e)})).finally((()=>clearTimeout(r)))}if(await Vr(this.activityStateCheckingInterval,!0),n=await this.activity.getState().catch((e=>this.logger.warn("Error while getting activity state",{error:e,provider:this.provider.name}))),n!==bv.Ready)throw new wv("Activity ".concat(this.activity.id," cannot reach the Ready state. Current state: ").concat(n),yv.ActivityDeploymentFailed,this.activity.agreement,this.activity,this.activity.getProviderInfo());await this.setupActivity()}else await this.setupActivity()}async setupActivity(){var e;if(null===(e=this.options)||void 0===e?void 0:e.activityReadySetupFunctions)for(const t of this.options.activityReadySetupFunctions)await t(this)}async run(e,t,n){const r=Array.isArray(t);this.logger.debug("Running command",{command:r?"".concat(e," ").concat(null==t?void 0:t.join(" ")):e,provider:this.provider.name});const i=r?new Iv(e,t,null==n?void 0:n.env,null==n?void 0:n.capture):new Iv("/bin/sh",["-c",e],null==t?void 0:t.env,null==t?void 0:t.capture),o=r?n:t;return this.runOneCommand(i,o)}async spawn(e,t,n){const r={stdout:{stream:{format:"string"}},stderr:{stream:{format:"string"}}},i=Array.isArray(t)?new Iv(e,t,null==n?void 0:n.env,r):new Iv("/bin/sh",["-c",e],null==t?void 0:t.env,r),o=new Ev([i]),s=await this.activity.execute(o.getExeScriptRequest(),!0,null==n?void 0:n.timeout).catch((e=>{var t,n;throw new wv("Script execution failed for command: ".concat(JSON.stringify(i.toJson()),". ").concat((null===(n=null===(t=null==e?void 0:e.response)||void 0===t?void 0:t.data)||void 0===n?void 0:n.message)||(null==e?void 0:e.message)||e),yv.ScriptExecutionFailed,this.activity.agreement,this.activity,this.activity.getProviderInfo(),e)}));return new Ny(s,this.activity)}async transfer(e,t,n){return this.logger.debug("Transferring",{from:e,to:t}),this.runOneCommand(new Ov(e,t),n)}async uploadFile(e,t,n){return this.logger.debug("Uploading file",{src:e,dst:t}),this.runOneCommand(new Tv(this.storageProvider,e,t),n)}uploadJson(e,t,n){this.logger.debug("Uploading json",{dst:t});const r=(new TextEncoder).encode(JSON.stringify(e));return this.runOneCommand(new Rv(this.storageProvider,r,t),n)}uploadData(e,t,n){return this.logger.debug("Uploading data",{dst:t}),this.runOneCommand(new Rv(this.storageProvider,e,t),n)}downloadFile(e,t,n){return this.logger.debug("Downloading file from",{src:e,dst:t}),this.runOneCommand(new Cv(this.storageProvider,e,t),n)}downloadData(e,t){return this.logger.debug("Downloading data",{src:e}),this.runOneCommand(new Nv(this.storageProvider,e),t)}async downloadJson(e,t){this.logger.debug("Downloading json",{src:e});const n=await this.downloadData(e,t);return n.result!==Hm.Ok?new Wm({...n,data:void 0}):new Wm({...n,data:JSON.parse((new TextDecoder).decode(n.data))})}beginBatch(){return Cy.create(this.activity,this.storageProvider,this.logger)}getWebsocketUri(e){if(!this.networkNode)throw new wv("There is no network in this work context",yv.NetworkSetupMissing,this.activity.agreement,this.activity,this.activity.getProviderInfo());return this.networkNode.getWebsocketUri(e)}getIp(){if(!this.networkNode)throw new wv("There is no network in this work context",yv.NetworkSetupMissing,this.activity.agreement,this.activity,this.activity.getProviderInfo());return this.networkNode.ip.toString()}async getState(){return this.activity.getState()}async runOneCommand(e,t){const n=new Ev([e]);await n.before().catch((t=>{var n,r;throw new wv("Script initialization failed for command: ".concat(JSON.stringify(e.toJson()),". ").concat((null===(r=null===(n=null==t?void 0:t.response)||void 0===n?void 0:n.data)||void 0===r?void 0:r.message)||(null==t?void 0:t.message)||t),yv.ScriptInitializationFailed,this.activity.agreement,this.activity,this.activity.getProviderInfo(),t)})),await Vr(100,!0);const r=await this.activity.execute(n.getExeScriptRequest(),!1,null==t?void 0:t.timeout);let i=[];for await(const s of r)i.push(s);i=await n.after(i);const o=i.filter((e=>"Error"===e.result));if(o.length){const e=o.map((e=>{var t,n;return"Error: ".concat(e.message,". Stdout: ").concat(null===(t=e.stdout)||void 0===t?void 0:t.toString().trim(),". Stderr: ").concat(null===(n=e.stderr)||void 0===n?void 0:n.toString().trim())})).join(". ");this.logger.warn("Task error",{provider:this.provider.name,error:e})}return i[0]}}const Dy=5,Fy=1e3,Ly=3e4,My=2e3,By=24e4;class Uy extends vv{constructor(e){super(e),this.maxParallelTasks=(null==e?void 0:e.maxParallelTasks)||Dy,this.taskRunningInterval=(null==e?void 0:e.taskRunningInterval)||Fy,this.taskTimeout=(null==e?void 0:e.taskTimeout)||Ly,this.activityStateCheckingInterval=(null==e?void 0:e.activityStateCheckingInterval)||My,this.logger=(null==e?void 0:e.logger)||xi("work"),this.storageProvider=null==e?void 0:e.storageProvider,this.activityPreparingTimeout=(null==e?void 0:e.activityPreparingTimeout)||By}}class zy{constructor(e,t,n,r,i,o){this.yagnaApi=e,this.tasksQueue=t,this.agreementPoolService=n,this.paymentService=r,this.networkService=i,this.activeTasksCount=0,this.activities=new Map,this.activitySetupDone=new Set,this.isRunning=!1,this.options=new Uy(o),this.logger=(null==o?void 0:o.logger)||xi("work")}async run(){for(this.isRunning=!0,this.logger.info("Task Service has started");this.isRunning;){if(this.activeTasksCount>=this.options.maxParallelTasks){await Vr(this.options.taskRunningInterval,!0);continue}const e=this.tasksQueue.get();e?(e.onStateChange((()=>{e.isRetry()?this.retryTask(e).catch((e=>this.logger.error("Issue with retrying a task on Golem",e))):e.isFinished()&&this.stopTask(e).catch((e=>this.logger.error("Issue with stopping a task on Golem",e)))})),this.startTask(e).catch((e=>this.isRunning&&this.logger.error("Issue with starting a task on Golem",e)))):await Vr(this.options.taskRunningInterval,!0)}}async end(){this.isRunning=!1,this.logger.debug("Trying to stop all activities",{size:this.activities.size}),await Promise.all([...this.activities.values()].map((e=>e.stop().catch((t=>this.logger.warn("Stopping activity failed",{activityId:e.id,error:t})))))),this.logger.info("Task Service has been stopped")}async startTask(e){var t;e.init(),this.logger.debug("Starting task",{taskId:e.id,attempt:e.getRetriesCount()+1}),++this.activeTasksCount;const n=await this.agreementPoolService.getAgreement();let r,i;try{r=await this.getOrCreateActivity(n),e.start(r,i),null===(t=this.options.eventTarget)||void 0===t||t.dispatchEvent(new ig({id:e.id,agreementId:n.id,activityId:r.id,provider:n.getProviderInfo()})),this.logger.info("Task started",{taskId:e.id,providerName:n.getProviderInfo().name,activityId:r.id});const o=e.getActivityReadySetupFunctions(),s=e.getWorker();this.networkService&&!this.networkService.hasNode(n.getProviderInfo().id)&&(i=await this.networkService.addNode(n.getProviderInfo().id));const a=new jy(r,{activityReadySetupFunctions:this.activitySetupDone.has(r.id)?[]:o,storageProvider:this.options.storageProvider,networkNode:i,logger:this.logger,activityPreparingTimeout:this.options.activityPreparingTimeout,activityStateCheckingInterval:this.options.activityStateCheckingInterval});await a.before(),o.length&&!this.activitySetupDone.has(r.id)&&(this.activitySetupDone.add(r.id),this.logger.debug("Activity setup completed",{activityId:r.id}));const l=await s(a);e.stop(l)}catch(t){e.stop(void 0,t)}finally{--this.activeTasksCount}}async stopActivity(e){await e.stop(),this.activities.delete(e.agreement.id)}async getOrCreateActivity(e){const t=this.activities.get(e.id);if(t)return t;{const t=await _v.create(e,this.yagnaApi,this.options);return this.activities.set(e.id,t),this.paymentService.acceptPayments(e),t}}async retryTask(e){var t,n,r,i,o;if(!this.isRunning)return;e.cleanup(),await this.releaseTaskResources(e);const s=null===(t=e.getError())||void 0===t?void 0:t.message;null===(n=this.options.eventTarget)||void 0===n||n.dispatchEvent(new og({id:e.id,activityId:null===(r=e.getActivity())||void 0===r?void 0:r.id,agreementId:null===(i=e.getActivity())||void 0===i?void 0:i.agreement.id,provider:null===(o=e.getActivity())||void 0===o?void 0:o.getProviderInfo(),retriesCount:e.getRetriesCount(),reason:s})),this.logger.warn("Task execution failed. Trying to redo the task.",{taskId:e.id,attempt:e.getRetriesCount(),reason:s}),this.tasksQueue.addToBegin(e)}async stopTask(e){var t,n,r,i,o,s,a,l,c;if(e.cleanup(),await this.releaseTaskResources(e),e.isRejected()){const l=null===(t=e.getError())||void 0===t?void 0:t.message;null===(n=this.options.eventTarget)||void 0===n||n.dispatchEvent(new sg({id:e.id,agreementId:null===(r=e.getActivity())||void 0===r?void 0:r.agreement.id,activityId:null===(i=e.getActivity())||void 0===i?void 0:i.id,provider:null===(o=e.getActivity())||void 0===o?void 0:o.getProviderInfo(),reason:l})),this.logger.error("Task has been rejected",{taskId:e.id,reason:null===(s=e.getError())||void 0===s?void 0:s.message,retries:e.getRetriesCount(),providerName:null===(a=e.getActivity())||void 0===a?void 0:a.getProviderInfo().name})}else null===(l=this.options.eventTarget)||void 0===l||l.dispatchEvent(new ag({id:e.id})),this.logger.info("Task computed",{taskId:e.id,retries:e.getRetriesCount(),providerName:null===(c=e.getActivity())||void 0===c?void 0:c.getProviderInfo().name})}async releaseTaskResources(e){const t=e.getActivity();t&&(e.isFailed()&&await this.stopActivity(t).catch((e=>this.logger.error("Stopping activity failed",{activityId:t.id,error:e}))),await this.agreementPoolService.releaseAgreement(t.agreement.id,e.isDone()).catch((e=>this.logger.error("Releasing agreement failed",{agreementId:t.agreement.id,error:e}))));const n=e.getNetworkNode();this.networkService&&n&&await this.networkService.removeNode(n.id).catch((e=>this.logger.error("Removing network node failed",{nodeId:n.id,error:e})))}}var Vy;!function(e){e.New="new",e.Queued="queued",e.Pending="pending",e.Done="done",e.Retry="retry",e.Rejected="rejected"}(Vy||(Vy={}));const qy=5,Hy=3e5;class Wy{constructor(e,t,n){var r,i,o;if(this.id=e,this.worker=t,this.state=Vy.New,this.retriesCount=0,this.listeners=new Set,this.timeout=null!==(r=null==n?void 0:n.timeout)&&void 0!==r?r:Hy,this.maxRetries=null!==(i=null==n?void 0:n.maxRetries)&&void 0!==i?i:qy,this.activityReadySetupFunctions=null!==(o=null==n?void 0:n.activityReadySetupFunctions)&&void 0!==o?o:[],this.maxRetries<0)throw new Dr("The maxRetries parameter cannot be less than zero")}onStateChange(e){this.listeners.add(e)}cleanup(){this.listeners.clear()}init(){this.state=Vy.Queued}start(e,t){this.state=Vy.Pending,this.activity=e,this.networkNode=t,this.listeners.forEach((e=>e(this.state))),this.timeoutId=setTimeout((()=>this.stop(void 0,new Mr("Task ".concat(this.id," timeout.")),!0)),this.timeout)}stop(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.isFinished()||this.isRetry()||(clearTimeout(this.timeoutId),t?(this.error=t,n&&this.retriesCount<this.maxRetries?(this.state=Vy.Retry,++this.retriesCount):this.state=Vy.Rejected):(this.state=Vy.Done,this.results=e),this.listeners.forEach((e=>e(this.state))))}isQueueable(){return this.state===Vy.New||this.state===Vy.Retry}isRetry(){return this.state===Vy.Retry}isDone(){return this.state===Vy.Done}isFinished(){return this.state===Vy.Done||this.state===Vy.Rejected}isRejected(){return this.state===Vy.Rejected}isQueued(){return this.state===Vy.Queued}isPending(){return this.state===Vy.Pending}isNew(){return this.state===Vy.New}isFailed(){return this.state===Vy.Rejected||this.state===Vy.Retry}getResults(){return this.results}getWorker(){return this.worker}getActivityReadySetupFunctions(){return this.activityReadySetupFunctions}getRetriesCount(){return this.retriesCount}getError(){return this.error}getActivity(){return this.activity}getNetworkNode(){return this.networkNode}}class Gy{constructor(){this.itemsStack=[]}addToEnd(e){this.checkIfTaskIsEligibleForAdd(e),this.itemsStack.push(e)}addToBegin(e){this.checkIfTaskIsEligibleForAdd(e),this.itemsStack.unshift(e)}get size(){return this.itemsStack.length}get(){return this.itemsStack.shift()}checkIfTaskIsEligibleForAdd(e){if(!e.isQueueable())throw new wv("You cannot add a task that is not in the correct state",yv.TaskAddingFailed)}}Object.freeze({__proto__:null,acceptAllDebitNotesFilter:()=>async()=>!0,acceptAllInvoicesFilter:()=>async()=>!0,acceptMaxAmountDebitNoteFilter:e=>async t=>t.totalAmountDue<=e,acceptMaxAmountInvoiceFilter:e=>async t=>t.amount<=e});const Yy=Object.freeze({payment:{network:"goerli",driver:"erc20"},budget:1,paymentTimeout:6e4,allocationExpirationSec:3600,invoiceReceiveTimeout:3e5,maxInvoiceEvents:500,maxDebitNotesEvents:500,invoiceFetchingInterval:5e3,debitNotesFetchingInterval:5e3,unsubscribeTimeoutMs:1e4,debitNoteFilter:async()=>!0,invoiceFilter:async()=>!0});class Ky{constructor(e){var t,n;this.options=e,this.paymentTimeout=(null==e?void 0:e.paymentTimeout)||Yy.paymentTimeout,this.payment={driver:(null===(t=null==e?void 0:e.payment)||void 0===t?void 0:t.driver)||Yy.payment.driver,network:(null===(n=null==e?void 0:e.payment)||void 0===n?void 0:n.network)||Ii()||Yy.payment.network},this.logger=(null==e?void 0:e.logger)||xi("payment"),this.eventTarget=null==e?void 0:e.eventTarget}}class $y extends Ky{constructor(e){var t,n,r,i,o,s,a;super(e),this.invoiceFetchingInterval=null!==(t=null==e?void 0:e.invoiceFetchingInterval)&&void 0!==t?t:Yy.invoiceFetchingInterval,this.debitNotesFetchingInterval=null!==(n=null==e?void 0:e.debitNotesFetchingInterval)&&void 0!==n?n:Yy.debitNotesFetchingInterval,this.maxInvoiceEvents=null!==(r=null==e?void 0:e.maxInvoiceEvents)&&void 0!==r?r:Yy.maxInvoiceEvents,this.maxDebitNotesEvents=null!==(i=null==e?void 0:e.maxDebitNotesEvents)&&void 0!==i?i:Yy.maxDebitNotesEvents,this.unsubscribeTimeoutMs=null!==(o=null==e?void 0:e.unsubscribeTimeoutMs)&&void 0!==o?o:Yy.unsubscribeTimeoutMs,this.debitNoteFilter=null!==(s=null==e?void 0:e.debitNotesFilter)&&void 0!==s?s:Yy.debitNoteFilter,this.invoiceFilter=null!==(a=null==e?void 0:e.invoiceFilter)&&void 0!==a?a:Yy.invoiceFilter}}class Qy extends Ky{constructor(e){var t,n;if(super(e),!e||!(null==e?void 0:e.account))throw new Dr("Account option is required");this.account=e.account,this.budget=(null==e?void 0:e.budget)||Yy.budget,this.payment={driver:(null===(t=null==e?void 0:e.payment)||void 0===t?void 0:t.driver)||Yy.payment.driver,network:(null===(n=null==e?void 0:e.payment)||void 0===n?void 0:n.network)||Yy.payment.network},this.expirationSec=(null==e?void 0:e.expirationSec)||Yy.allocationExpirationSec}}class Jy extends Ky{constructor(e){super(e)}}var Xy;!function(e){e[e.AllocationCreationFailed=0]="AllocationCreationFailed",e[e.MissingAllocation=1]="MissingAllocation",e[e.PaymentProcessNotInitialized=2]="PaymentProcessNotInitialized",e[e.AllocationReleaseFailed=3]="AllocationReleaseFailed",e[e.InvoiceAcceptanceFailed=4]="InvoiceAcceptanceFailed",e[e.DebitNoteAcceptanceFailed=5]="DebitNoteAcceptanceFailed",e[e.InvoiceRejectionFailed=6]="InvoiceRejectionFailed",e[e.DebitNoteRejectionFailed=7]="DebitNoteRejectionFailed",e[e.PaymentStatusQueryFailed=8]="PaymentStatusQueryFailed",e[e.AgreementAlreadyPaid=9]="AgreementAlreadyPaid",e[e.InvoiceAlreadyReceived=10]="InvoiceAlreadyReceived"}(Xy||(Xy={}));class Zy extends Br{constructor(e,t,n,r,i){super(e,t,i),this.code=t,this.allocation=n,this.provider=r,this.previous=i}}class eb{static async create(e,t){var n,r,i,o;try{const r=new Qy(t),i=new Date,o={totalAmount:r.budget.toString(),paymentPlatform:r.account.platform,address:r.account.address,timestamp:i.toISOString(),timeout:new Date(+i+1e3*r.expirationSec).toISOString(),makeDeposit:!1,remainingAmount:"",spentAmount:"",allocationId:""},{data:s}=await e.payment.createAllocation(o);return null===(n=r.eventTarget)||void 0===n||n.dispatchEvent(new lg({id:s.allocationId,amount:parseFloat(s.totalAmount),platform:s.paymentPlatform})),r.logger.debug("Allocation ".concat(s.allocationId," has been created for address ").concat(r.account.address," using payment platform ").concat(r.account.platform)),new eb(e,r,s)}catch(e){throw new Zy("Could not create new allocation. ".concat((null===(i=null===(r=e.response)||void 0===r?void 0:r.data)||void 0===i?void 0:i.message)||(null===(o=e.response)||void 0===o?void 0:o.data)||e),Xy.AllocationCreationFailed,void 0,void 0,e)}}constructor(e,t,n){if(this.yagnaApi=e,this.options=t,this.id=n.allocationId,this.timeout=n.timeout,this.timestamp=n.timestamp,this.totalAmount=n.totalAmount,this.spentAmount=n.spentAmount,this.remainingAmount=n.remainingAmount,!n.address||!n.paymentPlatform)throw new Dr("Account address and payment platform are required");this.address=n.address,this.paymentPlatform=n.paymentPlatform}async getRemainingAmount(){return await this.refresh(),this.remainingAmount}async getSpentAmount(){return await this.refresh(),this.spentAmount}async release(){var e,t;try{await this.yagnaApi.payment.releaseAllocation(this.id),this.options.logger.debug("Allocation ".concat(this.id," has been released."))}catch(qr){throw new Zy("Could not release allocation. ".concat((null===(t=null===(e=qr.response)||void 0===e?void 0:e.data)||void 0===t?void 0:t.message)||qr),Xy.AllocationReleaseFailed,this,void 0,qr)}}async getDemandDecoration(){var e,t;try{const{data:e}=await this.yagnaApi.payment.getDemandDecorations([this.id]);return e}catch(qr){throw new Fr("Unable to get demand decorations. ".concat((null===(t=null===(e=qr.response)||void 0===e?void 0:e.data)||void 0===t?void 0:t.message)||qr),qr)}}async refresh(){var e;try{const{data:e}=await this.yagnaApi.payment.getAllocation(this.id);this.remainingAmount=e.remainingAmount,this.spentAmount=e.spentAmount}catch(Vr){throw new Fr("Could not get allocation data. ".concat((null===(e=Vr.response)||void 0===e?void 0:e.data)||Vr),Vr)}}}class tb{constructor(e,t,n){this.model=e,this.provider=t,this.options=n,this.recipientId=e.recipientId,this.payeeAddr=e.payeeAddr,this.requestorWalletAddress=e.payerAddr,this.paymentPlatform=e.paymentPlatform,this.agreementId=e.agreementId,this.paymentDueDate=e.paymentDueDate,this.status=e.status}async getStatus(){var e;try{return await this.refreshStatus(),this.model.status}catch(Vr){throw new Zy("Unable to query payment status. ".concat((null===(e=null==Vr?void 0:Vr.data)||void 0===e?void 0:e.message)||Vr.toString()),Xy.PaymentStatusQueryFailed,void 0,this.provider,Vr)}}}class nb extends tb{static async create(e,t,n){const r=new Jy(n),{data:i}=await t.payment.getInvoice(e),{data:o}=await t.market.getAgreement(i.agreementId),s={id:i.issuerId,walletAddress:i.payeeAddr,name:o.offer.properties["golem.node.id.name"]};return new nb(i,s,t,r)}constructor(e,t,n,r){super(e,t,r),this.model=e,this.yagnaApi=n,this.options=r,this.id=e.invoiceId,this.activityIds=e.activityIds,this.amount=Number(e.amount),this.timestamp=e.timestamp,this.recipientId=e.recipientId}get dto(){return{id:this.id,timestamp:this.timestamp,activityIds:this.activityIds,agreementId:this.agreementId,paymentDueDate:this.paymentDueDate,status:this.status,requestorWalletAddress:this.requestorWalletAddress,provider:this.provider,paymentPlatform:this.paymentPlatform,amount:this.amount}}async getStatus(){return await this.refreshStatus(),this.status}async accept(e,t){var n,r,i,o;try{await this.yagnaApi.payment.acceptInvoice(this.id,{totalAmountAccepted:"".concat(e),allocationId:t})}catch(e){const t=(null===(r=null===(n=null==e?void 0:e.response)||void 0===n?void 0:n.data)||void 0===r?void 0:r.message)||e;throw null===(i=this.options.eventTarget)||void 0===i||i.dispatchEvent(new Ag({id:this.id,agreementId:this.agreementId,reason:t})),new Zy("Unable to accept invoice ".concat(this.id," ").concat(t),Xy.InvoiceAcceptanceFailed,void 0,this.provider,e)}null===(o=this.options.eventTarget)||void 0===o||o.dispatchEvent(new kg({id:this.id,agreementId:this.agreementId,amount:this.amount,provider:this.provider}))}async reject(e){var t;null===(t=this.options.eventTarget)||void 0===t||t.dispatchEvent(new Ag({id:this.id,agreementId:this.agreementId,reason:e.message}))}isSameAs(e){return this.id===e.id&&this.amount===e.amount&&this.agreementId===e.agreementId}async refreshStatus(){const{data:e}=await this.yagnaApi.payment.getInvoice(this.id);this.status=e.status}}class rb extends tb{static async create(e,t,n){const r=new Jy(n),{data:i}=await t.payment.getDebitNote(e),{data:o}=await t.market.getAgreement(i.agreementId),s={id:i.issuerId,walletAddress:i.payeeAddr,name:o.offer.properties["golem.node.id.name"]};return new rb(i,s,t,r)}constructor(e,t,n,r){super(e,t,r),this.model=e,this.yagnaApi=n,this.options=r,this.id=e.debitNoteId,this.timestamp=e.timestamp,this.activityId=e.activityId,this.totalAmountDue=Number(e.totalAmountDue),this.usageCounterVector=e.usageCounterVector}get dto(){return{id:this.id,timestamp:this.timestamp,activityId:this.activityId,agreementId:this.agreementId,totalAmountDue:this.totalAmountDue,usageCounterVector:this.usageCounterVector}}async accept(e,t){var n,r,i,o;try{await this.yagnaApi.payment.acceptDebitNote(this.id,{totalAmountAccepted:"".concat(e),allocationId:t})}catch(e){const t=(null===(r=null===(n=null==e?void 0:e.response)||void 0===n?void 0:n.data)||void 0===r?void 0:r.message)||e;throw null===(i=this.options.eventTarget)||void 0===i||i.dispatchEvent(new Ag({id:this.id,agreementId:this.agreementId,reason:t})),new Zy("Unable to accept debit note ".concat(this.id,". ").concat(t),Xy.DebitNoteAcceptanceFailed,void 0,this.provider,e)}null===(o=this.options.eventTarget)||void 0===o||o.dispatchEvent(new Pg({id:this.id,agreementId:this.agreementId,amount:e,provider:this.provider}))}async getStatus(){return await this.refreshStatus(),this.status}async reject(e){var t;null===(t=this.options.eventTarget)||void 0===t||t.dispatchEvent(new Ag({id:this.id,agreementId:this.agreementId,reason:e.message}))}async refreshStatus(){const{data:e}=await this.yagnaApi.payment.getDebitNote(this.id);this.model=e}}const ib="PaymentReceived",ob="Unsubscribed";let sb=class e extends EventTarget{static async create(t,n){return new e(t,new $y(n))}constructor(e,t){super(),this.yagnaApi=e,this.isRunning=!0,this.lastInvoiceFetchingTime=(new Date).toISOString(),this.lastDebitNotesFetchingTime=(new Date).toISOString(),this.options=new $y(t),this.logger=this.options.logger,this.subscribe().catch((e=>this.logger.error("Unable to subscribe to payments",{error:e})))}async unsubscribe(){return new Promise(((e,t)=>{const n=setTimeout((()=>t(new Mr("The waiting time (".concat(this.options.unsubscribeTimeoutMs," ms) for unsubscribe payment has been exceeded.")))),this.options.unsubscribeTimeoutMs);this.addEventListener(ob,(()=>{this.logger.debug("Payments unsubscribed"),clearTimeout(n),e(!0)})),this.isRunning=!1}))}async subscribe(){this.subscribeForInvoices().catch((e=>this.logger.error("Unable to collect invoices.",{error:e}))),this.subscribeForDebitNotes().catch((e=>this.logger.error("Unable to collect debit notes.",{error:e})))}async subscribeForInvoices(){for(var e,t,n;this.isRunning;)try{const{data:t}=await this.yagnaApi.payment.getInvoiceEvents(this.options.invoiceFetchingInterval/1e3,this.lastInvoiceFetchingTime,this.options.maxInvoiceEvents,this.yagnaApi.appSessionId,{timeout:0});for(const n of t){if(!this.isRunning)break;if("InvoiceReceivedEvent"!==n.eventType)continue;const t=n.invoiceId,r=await nb.create(t,this.yagnaApi,{...this.options}).catch((e=>this.logger.error("Unable to create invoice",{id:t,error:e})));r&&(this.dispatchEvent(new ab(ib,r)),this.lastInvoiceFetchingTime=n.eventDate,null===(e=this.options.eventTarget)||void 0===e||e.dispatchEvent(new _g({id:r.id,agreementId:r.agreementId,amount:r.amount,provider:r.provider})),this.logger.debug("New Invoice received",{id:r.id,agreementId:r.agreementId,amount:r.amount}))}}catch(e){const r=(null===(n=null===(t=e.response)||void 0===t?void 0:t.data)||void 0===n?void 0:n.message)||e.message||e;this.logger.error("Unable to get invoices.",{reason:r}),await Vr(2)}this.dispatchEvent(new Event(ob))}async subscribeForDebitNotes(){for(var e,t,n;this.isRunning;)try{const{data:t}=await this.yagnaApi.payment.getDebitNoteEvents(this.options.debitNotesFetchingInterval/1e3,this.lastDebitNotesFetchingTime,this.options.maxDebitNotesEvents,this.yagnaApi.appSessionId,{timeout:0}).catch((()=>({data:[]})));for(const n of t){if(!this.isRunning)return;if("DebitNoteReceivedEvent"!==n.eventType)continue;const t=n.debitNoteId,r=await rb.create(t,this.yagnaApi,{...this.options}).catch((e=>this.logger.error("Unable to create debit note",{id:t,error:e})));r&&(this.dispatchEvent(new lb(ib,r)),this.lastDebitNotesFetchingTime=n.eventDate,null===(e=this.options.eventTarget)||void 0===e||e.dispatchEvent(new Eg({id:r.id,agreementId:r.agreementId,activityId:r.activityId,amount:r.totalAmountDue,provider:r.provider})),this.logger.debug("New Debit Note received",{agreementId:r.agreementId,amount:r.totalAmountDue}))}}catch(e){const r=(null===(n=null===(t=e.response)||void 0===t?void 0:t.data)||void 0===n?void 0:n.message)||e;this.logger.error("Unable to get debit notes.",{reason:r}),await Vr(2)}}};class ab extends Event{constructor(e,t){super(e,t),this.invoice=t}}class lb extends Event{constructor(e,t){super(e,t),this.debitNote=t}}var cb;!function(e){e.UnsolicitedService="UNSOLICITED_SERVICE",e.BadService="BAD_SERVICE",e.IncorrectAmount="INCORRECT_AMOUNT",e.RejectedByRequestorFilter="REJECTED_BY_REQUESTOR_FILTER",e.AgreementFinalized="AGREEMENT_FINALIZED"}(cb||(cb={}));class ub{constructor(e,t,n,r){this.agreement=e,this.allocation=t,this.filters=n,this.invoice=null,this.debitNotes=new Map,this.lock=new zg,this.logger=r||xi("payment")}addDebitNote(e){return this.lock.acquire("app-".concat(e.agreementId),(()=>this.applyDebitNote(e)))}addInvoice(e){return this.lock.acquire("app-".concat(e.agreementId),(()=>this.applyInvoice(e)))}isFinished(){return null!==this.invoice}async applyDebitNote(e){return this.hasReceivedInvoice()?(await this.rejectDebitNote(e,cb.AgreementFinalized,"DebitNote ".concat(e.id," rejected because the agreement ").concat(e.agreementId," is already covered with a final invoice that should be paid instead of the debit note")),!1):this.debitNotes.has(e.id)&&await this.hasProcessedDebitNote(e)?(this.logger.warn("We received a duplicate debit note - the previous one was already accepted, so this one gets ignored",{debitNoteId:e.id,agreementId:e.agreementId}),!1):(this.debitNotes.set(e.id,e),await this.filters.debitNoteFilter(e.dto)?(await e.accept(e.totalAmountDue,this.allocation.id),this.logger.debug("DebitNote accepted",{debitNoteId:e.id,agreementId:e.agreementId}),!0):(await this.rejectDebitNote(e,cb.RejectedByRequestorFilter,"DebitNote ".concat(e.id," for agreement ").concat(e.agreementId," rejected by DebitNote Filter")),!1))}async hasProcessedDebitNote(e){return await e.getStatus()!==Ef.InvoiceStatus.Received}async rejectDebitNote(e,t,n){const r={rejectionReason:t,totalAmountAccepted:"0",message:n};await e.reject(r),this.logger.warn("DebitNote rejected",{reason:r.message})}async applyInvoice(e){if(this.invoice){if(!e.isSameAs(this.invoice))throw new Zy("Agreement ".concat(this.agreement.id," is already covered with an invoice: ").concat(this.invoice.id),Xy.AgreementAlreadyPaid,this.allocation,this.invoice.provider);if(await this.invoice.getStatus()!==Ef.InvoiceStatus.Received)return this.logger.warn("Received duplicate of an already processed invoice , the new one will be ignored",{invoiceId:e.id,agreementId:e.agreementId}),!1}const t=await e.getStatus();if(t!==Ef.InvoiceStatus.Received)throw new Zy("The invoice ".concat(e.id," for agreement ").concat(e.agreementId," has status ").concat(t,", but we can accept only the ones with status ").concat(Ef.InvoiceStatus.Received),Xy.InvoiceAlreadyReceived,this.allocation,e.provider);if(this.invoice=e,!await this.filters.invoiceFilter(e.dto)){const t=cb.RejectedByRequestorFilter,n="Invoice ".concat(e.id," for agreement ").concat(e.agreementId," rejected by Invoice Filter");return await this.rejectInvoice(e,t,n),!1}return await e.accept(e.amount,this.allocation.id),this.logger.info("Invoice has been accepted",{invoiceId:e.id,agreementId:e.agreementId,providerName:this.agreement.getProviderInfo().name}),!0}async rejectInvoice(e,t,n){const r={rejectionReason:t,totalAmountAccepted:"0",message:n};await e.reject(r),this.logger.warn("Invoice rejected",{reason:r.message})}hasReceivedInvoice(){return null!==this.invoice}}var db={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,r,o,s){if("function"!=typeof r)throw new TypeError("The listener must be a function");var a=new i(r,o||e,s),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],a]:e._events[l].push(a):(e._events[l]=a,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function a(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),a.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},a.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,s=new Array(o);i<o;i++)s[i]=r[i].fn;return s},a.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},a.prototype.emit=function(e,t,r,i,o,s){var a=n?n+e:e;if(!this._events[a])return!1;var l,c,u=this._events[a],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,i),!0;case 5:return u.fn.call(u.context,t,r,i,o),!0;case 6:return u.fn.call(u.context,t,r,i,o,s),!0}for(c=1,l=new Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var h,f=u.length;for(c=0;c<f;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,r);break;case 4:u[c].fn.call(u[c].context,t,r,i);break;default:if(!l)for(h=1,l=new Array(d-1);h<d;h++)l[h-1]=arguments[h];u[c].fn.apply(u[c].context,l)}}return!0},a.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},a.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},a.prototype.removeListener=function(e,t,r,i){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return s(this,o),this;var a=this._events[o];if(a.fn)a.fn!==t||i&&!a.once||r&&a.context!==r||s(this,o);else{for(var l=0,c=[],u=a.length;l<u;l++)(a[l].fn!==t||i&&!a[l].once||r&&a[l].context!==r)&&c.push(a[l]);c.length?this._events[o]=1===c.length?c[0]:c:s(this,o)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&s(this,t)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a}(db);var hb=wi(db.exports);class fb{constructor(e,t){this.yagnaApi=e,this.isRunning=!1,this.processes=new Map,this.events=new hb,this.config=new $y(t),this.logger=this.config.logger}async run(){this.isRunning=!0,this.payments=await sb.create(this.yagnaApi,this.config.options),this.payments.addEventListener(ib,this.subscribePayments.bind(this)),this.logger.info("Payment Service has started")}async end(){var e,t,n;if(this.processes.size){this.logger.info("Waiting for all agreement processes to be completed.",{numberOfProcesses:this.processes.size});let e=!1;const t=setTimeout((()=>e=!0),this.config.paymentTimeout);let n=0;for(;this.isRunning&&!e;){const e=this.getNumberOfUnpaidAgreements();this.isRunning=0!==e,await Vr(2),n++,n>10&&(this.logger.info("Waiting for ".concat(this.processes.size," agreement processes to be completed to be paid...")),n=0)}clearTimeout(t)}this.isRunning=!1,await(null===(e=this.payments)||void 0===e?void 0:e.unsubscribe().catch((e=>this.logger.warn("Unable to unsubscribe from payments",{error:e})))),null===(t=this.payments)||void 0===t||t.removeEventListener(ib,this.subscribePayments.bind(this)),await(null===(n=this.allocation)||void 0===n?void 0:n.release().catch((e=>this.logger.warn("Unable to release allocation",{error:e})))),this.logger.info("Allocation has been released"),this.logger.info("Payment service has been stopped")}async createAllocation(e){try{const t={platform:this.getPaymentPlatform(),address:await this.getPaymentAddress()};return this.allocation=await eb.create(this.yagnaApi,{...this.config.options,account:t,...e}),this.allocation}catch(e){if(e instanceof Zy)throw e;throw new Zy("Unable to create allocation for driver/network ".concat(this.config.payment.driver,"/").concat(this.config.payment.network,". ").concat(e),Xy.AllocationCreationFailed,void 0,void 0,e)}}acceptPayments(e){if(this.logger.debug("Starting to accept payments",{agreementId:e.id}),this.processes.has(e.id))this.logger.warn("Payment process has already been started for this agreement",{agreementId:e.id});else{if(!this.allocation)throw new Zy("You need to create an allocation before starting any payment processes",Xy.MissingAllocation,void 0,e.getProviderInfo());this.processes.set(e.id,new ub(e,this.allocation,{invoiceFilter:this.config.invoiceFilter,debitNoteFilter:this.config.debitNoteFilter},this.logger))}}getNumberOfUnpaidAgreements(){return[...this.processes.values()].filter((e=>!e.isFinished())).length}async processInvoice(e){this.logger.debug("Attempting to process Invoice event",{invoiceId:e.id,agreementId:e.agreementId});const t=this.processes.get(e.agreementId);if(!t)throw new Zy("No payment process was initiated for this agreement - did you forget to use 'acceptPayments' or that's not your invoice?",Xy.PaymentProcessNotInitialized,this.allocation,e.provider);await t.addInvoice(e)}async processDebitNote(e){this.logger.debug("Attempting to process DebitNote event",{debitNoteId:e.id,agreementId:e.agreementId});const t=this.processes.get(e.agreementId);if(!t)throw new Zy("No payment process was initiated for this agreement - did you forget to use 'acceptPayments' or that's not your debit note?",Xy.PaymentProcessNotInitialized,this.allocation,e.provider);await t.addDebitNote(e)}async subscribePayments(e){if(e instanceof ab)try{await this.processInvoice(e.invoice),this.logger.debug("Invoice event processed",{agreementId:e.invoice.agreementId})}catch(Vr){this.logger.error("Failed to process InvoiceEvent",{agreementId:e.invoice.agreementId,err:Vr}),this.events.emit("error",Vr)}if(e instanceof lb)try{await this.processDebitNote(e.debitNote),this.logger.debug("DebitNote event processed",{agreementId:e.debitNote.agreementId})}catch(Vr){this.logger.error("Failed to process DebitNoteEvent",{agreementId:e.debitNote.agreementId,err:Vr}),this.events.emit("error",Vr)}}getPaymentPlatform(){const e=["polygon","mainnet"].includes(this.config.payment.network)?"glm":"tglm";return"".concat(this.config.payment.driver,"-").concat(this.config.payment.network,"-").concat(e)}async getPaymentAddress(){return(await this.yagnaApi.identity.getIdentity()).identity}}var pb={exports:{}};!function(e){!function(t){var n,r=1e9,i={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},o=!0,s="[DecimalError] ",a=s+"Invalid argument: ",l=s+"Exponent out of range: ",c=Math.floor,u=Math.pow,d=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,h=1e7,f=7,p=9007199254740991,g=c(p/f),m={};function v(e,t){var n,r,i,s,a,l,c,u,d=e.constructor,p=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),o?x(t,p):t;if(c=e.d,u=t.d,a=e.e,i=t.e,c=c.slice(),s=a-i){for(s<0?(r=c,s=-s,l=u.length):(r=u,i=a,l=c.length),s>(l=(a=Math.ceil(p/f))>l?a+1:l+1)&&(s=l,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for((l=c.length)-(s=u.length)<0&&(s=l,r=u,u=c,c=r),n=0;s;)n=(c[--s]=c[s]+u[s]+n)/h|0,c[s]%=h;for(n&&(c.unshift(n),++i),l=c.length;0==c[--l];)c.pop();return t.d=c,t.e=i,o?x(t,p):t}function y(e,t,n){if(e!==~~e||e<t||e>n)throw Error(a+e)}function b(e){var t,n,r,i=e.length-1,o="",s=e[0];if(i>0){for(o+=s,t=1;t<i;t++)r=e[t]+"",(n=f-r.length)&&(o+=k(n)),o+=r;s=e[t],(n=f-(r=s+"").length)&&(o+=k(n))}else if(0===s)return"0";for(;s%10==0;)s/=10;return o+s}m.absoluteValue=m.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e},m.comparedTo=m.cmp=function(e){var t,n,r,i,o=this;if(e=new o.constructor(e),o.s!==e.s)return o.s||-e.s;if(o.e!==e.e)return o.e>e.e^o.s<0?1:-1;for(t=0,n=(r=o.d.length)<(i=e.d.length)?r:i;t<n;++t)if(o.d[t]!==e.d[t])return o.d[t]>e.d[t]^o.s<0?1:-1;return r===i?0:r>i^o.s<0?1:-1},m.decimalPlaces=m.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*f;if(t=e.d[t])for(;t%10==0;t/=10)n--;return n<0?0:n},m.dividedBy=m.div=function(e){return w(this,new this.constructor(e))},m.dividedToIntegerBy=m.idiv=function(e){var t=this.constructor;return x(w(this,new t(e),0,1),t.precision)},m.equals=m.eq=function(e){return!this.cmp(e)},m.exponent=function(){return _(this)},m.greaterThan=m.gt=function(e){return this.cmp(e)>0},m.greaterThanOrEqualTo=m.gte=function(e){return this.cmp(e)>=0},m.isInteger=m.isint=function(){return this.e>this.d.length-2},m.isNegative=m.isneg=function(){return this.s<0},m.isPositive=m.ispos=function(){return this.s>0},m.isZero=function(){return 0===this.s},m.lessThan=m.lt=function(e){return this.cmp(e)<0},m.lessThanOrEqualTo=m.lte=function(e){return this.cmp(e)<1},m.logarithm=m.log=function(e){var t,r=this,i=r.constructor,a=i.precision,l=a+5;if(void 0===e)e=new i(10);else if((e=new i(e)).s<1||e.eq(n))throw Error(s+"NaN");if(r.s<1)throw Error(s+(r.s?"NaN":"-Infinity"));return r.eq(n)?new i(0):(o=!1,t=w(P(r,l),P(e,l),l),o=!0,x(t,a))},m.minus=m.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?I(t,e):v(t,(e.s=-e.s,e))},m.modulo=m.mod=function(e){var t,n=this,r=n.constructor,i=r.precision;if(!(e=new r(e)).s)throw Error(s+"NaN");return n.s?(o=!1,t=w(n,e,0,1).times(e),o=!0,n.minus(t)):x(new r(n),i)},m.naturalExponential=m.exp=function(){return S(this)},m.naturalLogarithm=m.ln=function(){return P(this)},m.negated=m.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e},m.plus=m.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?v(t,e):I(t,(e.s=-e.s,e))},m.precision=m.sd=function(e){var t,n,r,i=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(a+e);if(t=_(i)+1,n=(r=i.d.length-1)*f+1,r=i.d[r]){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return e&&t>n?t:n},m.squareRoot=m.sqrt=function(){var e,t,n,r,i,a,l,u=this,d=u.constructor;if(u.s<1){if(!u.s)return new d(0);throw Error(s+"NaN")}for(e=_(u),o=!1,0==(i=Math.sqrt(+u))||i==1/0?(((t=b(u.d)).length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=c((e+1)/2)-(e<0||e%2),r=new d(t=i==1/0?"5e"+e:(t=i.toExponential()).slice(0,t.indexOf("e")+1)+e)):r=new d(i.toString()),i=l=(n=d.precision)+3;;)if(r=(a=r).plus(w(u,a,l+2)).times(.5),b(a.d).slice(0,l)===(t=b(r.d)).slice(0,l)){if(t=t.slice(l-3,l+1),i==l&&"4999"==t){if(x(a,n+1,0),a.times(a).eq(u)){r=a;break}}else if("9999"!=t)break;l+=4}return o=!0,x(r,n)},m.times=m.mul=function(e){var t,n,r,i,s,a,l,c,u,d=this,f=d.constructor,p=d.d,g=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,n=d.e+e.e,(c=p.length)<(u=g.length)&&(s=p,p=g,g=s,a=c,c=u,u=a),s=[],r=a=c+u;r--;)s.push(0);for(r=u;--r>=0;){for(t=0,i=c+r;i>r;)l=s[i]+g[r]*p[i-r-1]+t,s[i--]=l%h|0,t=l/h|0;s[i]=(s[i]+t)%h|0}for(;!s[--a];)s.pop();return t?++n:s.shift(),e.d=s,e.e=n,o?x(e,f.precision):e},m.toDecimalPlaces=m.todp=function(e,t){var n=this,i=n.constructor;return n=new i(n),void 0===e?n:(y(e,0,r),void 0===t?t=i.rounding:y(t,0,8),x(n,e+_(n)+1,t))},m.toExponential=function(e,t){var n,i=this,o=i.constructor;return void 0===e?n=O(i,!0):(y(e,0,r),void 0===t?t=o.rounding:y(t,0,8),n=O(i=x(new o(i),e+1,t),!0,e+1)),n},m.toFixed=function(e,t){var n,i,o=this,s=o.constructor;return void 0===e?O(o):(y(e,0,r),void 0===t?t=s.rounding:y(t,0,8),n=O((i=x(new s(o),e+_(o)+1,t)).abs(),!1,e+_(i)+1),o.isneg()&&!o.isZero()?"-"+n:n)},m.toInteger=m.toint=function(){var e=this,t=e.constructor;return x(new t(e),_(e)+1,t.rounding)},m.toNumber=function(){return+this},m.toPower=m.pow=function(e){var t,r,i,a,l,u,d=this,h=d.constructor,g=+(e=new h(e));if(!e.s)return new h(n);if(!(d=new h(d)).s){if(e.s<1)throw Error(s+"Infinity");return d}if(d.eq(n))return d;if(i=h.precision,e.eq(n))return x(d,i);if(u=(t=e.e)>=(r=e.d.length-1),l=d.s,u){if((r=g<0?-g:g)<=p){for(a=new h(n),t=Math.ceil(i/f+4),o=!1;r%2&&T((a=a.times(d)).d,t),0!==(r=c(r/2));)T((d=d.times(d)).d,t);return o=!0,e.s<0?new h(n).div(a):x(a,i)}}else if(l<0)throw Error(s+"NaN");return l=l<0&&1&e.d[Math.max(t,r)]?-1:1,d.s=1,o=!1,a=e.times(P(d,i+12)),o=!0,(a=S(a)).s=l,a},m.toPrecision=function(e,t){var n,i,o=this,s=o.constructor;return void 0===e?i=O(o,(n=_(o))<=s.toExpNeg||n>=s.toExpPos):(y(e,1,r),void 0===t?t=s.rounding:y(t,0,8),i=O(o=x(new s(o),e,t),e<=(n=_(o))||n<=s.toExpNeg,e)),i},m.toSignificantDigits=m.tosd=function(e,t){var n=this.constructor;return void 0===e?(e=n.precision,t=n.rounding):(y(e,1,r),void 0===t?t=n.rounding:y(t,0,8)),x(new n(this),e,t)},m.toString=m.valueOf=m.val=m.toJSON=function(){var e=this,t=_(e),n=e.constructor;return O(e,t<=n.toExpNeg||t>=n.toExpPos)};var w=function(){function e(e,t){var n,r=0,i=e.length;for(e=e.slice();i--;)n=e[i]*t+r,e[i]=n%h|0,r=n/h|0;return r&&e.unshift(r),e}function t(e,t,n,r){var i,o;if(n!=r)o=n>r?1:-1;else for(i=o=0;i<n;i++)if(e[i]!=t[i]){o=e[i]>t[i]?1:-1;break}return o}function n(e,t,n){for(var r=0;n--;)e[n]-=r,r=e[n]<t[n]?1:0,e[n]=r*h+e[n]-t[n];for(;!e[0]&&e.length>1;)e.shift()}return function(r,i,o,a){var l,c,u,d,p,g,m,v,y,b,w,S,E,k,P,A,I,O,T=r.constructor,R=r.s==i.s?1:-1,C=r.d,N=i.d;if(!r.s)return new T(r);if(!i.s)throw Error(s+"Division by zero");for(c=r.e-i.e,I=N.length,P=C.length,v=(m=new T(R)).d=[],u=0;N[u]==(C[u]||0);)++u;if(N[u]>(C[u]||0)&&--c,(S=null==o?o=T.precision:a?o+(_(r)-_(i))+1:o)<0)return new T(0);if(S=S/f+2|0,u=0,1==I)for(d=0,N=N[0],S++;(u<P||d)&&S--;u++)E=d*h+(C[u]||0),v[u]=E/N|0,d=E%N|0;else{for((d=h/(N[0]+1)|0)>1&&(N=e(N,d),C=e(C,d),I=N.length,P=C.length),k=I,b=(y=C.slice(0,I)).length;b<I;)y[b++]=0;(O=N.slice()).unshift(0),A=N[0],N[1]>=h/2&&++A;do{d=0,(l=t(N,y,I,b))<0?(w=y[0],I!=b&&(w=w*h+(y[1]||0)),(d=w/A|0)>1?(d>=h&&(d=h-1),1==(l=t(p=e(N,d),y,g=p.length,b=y.length))&&(d--,n(p,I<g?O:N,g))):(0==d&&(l=d=1),p=N.slice()),(g=p.length)<b&&p.unshift(0),n(y,p,b),-1==l&&(l=t(N,y,I,b=y.length))<1&&(d++,n(y,I<b?O:N,b)),b=y.length):0===l&&(d++,y=[0]),v[u++]=d,l&&y[0]?y[b++]=C[k]||0:(y=[C[k]],b=1)}while((k++<P||void 0!==y[0])&&S--)}return v[0]||v.shift(),m.e=c,x(m,a?o+_(m)+1:o)}}();function S(e,t){var r,i,s,a,c,d=0,h=0,f=e.constructor,p=f.precision;if(_(e)>16)throw Error(l+_(e));if(!e.s)return new f(n);for(null==t?(o=!1,c=p):c=t,a=new f(.03125);e.abs().gte(.1);)e=e.times(a),h+=5;for(c+=Math.log(u(2,h))/Math.LN10*2+5|0,r=i=s=new f(n),f.precision=c;;){if(i=x(i.times(e),c),r=r.times(++d),b((a=s.plus(w(i,r,c))).d).slice(0,c)===b(s.d).slice(0,c)){for(;h--;)s=x(s.times(s),c);return f.precision=p,null==t?(o=!0,x(s,p)):s}s=a}}function _(e){for(var t=e.e*f,n=e.d[0];n>=10;n/=10)t++;return t}function E(e,t,n){if(t>e.LN10.sd())throw o=!0,n&&(e.precision=n),Error(s+"LN10 precision limit exceeded");return x(new e(e.LN10),t)}function k(e){for(var t="";e--;)t+="0";return t}function P(e,t){var r,i,a,l,c,u,d,h,f,p=1,g=e,m=g.d,v=g.constructor,y=v.precision;if(g.s<1)throw Error(s+(g.s?"NaN":"-Infinity"));if(g.eq(n))return new v(0);if(null==t?(o=!1,h=y):h=t,g.eq(10))return null==t&&(o=!0),E(v,h);if(h+=10,v.precision=h,i=(r=b(m)).charAt(0),l=_(g),!(Math.abs(l)<15e14))return d=E(v,h+2,y).times(l+""),g=P(new v(i+"."+r.slice(1)),h-10).plus(d),v.precision=y,null==t?(o=!0,x(g,y)):g;for(;i<7&&1!=i||1==i&&r.charAt(1)>3;)i=(r=b((g=g.times(e)).d)).charAt(0),p++;for(l=_(g),i>1?(g=new v("0."+r),l++):g=new v(i+"."+r.slice(1)),u=c=g=w(g.minus(n),g.plus(n),h),f=x(g.times(g),h),a=3;;){if(c=x(c.times(f),h),b((d=u.plus(w(c,new v(a),h))).d).slice(0,h)===b(u.d).slice(0,h))return u=u.times(2),0!==l&&(u=u.plus(E(v,h+2,y).times(l+""))),u=w(u,new v(p),h),v.precision=y,null==t?(o=!0,x(u,y)):u;u=d,a+=2}}function A(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;48===t.charCodeAt(r);)++r;for(i=t.length;48===t.charCodeAt(i-1);)--i;if(t=t.slice(r,i)){if(i-=r,n=n-r-1,e.e=c(n/f),e.d=[],r=(n+1)%f,n<0&&(r+=f),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=f;r<i;)e.d.push(+t.slice(r,r+=f));t=t.slice(r),r=f-t.length}else r-=i;for(;r--;)t+="0";if(e.d.push(+t),o&&(e.e>g||e.e<-g))throw Error(l+n)}else e.s=0,e.e=0,e.d=[0];return e}function x(e,t,n){var r,i,s,a,d,p,m,v,y=e.d;for(a=1,s=y[0];s>=10;s/=10)a++;if((r=t-a)<0)r+=f,i=t,m=y[v=0];else{if((v=Math.ceil((r+1)/f))>=(s=y.length))return e;for(m=s=y[v],a=1;s>=10;s/=10)a++;i=(r%=f)-f+a}if(void 0!==n&&(d=m/(s=u(10,a-i-1))%10|0,p=t<0||void 0!==y[v+1]||m%s,p=n<4?(d||p)&&(0==n||n==(e.s<0?3:2)):d>5||5==d&&(4==n||p||6==n&&(r>0?i>0?m/u(10,a-i):0:y[v-1])%10&1||n==(e.s<0?8:7))),t<1||!y[0])return p?(s=_(e),y.length=1,t=t-s-1,y[0]=u(10,(f-t%f)%f),e.e=c(-t/f)||0):(y.length=1,y[0]=e.e=e.s=0),e;if(0==r?(y.length=v,s=1,v--):(y.length=v+1,s=u(10,f-r),y[v]=i>0?(m/u(10,a-i)%u(10,i)|0)*s:0),p)for(;;){if(0==v){(y[0]+=s)==h&&(y[0]=1,++e.e);break}if(y[v]+=s,y[v]!=h)break;y[v--]=0,s=1}for(r=y.length;0===y[--r];)y.pop();if(o&&(e.e>g||e.e<-g))throw Error(l+_(e));return e}function I(e,t){var n,r,i,s,a,l,c,u,d,p,g=e.constructor,m=g.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new g(e),o?x(t,m):t;if(c=e.d,p=t.d,r=t.e,u=e.e,c=c.slice(),a=u-r){for((d=a<0)?(n=c,a=-a,l=p.length):(n=p,r=u,l=c.length),a>(i=Math.max(Math.ceil(m/f),l)+2)&&(a=i,n.length=1),n.reverse(),i=a;i--;)n.push(0);n.reverse()}else{for((d=(i=c.length)<(l=p.length))&&(l=i),i=0;i<l;i++)if(c[i]!=p[i]){d=c[i]<p[i];break}a=0}for(d&&(n=c,c=p,p=n,t.s=-t.s),l=c.length,i=p.length-l;i>0;--i)c[l++]=0;for(i=p.length;i>a;){if(c[--i]<p[i]){for(s=i;s&&0===c[--s];)c[s]=h-1;--c[s],c[i]+=h}c[i]-=p[i]}for(;0===c[--l];)c.pop();for(;0===c[0];c.shift())--r;return c[0]?(t.d=c,t.e=r,o?x(t,m):t):new g(0)}function O(e,t,n){var r,i=_(e),o=b(e.d),s=o.length;return t?(n&&(r=n-s)>0?o=o.charAt(0)+"."+o.slice(1)+k(r):s>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(i<0?"e":"e+")+i):i<0?(o="0."+k(-i-1)+o,n&&(r=n-s)>0&&(o+=k(r))):i>=s?(o+=k(i+1-s),n&&(r=n-i-1)>0&&(o=o+"."+k(r))):((r=i+1)<s&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(o+="."),o+=k(r))),e.s<0?"-"+o:o}function T(e,t){if(e.length>t)return e.length=t,!0}function R(e){if(!e||"object"!=typeof e)throw Error(s+"Object expected");var t,n,i,o=["precision",1,r,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<o.length;t+=3)if(void 0!==(i=e[n=o[t]])){if(!(c(i)===i&&i>=o[t+1]&&i<=o[t+2]))throw Error(a+n+": "+i);this[n]=i}if(void 0!==(i=e[n="LN10"])){if(i!=Math.LN10)throw Error(a+n+": "+i);this[n]=new this(i)}return this}i=function e(t){var n,r,i;function o(e){var t=this;if(!(t instanceof o))return new o(e);if(t.constructor=o,e instanceof o)return t.s=e.s,t.e=e.e,void(t.d=(e=e.d)?e.slice():e);if("number"==typeof e){if(0*e!=0)throw Error(a+e);if(e>0)t.s=1;else{if(!(e<0))return t.s=0,t.e=0,void(t.d=[0]);e=-e,t.s=-1}return e===~~e&&e<1e7?(t.e=0,void(t.d=[e])):A(t,e.toString())}if("string"!=typeof e)throw Error(a+e);if(45===e.charCodeAt(0)?(e=e.slice(1),t.s=-1):t.s=1,!d.test(e))throw Error(a+e);A(t,e)}if(o.prototype=m,o.ROUND_UP=0,o.ROUND_DOWN=1,o.ROUND_CEIL=2,o.ROUND_FLOOR=3,o.ROUND_HALF_UP=4,o.ROUND_HALF_DOWN=5,o.ROUND_HALF_EVEN=6,o.ROUND_HALF_CEIL=7,o.ROUND_HALF_FLOOR=8,o.clone=e,o.config=o.set=R,void 0===t&&(t={}),t)for(i=["precision","rounding","toExpNeg","toExpPos","LN10"],n=0;n<i.length;)t.hasOwnProperty(r=i[n++])||(t[r]=this[r]);return o.config(t),o}(i),i.default=i.Decimal=i,n=new i(1),e.exports?e.exports=i:(t||(t="undefined"!=typeof self&&self&&self.self==self?self:Function("return this")()),t.Decimal=i)}(bi)}(pb);var gb={},mb={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.matchingBitCount=e.intLog2=e.cidrPrefixToMaskBinaryString=e.leftPadWithZeroBit=e.dottedDecimalNotationToBinaryString=e.parseBinaryStringToBigInt=e.decimalNumberToOctetString=e.numberToBinaryString=void 0,e.numberToBinaryString=e=>e.toString(2),e.decimalNumberToOctetString=t=>{let n=e.numberToBinaryString(t);if(n.length>8)throw new Error("Given decimal in binary contains digits greater than an octet");return e.leftPadWithZeroBit(n,8)},e.parseBinaryStringToBigInt=e=>BigInt("0b".concat(e)),e.dottedDecimalNotationToBinaryString=t=>t.split(".").reduce(((t,n)=>t.concat(e.decimalNumberToOctetString(parseInt(n)))),""),e.leftPadWithZeroBit=(e,t)=>{if(e.length>t)throw new Error("Given string is already longer than given final length after padding: ".concat(t));return"0".repeat(t-e.length).concat(e)},e.cidrPrefixToMaskBinaryString=(e,t)=>{let n;if(n="IPv4"==t?32:128,e>n)throw Error("Value is greater than ".concat(n));return"".concat("1".repeat(e)).concat("0".repeat(n-e))},e.intLog2=e=>{let t=0;for(;e%2n===0n;){if(2n===e){t++;break}if((e>>=1n)%2n!==0n){t=0;break}t++}if(0==t)throw new Error("The value of log2 for ".concat(e.toString()," is not an integer"));return t},e.matchingBitCount=(e,t)=>{let n,r;e.length>=t.length?(n=e,r=t):(n=t,r=e);let i=0;for(;i<n.length&&n.charAt(i)===r.charAt(i);i++);return i}}(mb);var vb,yb={},bb={},wb={};function Sb(){if(vb)return wb;vb=1,Object.defineProperty(wb,"__esModule",{value:!0}),wb.collapseIPv6Number=wb.expandIPv6Number=void 0;const e=mb,t=Ab();let n=e=>e.includes("/")?"/".concat(e.split("/")[1]):"";return wb.expandIPv6Number=r=>{let i=t=>t.map((t=>e.leftPadWithZeroBit(t,4))).join(":");if(/(:){3,}/.test(r))throw"given IPv6 contains consecutive : more than two";const o=n(r);if(r.includes("/")&&(r=r.split("/")[0]),!t.Validator.IPV6_PATTERN.test(r))throw Error(t.Validator.invalidIPv6PatternMessage);if(r.includes("::")){let e=r.split("::"),t=e[0],n=e[1],s=t.split(":").filter((e=>""!==e)),a=n.split(":").filter((e=>""!==e)),l=(e=>{let t=[];for(let n=0;n<e;n++)t.push("0000");return t.join(":")})(8-(s.length+a.length)),c=i(s);""!==c&&(c+=":");let u=i(a);return""!==u&&(u=":"+u),"".concat(c).concat(l).concat(u).concat(o)}return"".concat(i(r.split(":"))).concat(o)},wb.collapseIPv6Number=e=>{const r=n(e);if(e.includes("/")&&(e=e.split("/")[0]),!t.Validator.IPV6_PATTERN.test(e))throw Error(t.Validator.invalidIPv6PatternMessage);let i=e.split(":").map((e=>{let t=e.replace(/^0+/,"");return""!==t?t:"0"})).join(":").replace(/((^0)?(:0){2,}|(^0)(:0){1,})/,":");return":"===i.slice(-1)?"".concat(i,":").concat(r):(i=i.replace(":0:","::"),"".concat(i).concat(r))},wb}var _b,Eb,kb={};function Pb(){return _b||(_b=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.hexadectetNotationToBinaryString=e.binaryStringToHexadecimalString=e.colonHexadecimalNotationToBinaryString=e.hexadecimalStringToHexadecatetString=e.hexadecimalStringToBinaryString=e.bigIntToHexadecimalString=void 0;const t=Sb(),n=mb;e.bigIntToHexadecimalString=e=>e.toString(16),e.hexadecimalStringToBinaryString=e=>BigInt("0x".concat(e)).toString(2),e.hexadecimalStringToHexadecatetString=t=>{let r=e.hexadecimalStringToBinaryString(t);if(r.length>16)throw new Error("Given decimal in binary contains digits greater than an Hexadecatet");return n.leftPadWithZeroBit(r,16)},e.colonHexadecimalNotationToBinaryString=n=>t.expandIPv6Number(n).split(":").reduce(((t,n)=>t.concat(e.hexadecimalStringToHexadecatetString(n))),""),e.binaryStringToHexadecimalString=e=>BigInt("0b".concat(e)).toString(16),e.hexadectetNotationToBinaryString=r=>t.expandIPv6Number(r).split(":").reduce(((t,r)=>t.concat(n.leftPadWithZeroBit(e.hexadecimalStringToBinaryString(r),16))),"")}(kb)),kb}function Ab(){if(Eb)return bb;Eb=1,Object.defineProperty(bb,"__esModule",{value:!0}),bb.Validator=void 0;const e=mb,t=mb,n=Sb(),r=Pb(),i=Pb();let o=class o{static isWithinRange(e,t,n){return e>=t&&e<=n}static isValidAsnNumber(e){let t=this.isWithinRange(e,0n,this.THIRTY_TWO_BIT_SIZE);return[t,t?[]:[o.invalidAsnRangeMessage]]}static isValid16BitAsnNumber(e){let t=o.isWithinRange(e,0n,o.SIXTEEN_BIT_SIZE);return[t,t?[]:[o.invalid16BitAsnRangeMessage]]}static isValidIPv4Number(e){e="bigint"==typeof e?e:BigInt(e);let t=this.isWithinRange(e,0n,this.THIRTY_TWO_BIT_SIZE);return t?[t,[]]:[t,[o.invalidIPv4NumberMessage]]}static isValidIPv6Number(e){let t=this.isWithinRange(e,0n,this.ONE_HUNDRED_AND_TWENTY_EIGHT_BIT_SIZE);return t?[t,[]]:[t,[o.invalidIPv6NumberMessage]]}static isValidIPv4Octet(e){let t=this.isWithinRange(e,0n,this.EIGHT_BIT_SIZE);return[t,t?[]:[o.invalidOctetRangeMessage]]}static isValidIPv6Hexadecatet(e){let t=this.isWithinRange(e,0n,this.SIXTEEN_BIT_SIZE);return t?[t,[]]:[t,[o.invalidHexadecatetMessage]]}static isValidIPv4String(e){let t=e.split(".");if(4!=t.length||t.includes(""))return[!1,[o.invalidOctetCountMessage]];let n=t.every((e=>!!o.isNumeric(e)&&o.isValidIPv4Octet(BigInt(e))[0]));return n?(n=o.IPV4_PATTERN.test(e),[n,n?[]:[o.invalidIPv4PatternMessage]]):[!1,[o.invalidOctetRangeMessage]]}static isValidIPv6String(e){try{let t=n.expandIPv6Number(e).split(":");if(8!=t.length)return[!1,[o.invalidHexadecatetCountMessage]];let r=t.every((e=>!!o.isHexadecatet(e)&&o.isValidIPv6Hexadecatet(BigInt("0x".concat(e)))[0]));return r?(r=o.IPV6_PATTERN.test(e),[r,r?[]:[o.invalidIPv6PatternMessage]]):[!1,[o.invalidHexadecatetMessage]]}catch(e){return[!1,[e]]}}static isValidPrefixValue(e,t){if("IPv4"===t){let t=o.isWithinRange(BigInt(e),0n,32n);return[t,t?[]:[o.invalidPrefixValueMessage]]}if("IPv6"===t){let t=o.isWithinRange(BigInt(e),0n,128n);return[t,t?[]:[o.invalidPrefixValueMessage]]}return[!1,[o.invalidInetNumType]]}static isValidIPv4Mask(t){let n=e.dottedDecimalNotationToBinaryString(t),r=o.IPV4_CONTIGUOUS_MASK_BIT_PATTERN.test(n);return r?[r,[]]:[r,[o.invalidMaskMessage]]}static isValidIPv6Mask(e){let t=i.hexadectetNotationToBinaryString(e),n=o.IPV6_CONTIGUOUS_MASK_BIT_PATTERN.test(t);return n?[n,[]]:[n,[o.invalidMaskMessage]]}static isValidIPv4CidrNotation(e){let t=e.split("/");if(2!==t.length||0===t[0].length||0===t[1].length)return[!1,[o.invalidIPv4CidrNotationMessage]];let n=t[0],r=t[1];if(isNaN(Number(r)))return[!1,[o.invalidIPv4CidrNotationMessage]];let[i,s]=o.isValidIPv4String(n),[a,l]=o.isValidPrefixValue(BigInt(r),"IPv4"),c=i&&a,u=s.concat(l);return c?[c,[]]:[c,u]}static isValidIPv4CidrRange(n){return o.isValidCidrRange(n,o.isValidIPv4CidrNotation,e.dottedDecimalNotationToBinaryString,(e=>t.cidrPrefixToMaskBinaryString(e,"IPv4")))}static isValidIPv6CidrRange(e){return o.isValidCidrRange(e,o.isValidIPv6CidrNotation,r.colonHexadecimalNotationToBinaryString,(e=>t.cidrPrefixToMaskBinaryString(e,"IPv6")))}static isValidCidrRange(e,t,n,r){let i=t(e);if(!i[0])return i;let s=e.split("/"),a=s[0],l=s[1],c=BigInt("0b".concat(n(a))),u=(c&BigInt("0b".concat(r(parseInt(l)))))===c;return u?[u,[]]:[u,[o.InvalidIPCidrRangeMessage]]}static isValidIPv4RangeString(t){return this.isValidRange(t,o.isValidIPv4String,((t,n)=>BigInt("0b".concat(e.dottedDecimalNotationToBinaryString(t)))>=BigInt("0b".concat(e.dottedDecimalNotationToBinaryString(n)))))}static isValidIPv6RangeString(e){return this.isValidRange(e,o.isValidIPv6String,((e,t)=>BigInt("0b".concat(i.hexadectetNotationToBinaryString(e)))>=BigInt("0b".concat(i.hexadectetNotationToBinaryString(t)))))}static isValidRange(e,t,n){let r=e.split("-").map((e=>e.trim()));if(2!==r.length||0===r[0].length||0===r[1].length)return[!1,[o.invalidRangeNotationMessage]];let i=r[0],s=r[1],[a,l]=t(i),[c,u]=t(s),d=a&&c;if(d&&n(i,s))return[!1,[o.invalidRangeFirstNotGreaterThanLastMessage]];let h=l.concat(u);return d?[d,[]]:[d,h]}static isValidIPv6CidrNotation(e){let t=o.IPV6_RANGE_PATTERN.test(e);return t?[t,[]]:[t,[o.invalidIPv6CidrNotationString]]}static isValidBinaryString(e){return/^([10])+$/.test(e)?[!0,[]]:[!1,[o.invalidBinaryStringErrorMessage]]}static isNumeric(e){return/^(\d+)$/.test(e)}static isHexadecatet(e){return/^[0-9A-Fa-f]{4}$/.test(e)}};return bb.Validator=o,o.IPV4_PATTERN=new RegExp(/^(0?[0-9]?[0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\.(0?[0-9]?[0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\.(0?[0-9]?[0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\.(0?[0-9]?[0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])$/),o.IPV6_PATTERN=new RegExp(/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/),o.IPV4_RANGE_PATTERN=new RegExp(/^(0?[0-9]?[0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\.(0?[0-9]?[0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\.(0?[0-9]?[0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\.(0?[0-9]?[0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])(\/)([1-9]|[1-2][0-9]|3[0-2])$/),o.IPV6_RANGE_PATTERN=new RegExp(/^s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]d|1dd|[1-9]?d)(.(25[0-5]|2[0-4]d|1dd|[1-9]?d)){3}))|:)))(%.+)?s*(\/([0-9]|[1-9][0-9]|1[0-1][0-9]|12[0-8]))?$/),o.IPV4_CONTIGUOUS_MASK_BIT_PATTERN=new RegExp(/^(1){0,32}(0){0,32}$/),o.IPV6_CONTIGUOUS_MASK_BIT_PATTERN=new RegExp(/^(1){0,128}(0){0,128}$/),o.EIGHT_BIT_SIZE=BigInt("0b".concat("1".repeat(8))),o.SIXTEEN_BIT_SIZE=BigInt("0b".concat("1".repeat(16))),o.THIRTY_TWO_BIT_SIZE=BigInt("0b".concat("1".repeat(32))),o.ONE_HUNDRED_AND_TWENTY_EIGHT_BIT_SIZE=BigInt("0b".concat("1".repeat(128))),o.IPV4_SIZE=BigInt("4294967296"),o.IPV6_SIZE=BigInt("340282366920938463463374607431768211456"),o.invalidAsnRangeMessage="ASN number given less than zero or is greater than 32bit",o.invalid16BitAsnRangeMessage="ASN number given less than zero or is greater than 16bit",o.invalidIPv4NumberMessage="IPv4 number given less than zero or is greater than 32bit",o.invalidIPv6NumberMessage="IPv6 number given less than zero or is greater than 128bit",o.invalidOctetRangeMessage="Value given contains an invalid Octet; Value is less than zero or is greater than 8bit",o.invalidHexadecatetMessage="The value given is less than zero or is greater than 16bit",o.invalidOctetCountMessage="An IP4 number cannot have less or greater than 4 octets",o.invalidHexadecatetCountMessage="An IP6 number must have exactly 8 hexadecatet",o.invalidMaskMessage="The Mask is invalid",o.invalidPrefixValueMessage="A Prefix value cannot be less than 0 or greater than 32",o.invalidIPv4CidrNotationMessage="Cidr notation should be in the form [ip number]/[range]",o.InvalidIPCidrRangeMessage="Given IP number portion must is not the start of the range",o.invalidRangeNotationMessage="Range notation should be in the form [first ip]-[last ip]",o.invalidRangeFirstNotGreaterThanLastMessage="First IP in [first ip]-[last ip] must be less than Last IP",o.invalidIPv6CidrNotationString="A Cidr notation string should contain an IPv6 number and prefix",o.takeOutOfRangeSizeMessage="$count is greater than $size, the size of the range",o.cannotSplitSingleRangeErrorMessage="Cannot split an IP range with a single IP number",o.invalidInetNumType="Given ipNumType must be either InetNumType.IPv4 or InetNumType.IPv6",o.invalidBinaryStringErrorMessage="Binary string should contain only contiguous 1s and 0s",o.invalidIPRangeSizeMessage="Given size is zero or greater than maximum size of $iptype",o.invalidIPRangeSizeForCidrMessage="Given size can't be created via cidr prefix",o.invalidIPv4PatternMessage="Given IPv4 is not confirm to a valid IPv6 address",o.invalidIPv6PatternMessage="Given IPv6 is not confirm to a valid IPv6 address",bb}Object.defineProperty(yb,"__esModule",{value:!0}),yb.Hexadecatet=void 0;const xb=Ab();class Ib{constructor(e){let t;t="string"==typeof e?parseInt(e,16):parseInt(String(e),16);let[n,r]=xb.Validator.isValidIPv6Hexadecatet(BigInt(t));if(!n)throw Error(r.filter((e=>""!==e)).toString());this.value=t}static fromString(e){return new Ib(e)}static fromNumber(e){return new Ib(e)}getValue(){return this.value}toString(){return this.value.toString(16)}}yb.Hexadecatet=Ib;var Ob={},Tb={};Object.defineProperty(Tb,"__esModule",{value:!0}),Tb.Octet=void 0;const Rb=Ab();class Cb{constructor(e){let t;t="string"==typeof e?parseInt(e):e;let[n,r]=Rb.Validator.isValidIPv4Octet(BigInt(t));if(!n)throw Error(r.filter((e=>""!==e)).toString());this.value=t}static fromString(e){return new Cb(e)}static fromNumber(e){return new Cb(e)}getValue(){return this.value}toString(){return this.value.toString(10)}}Tb.Octet=Cb,Object.defineProperty(Ob,"__esModule",{value:!0}),Ob.isIPv4=Ob.IPv6Mask=Ob.IPv4Mask=Ob.IPv6=Ob.Asn=Ob.IPv4=Ob.AbstractIPNum=void 0;const Nb=Tb,jb=Ab(),Db=mb,Fb=mb,Lb=mb,Mb=mb,Bb=yb,Ub=Pb(),zb=Sb(),Vb=Pb();class qb{getValue(){return this.value}toBinaryString(){return Lb.leftPadWithZeroBit(this.value.toString(2),this.bitSize)}hasNext(){return this.value<this.maximumBitSize}hasPrevious(){return this.value>0n}isEquals(e){return this.value===e.value}isLessThan(e){return this.value<e.value}isGreaterThan(e){return this.value>e.value}isLessThanOrEquals(e){return this.value<=e.value}isGreaterThanOrEquals(e){return this.value>=e.value}}Ob.AbstractIPNum=qb;class Hb extends qb{constructor(e){if(super(),this.bitSize=32,this.maximumBitSize=jb.Validator.THIRTY_TWO_BIT_SIZE,this.type="IPv4",this.octets=[],this.separator=".","string"==typeof e){let[t,n]=this.constructFromDecimalDottedString(e);this.value=t,this.octets=n}else{let[t,n]=this.constructFromBigIntValue(e);this.value=t,this.octets=n}}static fromNumber(e){return new Hb(e)}static fromDecimalDottedString(e){return new Hb(e)}static fromString(e){return Hb.fromDecimalDottedString(e)}static fromBinaryString(e){let t=jb.Validator.isValidBinaryString(e);if(t[0])return new Hb(Fb.parseBinaryStringToBigInt(e));throw Error(t[1].join(","))}toString(){return this.octets.map((e=>e.toString())).join(this.separator)}getOctets(){return this.octets}nextIPNumber(){return Hb.fromNumber(this.getValue()+1n)}previousIPNumber(){return Hb.fromNumber(this.getValue()-1n)}toIPv4MappedIPv6(){let e="1".repeat(16)+this.toBinaryString();return Gb.fromBinaryString(e)}constructFromDecimalDottedString(e){let t,n,[r,i]=jb.Validator.isValidIPv4String(e);if(!r)throw new Error(i.filter((e=>""!==e)).toString());return t=e.split(".").map((e=>Nb.Octet.fromString(e))),n=BigInt("0b".concat(Db.dottedDecimalNotationToBinaryString(e))),[n,t]}constructFromBigIntValue(e){let[t,n]=jb.Validator.isValidIPv4Number(e);if(!t)throw new Error(n.filter((e=>""!==e)).toString());let r=Mb.numberToBinaryString(e);return[e="bigint"==typeof e?e:BigInt(e),this.binaryStringToDecimalOctets(r)]}binaryStringToDecimalOctets(e){return e.length<32&&(e=Lb.leftPadWithZeroBit(e,32)),e.match(/.{1,8}/g).map((e=>Nb.Octet.fromString(Fb.parseBinaryStringToBigInt(e).toString())))}}Ob.IPv4=Hb;class Wb extends qb{constructor(e){if(super(),this.bitSize=32,this.maximumBitSize=jb.Validator.THIRTY_TWO_BIT_SIZE,this.type="ASN","string"==typeof e)Wb.startWithASPrefix(e)?this.value=BigInt(parseInt(e.substring(2))):-1!=e.indexOf(".")?this.value=BigInt(this.parseFromDotNotation(e)):this.value=BigInt(parseInt(e));else{let t=BigInt(e),[n,r]=jb.Validator.isValidAsnNumber(t);if(!n)throw Error(r.filter((e=>""!==e)).toString());this.value=t}}static fromString(e){return new Wb(e)}static fromNumber(e){return new Wb(e)}static fromBinaryString(e){let t=jb.Validator.isValidBinaryString(e);if(t[0])return new Wb(parseInt(e,2));throw Error(t[1].join(","))}toString(){let e=this.value.toString();return"".concat(Wb.AS_PREFIX).concat(e)}toASPlain(){return this.value.toString()}toASDot(){return this.value.valueOf()>=65536n?this.toASDotPlus():this.toASPlain()}toASDotPlus(){let e=this.value.valueOf()/65535n;return"".concat(e,".").concat(this.value.valueOf()%65535n-e)}toBinaryString(){return Mb.numberToBinaryString(this.value)}is16Bit(){let[e]=jb.Validator.isValid16BitAsnNumber(this.value);return e}is32Bit(){return!this.is16Bit()}nextIPNumber(){return new Wb(this.value.valueOf()+1n)}previousIPNumber(){return new Wb(this.value.valueOf()-1n)}static startWithASPrefix(e){return 0===e.indexOf(Wb.AS_PREFIX)}parseFromDotNotation(e){let t=e.split("."),n=parseInt(t[0]);return 65535*n+(parseInt(t[1])+n)}}Ob.Asn=Wb,Wb.AS_PREFIX="AS";class Gb extends qb{constructor(e){if(super(),this.bitSize=128,this.maximumBitSize=jb.Validator.ONE_HUNDRED_AND_TWENTY_EIGHT_BIT_SIZE,this.type="IPv6",this.hexadecatet=[],this.separator=":","string"==typeof e){let t=zb.expandIPv6Number(e),[n,r]=this.constructFromHexadecimalDottedString(t);this.value=n,this.hexadecatet=r}else{let[t,n]=this.constructFromBigIntValue(e);this.value=t,this.hexadecatet=n}}static fromBigInt(e){return new Gb(e)}static fromHexadecatet(e){return new Gb(e)}static fromString(e){return Gb.fromHexadecatet(e)}static fromBinaryString(e){let t=jb.Validator.isValidBinaryString(e);if(t[0]){let t=Lb.leftPadWithZeroBit(e,128);return new Gb(Fb.parseBinaryStringToBigInt(t))}throw Error(t[1].join(","))}static fromIPv4(e){return e.toIPv4MappedIPv6()}static fromIPv4DotDecimalString(e){return new Hb(e).toIPv4MappedIPv6()}toString(){let e=this.hexadecatet.map((e=>e.toString())).join(":");return this.hexadecatet.length<8?"::"+e:e}getHexadecatet(){return this.hexadecatet}nextIPNumber(){return Gb.fromBigInt(this.getValue()+1n)}previousIPNumber(){return Gb.fromBigInt(this.getValue()-1n)}constructFromBigIntValue(e){let[t,n]=jb.Validator.isValidIPv6Number(e);if(!t)throw new Error(n.filter((e=>""!==e)).toString());let r=Mb.numberToBinaryString(e);return[e,this.binaryStringToHexadecatets(r)]}constructFromHexadecimalDottedString(e){let[t,n]=jb.Validator.isValidIPv6String(e);if(!t)throw new Error(n.filter((e=>""!==e)).toString());let r=e.split(":").map((e=>Bb.Hexadecatet.fromString(e)));return[BigInt("0b".concat(Vb.hexadectetNotationToBinaryString(e))),r]}binaryStringToHexadecatets(e){let t=Ub.binaryStringToHexadecimalString(e);for(;t.length%4!=0;)t="0"+t;return t.match(/.{1,4}/g).map((e=>Bb.Hexadecatet.fromString(e)))}}Ob.IPv6=Gb;class Yb extends Hb{constructor(e){let t,n;if(super(e),this.octets=[],[t,n]=jb.Validator.isValidIPv4Mask(e),!t)throw new Error(n.filter((e=>""!==e)).toString());let r=e.split(".");this.octets=r.map((e=>Nb.Octet.fromString(e)));let i=Db.dottedDecimalNotationToBinaryString(e);this.prefix=(i.match(/1/g)||[]).length,this.value=BigInt("0b".concat(i))}static fromDecimalDottedString(e){return new Yb(e)}}Ob.IPv4Mask=Yb;class Kb extends Gb{constructor(e){let t,n;super(e),this.hexadecatet=[];let r=zb.expandIPv6Number(e);if([t,n]=jb.Validator.isValidIPv6Mask(r),!t)throw new Error(n.filter((e=>""!==e)).toString());let i=r.split(":");this.hexadecatet=i.map((e=>Bb.Hexadecatet.fromString(e)));let o=Vb.hexadectetNotationToBinaryString(r);this.prefix=(o.match(/1/g)||[]).length,this.value=BigInt("0b".concat(o)),this.value=BigInt("0b".concat(Vb.hexadectetNotationToBinaryString(r)))}static fromHexadecatet(e){return new Kb(e)}}Ob.IPv6Mask=Kb,Ob.isIPv4=function(e){return 32===e.bitSize};var $b={};Object.defineProperty($b,"__esModule",{value:!0});var Qb={},Jb={},Xb={};Object.defineProperty(Xb,"__esModule",{value:!0}),Xb.isIPv4Prefix=Xb.IPv6Prefix=Xb.IPv4Prefix=void 0;const Zb=Ab(),ew=Ob,tw=mb,nw=Pb(),rw=yb;class iw{constructor(e){let t,n;if(this.type="IPv4",this.bitValue=32n,[t,n]=Zb.Validator.isValidPrefixValue(e,"IPv4"),!t)throw new Error(n.filter((e=>""!==e)).toString());this.value=e}static fromNumber(e){return new iw(e)}static fromRangeSize(e){let t=1n===e?32:32-sw(e,Zb.Validator.IPV4_SIZE);return iw.fromNumber(BigInt(t))}getValue(){return this.value}toString(){return this.value.toString()}toMask(){let e="1".repeat(Number(this.value)),t="0".repeat(Number(32n-this.value));return ew.IPv4Mask.fromDecimalDottedString(this.toDecimalNotation("".concat(e).concat(t)))}toRangeSize(){return 1n<<this.bitValue-this.getValue()}merge(){return new iw(this.value-1n)}split(){return new iw(this.value+1n)}toDecimalNotation(e){return"".concat(tw.parseBinaryStringToBigInt(e.substr(0,8)),".").concat(tw.parseBinaryStringToBigInt(e.substr(8,8)),".").concat(tw.parseBinaryStringToBigInt(e.substr(16,8)),".").concat(tw.parseBinaryStringToBigInt(e.substr(24,8)))}}Xb.IPv4Prefix=iw;class ow{constructor(e){let t,n;if(this.type="IPv6",this.bitValue=128n,[t,n]=Zb.Validator.isValidPrefixValue(e,"IPv6"),!t)throw new Error(n.filter((e=>""!==e)).toString());this.value=e}static fromNumber(e){return new ow(e)}static fromRangeSize(e){let t=1n===e?128:128-sw(e,Zb.Validator.IPV6_SIZE);return ow.fromNumber(BigInt(t))}getValue(){return this.value}toString(){return this.value.toString()}toMask(){let e="1".repeat(Number(this.value)),t="0".repeat(128-Number(this.value));return ew.IPv6Mask.fromHexadecatet(this.toHexadecatetNotation("".concat(e).concat(t)))}toRangeSize(){return 1n<<this.bitValue-this.getValue()}merge(){return new ow(this.value-1n)}split(){return new ow(this.value+1n)}toHexadecatetNotation(e){return e.match(/.{1,16}/g).map((e=>rw.Hexadecatet.fromString(nw.binaryStringToHexadecimalString(e)))).map((e=>e.toString())).join(":")}}function sw(e,t){let n=t>Zb.Validator.IPV4_SIZE?"IPv6":"IPv4";if(e>t||0n===e)throw new Error(Zb.Validator.invalidIPRangeSizeMessage.replace("$iptype",n));try{return tw.intLog2(e)}catch(e){throw new Error(Zb.Validator.invalidIPRangeSizeForCidrMessage)}}Xb.IPv6Prefix=ow,Xb.isIPv4Prefix=function(e){return"IPv4"===e.type},Object.defineProperty(Jb,"__esModule",{value:!0}),Jb.isIPv4CidrRange=Jb.IPv6CidrRange=Jb.IPv4CidrRange=Jb.AbstractIPRange=Jb.RangedSet=void 0;const aw=Ob,lw=Xb,cw=mb,uw=Ab();class dw{constructor(e,t){if(this.first=e,this.last=t,e.isGreaterThan(t))throw new Error("".concat(e.toString()," should be lower than ").concat(t.toString()));this.currentValue=e,this.bitValue=BigInt(e.bitSize)}static fromSingleIP(e){return new dw(e,e)}static fromCidrRange(e){return new dw(e.getFirst(),e.getLast())}static fromRangeString(e){let t=e.split("-").map((e=>e.trim()));if(2!==t.length)throw new Error("Argument should be in the format firstip-lastip");let[n,r]=t,[i]=uw.Validator.isValidIPv4String(n),[o]=uw.Validator.isValidIPv4String(r),[s]=uw.Validator.isValidIPv6String(n),[a]=uw.Validator.isValidIPv6String(r);if(i&&o)return new dw(aw.IPv4.fromDecimalDottedString(n),aw.IPv4.fromDecimalDottedString(r));if(s&&a)return new dw(aw.IPv6.fromHexadecatet(n),aw.IPv6.fromHexadecatet(r));throw new Error("First IP and Last IP should be valid and same type")}getFirst(){return this.first}getLast(){return this.last}getSize(){return this.last.getValue()-this.first.getValue()+1n}toRangeString(){return"".concat(this.getFirst(),"-").concat(this.getLast())}inside(e){return e.contains(this)}contains(e){let t=this.getFirst(),n=this.getLast(),r=e.getFirst(),i=e.getLast();return t.isLessThanOrEquals(r)&&n.isGreaterThanOrEquals(i)}isEquals(e){return this.getFirst().isEquals(e.getFirst())&&this.getLast().isEquals(e.getLast())}isLessThan(e){return!this.isEquals(e)&&(this.getFirst().isEquals(e.getFirst())?this.getSize()<e.getSize():this.getFirst().isLessThan(e.getFirst()))}isGreaterThan(e){return!this.isEquals(e)&&(this.getFirst().isEquals(e.getFirst())?this.getSize()>e.getSize():this.getFirst().isGreaterThan(e.getFirst()))}isOverlapping(e){let t=this.getFirst(),n=this.getLast(),r=e.getFirst(),i=e.getLast();return n.isGreaterThan(r)&&n.isLessThanOrEquals(i)&&t.isLessThan(r)||i.isGreaterThan(t)&&i.isLessThanOrEquals(n)&&r.isLessThan(t)}isCidrAble(){if(1n===this.getSize())return!0;try{let e=cw.intLog2(this.getSize()),t=cw.parseBinaryStringToBigInt(cw.cidrPrefixToMaskBinaryString(e,aw.isIPv4(this.currentValue)?"IPv4":"IPv6"));return this.first.getValue()===(t&this.first.getValue())}catch(Ur){return!1}}toCidrRange(){return aw.isIPv4(this.currentValue)?this.toIPv4CidrRange():this.toIPv6CidrRange()}isConsecutive(e){let t=this.getFirst(),n=this.getLast(),r=e.getFirst(),i=e.getLast();return n.hasNext()&&n.nextIPNumber().isEquals(r)||i.hasNext()&&i.nextIPNumber().isEquals(t)}union(e){if(this.isEquals(e))return new dw(e.getFirst(),e.getLast());if(this.isOverlapping(e))return this.getFirst().isLessThan(e.getFirst())?new dw(this.getFirst(),e.getLast()):new dw(e.getFirst(),this.getLast());if(this.contains(e))return new dw(this.getFirst(),this.getLast());if(e.contains(this))return new dw(e.getFirst(),e.getLast());throw new Error("Ranges do not overlap nor are equal")}prepend(e){if(e.getLast().nextIPNumber().isEquals(this.getFirst()))return new dw(e.getFirst(),this.getLast());throw new Error("Range to prepend must be adjacent")}append(e){if(this.getLast().nextIPNumber().isEquals(e.getFirst()))return new dw(this.getFirst(),e.getLast());throw new Error("Range to append must be adjacent")}subtract(e){if(!this.isOverlapping(e))throw new Error("Cannot subtract ranges that are not overlapping");if(!this.isLessThan(e))throw new Error("Cannot subtract a larger range from this range");return new dw(this.getFirst(),e.getLast())}takeSubRange(e,t){if(e+t>this.getSize())throw new RangeError("Requested range is greater than what can be taken");if(0n===t)throw new Error("Sub range cannot be zero");let n=this.getFirst().value+e,r=aw.isIPv4(this.getFirst())?aw.IPv4.fromNumber(n):aw.IPv6.fromBigInt(n),i=r.value+(t-1n),o=aw.isIPv4(r)?aw.IPv4.fromNumber(i):aw.IPv6.fromBigInt(i);return new dw(r,o)}difference(e){if(e.getSize()>this.getSize())throw new Error("Range is greater than range to be subtracted from");if(!this.contains(e))throw new Error("Range to subtract is not contained in this range");let t=[];try{t.push(new dw(this.getFirst(),e.getFirst().previousIPNumber()))}catch(e){}try{t.push(new dw(e.getLast().nextIPNumber(),this.getLast()))}catch(e){}return t}*take(e){let t=this.getFirst(),n=void 0===e?this.getSize().valueOf():e;for(;n>0;)n--,yield t,t=t.nextIPNumber()}*[Symbol.iterator](){yield*this.take()}toIPv4CidrRange(){let e=new fw(aw.IPv4.fromNumber(this.getFirst().getValue()),lw.IPv4Prefix.fromRangeSize(this.getSize()));if(e.getFirst().isEquals(this.getFirst()))return e;throw new Error("Range cannot be converted to CIDR")}toIPv6CidrRange(){let e=new pw(aw.IPv6.fromBigInt(this.getFirst().getValue()),lw.IPv6Prefix.fromRangeSize(this.getSize()));if(e.getFirst().isEquals(this.getFirst()))return e;throw new Error("Range cannot be converted to CIDR")}}Jb.RangedSet=dw;class hw{hasNextRange(){let e=this.getSize();return 2n**this.bitValue-e>=this.getFirst().getValue()+e}hasPreviousRange(){return this.getSize()<=this.getFirst().getValue()}toRangeSet(){return new dw(this.getFirst(),this.getLast())}inside(e){return this.toRangeSet().inside(e.toRangeSet())}contains(e){return this.toRangeSet().contains(e.toRangeSet())}toRangeString(){return this.toRangeSet().toRangeString()}isOverlapping(e){return this.toRangeSet().isOverlapping(e.toRangeSet())}isConsecutive(e){return this.toRangeSet().isConsecutive(e.toRangeSet())}isCidrMergeable(e){const t=BigInt(cw.matchingBitCount(this.getFirst().toBinaryString(),e.getFirst().toBinaryString()));return this.getPrefix().value-t===1n&&this.isConsecutive(e)&&this.getSize()===e.getSize()}isMergeable(e){return this.isCidrMergeable(e)||this.contains(e)||this.inside(e)}isEquals(e){return this.toRangeSet().isEquals(e.toRangeSet())}merge(e){if(!this.isCidrMergeable(e))throw new Error("Cannot merge. Ranges (".concat(this.toRangeString(),",").concat(e.toRangeString(),") are not consecutive and/or of same size"));return this.newInstance(this.getFirst(),this.getPrefix().merge())}*takeStream(e){return this.toRangeSet().take(e)}*[Symbol.iterator](){yield*this.toRangeSet()}}Jb.AbstractIPRange=hw;class fw extends hw{constructor(e,t){super(),this.ipv4=e,this.cidrPrefix=t,this.bitValue=32n}static fromCidr(e){let[t,n]=uw.Validator.isValidIPv4CidrNotation(e);if(!t){let e=n.filter((e=>""!==e));throw new Error(e.join(" and "))}let r=e.split("/"),i=r[0],o=BigInt(parseInt(r[1]));return new fw(aw.IPv4.fromDecimalDottedString(i),lw.IPv4Prefix.fromNumber(o))}getSize(){return this.cidrPrefix.toRangeSize()}toCidrString(){return"".concat(this.ipv4.toString().toString(),"/").concat(this.cidrPrefix.toString())}toRangeString(){return super.toRangeString()}getFirst(){return aw.IPv4.fromNumber(this.ipv4.getValue()&this.cidrPrefix.toMask().getValue())}getLast(){return gw(this,this.ipv4)}newInstance(e,t){return new fw(e,t)}getPrefix(){return this.cidrPrefix}isConsecutive(e){return super.isConsecutive(e)}contains(e){return super.contains(e)}inside(e){return super.inside(e)}isOverlapping(e){return super.isOverlapping(e)}take(e){let t=[this.getFirst()],n=this.getFirst();if(e>this.getSize()){let t=uw.Validator.takeOutOfRangeSizeMessage.replace("$count",e.toString()).replace("$size",this.getSize().toString());throw new Error(t)}for(let r=0;r<e-1n;r++)t.push(n.nextIPNumber()),n=n.nextIPNumber();return t}split(){let e=this.cidrPrefix.getValue();if(32n===e)throw new Error("Cannot split an IP range with a single IP number");let t=lw.IPv4Prefix.fromNumber(e+1n),n=this.getFirst(),r=new fw(n,t),i=r.getLast().nextIPNumber();return[r,new fw(i,t)]}splitInto(e){let t=e.getValue()-this.cidrPrefix.getValue();if(t<0)throw new Error("Prefix to split into is larger than source prefix");if(0n===t)return[new fw(this.getFirst(),e)];if(1n===t)return this.split();{let e=this.split();for(;t>1;)e=e.flatMap((e=>e.split())),t-=1n;return e}}hasNextRange(){return super.hasNextRange()}hasPreviousRange(){return super.hasPreviousRange()}nextRange(){if(this.hasNextRange()){let e=this.getSize(),t=this.getFirst().getValue()+e;return new fw(new aw.IPv4(t),this.cidrPrefix)}}previousRange(){if(this.hasPreviousRange()){let e=this.getSize(),t=this.getFirst().getValue()-e;return new fw(new aw.IPv4(t),this.cidrPrefix)}}}Jb.IPv4CidrRange=fw;class pw extends hw{constructor(e,t){super(),this.ipv6=e,this.cidrPrefix=t,this.bitValue=128n}static fromCidr(e){let[t,n]=uw.Validator.isValidIPv6CidrNotation(e);if(!t)throw new Error(n.filter((e=>""!==e)).toString());let r=e.split("/"),i=r[0],o=BigInt(parseInt(r[1]));return new pw(aw.IPv6.fromHexadecatet(i),lw.IPv6Prefix.fromNumber(o))}getSize(){return this.cidrPrefix.toRangeSize()}toCidrString(){return"".concat(this.ipv6.toString().toString(),"/").concat(this.cidrPrefix.toString())}toRangeString(){return super.toRangeString()}getFirst(){return aw.IPv6.fromBigInt(this.ipv6.getValue()&this.cidrPrefix.toMask().getValue())}getLast(){return gw(this,this.ipv6)}newInstance(e,t){return new pw(e,t)}getPrefix(){return this.cidrPrefix}isConsecutive(e){return super.isConsecutive(e)}contains(e){return super.contains(e)}inside(e){return super.inside(e)}isOverlapping(e){return super.isOverlapping(e)}take(e){let t=[this.getFirst()],n=this.getFirst();if(e>this.getSize())throw new Error("".concat(e.toString()," is greater than ").concat(this.getSize().toString(),", the size of the range"));for(var r=0;r<e-1n;r++)t.push(n.nextIPNumber()),n=n.nextIPNumber();return t}split(){let e=this.cidrPrefix.getValue();if(128n===e)throw new Error("Cannot split an IP range with a single IP number");let t=lw.IPv6Prefix.fromNumber(e+1n),n=this.getFirst(),r=new pw(n,t),i=r.getLast().nextIPNumber();return[r,new pw(i,t)]}splitInto(e){let t=e.getValue()-this.cidrPrefix.getValue();if(t<0)throw new Error("Prefix to split into is larger than source prefix");if(0n===t)return[new pw(this.getFirst(),e)];if(1n===t)return this.split();{let e=this.split();for(;t>1;)e=e.flatMap((e=>e.split())),t-=1n;return e}}hasNextRange(){return super.hasNextRange()}hasPreviousRange(){return super.hasPreviousRange()}nextRange(){if(this.hasNextRange()){let e=this.getSize(),t=this.getFirst().getValue()+e;return new pw(new aw.IPv6(t),this.cidrPrefix)}}previousRange(){if(this.hasPreviousRange()){let e=this.getSize(),t=this.getFirst().getValue()-e;return new pw(new aw.IPv6(t),this.cidrPrefix)}}}Jb.IPv6CidrRange=pw;let gw=(e,t)=>{let n=Number(e.bitValue.valueOf()),r=BigInt("0b".concat("1".repeat(n))),i=e.cidrPrefix.toMask().getValue(),o=cw.leftPadWithZeroBit((i^r).toString(2),n);return mw(e)?aw.IPv4.fromNumber(t.getValue()|cw.parseBinaryStringToBigInt(o)):aw.IPv6.fromBigInt(t.getValue()|cw.parseBinaryStringToBigInt(o))};function mw(e){return 32n===e.bitValue.valueOf()}Jb.isIPv4CidrRange=mw,Object.defineProperty(Qb,"__esModule",{value:!0}),Qb.Pool=void 0;const vw=Jb,yw=Xb;class bw{constructor(e){this.backingSet=new ww,e.forEach((e=>{this.backingSet.add(e)}))}static fromIP(e){let t=e.map((e=>vw.RangedSet.fromSingleIP(e)));return new bw(t)}static fromRangeSet(e){return new bw(e)}static fromCidrRanges(e){let t=e.map((e=>e.toRangeSet()));return new bw(t)}getRanges(){return this.backingSet.asArray()}aggregate(){let e=this.backingSet.asArray().reduce(((e,t,n,r)=>{if(0==e.length)return e.push(t),e;{let n=e.pop(),r=n.toCidrRange(),i=t.toCidrRange();if(r.isCidrMergeable(i)){let t=r.merge(i);return e.push(t.toRangeSet()),e}return n.contains(t)?e.push(n):(e.push(n),e.push(t)),e}}),[]),t=bw.fromRangeSet(e);return t.getRanges().length!==this.getRanges().length?t.aggregate():t}getCidrRange(e){if(e.toRangeSize()>this.getSize())throw new Error("Not enough IP number in the pool for requested prefix: ".concat(e));let t,n;e:for(let r of this.getRanges())for(let i=0n;i+e.toRangeSize()<=r.getSize();i+=1n)try{let n=r.takeSubRange(i,e.toRangeSize());t=n.toCidrRange();let o=r.difference(n);this.removeExact(r),this.add(o);break e}catch(e){if(e instanceof RangeError)continue e;n=e}if(t)return t;throw void 0===n?new Error("No range big enough in the pool for requested prefix: ".concat(e)):n}getCidrRanges(e){if(e.toRangeSize()>this.getSize())throw new Error("Prefix greater than pool");let t=(e,n,r)=>{try{let i=this.getCidrRange(n);r.push(i);let o=r.reduce(((e,t)=>e+t.getSize()),0n);return e.toRangeSize()===o?r:t(e,n,r)}catch(Wr){let o=yw.isIPv4Prefix(n)?yw.IPv4Prefix.fromNumber(n.getValue()+1n):yw.IPv6Prefix.fromNumber(n.getValue()+1n);return t(e,o,r)}};return t(e,e,[])}getSize(){return this.aggregate().getRanges().reduce(((e,t)=>e+t.getSize()),0n)}resetWith(e){this.backingSet.clear(),this.backingSet=this.backingSet.add(e)}removeExact(e){let t=this.backingSet.removeExact(e),n=!this.backingSet.isEquals(t);return this.backingSet=t,n}removeOverlapping(e){let t=this.backingSet.removeOverlapping(e),n=!this.backingSet.isEquals(t);return this.backingSet=t,n}add(e){this.backingSet=this.backingSet.add(e)}clear(){this.backingSet.clear()}}Qb.Pool=bw;class ww{constructor(e){this.backingArray=e?this.sortArray(e):new Array}sortArray(e){return e.sort(((e,t)=>e.isLessThan(t)?-1:e.isGreaterThan(t)?1:0)),e}asArray(){return this.backingArray}isEquals(e){return this.backingArray.length===e.asArray().length&&this.backingArray.every(((t,n)=>t.getSize()===e.asArray()[n].getSize()))}add(e){let t=this.backingArray;return"push"in e?t=t.concat(e):t.push(e),new ww(this.sortArray(t))}removeExact(e){let t=this.backingArray.filter((t=>"push"in e?void 0!==e.find((e=>e.isEquals(t))):!e.isEquals(t)));return new ww(this.sortArray(t))}removeOverlapping(e){let t=this.backingArray.flatMap((t=>{if("push"in e)return e.flatMap((e=>t.contains(e)?t.difference(e):t.inside(e)?new Array:t.isOverlapping(e)?[t.subtract(e)]:[e]));try{return t.difference(e)}catch(e){return t}}));return new ww(this.sortArray(t))}clear(){this.backingArray=[]}}!function(e){var t=bi&&bi.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=bi&&bi.__exportStar||function(e,n){for(var r in e)"default"===r||n.hasOwnProperty(r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(mb,e),n(yb,e),n(Pb(),e),n(Ob,e),n($b,e),n(Qb,e),n(Jb,e),n(Sb(),e),n(Tb,e),n(Xb,e),n(Ab(),e)}(gb);class Sw{constructor(e){this.ip=(null==e?void 0:e.networkIp)||"192.168.0.0/24",this.mask=null==e?void 0:e.networkMask,this.ownerId=e.networkOwnerId,this.ownerIp=null==e?void 0:e.networkOwnerIp,this.gateway=null==e?void 0:e.networkGateway,this.logger=(null==e?void 0:e.logger)||xi("network")}}class _w{constructor(e,t,n,r){this.id=e,this.ip=t,this.getNetworkInfo=n,this.apiUrl=r}getNetworkConfig(){return{net:[{...this.getNetworkInfo(),nodeIp:this.ip.toString()}]}}getWebsocketUri(e){const t=new URL(this.apiUrl);return t.protocol="ws","".concat(t.href,"/net/").concat(this.getNetworkInfo().id,"/tcp/").concat(this.ip,"/").concat(e)}}var Ew;!function(e){e[e.ServiceNotInitialized=0]="ServiceNotInitialized",e[e.NetworkSetupMissing=1]="NetworkSetupMissing",e[e.NetworkCreationFailed=2]="NetworkCreationFailed",e[e.NoAddressesAvailable=3]="NoAddressesAvailable",e[e.AddressOutOfRange=4]="AddressOutOfRange",e[e.AddressAlreadyAssigned=5]="AddressAlreadyAssigned",e[e.NodeAddingFailed=6]="NodeAddingFailed",e[e.NodeRemovalFailed=7]="NodeRemovalFailed",e[e.NetworkRemovalFailed=8]="NetworkRemovalFailed"}(Ew||(Ew={}));class kw extends Br{constructor(e,t,n,r){super(e,t,r),this.code=t,this.network=n,this.previous=r}}class Pw{static async create(e,t){var n,r;const i=new Sw(t);try{const{data:{id:t,ip:n,mask:r}}=await e.net.createNetwork({id:i.ownerId,ip:i.ip,mask:i.mask,gateway:i.gateway}),o=new Pw(t,e,i);return await o.addNode(o.ownerId,o.ownerIp.toString()).catch((async n=>{throw await e.net.removeNetwork(t),n})),i.logger.info("Network created",{id:t,ip:n,mask:r}),o}catch(e){if(e instanceof kw)throw e;throw new kw("Unable to create network. ".concat((null===(r=null===(n=null==e?void 0:e.response)||void 0===n?void 0:n.data)||void 0===r?void 0:r.message)||e),Ew.NetworkCreationFailed,void 0,e)}}constructor(e,t,n){this.id=e,this.yagnaApi=t,this.config=n,this.nodes=new Map,this.ipRange=gb.IPv4CidrRange.fromCidr(n.mask?"".concat(n.ip,"/").concat(n.mask):n.ip),this.ipIterator=this.ipRange[Symbol.iterator](),this.ip=this.nextAddress(),this.mask=this.ipRange.getPrefix().toMask(),this.ownerId=n.ownerId,this.ownerIp=n.ownerIp?new gb.IPv4(n.ownerIp):this.nextAddress(),this.gateway=n.gateway?new gb.IPv4(n.gateway):void 0,this.logger=n.logger}getNetworkInfo(){return{id:this.id,ip:this.ip.toString(),mask:this.mask.toString(),nodes:Object.fromEntries(Array.from(this.nodes).map((e=>{let[t,n]=e;return[n.ip.toString(),t]})))}}async addNode(e,t){var n;try{let n;if(this.ensureIdUnique(e),t)n=gb.IPv4.fromString(t),this.ensureIpInNetwork(n),this.ensureIpUnique(n);else for(;n=this.nextAddress(),!this.isIpUnique(n););const r=new _w(e,n,this.getNetworkInfo.bind(this),this.getUrl());return this.nodes.set(e,r),await this.yagnaApi.net.addNode(this.id,{id:e,ip:n.toString()}),this.logger.debug("Node has added to the network.",{id:e,ip:n.toString()}),r}catch(e){if(e instanceof kw)throw e;throw new kw("Unable to add node to network. ".concat((null===(n=null==e?void 0:e.data)||void 0===n?void 0:n.message)||e.toString()),Ew.NodeAddingFailed,this.getNetworkInfo(),e)}}async removeNode(e){const t=this.nodes.get(e);if(!t)throw new kw("Unable to remove node ".concat(e,". There is no such node in the network"),Ew.NodeRemovalFailed,this.getNetworkInfo());try{await this.yagnaApi.net.removeNode(this.id,e),this.nodes.delete(e),this.logger.debug("Node has removed from the network.",{id:e,ip:t.ip.toString()})}catch(t){throw new kw("Unable to remove node ".concat(e,". ").concat(t),Ew.NetworkRemovalFailed,this.getNetworkInfo(),t)}}hasNode(e){return this.nodes.has(e)}async remove(){var e;try{await this.yagnaApi.net.removeNetwork(this.id),this.logger.info("Network has removed:",{id:this.id,ip:this.ip.toString()})}catch(Vr){throw new kw("Unable to remove network. ".concat((null===(e=null==Vr?void 0:Vr.data)||void 0===e?void 0:e.message)||Vr.toString()),Ew.NetworkRemovalFailed,this.getNetworkInfo(),Vr)}}nextAddress(){const e=this.ipIterator.next().value;if(!e)throw new kw("No more addresses available in ".concat(this.ipRange.toCidrString()),Ew.NoAddressesAvailable,this.getNetworkInfo());return e}ensureIpInNetwork(e){if(!this.ipRange.contains(new gb.IPv4CidrRange(e,new gb.IPv4Prefix(BigInt(this.mask.prefix)))))throw new kw("The given IP ('".concat(e.toString(),"') address must belong to the network ('").concat(this.ipRange.toCidrString(),"')."),Ew.AddressOutOfRange,this.getNetworkInfo());return!0}ensureIpUnique(e){if(!this.isIpUnique(e))throw new kw("IP '".concat(e.toString(),"' has already been assigned in this network."),Ew.AddressAlreadyAssigned,this.getNetworkInfo())}ensureIdUnique(e){if(this.nodes.has(e))throw new kw("Network ID '".concat(e,"' has already been assigned in this network."),Ew.AddressAlreadyAssigned,this.getNetworkInfo())}isIpUnique(e){for(const t of this.nodes.values())if(t.ip.isEquals(e))return!1;return!0}getUrl(){return this.yagnaApi.net.basePath}}class Aw{constructor(e,t){this.yagnaApi=e,this.options=t,this.logger=(null==t?void 0:t.logger)||xi("network")}async run(e){e||(e=(await this.yagnaApi.identity.getIdentity()).identity),this.network=await Pw.create(this.yagnaApi,{...this.options,networkOwnerId:e}),this.logger.info("Network Service has started")}async addNode(e,t){if(!this.network)throw new kw("The service is not started and the network does not exist",Ew.NetworkSetupMissing);return this.network.addNode(e,t)}async removeNode(e){if(!this.network)throw new kw("The service is not started and the network does not exist",Ew.ServiceNotInitialized);return this.network.removeNode(e)}hasNode(e){if(!this.network)throw new kw("The service is not started and the network does not exist",Ew.ServiceNotInitialized);return this.network.hasNode(e)}async end(){var e;await(null===(e=this.network)||void 0===e?void 0:e.remove()),this.logger.info("Network Service has been stopped")}}const xw=Object.freeze({payment:{driver:"erc20",network:"goerli"},budget:1,subnetTag:"public",basePath:"http://127.0.0.1:7465",maxParallelTasks:5,taskTimeout:3e5,maxTaskRetries:3,enableLogging:!0,startupTimeout:9e4,exitOnNoProposals:!1});class Iw{constructor(e){var t,n,r,i,o,s,a;const l=qr?{env:{YAGNA_APPKEY:null,YAGNA_API_URL:null,YAGNA_SUBNET:null}}:process;Object.keys(e).forEach((t=>this[t]=e[t]));const c=(null===(t=null==e?void 0:e.yagnaOptions)||void 0===t?void 0:t.apiKey)||l.env.YAGNA_APPKEY;if(!c)throw new Dr("Api key not defined");if(e.maxTaskRetries&&e.maxTaskRetries<0)throw new Dr("The maxTaskRetries parameter cannot be less than zero");this.yagnaOptions={apiKey:c,basePath:(null===(n=e.yagnaOptions)||void 0===n?void 0:n.basePath)||l.env.YAGNA_API_URL||xw.basePath},this.package=e.package,this.packageOptions={engine:e.engine,minMemGib:e.minMemGib,minStorageGib:e.minStorageGib,minCpuThreads:e.minCpuThreads,minCpuCores:e.minCpuCores,capabilities:e.capabilities,manifest:e.manifest,manifestSig:e.manifestSig,manifestSigAlgorithm:e.manifestSigAlgorithm,manifestCert:e.manifestCert},this.budget=e.budget||xw.budget,this.maxParallelTasks=e.maxParallelTasks||xw.maxParallelTasks,this.taskTimeout=e.taskTimeout||xw.taskTimeout,this.subnetTag=e.subnetTag||(null===(r=l.env)||void 0===r?void 0:r.YAGNA_SUBNET)||xw.subnetTag,this.networkIp=e.networkIp,this.logger=(()=>{var t;return(null!==(t=e.enableLogging)&&void 0!==t?t:xw.enableLogging)?e.logger?e.logger.child("task-executor"):xi("task-executor"):Yr()})(),this.eventTarget=e.eventTarget||new EventTarget,this.maxTaskRetries=null!==(i=e.maxTaskRetries)&&void 0!==i?i:xw.maxTaskRetries,this.startupTimeout=null!==(o=e.startupTimeout)&&void 0!==o?o:xw.startupTimeout,this.exitOnNoProposals=null!==(s=e.exitOnNoProposals)&&void 0!==s?s:xw.exitOnNoProposals,this.agreementMaxPoolSize=null!==(a=e.agreementMaxPoolSize)&&void 0!==a?a:xw.maxParallelTasks}}var Ow={exports:{}},Tw=function(){var e=this,t=-1;return{next:function(){return t+=1,{value:e.items[t],done:t>=e.items.length}}}},Rw=function(){return this.items};function Cw(e){return Cw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cw(e)}var Nw=function(e){return Array.isArray(e)},jw=function(e){return"object"===Cw(e)&&!1===Array.isArray(e)&&null!==e},Dw=function(e){return"function"==typeof e},Fw=Dw,Lw=function(e){return void 0===e?this.sum()/this.items.length:Fw(e)?new this.constructor(this.items).sum(e)/this.items.length:new this.constructor(this.items).pluck(e).sum()/this.items.length},Mw=Lw;function Bw(e){return Bw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bw(e)}var Uw=function(e){var t=this,n=[],r=0;if(Array.isArray(this.items))do{var i=this.items.slice(r,r+e),o=new this.constructor(i);n.push(o),r+=e}while(r<this.items.length);else if("object"===Bw(this.items)){var s=Object.keys(this.items),a=function(){var i=s.slice(r,r+e),o=new t.constructor({});i.forEach((function(e){return o.put(e,t.items[e])})),n.push(o),r+=e};do{a()}while(r<s.length)}else n.push(new this.constructor([this.items]));return new this.constructor(n)};function zw(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Vw=function(){var e;return new this.constructor((e=[]).concat.apply(e,function(e){return function(e){if(Array.isArray(e))return zw(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return zw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zw(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(this.items)))};function qw(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Hw(e){return Hw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hw(e)}var Ww=function(e){var t=this,n=e;n instanceof this.constructor&&(n=e.all());var r={};if(Array.isArray(this.items)&&Array.isArray(n))this.items.forEach((function(e,t){r[e]=n[t]}));else if("object"===Hw(this.items)&&"object"===Hw(n))Object.keys(this.items).forEach((function(e,i){r[t.items[e]]=n[Object.keys(n)[i]]}));else if(Array.isArray(this.items))r[this.items[0]]=n;else if("string"==typeof this.items&&Array.isArray(n)){var i=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);s=!0);}catch(e){a=!0,i=e}finally{try{s||null==n.return||n.return()}finally{if(a)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return qw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qw(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(n,1);r[this.items]=i[0]}else"string"==typeof this.items&&(r[this.items]=n);return new this.constructor(r)};function Gw(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Yw=function(e){var t,n;return Array.isArray(e)?(n=t=[]).push.apply(n,function(e){return function(e){if(Array.isArray(e))return Gw(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Gw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Gw(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e)):(t={},Object.keys(e).forEach((function(n){t[n]=e[n]}))),t};function Kw(e){return Kw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kw(e)}var $w=Yw,Qw=function(e){var t=e;e instanceof this.constructor?t=e.all():"object"===Kw(e)&&(t=[],Object.keys(e).forEach((function(n){t.push(e[n])})));var n=$w(this.items);return t.forEach((function(e){"object"===Kw(e)?Object.keys(e).forEach((function(t){return n.push(e[t])})):n.push(e)})),new this.constructor(n)};function Jw(e){return function(e){if(Array.isArray(e))return Xw(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Xw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xw(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xw(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Zw=function(e){var t=[];return Array.isArray(e)?t.push.apply(t,Jw(e)):"Collection"===e.constructor.name?t.push.apply(t,Jw(e.all())):Object.keys(e).forEach((function(n){return t.push(e[n])})),t};function eS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var tS=Zw,nS=Dw,rS=function(e,t){if(void 0!==t)return Array.isArray(this.items)?this.items.filter((function(n){return void 0!==n[e]&&n[e]===t})).length>0:void 0!==this.items[e]&&this.items[e]===t;if(nS(e))return this.items.filter((function(t,n){return e(t,n)})).length>0;if(Array.isArray(this.items))return-1!==this.items.indexOf(e);var n=tS(this.items);return n.push.apply(n,function(e){return function(e){if(Array.isArray(e))return eS(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return eS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?eS(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Object.keys(this.items))),-1!==n.indexOf(e)},iS=function(){return 1===this.count()},oS=function(){var e=0;return Array.isArray(this.items)&&(e=this.items.length),Math.max(Object.keys(this.items).length,e)},sS=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e};return new this.constructor(this.items).groupBy(e).map((function(e){return e.count()}))},aS=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new this.constructor(function e(t,n,r){var i=r[0];i instanceof n&&(i=i.all());for(var o=r.slice(1),s=!o.length,a=[],l=0;l<i.length;l+=1){var c=t.slice();c.push(i[l]),s?a.push(c):a=a.concat(e(c,n,o))}return a}([],this.constructor,[].concat([this.items],t)))},lS=function(){this.dump(),void 0!==yi&&yi.exit(1)},cS=function(e){var t;t=e instanceof this.constructor?e.all():e;var n=this.items.filter((function(e){return-1===t.indexOf(e)}));return new this.constructor(n)},uS=function(e){var t=this,n=e;e instanceof this.constructor&&(n=e.all());var r={};return Object.keys(this.items).forEach((function(e){void 0!==n[e]&&n[e]===t.items[e]||(r[e]=t.items[e])})),new this.constructor(r)},dS=function(e){var t;t=e instanceof this.constructor?e.all():e;var n=Object.keys(t),r=Object.keys(this.items).filter((function(e){return-1===n.indexOf(e)}));return new this.constructor(this.items).only(r)},hS=function(e,t){var n=this.items.filter((function(n){return!(e&&e.some((function(e){return 0===t(n,e)})))}));return new this.constructor(n)},fS=function(e,t){return!this.contains(e,t)},pS=function(){return console.log(this),this};function gS(e){return gS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gS(e)}var mS=function(){var e=this,t=[],n={},r=function(e){return Array.isArray(e)||"object"===gS(e)?JSON.stringify(e):e};return Array.isArray(this.items)?this.items.forEach((function(e,i){var o=r(e);-1===t.indexOf(o)?t.push(o):n[i]=e})):"object"===gS(this.items)&&Object.keys(this.items).forEach((function(i){var o=r(e.items[i]);-1===t.indexOf(o)?t.push(o):n[i]=e.items[i]})),new this.constructor(n)},vS=function(e){var t=!1;if(Array.isArray(this.items))for(var n=this.items.length,r=0;r<n&&!t;r+=1)t=!1===e(this.items[r],r,this.items);else for(var i=Object.keys(this.items),o=i.length,s=0;s<o&&!t;s+=1){var a=i[s];t=!1===e(this.items[a],a,this.items)}return this};function yS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var bS=function(e){return this.each((function(t,n){e.apply(void 0,function(e){return function(e){if(Array.isArray(e))return yS(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return yS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yS(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t).concat([n]))})),this},wS=Zw,SS=function(e){return wS(this.items).every(e)},_S=function(e){return Array.isArray(e[0])?e[0]:e},ES=_S,kS=function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=ES(n);if(Array.isArray(this.items)){var o=this.items.filter((function(e){return-1===i.indexOf(e)}));return new this.constructor(o)}var s={};return Object.keys(this.items).forEach((function(t){-1===i.indexOf(t)&&(s[t]=e.items[t])})),new this.constructor(s)};function PS(e){return PS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},PS(e)}function AS(e){if(Array.isArray(e)){if(e.length)return!1}else if(null!=e&&"object"===PS(e)){if(Object.keys(e).length)return!1}else if(e)return!1;return!0}var xS=function(e){var t,n=e||!1;return t=Array.isArray(this.items)?function(e,t){if(e)return t.filter(e);for(var n=[],r=0;r<t.length;r+=1){var i=t[r];AS(i)||n.push(i)}return n}(n,this.items):function(e,t){var n={};return Object.keys(t).forEach((function(r){e?e(t[r],r)&&(n[r]=t[r]):AS(t[r])||(n[r]=t[r])})),n}(n,this.items),new this.constructor(t)},IS=Dw,OS=function(e,t){if(IS(e)){for(var n=Object.keys(this.items),r=0;r<n.length;r+=1){var i=n[r],o=this.items[i];if(e(o,i))return o}return IS(t)?t():t}if(Array.isArray(this.items)&&this.items.length||Object.keys(this.items).length){if(Array.isArray(this.items))return this.items[0];var s=Object.keys(this.items)[0];return this.items[s]}return IS(t)?t():t},TS=Dw,RS=function(e,t,n){if(TS(e))return this.first(e,(function(){throw new Error("Item not found.")}));var r=this.where(e,t,n);if(r.isEmpty())throw new Error("Item not found.");return r.first()},CS=function(e,t,n){return this.where(e,t,n).first()||null},NS=function(e){return this.map(e).collapse()},jS=Nw,DS=jw,FS=function(e){var t=e||1/0,n=!1,r=[],i=function(e){r=[],jS(e)?e.forEach((function(e){jS(e)?r=r.concat(e):DS(e)?Object.keys(e).forEach((function(t){r=r.concat(e[t])})):r.push(e)})):Object.keys(e).forEach((function(t){jS(e[t])?r=r.concat(e[t]):DS(e[t])?Object.keys(e[t]).forEach((function(n){r=r.concat(e[t][n])})):r.push(e[t])})),n=0===(n=r.filter((function(e){return DS(e)}))).length,t-=1};for(i(this.items);!n&&t>0;)i(r);return new this.constructor(r)},LS=function(){var e=this,t={};return Array.isArray(this.items)?Object.keys(this.items).forEach((function(n){t[e.items[n]]=Number(n)})):Object.keys(this.items).forEach((function(n){t[e.items[n]]=n})),new this.constructor(t)},MS=function(e,t){var n=this,r={};return Array.isArray(this.items)?r=this.items.slice(e*t-t,e*t):Object.keys(this.items).slice(e*t-t,e*t).forEach((function(e){r[e]=n.items[e]})),new this.constructor(r)},BS=function(e){return Array.isArray(this.items)?this.items.splice(e,1):delete this.items[e],this},US=Dw,zS=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return void 0!==this.items[e]?this.items[e]:US(t)?t():null!==t?t:null},VS=function(e,t){try{return t.split(".").reduce((function(e,t){return e[t]}),e)}catch(t){return e}},qS=VS,HS=Dw,WS=function(e){var t=this,n={};return this.items.forEach((function(r,i){var o;o=HS(e)?e(r,i):qS(r,e)||0===qS(r,e)?qS(r,e):"",void 0===n[o]&&(n[o]=new t.constructor([])),n[o].push(r)})),new this.constructor(n)},GS=_S,YS=function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=GS(n);return i.filter((function(t){return Object.hasOwnProperty.call(e.items,t)})).length===i.length},KS=function(e,t){return void 0===t?this.items.join(e):new this.constructor(this.items).pluck(e).all().join(t)},$S=function(e){var t=e;e instanceof this.constructor&&(t=e.all());var n=this.items.filter((function(e){return-1!==t.indexOf(e)}));return new this.constructor(n)},QS=function(e){var t=this,n=Object.keys(e);e instanceof this.constructor&&(n=Object.keys(e.all()));var r={};return Object.keys(this.items).forEach((function(e){-1!==n.indexOf(e)&&(r[e]=t.items[e])})),new this.constructor(r)},JS=function(){return Array.isArray(this.items)?!this.items.length:!Object.keys(this.items).length},XS=function(){return!this.isEmpty()},ZS=function(e,t){var n=this.values();if(void 0===t)return n.implode(e);var r=n.count();if(0===r)return"";if(1===r)return n.last();var i=n.pop();return n.implode(e)+t+i},e_=VS,t_=Dw,n_=function(e){var t={};return t_(e)?this.items.forEach((function(n){t[e(n)]=n})):this.items.forEach((function(n){var r=e_(n,e);t[r||""]=n})),new this.constructor(t)},r_=function(){var e=Object.keys(this.items);return Array.isArray(this.items)&&(e=e.map(Number)),new this.constructor(e)},i_=Dw,o_=function(e,t){var n=this.items;if(i_(e)&&(n=this.filter(e).all()),Array.isArray(n)&&!n.length||!Object.keys(n).length)return i_(t)?t():t;if(Array.isArray(n))return n[n.length-1];var r=Object.keys(n);return n[r[r.length-1]]},s_=function(e,t){this.constructor.prototype[e]=t},a_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return new this.constructor(e)},l_=function(e){var t=this;if(Array.isArray(this.items))return new this.constructor(this.items.map(e));var n={};return Object.keys(this.items).forEach((function(r){n[r]=e(t.items[r],r)})),new this.constructor(n)};function c_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var u_=function(e){return this.map((function(t,n){return e.apply(void 0,function(e){return function(e){if(Array.isArray(e))return c_(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return c_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c_(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t).concat([n]))}))};function d_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var h_=function(e){var t={};return this.items.forEach((function(n,r){var i=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);s=!0);}catch(e){a=!0,i=e}finally{try{s||null==n.return||n.return()}finally{if(a)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return d_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d_(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e(n,r),2),o=i[0],s=i[1];void 0===t[o]?t[o]=[s]:t[o].push(s)})),new this.constructor(t)},f_=function(e){return this.map((function(t,n){return new e(t,n)}))};function p_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var g_=function(e){var t={};return this.items.forEach((function(n,r){var i=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);s=!0);}catch(e){a=!0,i=e}finally{try{s||null==n.return||n.return()}finally{if(a)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return p_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p_(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e(n,r),2),o=i[0],s=i[1];void 0===t[o]?t[o]=[s]:t[o].push(s)})),new this.constructor(t)};function m_(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);s=!0);}catch(e){a=!0,i=e}finally{try{s||null==n.return||n.return()}finally{if(a)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return v_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v_(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var y_=function(e){var t=this,n={};return Array.isArray(this.items)?this.items.forEach((function(t,r){var i=m_(e(t,r),2),o=i[0],s=i[1];n[o]=s})):Object.keys(this.items).forEach((function(r){var i=m_(e(t.items[r],r),2),o=i[0],s=i[1];n[o]=s})),new this.constructor(n)};function b_(e){return function(e){if(Array.isArray(e))return w_(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return w_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w_(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var S_=function(e){if("string"==typeof e){var t=this.items.filter((function(t){return void 0!==t[e]}));return Math.max.apply(Math,b_(t.map((function(t){return t[e]}))))}return Math.max.apply(Math,b_(this.items))},__=function(e){var t=this.items.length;return void 0===e?t%2==0?(this.items[t/2-1]+this.items[t/2])/2:this.items[Math.floor(t/2)]:t%2==0?(this.items[t/2-1][e]+this.items[t/2][e])/2:this.items[Math.floor(t/2)][e]},E_=function(e){var t=e;if("string"==typeof t&&(t=[t]),Array.isArray(this.items)&&Array.isArray(t))return new this.constructor(this.items.concat(t));var n=JSON.parse(JSON.stringify(this.items));return Object.keys(t).forEach((function(e){n[e]=t[e]})),new this.constructor(n)};function k_(e){return k_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k_(e)}function P_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P_(Object(n),!0).forEach((function(t){x_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I_=function(e){var t=function e(t,n){var r={};return Object.keys(A_(A_({},t),n)).forEach((function(i){void 0===t[i]&&void 0!==n[i]?r[i]=n[i]:void 0!==t[i]&&void 0===n[i]?r[i]=t[i]:void 0!==t[i]&&void 0!==n[i]&&(t[i]===n[i]?r[i]=t[i]:Array.isArray(t[i])||"object"!==k_(t[i])||Array.isArray(n[i])||"object"!==k_(n[i])?r[i]=[].concat(t[i],n[i]):r[i]=e(t[i],n[i]))})),r};return e?"Collection"===e.constructor.name?new this.constructor(t(this.items,e.all())):new this.constructor(t(this.items,e)):this};function O_(e){return function(e){if(Array.isArray(e))return T_(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return T_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T_(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var R_=function(e){if(void 0!==e){var t=this.items.filter((function(t){return void 0!==t[e]}));return Math.min.apply(Math,O_(t.map((function(t){return t[e]}))))}return Math.min.apply(Math,O_(this.items))},C_=function(e){var t=[],n=1;return this.items.length?(this.items.forEach((function(r){var i=t.filter((function(t){return void 0!==e?t.key===r[e]:t.key===r}));if(i.length){i[0].count+=1;var o=i[0].count;o>n&&(n=o)}else void 0!==e?t.push({key:r[e],count:1}):t.push({key:r,count:1})})),t.filter((function(e){return e.count===n})).map((function(e){return e.key}))):null},N_=Zw,j_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=N_(this.items).slice(t).filter((function(t,n){return n%e==0}));return new this.constructor(n)},D_=_S,F_=function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=D_(n);if(Array.isArray(this.items)){var o=this.items.filter((function(e){return-1!==i.indexOf(e)}));return new this.constructor(o)}var s={};return Object.keys(this.items).forEach((function(t){-1!==i.indexOf(t)&&(s[t]=e.items[t])})),new this.constructor(s)},L_=Yw,M_=function(e,t){var n=Math.abs(e),r=this.count();if(n<=r)return this;for(var i=n-r,o=L_(this.items),s=Array.isArray(this.items),a=e<0,l=0;l<i;)s?a?o.unshift(t):o.push(t):void 0!==o[l]?i+=1:o[l]=t,l+=1;return new this.constructor(o)},B_=function(e){var t,n=this;return Array.isArray(this.items)?(t=[new this.constructor([]),new this.constructor([])],this.items.forEach((function(n){!0===e(n)?t[0].push(n):t[1].push(n)}))):(t=[new this.constructor({}),new this.constructor({})],Object.keys(this.items).forEach((function(r){var i=n.items[r];!0===e(i)?t[0].put(r,i):t[1].put(r,i)}))),new this.constructor(t)},U_=function(e){return e(this)},z_=Nw,V_=jw,q_=VS,H_=function(e,t){if(-1!==e.indexOf("*")){var n=(u=this.items,d={},u.forEach((function(e,t){!function e(t,n){V_(t)?Object.keys(t).forEach((function(r){e(t[r],"".concat(n,".").concat(r))})):z_(t)&&t.forEach((function(t,r){e(t,"".concat(n,".").concat(r))})),d[n]=t}(e,t)})),d),r=[];if(void 0!==t){var i=new RegExp("0.".concat(t),"g"),o="0.".concat(t).split(".").length;Object.keys(n).forEach((function(e){var t=e.match(i);if(t){var s=t[0];s.split(".").length===o&&r.push(n[s])}}))}var s=[],a=new RegExp("0.".concat(e),"g"),l="0.".concat(e).split(".").length;if(Object.keys(n).forEach((function(e){var t=e.match(a);if(t){var r=t[0];r.split(".").length===l&&s.push(n[r])}})),void 0!==t){var c={};return this.items.forEach((function(e,t){c[r[t]||""]=s})),new this.constructor(c)}return new this.constructor([s])}var u,d;if(void 0!==t){var h={};return this.items.forEach((function(n){void 0!==q_(n,e)?h[n[t]||""]=q_(n,e):h[n[t]||""]=null})),new this.constructor(h)}return this.map((function(t){return void 0!==q_(t,e)?q_(t,e):null}))},W_=_S,G_=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];W_(n).forEach((function(t){delete e[t]}))},Y_=Nw,K_=jw,$_=G_,Q_=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(this.isEmpty())return null;if(Y_(this.items))return 1===t?this.items.pop():new this.constructor(this.items.splice(-t));if(K_(this.items)){var n=Object.keys(this.items);if(1===t){var r=n[n.length-1],i=this.items[r];return $_(this.items,r),i}var o=n.slice(-t),s=o.reduce((function(t,n){return t[n]=e.items[n],t}),{});return $_(this.items,o),new this.constructor(s)}return null},J_=function(e,t){return void 0!==t?this.put(t,e):(this.items.unshift(e),this)},X_=Dw,Z_=function(e,t){var n=this.items[e]||null;return n||void 0===t||(n=X_(t)?t():t),delete this.items[e],n},eE=function(){var e;return(e=this.items).push.apply(e,arguments),this},tE=function(e,t){return this.items[e]=t,this},nE=Zw,rE=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=nE(this.items),n=new this.constructor(t).shuffle();return e!==parseInt(e,10)?n.first():n.take(e)},iE=function(e,t){var n=this,r=null;return void 0!==t&&(r=t),Array.isArray(this.items)?this.items.forEach((function(t){r=e(r,t)})):Object.keys(this.items).forEach((function(t){r=e(r,n.items[t],t)})),r},oE=function(e){return new this.constructor(this.items).filter((function(t){return!e(t)}))};function sE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function aE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sE(Object(n),!0).forEach((function(t){lE(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function lE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var cE=function(e){if(!e)return this;if(Array.isArray(e)){var t=this.items.map((function(t,n){return e[n]||t}));return new this.constructor(t)}if("Collection"===e.constructor.name){var n=aE(aE({},this.items),e.all());return new this.constructor(n)}var r=aE(aE({},this.items),e);return new this.constructor(r)};function uE(e){return uE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uE(e)}function dE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dE(Object(n),!0).forEach((function(t){fE(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var pE=function(e){var t=function e(t,n){var r=hE({},t);return Object.keys(hE(hE({},t),n)).forEach((function(i){Array.isArray(n[i])||"object"!==uE(n[i])?void 0===t[i]&&void 0!==n[i]?"object"===uE(t[i])?r[i]=hE({},n[i]):r[i]=n[i]:void 0!==t[i]&&void 0===n[i]?"object"===uE(t[i])?r[i]=hE({},t[i]):r[i]=t[i]:void 0!==t[i]&&void 0!==n[i]&&("object"===uE(n[i])?r[i]=hE({},n[i]):r[i]=n[i]):r[i]=e(t[i],n[i])})),r};return e?Array.isArray(e)||"object"===uE(e)?"Collection"===e.constructor.name?new this.constructor(t(this.items,e.all())):new this.constructor(t(this.items,e)):new this.constructor(t(this.items,[e])):this},gE=function(){var e=[].concat(this.items).reverse();return new this.constructor(e)},mE=Nw,vE=jw,yE=Dw,bE=function(e,t){var n,r=this,i=function(n,i){return yE(e)?e(r.items[i],i):t?r.items[i]===e:r.items[i]==e};return mE(this.items)?n=this.items.findIndex(i):vE(this.items)&&(n=Object.keys(this.items).find((function(e){return i(r.items[e],e)}))),!(void 0===n||n<0)&&n},wE=Nw,SE=jw,_E=G_,EE=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(this.isEmpty())return null;if(wE(this.items))return 1===t?this.items.shift():new this.constructor(this.items.splice(0,t));if(SE(this.items)){if(1===t){var n=Object.keys(this.items)[0],r=this.items[n];return delete this.items[n],r}var i=Object.keys(this.items).slice(0,t),o=i.reduce((function(t,n){return t[n]=e.items[n],t}),{});return _E(this.items,i),new this.constructor(o)}return null},kE=Zw,PE=function(){var e,t,n,r=kE(this.items);for(n=r.length;n;n-=1)e=Math.floor(Math.random()*n),t=r[n-1],r[n-1]=r[e],r[e]=t;return this.items=r,this},AE=jw,xE=function(e){var t=this;return AE(this.items)?new this.constructor(Object.keys(this.items).reduce((function(n,r,i){return i+1>e&&(n[r]=t.items[r]),n}),{})):new this.constructor(this.items.slice(e))},IE=Nw,OE=jw,TE=Dw,RE=function(e){var t,n=this,r=null,i=function(t){return t===e};return TE(e)&&(i=e),IE(this.items)&&(t=this.items.filter((function(e){return!0!==r&&(r=i(e)),r}))),OE(this.items)&&(t=Object.keys(this.items).reduce((function(e,t){return!0!==r&&(r=i(n.items[t])),!1!==r&&(e[t]=n.items[t]),e}),{})),new this.constructor(t)},CE=Nw,NE=jw,jE=Dw,DE=function(e){var t,n=this,r=null,i=function(t){return t===e};return jE(e)&&(i=e),CE(this.items)&&(t=this.items.filter((function(e){return!0!==r&&(r=!i(e)),r}))),NE(this.items)&&(t=Object.keys(this.items).reduce((function(e,t){return!0!==r&&(r=!i(n.items[t])),!1!==r&&(e[t]=n.items[t]),e}),{})),new this.constructor(t)},FE=function(e,t){var n=this.items.slice(e);return void 0!==t&&(n=n.slice(0,t)),new this.constructor(n)},LE=Dw,ME=function(e,t,n){var r;if((r=LE(e)?this.filter(e):this.where(e,t,n)).isEmpty())throw new Error("Item not found.");if(r.count()>1)throw new Error("Multiple items found.");return r.first()},BE=rS,UE=function(e){var t=[].concat(this.items);return void 0===e?this.every((function(e){return"number"==typeof e}))?t.sort((function(e,t){return e-t})):t.sort():t.sort(e),new this.constructor(t)},zE=function(){return this.sort().reverse()},VE=VS,qE=Dw,HE=function(e){var t=[].concat(this.items),n=function(t){return qE(e)?e(t):VE(t,e)};return t.sort((function(e,t){var r=n(e),i=n(t);return null==r?1:null==i||r<i?-1:r>i?1:0})),new this.constructor(t)},WE=function(e){return this.sortBy(e).reverse()},GE=function(){var e=this,t={};return Object.keys(this.items).sort().forEach((function(n){t[n]=e.items[n]})),new this.constructor(t)},YE=function(){var e=this,t={};return Object.keys(this.items).sort().reverse().forEach((function(n){t[n]=e.items[n]})),new this.constructor(t)},KE=function(e,t,n){var r=this.slice(e,t);if(this.items=this.diff(r.all()).all(),Array.isArray(n))for(var i=0,o=n.length;i<o;i+=1)this.items.splice(e+i,0,n[i]);return r},$E=function(e){for(var t=Math.round(this.items.length/e),n=JSON.parse(JSON.stringify(this.items)),r=[],i=0;i<e;i+=1)r.push(new this.constructor(n.splice(0,t)));return new this.constructor(r)},QE=Zw,JE=Dw,XE=function(e){var t=QE(this.items),n=0;if(void 0===e)for(var r=0,i=t.length;r<i;r+=1)n+=parseFloat(t[r]);else if(JE(e))for(var o=0,s=t.length;o<s;o+=1)n+=parseFloat(e(t[o]));else for(var a=0,l=t.length;a<l;a+=1)n+=parseFloat(t[a][e]);return parseFloat(n.toPrecision(12))};function ZE(e){return ZE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ZE(e)}var ek=function(e){var t=this;if(!Array.isArray(this.items)&&"object"===ZE(this.items)){var n,r=Object.keys(this.items);n=e<0?r.slice(e):r.slice(0,e);var i={};return r.forEach((function(e){-1!==n.indexOf(e)&&(i[e]=t.items[e])})),new this.constructor(i)}return e<0?new this.constructor(this.items.slice(e)):new this.constructor(this.items.slice(0,e))},tk=Nw,nk=jw,rk=Dw,ik=function(e){var t,n=this,r=null,i=function(t){return t===e};return rk(e)&&(i=e),tk(this.items)&&(t=this.items.filter((function(e){return!1!==r&&(r=!i(e)),r}))),nk(this.items)&&(t=Object.keys(this.items).reduce((function(e,t){return!1!==r&&(r=!i(n.items[t])),!1!==r&&(e[t]=n.items[t]),e}),{})),new this.constructor(t)},ok=Nw,sk=jw,ak=Dw,lk=function(e){var t,n=this,r=null,i=function(t){return t===e};return ak(e)&&(i=e),ok(this.items)&&(t=this.items.filter((function(e){return!1!==r&&(r=i(e)),r}))),sk(this.items)&&(t=Object.keys(this.items).reduce((function(e,t){return!1!==r&&(r=i(n.items[t])),!1!==r&&(e[t]=n.items[t]),e}),{})),new this.constructor(t)},ck=function(e){return e(this),this},uk=function(e,t){for(var n=1;n<=e;n+=1)this.items.push(t(n));return this},dk=function(){var e=this.constructor;function t(n,r){var i=[];n instanceof e?(n.items.forEach((function(e){return t(e,i)})),r.push(i)):Array.isArray(n)?(n.forEach((function(e){return t(e,i)})),r.push(i)):r.push(n)}if(Array.isArray(this.items)){var n=[];return this.items.forEach((function(e){t(e,n)})),n}return this.values().all()};function hk(e){return hk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hk(e)}var fk=function(){return"object"!==hk(this.items)||Array.isArray(this.items)?JSON.stringify(this.toArray()):JSON.stringify(this.all())},pk=function(e){var t=this;if(Array.isArray(this.items))this.items=this.items.map(e);else{var n={};Object.keys(this.items).forEach((function(r){n[r]=e(t.items[r],r)})),this.items=n}return this};function gk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gk(Object(n),!0).forEach((function(t){vk(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gk(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vk(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var yk=function(){var e=this;if(Array.isArray(this.items))return this;var t={};return Object.keys(this.items).forEach((function(n){if(-1!==n.indexOf(".")){var r=t;n.split(".").reduce((function(t,r,i,o){return t[r]||(t[r]={}),i===o.length-1&&(t[r]=e.items[n]),t[r]}),r),t=mk(mk({},t),r)}else t[n]=e.items[n]})),new this.constructor(t)},bk=function(e,t,n){e?n(this):t(this)},wk=function(e,t){if(Array.isArray(this.items)&&this.items.length)return e(this);if(Object.keys(this.items).length)return e(this);if(void 0!==t){if(Array.isArray(this.items)&&!this.items.length)return t(this);if(!Object.keys(this.items).length)return t(this)}return this},Sk=function(e,t){if(Array.isArray(this.items)&&!this.items.length)return e(this);if(!Object.keys(this.items).length)return e(this);if(void 0!==t){if(Array.isArray(this.items)&&this.items.length)return t(this);if(Object.keys(this.items).length)return t(this)}return this},_k=function(e){var t=this,n=JSON.parse(JSON.stringify(this.items));return Object.keys(e).forEach((function(r){void 0===t.items[r]&&(n[r]=e[r])})),new this.constructor(n)},Ek=Dw,kk=function(e){var t;if(void 0===e)t=this.items.filter((function(e,t,n){return n.indexOf(e)===t}));else{t=[];for(var n=[],r=0,i=this.items.length;r<i;r+=1){var o;o=Ek(e)?e(this.items[r]):this.items[r][e],-1===n.indexOf(o)&&(t.push(this.items[r]),n.push(o))}}return new this.constructor(t)},Pk=function(e){return e instanceof this.constructor?e.all():e},Ak=Zw,xk=function(){return new this.constructor(Ak(this.items))},Ik=function(e,t,n){return e?t(this,e):n?n(this,e):this},Ok=Zw,Tk=VS,Rk=function(e,t,n){var r=t,i=n,o=Ok(this.items);if(void 0===t||!0===t)return new this.constructor(o.filter((function(t){return Tk(t,e)})));if(!1===t)return new this.constructor(o.filter((function(t){return!Tk(t,e)})));void 0===n&&(i=t,r="===");var s=o.filter((function(t){switch(r){case"==":return Tk(t,e)===Number(i)||Tk(t,e)===i.toString();default:case"===":return Tk(t,e)===i;case"!=":case"<>":return Tk(t,e)!==Number(i)&&Tk(t,e)!==i.toString();case"!==":return Tk(t,e)!==i;case"<":return Tk(t,e)<i;case"<=":return Tk(t,e)<=i;case">":return Tk(t,e)>i;case">=":return Tk(t,e)>=i}}));return new this.constructor(s)},Ck=function(e,t){return this.where(e,">=",t[0]).where(e,"<=",t[t.length-1])},Nk=Zw,jk=VS,Dk=function(e,t){var n=Nk(t),r=this.items.filter((function(t){return-1!==n.indexOf(jk(t,e))}));return new this.constructor(r)},Fk=function(e){return this.filter((function(t){return t instanceof e}))},Lk=VS,Mk=function(e,t){return this.filter((function(n){return Lk(n,e)<t[0]||Lk(n,e)>t[t.length-1]}))},Bk=Zw,Uk=VS,zk=function(e,t){var n=Bk(t),r=this.items.filter((function(t){return-1===n.indexOf(Uk(t,e))}));return new this.constructor(r)},Vk=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.where(e,"===",null)},qk=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.where(e,"!==",null)};function Hk(e){return Hk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hk(e)}var Wk=function(e){return e instanceof this.constructor?e:"object"===Hk(e)?new this.constructor(e):new this.constructor([e])},Gk=function(e){var t=this,n=e;n instanceof this.constructor&&(n=n.all());var r=this.items.map((function(e,r){return new t.constructor([e,n[r]])}));return new this.constructor(r)};!function(e){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(e){void 0===e||Array.isArray(e)||"object"===t(e)?e instanceof this.constructor?this.items=e.all():this.items=e||[]:this.items=[e]}var r=Tw;"undefined"!=typeof Symbol&&(n.prototype[Symbol.iterator]=r),n.prototype.toJSON=function(){return this.items},n.prototype.all=Rw,n.prototype.average=Lw,n.prototype.avg=Mw,n.prototype.chunk=Uw,n.prototype.collapse=Vw,n.prototype.combine=Ww,n.prototype.concat=Qw,n.prototype.contains=rS,n.prototype.containsOneItem=iS,n.prototype.count=oS,n.prototype.countBy=sS,n.prototype.crossJoin=aS,n.prototype.dd=lS,n.prototype.diff=cS,n.prototype.diffAssoc=uS,n.prototype.diffKeys=dS,n.prototype.diffUsing=hS,n.prototype.doesntContain=fS,n.prototype.dump=pS,n.prototype.duplicates=mS,n.prototype.each=vS,n.prototype.eachSpread=bS,n.prototype.every=SS,n.prototype.except=kS,n.prototype.filter=xS,n.prototype.first=OS,n.prototype.firstOrFail=RS,n.prototype.firstWhere=CS,n.prototype.flatMap=NS,n.prototype.flatten=FS,n.prototype.flip=LS,n.prototype.forPage=MS,n.prototype.forget=BS,n.prototype.get=zS,n.prototype.groupBy=WS,n.prototype.has=YS,n.prototype.implode=KS,n.prototype.intersect=$S,n.prototype.intersectByKeys=QS,n.prototype.isEmpty=JS,n.prototype.isNotEmpty=XS,n.prototype.join=ZS,n.prototype.keyBy=n_,n.prototype.keys=r_,n.prototype.last=o_,n.prototype.macro=s_,n.prototype.make=a_,n.prototype.map=l_,n.prototype.mapSpread=u_,n.prototype.mapToDictionary=h_,n.prototype.mapInto=f_,n.prototype.mapToGroups=g_,n.prototype.mapWithKeys=y_,n.prototype.max=S_,n.prototype.median=__,n.prototype.merge=E_,n.prototype.mergeRecursive=I_,n.prototype.min=R_,n.prototype.mode=C_,n.prototype.nth=j_,n.prototype.only=F_,n.prototype.pad=M_,n.prototype.partition=B_,n.prototype.pipe=U_,n.prototype.pluck=H_,n.prototype.pop=Q_,n.prototype.prepend=J_,n.prototype.pull=Z_,n.prototype.push=eE,n.prototype.put=tE,n.prototype.random=rE,n.prototype.reduce=iE,n.prototype.reject=oE,n.prototype.replace=cE,n.prototype.replaceRecursive=pE,n.prototype.reverse=gE,n.prototype.search=bE,n.prototype.shift=EE,n.prototype.shuffle=PE,n.prototype.skip=xE,n.prototype.skipUntil=RE,n.prototype.skipWhile=DE,n.prototype.slice=FE,n.prototype.sole=ME,n.prototype.some=BE,n.prototype.sort=UE,n.prototype.sortDesc=zE,n.prototype.sortBy=HE,n.prototype.sortByDesc=WE,n.prototype.sortKeys=GE,n.prototype.sortKeysDesc=YE,n.prototype.splice=KE,n.prototype.split=$E,n.prototype.sum=XE,n.prototype.take=ek,n.prototype.takeUntil=ik,n.prototype.takeWhile=lk,n.prototype.tap=ck,n.prototype.times=uk,n.prototype.toArray=dk,n.prototype.toJson=fk,n.prototype.transform=pk,n.prototype.undot=yk,n.prototype.unless=bk,n.prototype.unlessEmpty=wk,n.prototype.unlessNotEmpty=Sk,n.prototype.union=_k,n.prototype.unique=kk,n.prototype.unwrap=Pk,n.prototype.values=xk,n.prototype.when=Ik,n.prototype.whenEmpty=Sk,n.prototype.whenNotEmpty=wk,n.prototype.where=Rk,n.prototype.whereBetween=Ck,n.prototype.whereIn=Dk,n.prototype.whereInstanceOf=Fk,n.prototype.whereNotBetween=Mk,n.prototype.whereNotIn=zk,n.prototype.whereNull=Vk,n.prototype.whereNotNull=qk,n.prototype.wrap=Wk,n.prototype.zip=Gk;var i=function(e){return new n(e)};e.exports=i,e.exports.collect=i,e.exports.default=i,e.exports.Collection=n}(Ow);var Yk,Kk,$k=wi(Ow.exports);class Qk{constructor(){this.items=new Map}add(e){const t=this.beforeAdd(e);this.items.set(t.id,t)}getById(e){return this.items.get(e)}getByField(e,t){return this.getAll().where(e,"==",t)}updateItemInfo(e,t){var n;const r=this.items.get(e);r&&(null===(n=this.items)||void 0===n||n.set(e,{...r,...t}))}getAll(){return $k([...this.items.values()])}}class Jk extends Qk{beforeAdd(e){return e}}!function(e){e.Pending="pending",e.Finished="finished",e.Rejected="rejected"}(Yk||(Yk={}));class Xk extends Qk{beforeAdd(e){return{...e,stopTime:0,retriesCount:0,status:Yk.Pending}}retry(e,t){this.updateItemInfo(e,{retriesCount:t})}reject(e,t,n){this.updateItemInfo(e,{stopTime:t,reason:n,status:Yk.Rejected})}finish(e,t){this.updateItemInfo(e,{stopTime:t,status:Yk.Finished})}getByAgreementId(e){return this.getByField("agreementId",e)}}class Zk extends Qk{beforeAdd(e){return e}getByProviderId(e){return this.getByField("provider.id",e)}getByAgreementId(e){return this.getByField("agreementId",e)}}!function(e){e.Pending="pending",e.Confirmed="confirmed",e.Rejected="rejected"}(Kk||(Kk={}));class eP extends Qk{beforeAdd(e){return{...e,status:Kk.Pending}}confirm(e){this.updateItemInfo(e,{status:Kk.Confirmed})}reject(e){this.updateItemInfo(e,{status:Kk.Rejected})}getByProviderId(e){return this.getByField("provider.id",e)}getByProposalId(e){return this.getByField("proposalId",e).first()}getByStatus(e){return this.getByField("status",e)}}class tP extends Qk{beforeAdd(e){return e}getByProviderId(e){return this.getByField("provider.id",e)}getByAgreementId(e){return this.getByField("agreementId",e)}}class nP extends Qk{beforeAdd(e){return e}getByProviderId(e){return this.getByField("providerId",e)}}class rP extends Qk{beforeAdd(e){return e}}class iP extends Qk{beforeAdd(e){return e}getByTaskId(e){return this.getByField("taskId",e)}getByAgreementId(e){return this.getByField("agreementId",e)}}class oP extends Qk{beforeAdd(e){let{id:t,startTime:n,stopTime:r}=e;return{id:t,stopTime:r||0,startTime:n,duration:r?r-n:0}}stop(e){let{id:t,stopTime:n}=e;const r=this.items.get(t);this.updateItemInfo(t,{stopTime:n,duration:(null==r?void 0:r.startTime)?n-r.startTime:0})}}class sP{constructor(e){this.eventTarget=e.eventTarget,this.logger=e.logger||xi("stats"),this.allocations=new rP,this.activities=new iP,this.agreements=new eP,this.invoices=new tP,this.proposals=new nP,this.providers=new Jk,this.payments=new Zk,this.tasks=new Xk,this.times=new oP}async run(){this.eventTarget.addEventListener(Xp,(e=>this.handleEvents(e))),this.logger.info("Stats service has started")}async end(){this.eventTarget.removeEventListener(Xp,null),this.logger.info("Stats service has stopped")}getAllCostsSummary(){return this.agreements.getAll().map((e=>{const t=this.providers.getById(e.provider.id),n=this.tasks.getByAgreementId(e.id),r=this.invoices.getByAgreementId(e.id),i=this.payments.getByAgreementId(e.id);return{Agreement:e.id.substring(0,10),"Provider Name":t?t.name:"unknown","Task Computed":n.where("status","finished").count(),Cost:r.sum("amount"),"Payment Status":i.count()>0?"paid":"unpaid"}})).all()}getAllCosts(){const e={total:0,paid:0};return this.agreements.getAll().all().forEach((t=>{const n=this.invoices.getByAgreementId(t.id),r=this.payments.getByAgreementId(t.id);e.total+=n.sum("amount"),e.paid+=r.count()>0?n.sum("amount"):0})),e}getComputationTime(){var e;const t=null===(e=this.times.getById("all"))||void 0===e?void 0:e.duration;return"".concat(t?(t/1e3).toFixed(1):0,"s")}getStatsTree(){return{allocations:this.allocations.getAll().map((e=>e)).all(),providers:this.providers.getAll().map((e=>({...e,proposals:this.proposals.getByProviderId(e.id).map((e=>{const t=this.agreements.getByProposalId(e.id);return{...e,agreement:t?{...t,activities:this.activities.getByAgreementId(t.id).map((e=>({...e,task:this.tasks.getById(e.taskId)}))).all(),invoices:this.invoices.getByAgreementId(t.id).map((e=>e)).all(),payments:this.payments.getByAgreementId(t.id).map((e=>e)).all()}:null}})).all()}))).all(),agreements:this.agreements.getAll().map((e=>{const t=this.providers.getById(e.provider.id),n=this.tasks.getByAgreementId(e.id),r=this.invoices.getByAgreementId(e.id),i=this.payments.getByAgreementId(e.id);return{agreementId:e.id,provider:t,tasks:n.where("status","finished").count(),cost:r.sum("amount"),paymentStatus:i.count()>0?"paid":"unpaid"}})).all(),costs:this.getAllCosts()}}handleEvents(e){e instanceof tg?this.times.add({id:"all",startTime:e.timeStamp}):e instanceof ng?this.times.stop({id:"all",stopTime:e.timeStamp}):e instanceof ig?(this.activities.add({id:e.detail.activityId,taskId:e.detail.id,agreementId:e.detail.agreementId}),this.tasks.add({id:e.detail.id,startTime:e.timeStamp,agreementId:e.detail.agreementId})):e instanceof og?this.tasks.retry(e.detail.id,e.detail.retriesCount):e instanceof sg?this.tasks.reject(e.detail.id,e.timeStamp,e.detail.reason):e instanceof ag?this.tasks.finish(e.detail.id,e.timeStamp):e instanceof lg?this.allocations.add({id:e.detail.id,amount:e.detail.amount,platform:e.detail.platform}):e instanceof yg?(this.agreements.add({id:e.detail.id,provider:e.detail.provider,proposalId:e.detail.proposalId}),this.providers.add(e.detail.provider)):e instanceof bg?this.agreements.confirm(e.detail.id):e instanceof wg?this.agreements.reject(e.detail.id):e instanceof fg?(this.proposals.add({id:e.detail.id,providerId:e.detail.provider.id}),this.providers.add({...e.detail.provider})):e instanceof _g?this.invoices.add({id:e.detail.id,provider:e.detail.provider,agreementId:e.detail.agreementId,amount:e.detail.amount}):e instanceof kg&&this.payments.add({id:e.detail.id,agreementId:e.detail.agreementId,amount:e.detail.amount,provider:e.detail.provider})}}const aP=["SIGINT","SIGTERM","SIGBREAK","SIGHUP"];class lP{static async create(e){const t=new lP(e);return await t.init(),t}constructor(e){this.events=new hb,this.activityReadySetupFunctions=[],this.lastTaskIndex=0,this.isRunning=!0,this.isCanceled=!1,this.signalHandler=e=>this.cancel(e),this.configOptions="string"==typeof e?{package:e}:e,this.options=new Iw(this.configOptions),this.logger=this.options.logger,this.yagna=new Hp(this.configOptions.yagnaOptions);const t=this.yagna.getApi();this.taskQueue=new Gy,this.agreementPoolService=new qm(t,{...this.options,logger:this.logger.child("agreement")}),this.paymentService=new fb(t,{...this.options,logger:this.logger.child("payment")}),this.marketService=new qg(this.agreementPoolService,t,{...this.options,logger:this.logger.child("market")}),this.networkService=this.options.networkIp?new Aw(t,{...this.options,logger:this.logger.child("network")}):void 0,this.configOptions.storageProvider?this.storageProvider=this.configOptions.storageProvider:this.storageProvider=Hr?new Vv(this.logger.child("storage")):qr?new Ry(t,{...this.options,logger:this.logger.child("storage")}):new qv,this.taskService=new zy(this.yagna.getApi(),this.taskQueue,this.agreementPoolService,this.paymentService,this.networkService,{...this.options,storageProvider:this.storageProvider,logger:this.logger.child("work")}),this.statsService=new sP({...this.options,logger:this.logger.child("stats")})}async init(){var e,t;try{await this.yagna.connect()}catch(e){throw this.logger.error("Initialization failed",e),e}const n=this.options.packageOptions.manifest,r=this.options.package;let i;if(n)i=await this.createPackage({manifest:n});else{if(!r){const e=new Dr("No package or manifest provided");throw this.logger.error("No package or manifest provided",e),e}i="string"==typeof r?await this.createPackage(Kp.getImageIdentifier(r)):r}this.logger.debug("Initializing task executor services...");const o=await this.paymentService.createAllocation();await Promise.all([this.marketService.run(i,o).then((()=>this.setStartupTimeout())),this.agreementPoolService.run(),this.paymentService.run(),null===(e=this.networkService)||void 0===e?void 0:e.run(),this.statsService.run(),null===(t=this.storageProvider)||void 0===t?void 0:t.init()]).catch((e=>this.handleCriticalError(e))),this.paymentService.events.on("error",(e=>this.handleCriticalError(e))),this.taskService.run().catch((e=>this.handleCriticalError(e))),Hr&&this.installSignalHandlers(),this.options.eventTarget.dispatchEvent(new tg),this.logger.info("Task Executor has started",{subnet:this.options.subnetTag,network:this.paymentService.config.payment.network,driver:this.paymentService.config.payment.driver}),this.events.emit("ready")}shutdown(){return this.isRunning?(this.isRunning=!1,this.shutdownPromise=this.doShutdown(),this.shutdownPromise):this.shutdownPromise}async doShutdown(){var e,t,n;this.events.emit("beforeEnd"),Hr&&this.removeSignalHandlers(),clearTimeout(this.startupTimeoutId),this.configOptions.storageProvider||await(null===(e=this.storageProvider)||void 0===e?void 0:e.close()),await(null===(t=this.networkService)||void 0===t?void 0:t.end()),await Promise.all([this.taskService.end(),this.agreementPoolService.end(),this.marketService.end()]),await this.paymentService.end(),await this.yagna.end(),null===(n=this.options.eventTarget)||void 0===n||n.dispatchEvent(new ng),this.printStats(),await this.statsService.end(),this.logger.info("Task Executor has shut down"),this.events.emit("end")}getStats(){return this.statsService.getStatsTree()}onActivityReady(e){this.activityReadySetupFunctions.push(e)}async run(e,t){return this.executeTask(e,t)}async createPackage(e){const t=Kp.create({...this.options.packageOptions,...e});return this.options.eventTarget.dispatchEvent(new vg({packageReference:e,details:t.details})),t}async executeTask(e,t){var n,r,i,o;let s;try{for(s=new Wy((++this.lastTaskIndex).toString(),e,{maxRetries:null!==(n=null==t?void 0:t.maxRetries)&&void 0!==n?n:this.options.maxTaskRetries,timeout:null!==(r=null==t?void 0:t.timeout)&&void 0!==r?r:this.options.taskTimeout,activityReadySetupFunctions:this.activityReadySetupFunctions}),this.taskQueue.addToEnd(s);this.isRunning;){if(s.isFinished()){if(s.isRejected())throw s.getError();return s.getResults()}await Vr(2e3,!0)}throw new Fr("Task executor has been stopped")}catch(e){if(e instanceof wv)throw e;throw new wv("Unable to execute task. ".concat(e.toString()),yv.TaskExecutionFailed,null===(i=null==s?void 0:s.getActivity())||void 0===i?void 0:i.agreement,null==s?void 0:s.getActivity(),null===(o=null==s?void 0:s.getActivity())||void 0===o?void 0:o.getProviderInfo(),e)}}async cancel(e){try{if(this.isCanceled)return void this.logger.warn("The executor is already cancelled, ignoring second request");this.isCanceled=!0,Hr&&this.removeSignalHandlers();const t="Executor has interrupted by the user. Reason: ".concat(e,".");this.logger.info("".concat(t,". Stopping all tasks..."),{tasksInProgress:this.taskQueue.size}),await this.shutdown()}catch(e){this.logger.error("Error while cancelling the executor",e)}}installSignalHandlers(){this.configOptions.skipProcessSignals||aP.forEach((e=>{process.on(e,this.signalHandler)}))}removeSignalHandlers(){this.configOptions.skipProcessSignals||aP.forEach((e=>{process.removeListener(e,this.signalHandler)}))}handleCriticalError(e){var t;null===(t=this.options.eventTarget)||void 0===t||t.dispatchEvent(new rg({reason:e.toString()}));const n="TaskExecutor faced a critical error and will now cancel work, terminate agreements and request settling payments";this.logger.error(n,e),console.error(n,e),this.cancel("Cancelling due to critical error ".concat(e)).catch((e=>this.logger.error("Issue when cancelling Task Executor",{err:e})))}printStats(){const e=this.statsService.getAllCosts(),t=this.statsService.getAllCostsSummary(),n=this.statsService.getComputationTime(),r=new Set(t.map((e=>e["Provider Name"]))).size;this.logger.info("Computation finished in ".concat(n)),this.logger.info("Negotiation summary:",{agreements:t.length,providers:r}),t.forEach(((e,t)=>{this.logger.info("Agreement ".concat(t+1,":"),{agreement:e.Agreement,provider:e["Provider Name"],tasks:e["Task Computed"],cost:e.Cost,paymentStatus:e["Payment Status"]})})),this.logger.info("Cost summary:",{totalCost:e.total,totalPaid:e.paid})}setStartupTimeout(){this.startupTimeoutId=setTimeout((()=>{const e=this.marketService.getProposalsCount();if(0===e.confirmed){const t=0===e.initial&&0===e.confirmed?"Check your demand if it's not too restrictive or restart yagna.":e.initial===e.rejected?"All off proposals got rejected.":"Check your proposal filters if they are not too restrictive.",n="Could not start any work on Golem. Processed ".concat(e.initial," initial proposals from yagna, filters accepted ").concat(e.confirmed,". ").concat(t);this.options.exitOnNoProposals?this.handleCriticalError(new Mr(n)):console.error(n)}}),this.options.startupTimeout)}}var cP=Object.freeze({__proto__:null});const uP=function(){const[e,t]=(0,r.useState)("http://127.0.0.1:7465"),[n,i]=(0,r.useState)("public"),[o,a]=(0,r.useState)(null),[l,c]=(0,r.useState)(null),[u,d]=(0,r.useState)(null),[h,f]=(0,r.useState)(!1),[p,g]=(0,r.useState)("5d69025c5ca1d045831f8487786e7851fb4d5250a25d24c185ccc2fb"),[m,v]=(0,r.useState)([]),[y,b]=(0,r.useState)(!1);(0,r.useEffect)((()=>{document.title="Golem face blurrer"}),[]);const w=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";const n="[".concat((new Date).toISOString(),"] [").concat(t,"] ").concat(e);v((e=>[...e,n]))},S={error:e=>w(e,"error"),info:e=>w(e,"info"),warn:e=>w(e,"warn"),debug:e=>w(e,"debug"),child:()=>S};return(0,_e.jsxs)("div",{className:"App",children:[(0,_e.jsxs)("header",{className:"App-header",children:[(0,_e.jsx)("img",{src:"./golem.png",alt:"golem_logo"}),(0,_e.jsx)("h1",{children:"face blurrer \ud83e\udee0"}),(0,_e.jsx)("button",{onClick:()=>{b(!y)},className:"help-button",children:"?"})," "]}),y?(0,_e.jsx)("div",{className:"App-content2",children:(0,_e.jsx)(Tr,{children:"\n# Golem face blurrer\n\n## Why?\n\nAccording to ChatGPT:\n\n* \u2022 Privacy Protection in Public Recordings: For videos captured in public spaces where individuals have not consented to be filmed, blurring faces can protect their privacy when such videos are shared publicly or used in news broadcasts.\n\n* \u2022 Anonymity in Sensitive Content: In interviews or documentaries featuring sensitive topics, subjects may wish to remain anonymous. Blurring faces can help protect their identities.\n\n* \u2022 Security Footage Redaction: For security or surveillance footage that needs to be shared with law enforcement or the public, blurring faces can protect the privacy of innocent bystanders or victims.\n\n* \u2022 Data Protection Compliance: In regions with strict data protection laws (like GDPR in Europe), blurring faces in videos can help organizations comply with regulations concerning personal data and privacy.\n\n* \u2022 Educational Content: When educational videos include students or minors, blurring faces can protect minors' identities, especially when such content is shared online.\n\n* \u2022 Research and Development: Researchers studying public behavior or crowd dynamics might use videos with blurred faces to ensure participants' anonymity.\n\n* \u2022 Journalism and Reporting: Reporters might blur faces in videos to protect sources or individuals in sensitive or dangerous situations.\n\n* \u2022 Social Media Content Moderation: Platforms may use face-blurring tools to automatically redact faces in videos uploaded by users, particularly in contexts where consent to film and share is unclear.\n\n* \u2022 Protecting Witnesses or Whistleblowers: Videos featuring witnesses or whistleblowers can have faces blurred to maintain their safety and confidentiality.\n\n* \u2022 Blurring Faces in User-Generated Content: For apps and services that allow users to upload video content, providing an option to blur faces can help users maintain privacy and control over their digital footprint.\n\n* \u2022 Video Redaction for Legal Proceedings: In legal cases where video evidence is presented, faces may need to be blurred to protect the identities of certain individuals.\n\n* \u2022 Content Filtering for Children: Blurring faces in videos that might not be appropriate for children can be an additional layer of protection in content filtering systems.\n\n* \u2022 Ethical AI Training: For AI and machine learning projects that use video data, blurring faces can address ethical concerns related to privacy and consent in training datasets.\n\n* \u2022 Corporate Training Videos: In internal training videos where employees are featured, blurring faces can maintain privacy, especially if such content is at risk of being shared beyond the intended audience.\n\n## The script running on the provider\n\nThis is stored in blur.py on the image:\n\n~~~python\nimport sys\nimport face_recognition\nimport cv2\n\nif len(sys.argv) != 3:\n\tprint(\"Usage: blur.py <input file (mp4)> <destination file (mp4)>\")\n\tsys.exit(1)\n\nvideo_capture = cv2.VideoCapture(sys.argv[1])\n\nwidth  = int(video_capture.get(3))\nheight = int(video_capture.get(4))\n\nwriter = cv2.VideoWriter(sys.argv[2], cv2.VideoWriter_fourcc(*\"avc1\"), 30,(width, height))\n\nface_locations = []\n\nwhile True:\n  ret, frame = video_capture.read()\n\n  if ret == False:\n  \tbreak\n\n  face_locations = face_recognition.face_locations(frame)\n\n  for top, right, bottom, left in face_locations:\n    face_image = frame[top:bottom, left:right]\n\n    face_image = cv2.GaussianBlur(face_image, (99, 99), 30)\n\n    frame[top:bottom, left:right] = face_image\n\n  writer.write(frame)\n\nvideo_capture.release()\nwriter.release()\n~~~\n\n## The execution task\n\n~~~javascript\nconst result = await executor.run(async (ctx) => {\n\tawait ctx.uploadData(videoData, '/golem/work/video.mp4')\n\tconst process_file = await ctx.run(\n\t\t'python3 /golem/tools/blur.py /golem/work/video.mp4 /golem/work/result.mp4'\n\t)\n\tappendLog(JSON.stringify(process_file))\n\treturn await ctx.downloadData('/golem/work/result.mp4')\n})\n~~~\n\n## Image\n\nThe Dockerfile used for the image builds opencv and installs [face_recognition](https://github.com/ageitgey/face_recognition) library\n\n~~~\nFROM ubuntu:23.10\n\nARG OPENCV_VERSION=4.7.0\nARG DEBIAN_FRONTEND=noninteractive\n\nWORKDIR /opt/build\n\nRUN set -ex \\\n    && apt-get -qq update \\\n    && apt-get install -y --no-install-recommends \\\n        build-essential cmake \\\n        wget unzip \\\n        libhdf5-103-1 libhdf5-dev \\\n        libopenblas0 libopenblas-dev \\\n        libprotobuf32 libprotobuf-dev \\\n        libjpeg8 libjpeg8-dev \\\n        libpng16-16 libpng-dev \\\n        libtiff6 libtiff-dev \\\n        libwebp7 libwebp-dev \\\n        libopenjp2-7 libopenjp2-7-dev \\\n        libtbb12 libtbb-dev \\\n        libeigen3-dev \\\n        libavcodec-dev \\\n        libavformat-dev \\\n        libswscale-dev \\\n        tesseract-ocr tesseract-ocr-por libtesseract-dev \\\n        python3 python3-pip python3-numpy python3-dev\n\nRUN wget -q --no-check-certificate https://github.com/opencv/opencv/archive/${OPENCV_VERSION}.zip -O opencv.zip \\\n    && unzip -qq opencv.zip -d /opt && rm -rf opencv.zip\n\nRUN cmake \\\n        -D CMAKE_BUILD_TYPE=RELEASE \\\n        -D CMAKE_INSTALL_PREFIX=/usr/local \\\n        -D EIGEN_INCLUDE_PATH=/usr/include/eigen3 \\\n\t\t\t\t-D WITH_FFMPEG=ON \\\n        -D OPENCV_ENABLE_NONFREE=OFF \\\n        /opt/opencv-${OPENCV_VERSION} \\\n    && make -j$(nproc) \\\n    && make install \\\n    && rm -rf /opt/build/* \\\n    && rm -rf /opt/opencv-${OPENCV_VERSION} \\\n    && apt-get -qq remove -y \\\n        software-properties-common \\\n        build-essential cmake \\\n        libhdf5-dev \\\n        libprotobuf-dev \\\n        libjpeg9-dev \\\n        libpng-dev \\\n        libtiff-dev \\\n        libwebp-dev \\\n        libopenjp2-7-dev \\\n        libtbb-dev \\\n        libtesseract-dev \\\n        python3-dev \\\n    && apt-get -qq autoremove \\\n    && apt-get -qq clean\n\nRUN apt-get install build-essential python3-dev -y --no-install-recommends\nRUN pip install --break-system-packages face_recognition\n\nRUN mkdir -p /golem/tools\nADD blur.py /golem/tools\n\nVOLUME /golem/work\n\nWORKDIR /golem/work\n~~~\n\n## Known issues\n* \u2022 Sometimes it just doesn't work, and restarting yagna fixes it\n* \u2022 This tool only uses the testnet, and uploading videos larger than the ones included in this repository may not work out of the box that way\n\n## History\n\nIt originally did not use OpenCV, but instead just used ffmpeg to blur the images, this resulted in a pyton script that takes the output from the cli face_detection and generates a bash script with a lot of ffmpeg commands to blur all images. However, this did not work for unexpected reasons, it seemed like the task did not finish executing most of the time.\n\nThere was also another variation of the ffmpeg version that attempts to parallelise the blurring, but this required uploading the video to every provider, and that combined with the complexity to debug it outweighed the benefits.\n\n### Credit\nThis was made by [Cabbache](https://github.com/Cabbache) during the DEGEN.HOUSE [DegenHack 2024](https://www.degenhack.dev/)\n"})}):(0,_e.jsxs)("div",{className:"App-content",children:[(0,_e.jsxs)("div",{className:"Options",children:[(0,_e.jsx)("h2",{children:"Options"}),(0,_e.jsxs)("div",{className:"Option-item",children:[(0,_e.jsx)("label",{htmlFor:"YAGNA_API_BASEPATH",children:"Yagna API BaseUrl:"}),(0,_e.jsx)("input",{id:"YAGNA_API_BASEPATH",type:"text",value:e,onChange:e=>t(e.target.value)})]}),(0,_e.jsxs)("div",{className:"Option-item",children:[(0,_e.jsx)("label",{htmlFor:"SUBNET_TAG",children:"Subnet Tag:"}),(0,_e.jsx)("input",{id:"SUBNET_TAG",type:"text",value:n,onChange:e=>i(e.target.value)})]}),(0,_e.jsxs)("div",{className:"Option-item",children:[(0,_e.jsx)("label",{htmlFor:"IMAGE_HASH",children:"Package hash:"}),(0,_e.jsx)("input",{id:"IMAGE_HASH",type:"text",value:p,onChange:e=>g(e.target.value)})]}),(0,_e.jsxs)("div",{className:"Option-item",children:[(0,_e.jsx)("label",{htmlFor:"videoInput",children:"Select Video:"}),(0,_e.jsx)("input",{id:"videoInput",type:"file",accept:"video/*",onChange:async e=>{const t=e.target.files[0];if(t)try{const e=await(e=>(console.log(),new Promise(((t,n)=>{const r=new FileReader;r.readAsArrayBuffer(e),r.onload=()=>{t(new Uint8Array(r.result))},r.onerror=e=>{n(e)}}))))(t);a(e),c(URL.createObjectURL(t))}catch(n){S.error("Failed to load video:",n)}}})]}),(0,_e.jsx)("button",{onClick:async()=>{let t=null;try{f(!0),t=await lP.create({package:p,yagnaOptions:{apiKey:"try_golem",basePath:e},subnetTag:n,logger:S});const r=await t.run((async e=>{await e.uploadData(o,"/golem/work/video.mp4");const t=await e.run("python3 /golem/tools/blur.py /golem/work/video.mp4 /golem/work/result.mp4");return w(JSON.stringify(t)),await e.downloadData("/golem/work/result.mp4")}));let i=URL.createObjectURL(new Blob([r.data],{type:"video/mp4"}));d(i)}catch(r){d(null),S.error("Computation failed:",r)}finally{f(!1),t&&await t.shutdown()}},disabled:!o||h,style:{backgroundColor:o&&!h?"green":"grey"},children:"Blur faces"})]}),(0,_e.jsxs)("div",{className:"Actions",children:[(0,_e.jsx)("h2",{children:"Original video"}),l&&(0,_e.jsxs)("video",{width:"320",height:"240",controls:!0,children:[(0,_e.jsx)("source",{src:l,type:"video/mp4"}),"Your browser does not support the video tag."]},l)]}),(0,_e.jsxs)("div",{className:"Results",children:[(0,_e.jsx)("h2",{children:"Faces blurred"}),h&&(0,_e.jsx)(s(),{}),!h&&u&&(0,_e.jsxs)("video",{width:"320",height:"240",controls:!0,children:[(0,_e.jsx)("source",{src:u,type:"video/mp4"}),"Your browser does not support the video tag."]},u)]}),(0,_e.jsxs)("div",{className:"Logs",children:[(0,_e.jsx)("h2",{children:"Logs"}),(0,_e.jsx)("ul",{children:m.map(((e,t)=>(0,_e.jsx)("li",{children:e},t)))})]})]})]})},dP=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then((t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:o,getTTFB:s}=t;n(e),r(e),i(e),o(e),s(e)}))};i.createRoot(document.getElementById("root")).render((0,_e.jsx)(r.StrictMode,{children:(0,_e.jsx)(uP,{})})),dP()})()})();
//# sourceMappingURL=main.81f6b93b.js.map